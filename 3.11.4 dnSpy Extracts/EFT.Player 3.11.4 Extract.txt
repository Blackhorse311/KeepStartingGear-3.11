using System;
using System.Collections;
using System.Collections.Generic;
using System.Diagnostics;
using System.Linq;
using System.Runtime.CompilerServices;
using System.Threading;
using System.Threading.Tasks;
using AnimationEventSystem;
using AnimationSystem.RootMotionTable;
using Audio.AmbientSubsystem;
using Audio.SpatialSystem;
using Bsg.GameSettings;
using Comfort.Common;
using CommonAssets.Scripts;
using CommonAssets.Scripts.Audio;
using Dissonance;
using Diz.Binding;
using Diz.LanguageExtensions;
using EFT.Animations;
using EFT.AssetsManager;
using EFT.Ballistics;
using EFT.CameraControl;
using EFT.Character.Data;
using EFT.ClientItems.ClientSpecItems;
using EFT.Communications;
using EFT.EnvironmentEffect;
using EFT.Game.Spawning;
using EFT.GameRandoms;
using EFT.HealthSystem;
using EFT.Interactive;
using EFT.Interactive.SecretExfiltrations;
using EFT.InventoryLogic;
using EFT.InventoryLogic.Operations;
using EFT.MovingPlatforms;
using EFT.PrefabSettings;
using EFT.SynchronizableObjects;
using EFT.UI;
using EFT.Vaulting;
using EFT.Vehicle;
using EFT.WeaponMounting;
using JetBrains.Annotations;
using JsonType;
using NLog;
using RootMotion.FinalIK;
using Systems.Effects;
using UnityEngine;
using UnityEngine.Audio;

namespace EFT
{
	// Token: 0x02001674 RID: 5748
	public class Player : MonoBehaviour, IPlayer, \uE7A0, \uE79F, \uE7A1, \uE7AA, MovingPlatform.\uE000, IDissonancePlayer
	{
		// Token: 0x06008BFA RID: 35834 RVA: 0x002D4438 File Offset: 0x002D2638
		public static \uF192<ItemAddress> ToItemAddress(\uE7D0 descriptor)
		{
			return Singleton<GameWorld>.Instance.ToItemAddress(descriptor);
		}

		// Token: 0x06008BFB RID: 35835 RVA: 0x002D4448 File Offset: 0x002D2648
		public virtual \uF192<Item> FindItemById(MongoID itemId, bool checkDistance = true, bool checkOwnership = true)
		{
			\uF192<ValueTuple<Item, GameWorld.\uE000>> uF = this.GameWorld.FindItemWithWorldData(itemId);
			if (uF.Failed)
			{
				return uF.Error;
			}
			return uF.Value.Item1;
		}

		// Token: 0x14000173 RID: 371
		// (add) Token: 0x06008BFC RID: 35836 RVA: 0x002D4498 File Offset: 0x002D2698
		// (remove) Token: 0x06008BFD RID: 35837 RVA: 0x002D44DC File Offset: 0x002D26DC
		public event Action<float, float, int> OnSpeedChangedEvent;

		// Token: 0x14000174 RID: 372
		// (add) Token: 0x06008BFE RID: 35838 RVA: 0x002D4520 File Offset: 0x002D2720
		// (remove) Token: 0x06008BFF RID: 35839 RVA: 0x002D4564 File Offset: 0x002D2764
		public event Action<SightComponent> OnSightChangedEvent;

		// Token: 0x14000175 RID: 373
		// (add) Token: 0x06008C00 RID: 35840 RVA: 0x002D45A8 File Offset: 0x002D27A8
		// (remove) Token: 0x06008C01 RID: 35841 RVA: 0x002D45EC File Offset: 0x002D27EC
		public event Action<bool> OnTacticalInteractionChanged;

		// Token: 0x14000176 RID: 374
		// (add) Token: 0x06008C02 RID: 35842 RVA: 0x002D4630 File Offset: 0x002D2830
		// (remove) Token: 0x06008C03 RID: 35843 RVA: 0x002D4674 File Offset: 0x002D2874
		public event Action<SightComponent, ESmoothScopeState> OnSmoothSightChange;

		// Token: 0x170013DB RID: 5083
		// (get) Token: 0x06008C04 RID: 35844 RVA: 0x002D46B8 File Offset: 0x002D28B8
		public IAnimator BodyAnimatorCommon
		{
			get
			{
				return this.GetBodyAnimatorCommon();
			}
		}

		// Token: 0x06008C05 RID: 35845 RVA: 0x002D46C0 File Offset: 0x002D28C0
		public IAnimator GetBodyAnimatorCommon()
		{
			if (\uE2F9.Config.UseSpiritPlayer)
			{
				if (this.Spirit.IsActive)
				{
					return this.Spirit.BodyAnimatorWrapper;
				}
			}
			return this._animators[0];
		}

		// Token: 0x170013DC RID: 5084
		// (get) Token: 0x06008C06 RID: 35846 RVA: 0x002D46F8 File Offset: 0x002D28F8
		public IAnimator ArmsAnimatorCommon
		{
			get
			{
				return this.GetArmsAnimatorCommon();
			}
		}

		// Token: 0x170013DD RID: 5085
		// (get) Token: 0x06008C07 RID: 35847 RVA: 0x002D4700 File Offset: 0x002D2900
		public IAnimator UnderbarrelWeaponArmsAnimator
		{
			get
			{
				return this._underbarrelFastAnimator;
			}
		}

		// Token: 0x06008C08 RID: 35848 RVA: 0x002D4708 File Offset: 0x002D2908
		public IAnimator GetArmsAnimatorCommon()
		{
			if (\uE2F9.Config.UseSpiritPlayer)
			{
				if (this.Spirit.IsActive)
				{
					return this.Spirit.ArmsAnimator;
				}
			}
			return this._animators[1];
		}

		// Token: 0x06008C09 RID: 35849 RVA: 0x002D4740 File Offset: 0x002D2940
		public void SetArmsAnimatorCommon(IAnimator animator)
		{
			this._animators[1] = animator;
		}

		// Token: 0x06008C0A RID: 35850 RVA: 0x002D474C File Offset: 0x002D294C
		public RuntimeAnimatorController GetArmsAnimatorControllerCommon()
		{
			IAnimator armsAnimatorCommon = this.GetArmsAnimatorCommon();
			if (armsAnimatorCommon.runtimeAnimatorController is AnimatorOverrideController)
			{
				return ((AnimatorOverrideController)armsAnimatorCommon.runtimeAnimatorController).runtimeAnimatorController;
			}
			return armsAnimatorCommon.runtimeAnimatorController;
		}

		// Token: 0x170013DE RID: 5086
		// (get) Token: 0x06008C0B RID: 35851 RVA: 0x002D478C File Offset: 0x002D298C
		public ICharacterController CharacterController
		{
			get
			{
				return this.GetCharacterControllerCommon();
			}
		}

		// Token: 0x06008C0C RID: 35852 RVA: 0x002D4794 File Offset: 0x002D2994
		public ICharacterController GetCharacterControllerCommon()
		{
			if (\uE2F9.Config.UseSpiritPlayer)
			{
				if (this.Spirit.IsActive)
				{
					return this.Spirit.CharacterController;
				}
			}
			return this._characterController;
		}

		// Token: 0x06008C0D RID: 35853 RVA: 0x002D47CC File Offset: 0x002D29CC
		public TriggerColliderSearcher GetTriggerColliderSearcher()
		{
			if (\uE2F9.Config.UseSpiritPlayer)
			{
				if (this.Spirit.IsActive)
				{
					return this.Spirit.TriggerColliderSearcher;
				}
			}
			return this._triggerColliderSearcher;
		}

		// Token: 0x170013DF RID: 5087
		// (get) Token: 0x06008C0E RID: 35854 RVA: 0x002D4804 File Offset: 0x002D2A04
		// (set) Token: 0x06008C0F RID: 35855 RVA: 0x002D480C File Offset: 0x002D2A0C
		public MovementContext MovementContext { get; protected set; }

		// Token: 0x170013E0 RID: 5088
		// (get) Token: 0x06008C10 RID: 35856 RVA: 0x002D4818 File Offset: 0x002D2A18
		public bool IsResettingLook
		{
			get
			{
				return this._isResettingLook;
			}
		}

		// Token: 0x170013E1 RID: 5089
		// (get) Token: 0x06008C11 RID: 35857 RVA: 0x002D4820 File Offset: 0x002D2A20
		public bool IsLooking
		{
			get
			{
				return this._isLooking;
			}
		}

		// Token: 0x170013E2 RID: 5090
		// (get) Token: 0x06008C12 RID: 35858 RVA: 0x002D4828 File Offset: 0x002D2A28
		public bool MouseLookControl
		{
			get
			{
				return this._mouseLookControl;
			}
		}

		// Token: 0x170013E3 RID: 5091
		// (get) Token: 0x06008C13 RID: 35859 RVA: 0x002D4830 File Offset: 0x002D2A30
		public EPlayerPose Pose
		{
			get
			{
				if (this.IsInPronePose)
				{
					return EPlayerPose.Prone;
				}
				if (this.MovementContext.SmoothedPoseLevel >= 0.11f)
				{
					return EPlayerPose.Stand;
				}
				return EPlayerPose.Duck;
			}
		}

		// Token: 0x170013E4 RID: 5092
		// (get) Token: 0x06008C14 RID: 35860 RVA: 0x002D485C File Offset: 0x002D2A5C
		public float PoseLevel
		{
			get
			{
				return this.MovementContext.PoseLevel;
			}
		}

		// Token: 0x170013E5 RID: 5093
		// (get) Token: 0x06008C15 RID: 35861 RVA: 0x002D486C File Offset: 0x002D2A6C
		public float Speed
		{
			get
			{
				return this.MovementContext.CharacterMovementSpeed;
			}
		}

		// Token: 0x170013E6 RID: 5094
		// (get) Token: 0x06008C16 RID: 35862 RVA: 0x002D487C File Offset: 0x002D2A7C
		// (set) Token: 0x06008C17 RID: 35863 RVA: 0x002D488C File Offset: 0x002D2A8C
		public Vector2 Rotation
		{
			get
			{
				return this.MovementContext.Rotation;
			}
			protected set
			{
				this.MovementContext.Rotation = value;
			}
		}

		// Token: 0x170013E7 RID: 5095
		// (get) Token: 0x06008C18 RID: 35864 RVA: 0x002D489C File Offset: 0x002D2A9C
		public float Yaw
		{
			get
			{
				return this.MovementContext.Yaw;
			}
		}

		// Token: 0x170013E8 RID: 5096
		// (get) Token: 0x06008C19 RID: 35865 RVA: 0x002D48AC File Offset: 0x002D2AAC
		public bool IsInPronePose
		{
			get
			{
				return this.MovementContext.IsInPronePose;
			}
		}

		// Token: 0x170013E9 RID: 5097
		// (get) Token: 0x06008C1A RID: 35866 RVA: 0x002D48BC File Offset: 0x002D2ABC
		public float Pitch
		{
			get
			{
				return this.MovementContext.Pitch;
			}
		}

		// Token: 0x170013EA RID: 5098
		// (get) Token: 0x06008C1B RID: 35867 RVA: 0x002D48CC File Offset: 0x002D2ACC
		public Vector3 Velocity
		{
			get
			{
				return this.MovementContext.Velocity;
			}
		}

		// Token: 0x170013EB RID: 5099
		// (get) Token: 0x06008C1C RID: 35868 RVA: 0x002D48DC File Offset: 0x002D2ADC
		public Vector3 Motion
		{
			get
			{
				return this.MovementContext.InputMotion;
			}
		}

		// Token: 0x06008C1D RID: 35869 RVA: 0x002D48EC File Offset: 0x002D2AEC
		public void AddMouseSensitivityModifier(Player.EMouseSensitivityModifier type, float value)
		{
			this._mouseSensitivityModifiers[type] = value;
			this.\uE000();
		}

		// Token: 0x06008C1E RID: 35870 RVA: 0x002D4904 File Offset: 0x002D2B04
		public void RemoveMouseSensitivityModifier(Player.EMouseSensitivityModifier type)
		{
			this._mouseSensitivityModifiers.Remove(type);
			this.\uE000();
		}

		// Token: 0x06008C1F RID: 35871 RVA: 0x002D491C File Offset: 0x002D2B1C
		private void \uE000()
		{
			this._mouseSensitivityModifier = 0f;
			foreach (float num in this._mouseSensitivityModifiers.Values)
			{
				this._mouseSensitivityModifier += num;
			}
		}

		// Token: 0x06008C20 RID: 35872 RVA: 0x002D4988 File Offset: 0x002D2B88
		public float GetRotationMultiplier()
		{
			if (!(this.HandsController != null) || !this.HandsController.IsAiming)
			{
				return this.GetSensitivity() * (1f + this._mouseSensitivityModifier);
			}
			if (this.HandsController.AimingSensitivity < 1E-45f)
			{
				return this.GetAimingSensitivity();
			}
			return this.HandsController.AimingSensitivity;
		}

		// Token: 0x06008C21 RID: 35873 RVA: 0x002D49FC File Offset: 0x002D2BFC
		public float GetCharacterSpeedMultiplier()
		{
			return 1f;
		}

		// Token: 0x170013EC RID: 5100
		// (get) Token: 0x06008C22 RID: 35874 RVA: 0x002D4A04 File Offset: 0x002D2C04
		// (set) Token: 0x06008C23 RID: 35875 RVA: 0x002D4A0C File Offset: 0x002D2C0C
		public Vector2 RotationPitchLimit
		{
			get
			{
				return this._rotationPitchLimit;
			}
			set
			{
				this._targetRotationPitch = value;
			}
		}

		// Token: 0x170013ED RID: 5101
		// (get) Token: 0x06008C24 RID: 35876 RVA: 0x002D4A18 File Offset: 0x002D2C18
		// (set) Token: 0x06008C25 RID: 35877 RVA: 0x002D4A20 File Offset: 0x002D2C20
		public Vector2 InputDirection { get; set; }

		// Token: 0x170013EE RID: 5102
		// (get) Token: 0x06008C26 RID: 35878 RVA: 0x002D4A2C File Offset: 0x002D2C2C
		public BaseMovementState CurrentState
		{
			get
			{
				return this.MovementContext.CurrentState;
			}
		}

		// Token: 0x170013EF RID: 5103
		// (get) Token: 0x06008C27 RID: 35879 RVA: 0x002D4A3C File Offset: 0x002D2C3C
		public MovementState CurrentManagedState
		{
			get
			{
				return (this.MovementContext.OverridenControlsState ?? this.MovementContext.CurrentState) as MovementState;
			}
		}

		// Token: 0x170013F0 RID: 5104
		// (get) Token: 0x06008C28 RID: 35880 RVA: 0x002D4A60 File Offset: 0x002D2C60
		public int CurrentAnimatorStateIndex
		{
			get
			{
				return this.MovementContext.CurrentAnimatorStateIndex;
			}
		}

		// Token: 0x170013F1 RID: 5105
		// (get) Token: 0x06008C29 RID: 35881 RVA: 0x002D4A70 File Offset: 0x002D2C70
		// (set) Token: 0x06008C2A RID: 35882 RVA: 0x002D4A84 File Offset: 0x002D2C84
		public Vector3 Position
		{
			get
			{
				return this.PlayerBones.BodyTransform.position;
			}
			private set
			{
				this.PlayerBones.BodyTransform.position = value;
			}
		}

		// Token: 0x06008C2B RID: 35883 RVA: 0x002D4A98 File Offset: 0x002D2C98
		private void \uE001()
		{
			this.CreateMovementContext();
			this.PoseMemo = this.MovementContext.PoseLevel;
			this._speedMemo = this.MovementContext.CharacterMovementSpeed;
		}

		// Token: 0x06008C2C RID: 35884 RVA: 0x002D4AC8 File Offset: 0x002D2CC8
		protected virtual void CreateMovementContext()
		{
			LayerMask movement_MASK = EFTHardSettings.Instance.MOVEMENT_MASK;
			this.MovementContext = MovementContext.Create(this, new Func<IAnimator>(this.GetBodyAnimatorCommon), new Func<ICharacterController>(this.GetCharacterControllerCommon), movement_MASK);
		}

		// Token: 0x170013F2 RID: 5106
		// (get) Token: 0x06008C2D RID: 35885 RVA: 0x002D4B08 File Offset: 0x002D2D08
		public bool IsForwardInputDirection
		{
			get
			{
				return this.InputDirection.y > 0f;
			}
		}

		// Token: 0x170013F3 RID: 5107
		// (get) Token: 0x06008C2E RID: 35886 RVA: 0x002D4B1C File Offset: 0x002D2D1C
		public bool IsSprintEnabled
		{
			get
			{
				return this.MovementContext.IsSprintEnabled;
			}
		}

		// Token: 0x06008C2F RID: 35887 RVA: 0x002D4B2C File Offset: 0x002D2D2C
		private bool \uE002(float dir)
		{
			return (this.MovementContext.Tilt * dir).Positive();
		}

		// Token: 0x06008C30 RID: 35888 RVA: 0x002D4B40 File Offset: 0x002D2D40
		internal void \uE003(float dir)
		{
			if (this._lastSlowLean)
			{
				return;
			}
			this.CurrentLeanType = Player.LeanType.NormalLean;
			this.MovementContext.SetBlindFire(0f);
			dir = (this.\uE002(dir) ? 0f : (dir * 5f));
			this.CurrentManagedState.SetTilt(dir);
		}

		// Token: 0x06008C31 RID: 35889 RVA: 0x002D4BA4 File Offset: 0x002D2DA4
		internal void \uE004(float fromDir)
		{
			if (this._lastSlowLean)
			{
				return;
			}
			if (this.\uE002(fromDir))
			{
				this.CurrentManagedState.SetTilt(0f);
			}
		}

		// Token: 0x06008C32 RID: 35890 RVA: 0x002D4BC8 File Offset: 0x002D2DC8
		public void SlowLean(float dir)
		{
			this._lastSlowLean = false;
			if (this.MovementContext.TiltDiff >= 1f)
			{
				return;
			}
			if (Mathf.Abs(dir) <= 0f)
			{
				return;
			}
			this.CurrentLeanType = Player.LeanType.SlowLean;
			dir *= 0.1f;
			this.CurrentManagedState.SetTilt(this.MovementContext.Tilt + dir);
			this._lastSlowLean = true;
		}

		// Token: 0x06008C33 RID: 35891 RVA: 0x002D4C3C File Offset: 0x002D2E3C
		public void ToggleBlindFire(float blindFireValue)
		{
			if (this.MovementContext.LeftStanceEnabled && blindFireValue != 0f)
			{
				return;
			}
			MovementState currentManagedState = this.CurrentManagedState;
			if (currentManagedState == null)
			{
				return;
			}
			currentManagedState.BlindFire(Math.Sign(blindFireValue));
		}

		// Token: 0x06008C34 RID: 35892 RVA: 0x002D4C74 File Offset: 0x002D2E74
		public void StopBlindFire()
		{
			MovementState currentManagedState = this.CurrentManagedState;
			if (currentManagedState == null)
			{
				return;
			}
			currentManagedState.BlindFire(0);
		}

		// Token: 0x06008C35 RID: 35893 RVA: 0x002D4C88 File Offset: 0x002D2E88
		public void ToggleStep(int direction)
		{
			if (this.MovementContext.Step != direction)
			{
				this.CurrentManagedState.SetStep(direction);
				return;
			}
			this.ReturnFromStep(direction);
		}

		// Token: 0x06008C36 RID: 35894 RVA: 0x002D4CAC File Offset: 0x002D2EAC
		public void ReturnFromStep(int direction)
		{
			if (this.MovementContext.Step == direction)
			{
				this.CurrentManagedState.SetStep(0);
			}
		}

		// Token: 0x06008C37 RID: 35895 RVA: 0x002D4CC8 File Offset: 0x002D2EC8
		private void \uE005(float fallHeight, float jumpHeight)
		{
			this.LandingAdjustments(fallHeight);
			this.PlayGroundedSound(fallHeight, jumpHeight);
		}

		// Token: 0x170013F4 RID: 5108
		// (get) Token: 0x06008C38 RID: 35896 RVA: 0x002D4CDC File Offset: 0x002D2EDC
		private EFTHardSettings \uE000
		{
			get
			{
				return EFTHardSettings.Instance;
			}
		}

		// Token: 0x06008C39 RID: 35897 RVA: 0x002D4CE4 File Offset: 0x002D2EE4
		protected virtual void LandingAdjustments(float d)
		{
			if (d < Singleton<\uE714>.Instance.Inertia.FallThreshold)
			{
				return;
			}
			float num = EFTHardSettings.Instance.SpeedLimitDuration.Evaluate(d);
			if (num < 1E-45f)
			{
				return;
			}
			float num2 = this.\uE000.SpeedLimitAfterFall.Evaluate(d);
			if (num2 >= 1f)
			{
				return;
			}
			this.MovementContext.ChangeSpeedLimit(num2, Player.ESpeedLimit.Fall, num);
		}

		// Token: 0x06008C3A RID: 35898 RVA: 0x002D4D50 File Offset: 0x002D2F50
		public virtual void Move(Vector2 direction)
		{
			this.CurrentManagedState.Move(direction);
			if (direction.sqrMagnitude >= 1E-45f)
			{
				this._lastMovement = Time.time;
			}
			this.InputDirection = direction;
		}

		// Token: 0x06008C3B RID: 35899 RVA: 0x002D4D84 File Offset: 0x002D2F84
		public void ChangePose(float poseDelta)
		{
			this.CurrentManagedState.ChangePose(poseDelta);
			this.PoseMemo = this.PoseLevel;
			if (poseDelta != 0f)
			{
				this._lastMovement = Time.time;
			}
		}

		// Token: 0x06008C3C RID: 35900 RVA: 0x002D4DBC File Offset: 0x002D2FBC
		internal void \uE006()
		{
			if (this.IsInPronePose || this.PoseLevel >= 0.5f)
			{
				return;
			}
			float num = (this.PoseMemo < 0.5f) ? 1f : this.PoseMemo;
			this.CurrentManagedState.ChangePose(num - this.PoseLevel);
		}

		// Token: 0x06008C3D RID: 35901 RVA: 0x002D4E14 File Offset: 0x002D3014
		internal void \uE007()
		{
			float num = (Math.Abs(this.PoseMemo - this.PoseLevel) < 1E-06f) ? ((this.PoseLevel >= 0.5f) ? 0f : 1f) : this.PoseMemo;
			if (this.IsInPronePose)
			{
				num = this.PoseLevel;
			}
			this.CurrentManagedState.ChangePose(num - this.PoseLevel);
		}

		// Token: 0x06008C3E RID: 35902 RVA: 0x002D4E8C File Offset: 0x002D308C
		public void ChangeSpeed(float speedDelta)
		{
			this.CurrentManagedState.ChangeSpeed(speedDelta);
		}

		// Token: 0x06008C3F RID: 35903 RVA: 0x002D4E9C File Offset: 0x002D309C
		public void RaiseChangeSpeedEvent()
		{
			Action<float, float, int> onSpeedChangedEvent = this.OnSpeedChangedEvent;
			if (onSpeedChangedEvent == null)
			{
				return;
			}
			onSpeedChangedEvent(this.Physical.Sprinting ? this.MovementContext.CharacterMovementSpeed : this.MovementContext.ClampedSpeed, this.MovementContext.MaxSpeed, this.MovementContext.CovertNoiseLevel);
		}

		// Token: 0x06008C40 RID: 35904 RVA: 0x002D4EF4 File Offset: 0x002D30F4
		public void RaiseSightChangedEvent(SightComponent sightComp)
		{
			Action<SightComponent> onSightChangedEvent = this.OnSightChangedEvent;
			if (onSightChangedEvent == null)
			{
				return;
			}
			onSightChangedEvent(sightComp);
		}

		// Token: 0x06008C41 RID: 35905 RVA: 0x002D4F08 File Offset: 0x002D3108
		public void RaiseTacticalInteractionChangedEvent(bool isPress)
		{
			Action<bool> onTacticalInteractionChanged = this.OnTacticalInteractionChanged;
			if (onTacticalInteractionChanged == null)
			{
				return;
			}
			onTacticalInteractionChanged(isPress);
		}

		// Token: 0x06008C42 RID: 35906 RVA: 0x002D4F1C File Offset: 0x002D311C
		public void RaiseSmoothSightChangeEvent(SightComponent sightComp, ESmoothScopeState state)
		{
			Action<SightComponent, ESmoothScopeState> onSmoothSightChange = this.OnSmoothSightChange;
			if (onSmoothSightChange == null)
			{
				return;
			}
			onSmoothSightChange(sightComp, state);
		}

		// Token: 0x06008C43 RID: 35907 RVA: 0x002D4F30 File Offset: 0x002D3130
		public virtual void AddStateSpeedLimit(float speedDelta, Player.ESpeedLimit cause)
		{
			MovementContext movementContext = this.MovementContext;
			if (movementContext == null)
			{
				return;
			}
			movementContext.AddStateSpeedLimit(speedDelta, cause);
		}

		// Token: 0x06008C44 RID: 35908 RVA: 0x002D4F44 File Offset: 0x002D3144
		public virtual void UpdateSpeedLimit(float speedDelta, Player.ESpeedLimit cause)
		{
			MovementContext movementContext = this.MovementContext;
			if (movementContext == null)
			{
				return;
			}
			movementContext.ChangeSpeedLimit(speedDelta, cause);
		}

		// Token: 0x06008C45 RID: 35909 RVA: 0x002D4F58 File Offset: 0x002D3158
		public virtual void UpdateSpeedLimit(float speedDelta, Player.ESpeedLimit cause, float duration)
		{
			MovementContext movementContext = this.MovementContext;
			if (movementContext == null)
			{
				return;
			}
			movementContext.ChangeSpeedLimit(speedDelta, cause, duration);
		}

		// Token: 0x06008C46 RID: 35910 RVA: 0x002D4F70 File Offset: 0x002D3170
		public virtual void RemoveStateSpeedLimit(Player.ESpeedLimit cause)
		{
			this.MovementContext.RemoveStateSpeedLimit(cause);
		}

		// Token: 0x06008C47 RID: 35911 RVA: 0x002D4F80 File Offset: 0x002D3180
		internal void \uE008()
		{
			if (!this.MovementContext.ClampedSpeed.Positive())
			{
				this.ChangeSpeed(this._speedMemo - this.MovementContext.CharacterMovementSpeed);
			}
		}

		// Token: 0x06008C48 RID: 35912 RVA: 0x002D4FAC File Offset: 0x002D31AC
		internal void \uE009()
		{
			if (this.MovementContext.ClampedSpeed.Positive())
			{
				this._speedMemo = this.MovementContext.CharacterMovementSpeed;
				this.ChangeSpeed(-this._speedMemo);
				return;
			}
			this.\uE008();
		}

		// Token: 0x06008C49 RID: 35913 RVA: 0x002D4FEC File Offset: 0x002D31EC
		public virtual void Rotate(Vector2 deltaRotation, bool ignoreClamp = false)
		{
			if (!deltaRotation.IsAnyComponentInfinity())
			{
				if (!deltaRotation.IsAnyComponentNaN())
				{
					this.CurrentManagedState.Rotate(deltaRotation, ignoreClamp);
					if (deltaRotation.sqrMagnitude >= 1E-45f)
					{
						this._lastMovement = Time.time;
					}
					return;
				}
			}
			Debug.LogErrorFormat(\uF1F8.\uE000(138145), new object[]
			{
				deltaRotation
			});
		}

		// Token: 0x170013F5 RID: 5109
		// (get) Token: 0x06008C4A RID: 35914 RVA: 0x002D505C File Offset: 0x002D325C
		public float MovementIdlingTime
		{
			get
			{
				return Time.time - this._lastMovement;
			}
		}

		// Token: 0x06008C4B RID: 35915 RVA: 0x002D506C File Offset: 0x002D326C
		public virtual void Look(float deltaLookY, float deltaLookX, bool withReturn = true)
		{
			bool flag = this.HandsController != null && this.HandsController.IsAiming && !this.IsAI;
			EFTHardSettings instance = EFTHardSettings.Instance;
			Vector2 vector = instance.MOUSE_LOOK_HORIZONTAL_LIMIT;
			Vector2 mouse_LOOK_VERTICAL_LIMIT = instance.MOUSE_LOOK_VERTICAL_LIMIT;
			if (flag)
			{
				if (this._cachedMouseLookControl != this._mouseLookControl)
				{
					this._cachedMouseLookControl = this._mouseLookControl;
					int value = Singleton<\uE9A4>.Instance.Game.Settings.FieldOfView.Value;
					float x = (!this._mouseLookControl) ? (this.ProceduralWeaponAnimation.CurrentScope.IsOptic ? 35f : ((float)value - 15f)) : ((float)value);
					\uF01E.Instance.SetFov(x, 1f, true);
				}
				vector *= instance.MOUSE_LOOK_LIMIT_IN_AIMING_COEF;
			}
			Vector3 eulerAngles = this.ProceduralWeaponAnimation.HandsContainer.CameraTransform.eulerAngles;
			if (eulerAngles.x >= 50f && eulerAngles.x <= 90f && this.MovementContext.IsSprintEnabled)
			{
				mouse_LOOK_VERTICAL_LIMIT.y = 0f;
			}
			this._horizontal = Mathf.Clamp(this._horizontal - deltaLookY, vector.x, vector.y);
			this._vertical = Mathf.Clamp(this._vertical + deltaLookX, mouse_LOOK_VERTICAL_LIMIT.x, mouse_LOOK_VERTICAL_LIMIT.y);
			float x2 = (this._vertical > 0f) ? (this._vertical * (1f - this._horizontal / vector.y * (this._horizontal / vector.y))) : this._vertical;
			if (this._setResetedLookNextFrame)
			{
				this._isResettingLook = false;
				this._setResetedLookNextFrame = false;
			}
			if (this._resetLook)
			{
				this._mouseLookControl = false;
				this._resetLook = false;
				this._isResettingLook = true;
				deltaLookY = 0f;
				deltaLookX = 0f;
			}
			if (Math.Abs(deltaLookY) >= 1E-45f && Math.Abs(deltaLookX) >= 1E-45f)
			{
				this._mouseLookControl = true;
			}
			if (!this._mouseLookControl && withReturn)
			{
				if (Mathf.Abs(this._horizontal) > 0.01f)
				{
					this._horizontal = Mathf.Lerp(this._horizontal, 0f, Time.deltaTime * 15f);
				}
				else
				{
					this._horizontal = 0f;
				}
				if (Mathf.Abs(this._vertical) > 0.01f)
				{
					this._vertical = Mathf.Lerp(this._vertical, 0f, Time.deltaTime * 15f);
				}
				else
				{
					this._vertical = 0f;
				}
			}
			if (!this._isResettingLook && this._horizontal != 0f && this._vertical != 0f)
			{
				this._isLooking = true;
			}
			else
			{
				this._isLooking = false;
			}
			if (this._horizontal == 0f)
			{
				if (this._vertical == 0f)
				{
					this._setResetedLookNextFrame = true;
				}
			}
			this.HeadRotation = new Vector3(x2, this._horizontal, 0f);
			this.ProceduralWeaponAnimation.SetHeadRotation(this.HeadRotation);
		}

		// Token: 0x06008C4C RID: 35916 RVA: 0x002D53A4 File Offset: 0x002D35A4
		public void ResetLookDirection()
		{
			this._resetLook = true;
		}

		// Token: 0x170013F6 RID: 5110
		// (get) Token: 0x06008C4D RID: 35917 RVA: 0x002D53B0 File Offset: 0x002D35B0
		public bool IsVaultingPressed
		{
			get
			{
				return this._isVaultingPressed;
			}
		}

		// Token: 0x06008C4E RID: 35918 RVA: 0x002D53B8 File Offset: 0x002D35B8
		public void Jump()
		{
			if (this._vaultingTiming > Singleton<\uE714>.Instance.VaultingSettings.VaultingInputTime)
			{
				return;
			}
			if (!this.MovementContext.PlayerAnimatorGetIsVaulting())
			{
				this.CurrentManagedState.Jump();
			}
		}

		// Token: 0x06008C4F RID: 35919 RVA: 0x002D53EC File Offset: 0x002D35EC
		public void Vaulting()
		{
			if (!this._isVaultingPressed)
			{
				this.\uE00A();
				return;
			}
			this.\uE00B();
		}

		// Token: 0x06008C50 RID: 35920 RVA: 0x002D5404 File Offset: 0x002D3604
		private void \uE00A()
		{
			this.OnStartInventoryOpen += this.\uE00B;
			this.UpdateEvent += this.\uE00C;
			this._isVaultingPressed = true;
		}

		// Token: 0x06008C51 RID: 35921 RVA: 0x002D5434 File Offset: 0x002D3634
		private void \uE00B()
		{
			this.OnStartInventoryOpen -= this.\uE00B;
			this.UpdateEvent -= this.\uE00C;
			this._vaultingTiming = 0f;
			this._isVaultingPressed = false;
		}

		// Token: 0x06008C52 RID: 35922 RVA: 0x002D546C File Offset: 0x002D366C
		private void \uE00C()
		{
			this.CurrentManagedState.Vaulting();
			this._vaultingTiming += Time.deltaTime;
		}

		// Token: 0x06008C53 RID: 35923 RVA: 0x002D548C File Offset: 0x002D368C
		public void EnableSprint(bool enable)
		{
			if (this.CurrentManagedState == null)
			{
				return;
			}
			this.CurrentManagedState.EnableSprint(enable, false);
		}

		// Token: 0x06008C54 RID: 35924 RVA: 0x002D54A4 File Offset: 0x002D36A4
		public void ToggleSprint()
		{
			bool enable = !this.Physical.Sprinting;
			this.CurrentManagedState.EnableSprint(enable, true);
		}

		// Token: 0x06008C55 RID: 35925 RVA: 0x002D54D0 File Offset: 0x002D36D0
		public void ToggleHoldingBreath()
		{
			this.CurrentManagedState.EnableBreath(!this.Physical.HoldingBreath);
		}

		// Token: 0x06008C56 RID: 35926 RVA: 0x002D54EC File Offset: 0x002D36EC
		public void StopHoldingBreath()
		{
			if (this.Physical.HoldingBreath)
			{
				this.CurrentManagedState.EnableBreath(false);
			}
		}

		// Token: 0x06008C57 RID: 35927 RVA: 0x002D5508 File Offset: 0x002D3708
		private void \uE00D(float deltaTime)
		{
			this.MovementContext.ManualUpdate(deltaTime);
		}

		// Token: 0x06008C58 RID: 35928 RVA: 0x002D5518 File Offset: 0x002D3718
		public void HeightInterpolation(float timeDeltatime)
		{
			if (Mathf.Approximately(timeDeltatime, 0f))
			{
				return;
			}
			float num = this.IsInPronePose ? 0f : (this.Transform.position.y - this._prevHeight);
			float num2 = Mathf.SmoothDamp(this.PlayerBones.AnimatedTransform.localPosition.y - num, 0f, ref this._dampVelocity, this._currentSmoothSpeed, 1000000f, timeDeltatime);
			this.PlayerBones.AnimatedTransform.localPosition = new Vector3(this.PlayerBones.AnimatedTransform.localPosition.x, Mathf.Clamp(num2, -0.2f, 0.2f), this.PlayerBones.AnimatedTransform.localPosition.z);
			this._currentSmoothSpeed = Mathf.Lerp(this._currentSmoothSpeed, (Mathf.Abs(num2) > this._previousY) ? (this.HeightSmoothTime * 0.3f) : this.HeightSmoothTime, timeDeltatime);
			this._previousY = Mathf.Abs(num2);
		}

		// Token: 0x06008C59 RID: 35929 RVA: 0x002D5634 File Offset: 0x002D3834
		private void \uE00E()
		{
			if (!Mathf.Approximately(this.PlayerBones.AnimatedTransform.localPosition.y, 0f))
			{
				this.PlayerBones.AnimatedTransform.localPosition = new Vector3(this.PlayerBones.AnimatedTransform.localPosition.x, 0f, this.PlayerBones.AnimatedTransform.localPosition.z);
			}
			this._prevHeight = this.Transform.position.y;
			this._previousY = 0f;
		}

		// Token: 0x06008C5A RID: 35930 RVA: 0x002D56D0 File Offset: 0x002D38D0
		public virtual void ToggleProne()
		{
			if (!this.MovementContext.IsAnimatorInteractionOn)
			{
				this.CurrentManagedState.Prone();
			}
		}

		// Token: 0x06008C5B RID: 35931 RVA: 0x002D56EC File Offset: 0x002D38EC
		internal void \uE00F()
		{
			CompoundItem compoundItem = this.InventoryController.Inventory.Equipment.GetSlot(EquipmentSlot.Headwear).ContainedItem as CompoundItem;
			if (compoundItem != null)
			{
				TogglableComponent togglableComponent = Enumerable.FirstOrDefault<TogglableComponent>(compoundItem.GetItemComponentsInChildren(true));
				if (togglableComponent != null)
				{
					this.InventoryController.TryRunNetworkTransaction(togglableComponent.Set(!togglableComponent.On, true, false), null);
				}
			}
		}

		// Token: 0x06008C5C RID: 35932 RVA: 0x002D5760 File Offset: 0x002D3960
		internal virtual void \uE09F(WorldInteractiveObject interactiveObject, InteractionResult interactionResult, Action callback)
		{
			EInteractionType interactionType = interactionResult.InteractionType;
			Debug.LogFormat(\uF1F8.\uE000(138124), new object[]
			{
				interactionType
			});
			this.CurrentManagedState.StartDoorInteraction(interactiveObject, interactionResult, callback);
			this.UpdateInteractionCast();
		}

		// Token: 0x06008C5D RID: 35933 RVA: 0x002D57AC File Offset: 0x002D39AC
		internal virtual void \uE0A0(WorldInteractiveObject door, InteractionResult interactionResult)
		{
			if (door == null)
			{
				return;
			}
			this.CurrentManagedState.ExecuteDoorInteraction(door, interactionResult, null, this);
		}

		// Token: 0x06008C5E RID: 35934 RVA: 0x002D57C8 File Offset: 0x002D39C8
		internal virtual void \uE0A1(BTRSide btr, byte placeId, EInteractionType interaction)
		{
		}

		// Token: 0x06008C5F RID: 35935 RVA: 0x002D57CC File Offset: 0x002D39CC
		internal virtual void \uE0A2(\uE791 controller, int transitPointId, string keyId, EDateTime time)
		{
		}

		// Token: 0x06008C60 RID: 35936 RVA: 0x002D57D0 File Offset: 0x002D39D0
		internal virtual void \uE0A3(TripwireSynchronizableObject tripwire)
		{
		}

		// Token: 0x06008C61 RID: 35937 RVA: 0x002D57D4 File Offset: 0x002D39D4
		internal virtual void \uE0A4(\uE913 controller, int objectId, EventObject.EInteraction interaction)
		{
		}

		// Token: 0x06008C62 RID: 35938 RVA: 0x002D57D8 File Offset: 0x002D39D8
		internal virtual void \uE0A5(string itemId, string zoneId, bool successful)
		{
			this.PlantItem(itemId, zoneId, successful);
		}

		// Token: 0x06008C63 RID: 35939 RVA: 0x002D57E4 File Offset: 0x002D39E4
		protected void PlantItem(string itemId, string zoneId, bool successful)
		{
			if (successful)
			{
				this.Profile.ItemDroppedAtPlace(itemId, zoneId);
			}
		}

		// Token: 0x06008C64 RID: 35940 RVA: 0x002D57F8 File Offset: 0x002D39F8
		public virtual void PlantItemLocalOnly(Item item, string zone)
		{
			this.PlantItem(item.TemplateId, zone, true);
		}

		// Token: 0x170013F7 RID: 5111
		// (get) Token: 0x06008C65 RID: 35941 RVA: 0x002D5810 File Offset: 0x002D3A10
		public virtual bool OnHisWayToOperateStationaryWeapon
		{
			get
			{
				return false;
			}
		}

		// Token: 0x06008C66 RID: 35942 RVA: 0x002D5814 File Offset: 0x002D3A14
		public virtual void OperateStationaryWeapon(StationaryWeapon stationaryWeapon, \uE840.EStationaryCommand command)
		{
			if (command == \uE840.EStationaryCommand.Occupy)
			{
				if (Vector3.Distance(this.Position, stationaryWeapon.transform.position) > 2f)
				{
					Debug.LogErrorFormat(this.GetPlayer, \uF1F8.\uE000(137805), new object[]
					{
						this.GetPlayer.FullIdInfo,
						this.Position.ToString(\uF1F8.\uE000(10920)),
						stationaryWeapon.Item.ShortName,
						stationaryWeapon.Id,
						stationaryWeapon.transform.position
					});
				}
				if (stationaryWeapon.IsAvailable(this.ProfileId))
				{
					stationaryWeapon.SetOperator(this.ProfileId, false);
					this.\uE079();
					this.MovementContext.StationaryWeapon = stationaryWeapon;
					this.MovementContext.InteractionParameters = stationaryWeapon.GetInteractionParameters();
					this.MovementContext.PlayerAnimatorSetApproached(false);
					this.MovementContext.PlayerAnimatorSetStationary(true);
					this.MovementContext.PlayerAnimatorSetStationaryAnimation((int)stationaryWeapon.Animation);
					return;
				}
			}
			else if (command == \uE840.EStationaryCommand.Leave)
			{
				if (true)
				{
					if (this.ActiveSlot != null)
					{
						if (this.ActiveSlot.ContainedItem != null)
						{
							this.SetInHands(this.ActiveSlot.ContainedItem, new Callback<\uE827>(Player.<>c.<>9.\uE000));
							return;
						}
					}
					this.SetFirstAvailableItem(new Callback<\uE827>(Player.<>c.<>9.\uE001));
					return;
				}
			}
			else
			{
				this.MovementContext.PlayerAnimatorSetStationary(false);
				if (this.MovementContext.StationaryWeapon != null)
				{
					this.MovementContext.StationaryWeapon.Unlock(this.ProfileId);
				}
			}
		}

		// Token: 0x06008C67 RID: 35943 RVA: 0x002D59F8 File Offset: 0x002D3BF8
		public void FastForwardToStationaryWeapon(Item item, Vector2 stationaryRotation, Quaternion playerRotation, Quaternion stationaryPlayerRotation)
		{
			StationaryWeapon stationaryWeapon = this.GameWorld.FindStationaryWeaponByItemId(item.Id);
			if (stationaryWeapon == null)
			{
				return;
			}
			stationaryWeapon.SetOperator(this.ProfileId, false);
			this.MovementContext.StationaryWeapon = stationaryWeapon;
			this.Teleport(stationaryWeapon.GetInteractionParameters().InteractionPosition, false);
			bool enabled = this.BodyAnimatorCommon.enabled;
			bool keepAnimatorControllerStateOnDisable = this.BodyAnimatorCommon.keepAnimatorControllerStateOnDisable;
			this.BodyAnimatorCommon.keepAnimatorControllerStateOnDisable = true;
			this.BodyAnimatorCommon.enabled = false;
			this.MovementContext.PlayerAnimatorSetApproached(true);
			this.MovementContext.PlayerAnimatorSetStationary(true);
			this.MovementContext.PlayerAnimatorSetStationaryAnimation((int)stationaryWeapon.Animation);
			this.Transform.rotation = stationaryPlayerRotation;
			this.MovementContext.Rotation = stationaryRotation;
			this.MovementContext.UpdateStationaryDeltaAngle();
			for (int i = 0; i < 150; i++)
			{
				this.BodyAnimatorCommon.Update(0.01f);
			}
			this.BodyAnimatorCommon.enabled = enabled;
			this.BodyAnimatorCommon.keepAnimatorControllerStateOnDisable = keepAnimatorControllerStateOnDisable;
			this.Teleport(stationaryWeapon.GetInteractionParameters().InteractionPosition, false);
			if (stationaryWeapon.Animation == StationaryWeapon.EStationaryAnimationType.AGS_17)
			{
				Vector3 eulerAngles = playerRotation.eulerAngles;
				this.Transform.rotation = Quaternion.Euler(0f, eulerAngles.y, eulerAngles.z);
				return;
			}
			this.Transform.rotation = stationaryPlayerRotation;
		}

		// Token: 0x06008C68 RID: 35944 RVA: 0x002D5B7C File Offset: 0x002D3D7C
		public void Crutch_FinalizeStationaryWeapState(\uE840 swPacket)
		{
			if (this.MovementContext.CurrentState.Name == EPlayerState.Stationary && !swPacket.IsStationaryFinal)
			{
				this.MovementContext.PlayerAnimatorSetStationary(false);
				if (this.MovementContext.StationaryWeapon != null)
				{
					this.MovementContext.StationaryWeapon.Unlock(this.ProfileId);
				}
			}
		}

		// Token: 0x06008C69 RID: 35945 RVA: 0x002D5BE8 File Offset: 0x002D3DE8
		public void TryMountWeapon()
		{
			if (this.HasFirearmInHands())
			{
				Player.FirearmController firearmController = this.HandsController as Player.FirearmController;
				if (firearmController != null)
				{
					bool flag;
					if (!this.MovementContext.StationaryWeapon && !(firearmController.Weapon is \uEE87) && !(firearmController.Weapon is \uEEA2) && !(firearmController.Weapon is \uEEA0) && this.MovementContext.IsGrounded && !firearmController.IsInReloadOperation())
					{
						if (!firearmController.IsInSpawnOperation())
						{
							if (!firearmController.IsInInteraction())
							{
								if (!firearmController.IsInRemoveOperation())
								{
									flag = (this.MovementContext.BlindFire == 0);
									goto IL_BC;
								}
							}
						}
					}
					flag = false;
					IL_BC:
					if (!flag)
					{
						return;
					}
					this._weaponMountingComponent.TryMountWeapon(firearmController);
					return;
				}
			}
		}

		// Token: 0x14000177 RID: 375
		// (add) Token: 0x06008C6A RID: 35946 RVA: 0x002D5CC0 File Offset: 0x002D3EC0
		// (remove) Token: 0x06008C6B RID: 35947 RVA: 0x002D5D04 File Offset: 0x002D3F04
		public event Player.\uE004 OnDamageReceived;

		// Token: 0x170013F8 RID: 5112
		// (get) Token: 0x06008C6C RID: 35948 RVA: 0x002D5D48 File Offset: 0x002D3F48
		public bool OnScreen
		{
			get
			{
				return this._playerBody.IsVisible();
			}
		}

		// Token: 0x170013F9 RID: 5113
		// (get) Token: 0x06008C6D RID: 35949 RVA: 0x002D5D58 File Offset: 0x002D3F58
		public PlayerBody PlayerBody
		{
			get
			{
				return this._playerBody;
			}
		}

		// Token: 0x170013FA RID: 5114
		// (get) Token: 0x06008C6E RID: 35950 RVA: 0x002D5D60 File Offset: 0x002D3F60
		protected float HandsToBodyAngle
		{
			get
			{
				return this.MovementContext.HandsToBodyAngle;
			}
		}

		// Token: 0x170013FB RID: 5115
		// (get) Token: 0x06008C6F RID: 35951 RVA: 0x002D5D70 File Offset: 0x002D3F70
		public Func<int> CompassValue
		{
			get
			{
				if (this._compassArrow != null)
				{
					return new Func<int>(this._compassArrow.PanelValue);
				}
				return null;
			}
		}

		// Token: 0x170013FC RID: 5116
		// (get) Token: 0x06008C70 RID: 35952 RVA: 0x002D5D94 File Offset: 0x002D3F94
		// (set) Token: 0x06008C71 RID: 35953 RVA: 0x002D5D9C File Offset: 0x002D3F9C
		public bool HasGamePlayerOwner { get; set; }

		// Token: 0x170013FD RID: 5117
		// (get) Token: 0x06008C72 RID: 35954 RVA: 0x002D5DA8 File Offset: 0x002D3FA8
		// (set) Token: 0x06008C73 RID: 35955 RVA: 0x002D5DBC File Offset: 0x002D3FBC
		public virtual EPointOfView PointOfView
		{
			get
			{
				return this._playerBody.PointOfView.Value;
			}
			set
			{
				if (this._playerBody.PointOfView.Value == value && !this._pointOfViewUndecided)
				{
					return;
				}
				this._pointOfViewUndecided = false;
				this._playerBody.PointOfView.Value = value;
				this.CalculateScaleValueByFov((float)Singleton<\uE9A4>.Instance.Game.Settings.FieldOfView);
				this.SetCompensationScale(false);
				if (value == EPointOfView.ThirdPerson)
				{
					this.PlayerBones.Ribcage.Original.localScale = new Vector3(1f, 1f, 1f);
				}
				this.MovementContext.PlayerAnimatorPointOfView(value);
				BindableEvent pointOfViewChanged = this.PointOfViewChanged;
				if (pointOfViewChanged != null)
				{
					pointOfViewChanged.Invoke();
				}
				this._playerBody.UpdatePlayerRenders(this._playerBody.PointOfView.Value, this.Side);
				this.ProceduralWeaponAnimation.PointOfView = value;
			}
		}

		// Token: 0x170013FE RID: 5118
		// (get) Token: 0x06008C74 RID: 35956 RVA: 0x002D5EC0 File Offset: 0x002D40C0
		// (set) Token: 0x06008C75 RID: 35957 RVA: 0x002D5EC8 File Offset: 0x002D40C8
		private TripwireVisualPlacer \uE001 { get; set; }

		// Token: 0x170013FF RID: 5119
		// (get) Token: 0x06008C76 RID: 35958 RVA: 0x002D5ED4 File Offset: 0x002D40D4
		public bool FirstPersonPointOfView
		{
			get
			{
				return this.PointOfView.IsFirstPerson();
			}
		}

		// Token: 0x17001400 RID: 5120
		// (get) Token: 0x06008C77 RID: 35959 RVA: 0x002D5EE4 File Offset: 0x002D40E4
		// (set) Token: 0x06008C78 RID: 35960 RVA: 0x002D5EEC File Offset: 0x002D40EC
		public bool UsedSimplifiedSkeleton { get; private set; }

		// Token: 0x17001401 RID: 5121
		// (get) Token: 0x06008C79 RID: 35961 RVA: 0x002D5EF8 File Offset: 0x002D40F8
		public BindableEvent PointOfViewChanged { get; } = new BindableEvent();

		// Token: 0x14000178 RID: 376
		// (add) Token: 0x06008C7A RID: 35962 RVA: 0x002D5F00 File Offset: 0x002D4100
		// (remove) Token: 0x06008C7B RID: 35963 RVA: 0x002D5F44 File Offset: 0x002D4144
		public event Action<\uF061, EBodyPart, float> BeingHitAction;

		// Token: 0x14000179 RID: 377
		// (add) Token: 0x06008C7C RID: 35964 RVA: 0x002D5F88 File Offset: 0x002D4188
		// (remove) Token: 0x06008C7D RID: 35965 RVA: 0x002D5FCC File Offset: 0x002D41CC
		public event Action<bool> OnPropVisibility;

		// Token: 0x1400017A RID: 378
		// (add) Token: 0x06008C7E RID: 35966 RVA: 0x002D6010 File Offset: 0x002D4210
		// (remove) Token: 0x06008C7F RID: 35967 RVA: 0x002D6054 File Offset: 0x002D4254
		public event Action<string> OnShowAmmoCountZeroingPanel;

		// Token: 0x1400017B RID: 379
		// (add) Token: 0x06008C80 RID: 35968 RVA: 0x002D6098 File Offset: 0x002D4298
		// (remove) Token: 0x06008C81 RID: 35969 RVA: 0x002D60DC File Offset: 0x002D42DC
		public event Action<Weapon.EFireMode> OnShowFireMode;

		// Token: 0x1400017C RID: 380
		// (add) Token: 0x06008C82 RID: 35970 RVA: 0x002D6120 File Offset: 0x002D4320
		// (remove) Token: 0x06008C83 RID: 35971 RVA: 0x002D6164 File Offset: 0x002D4364
		public event Action<int, int, int, string, bool> OnShowAmmoDetails;

		// Token: 0x17001402 RID: 5122
		// (get) Token: 0x06008C84 RID: 35972 RVA: 0x002D61A8 File Offset: 0x002D43A8
		// (set) Token: 0x06008C85 RID: 35973 RVA: 0x002D61B0 File Offset: 0x002D43B0
		public Vector3 BeaconPosition { get; private set; }

		// Token: 0x17001403 RID: 5123
		// (get) Token: 0x06008C86 RID: 35974 RVA: 0x002D61BC File Offset: 0x002D43BC
		// (set) Token: 0x06008C87 RID: 35975 RVA: 0x002D61C4 File Offset: 0x002D43C4
		public Quaternion BeaconRotation { get; private set; }

		// Token: 0x17001404 RID: 5124
		// (get) Token: 0x06008C88 RID: 35976 RVA: 0x002D61D0 File Offset: 0x002D43D0
		public float ErgonomicsPenalty
		{
			get
			{
				return this._ergonomicsPenalty;
			}
		}

		// Token: 0x17001405 RID: 5125
		// (get) Token: 0x06008C89 RID: 35977 RVA: 0x002D61D8 File Offset: 0x002D43D8
		// (set) Token: 0x06008C8A RID: 35978 RVA: 0x002D61E0 File Offset: 0x002D43E0
		public ObjectInHandsAnimator HandsAnimator
		{
			get
			{
				return this._handsAnimator;
			}
			set
			{
				this._handsAnimator = value;
			}
		}

		// Token: 0x17001406 RID: 5126
		// (get) Token: 0x06008C8B RID: 35979 RVA: 0x002D61EC File Offset: 0x002D43EC
		// (set) Token: 0x06008C8C RID: 35980 RVA: 0x002D61F4 File Offset: 0x002D43F4
		public GameObject CameraContainer { get; private set; }

		// Token: 0x17001407 RID: 5127
		// (get) Token: 0x06008C8D RID: 35981 RVA: 0x002D6200 File Offset: 0x002D4400
		// (set) Token: 0x06008C8E RID: 35982 RVA: 0x002D6208 File Offset: 0x002D4408
		public Transform CameraPosition { get; private set; }

		// Token: 0x17001408 RID: 5128
		// (get) Token: 0x06008C8F RID: 35983 RVA: 0x002D6214 File Offset: 0x002D4414
		// (set) Token: 0x06008C90 RID: 35984 RVA: 0x002D621C File Offset: 0x002D441C
		public ProceduralWeaponAnimation ProceduralWeaponAnimation { get; private set; }

		// Token: 0x17001409 RID: 5129
		// (get) Token: 0x06008C91 RID: 35985 RVA: 0x002D6228 File Offset: 0x002D4428
		// (set) Token: 0x06008C92 RID: 35986 RVA: 0x002D6230 File Offset: 0x002D4430
		public bool AllowToPlantBeacon { get; set; }

		// Token: 0x1700140A RID: 5130
		// (get) Token: 0x06008C93 RID: 35987 RVA: 0x002D623C File Offset: 0x002D443C
		public Vector3 LookDirection
		{
			get
			{
				return this.MovementContext.LookDirection;
			}
		}

		// Token: 0x06008C94 RID: 35988 RVA: 0x002D624C File Offset: 0x002D444C
		public void SetRadioTransmitterView(RadioTransmitterView rtView)
		{
			this._radioTransmitterView = rtView;
		}

		// Token: 0x06008C95 RID: 35989 RVA: 0x002D6258 File Offset: 0x002D4458
		protected void ReceiveDamage(float damage, EBodyPart part, EDamageType type, float absorbed, MaterialType special)
		{
			Player.\uE004 onDamageReceived = this.OnDamageReceived;
			if (onDamageReceived == null)
			{
				return;
			}
			onDamageReceived(damage, part, type, absorbed, special);
		}

		// Token: 0x06008C96 RID: 35990 RVA: 0x002D6274 File Offset: 0x002D4474
		public void ShowAmmoCountZeroingPanel(string message)
		{
			Action<string> onShowAmmoCountZeroingPanel = this.OnShowAmmoCountZeroingPanel;
			if (onShowAmmoCountZeroingPanel == null)
			{
				return;
			}
			onShowAmmoCountZeroingPanel(message);
		}

		// Token: 0x06008C97 RID: 35991 RVA: 0x002D6288 File Offset: 0x002D4488
		public void VisualPass()
		{
			if (this.CustomAnimationsAreProcessing)
			{
				return;
			}
			float num = 0f;
			if (!this.FirstPersonPointOfView)
			{
				num = \uF01E.Instance.Distance(this.Transform.position);
			}
			bool flag = this.FirstPersonPointOfView || (\uE2F9.Config.UseSpiritPlayer && !this.Spirit.IsActive) || (this.IsVisible && num <= EFTHardSettings.Instance.CULL_GROUNDER);
			if ((this._armsupdated || this.ArmsUpdateMode == Player.EUpdateMode.Auto) && flag && (this.EnabledAnimators & Player.EAnimatorMask.Procedural) != (Player.EAnimatorMask)0 && !this.UsedSimplifiedSkeleton)
			{
				this.ProceduralWeaponAnimation.ProcessEffectors((this._nFixedFrames > 0) ? this._fixedTime : this._armsTime, Mathf.Max(0, this._nFixedFrames), this.Motion, this.Velocity);
				this.PlayerBones.Offset = this.ProceduralWeaponAnimation.HandsContainer.WeaponRootAnim.localPosition;
				this.PlayerBones.DeltaRotation = this.ProceduralWeaponAnimation.HandsContainer.WeaponRootAnim.localRotation;
			}
			if (this._bodyupdated)
			{
				if (flag && !this.UsedSimplifiedSkeleton)
				{
					this.RestoreIKPos();
					this.HeightInterpolation(this._bodyTime);
					this.FBBIKUpdate(num);
					this.MouseLook(false);
					if ((this.EnabledAnimators & Player.EAnimatorMask.IK) != (Player.EAnimatorMask)0)
					{
						float num2 = this.FirstPersonPointOfView ? this.\uE019(PlayerAnimator.FIRST_PERSON_CURVE_WEIGHT) : 1f;
						float positionCacheValue = this.\uE019(PlayerAnimator.POSITION_CACHE_FOR_WEAPON_PROCEDURAL) * num2;
						float num3 = this.\uE019(PlayerAnimator.LEFT_STANCE_CURVE);
						this.ProceduralWeaponAnimation.GetLeftStanceCurrentCurveValue(num3);
						this._firstPersonRightHand = 1f - this.\uE019(PlayerAnimator.RIGHT_HAND_WEIGHT) * num2;
						this._firstPersonLeftHand = 1f - this.\uE019(PlayerAnimator.LEFT_HAND_WEIGHT) * num2;
						this.ThirdPersonWeaponRootAuthority = (this.MovementContext.IsInMountedState ? 0f : (this.\uE019(PlayerAnimator.WEAPON_ROOT_3RD) * num2));
						if (this.FirstPersonPointOfView)
						{
							this._smoothLW = ((this._smoothLW > this._firstPersonLeftHand) ? this._firstPersonLeftHand : Mathf.SmoothDamp(this._smoothLW, this._firstPersonLeftHand, ref this._shoulderVel, 0.2f));
							if (this.MovementContext.IsInMountedState && !this.IsInPronePose)
							{
								this.PlayerBones.SetShoulders(1f, 1f);
							}
							else
							{
								this.PlayerBones.SetShoulders(1f - this.\uE019(PlayerAnimator.LEFT_SHOULDER_WEIGHT), 1f - this.\uE019(PlayerAnimator.RIGHT_SHOULDER_WEIGHT));
							}
						}
						else
						{
							this.\uE017(num);
						}
						if (this._armsupdated || this.ArmsUpdateMode == Player.EUpdateMode.Auto)
						{
							float thirdPersonAuthority = this.ThirdPersonWeaponRootAuthority;
							if (this.PointOfView == EPointOfView.ThirdPerson && this.MovementContext.StationaryWeapon != null)
							{
								thirdPersonAuthority = 0f;
							}
							bool inSprint = this.MovementContext.CurrentState.Name == EPlayerState.Sprint;
							bool lastAnimValue = this.MovementContext.LeftStanceController.LastAnimValue;
							bool leftStance = this.MovementContext.LeftStanceController.LeftStance;
							if (this.MovementContext.PlayerAnimator.AnimatedInteractions.IsInteractionPlaying)
							{
								this.MovementContext.LeftStanceController.DisableLeftStanceAnimFromBodyAction();
							}
							if (this._isInteractionPlayeingLastFrame && !this.MovementContext.PlayerAnimator.AnimatedInteractions.IsInteractionPlaying)
							{
								this.MovementContext.LeftStanceController.SetAnimatorLeftStanceToCacheFromBodyAction(false);
							}
							this._isInteractionPlayeingLastFrame = this.MovementContext.PlayerAnimator.AnimatedInteractions.IsInteractionPlaying;
							this.PlayerBones.ShiftWeaponRoot(this._bodyTime, this.PointOfView, thirdPersonAuthority, false, positionCacheValue, num3, inSprint, lastAnimValue, leftStance, this.ProceduralWeaponAnimation.IsAiming, this.MovementContext.PlayerAnimator.AnimatedInteractions.IsInteractionPlaying);
						}
						this.PlayerBones.RotateHead(this.ProceduralWeaponAnimation.ExternalHeadRotation, this.ProceduralWeaponAnimation.GetHeadRotation(), this.MovementContext.LeftStanceEnabled && this.HasFirearmInHands(), num3, this.ProceduralWeaponAnimation.IsAiming);
						this.HandPosers[0].weight = this._firstPersonLeftHand;
						this._limbs[0].solver.IKRotationWeight = (this._limbs[0].solver.IKPositionWeight = this._firstPersonLeftHand);
						this._limbs[1].solver.IKRotationWeight = (this._limbs[1].solver.IKPositionWeight = this._firstPersonRightHand);
						this.\uE014(num);
						this.\uE018(num2);
						this.\uE013(num);
						if (this._firstPersonRightHand < 1f)
						{
							this.PlayerBones.Kinematics(this._markers[1], this._firstPersonRightHand);
						}
					}
					float num4 = this.\uE019(PlayerAnimator.AIMING_LAYER_CURVE);
					this.MovementContext.PlayerAnimator.Animator.SetLayerWeight(6, 1f - num4);
					this._prevHeight = this.Transform.position.y;
				}
				else
				{
					this.\uE00E();
					this.MouseLook(false);
				}
			}
			if (num > EFTHardSettings.Instance.AnimatorCullDistance)
			{
				this.BodyAnimatorCommon.cullingMode = AnimatorCullingMode.CullUpdateTransforms;
				this.ArmsAnimatorCommon.cullingMode = ((this._handsController is Player.EmptyHandsController || this._handsController is Player.KnifeController || this._handsController is Player.UsableItemController) ? AnimatorCullingMode.AlwaysAnimate : AnimatorCullingMode.CullUpdateTransforms);
			}
			else
			{
				this.BodyAnimatorCommon.cullingMode = AnimatorCullingMode.AlwaysAnimate;
				this.ArmsAnimatorCommon.cullingMode = AnimatorCullingMode.AlwaysAnimate;
			}
			if (this._armsupdated || this.ArmsUpdateMode == Player.EUpdateMode.Auto)
			{
				this.ProceduralWeaponAnimation.LateTransformations(Time.deltaTime);
				if (this.HandsController != null)
				{
					this.HandsController.ManualLateUpdate(Time.deltaTime);
				}
			}
			if (this.UsedSimplifiedSkeleton)
			{
				Transform child = this.PlayerBones.Weapon_Root_Anim.GetChild(0);
				child.localPosition = Vector3.zero;
				child.localRotation = Quaternion.identity;
			}
		}

		// Token: 0x06008C98 RID: 35992 RVA: 0x002D68A4 File Offset: 0x002D4AA4
		protected virtual void LateUpdate()
		{
			MovementContext movementContext = this.MovementContext;
			if (movementContext != null)
			{
				movementContext.AnimatorStatesLateUpdate();
			}
			this.DistanceDirty = true;
			this.OcclusionDirty = true;
			if (this.HealthController != null && this.HealthController.IsAlive)
			{
				this.Physical.LateUpdate();
				this.VisualPass();
				this._armsupdated = false;
				this._bodyupdated = false;
				if (this._nFixedFrames > 0)
				{
					this._nFixedFrames = 0;
					this._fixedTime = 0f;
				}
				if (this._beaconDummy != null)
				{
					Vector3 forward = this._playerLookRaycastTransform.forward;
					RaycastHit raycastHit;
					if (Physics.Raycast(new Ray(this._playerLookRaycastTransform.position + forward / 2f, forward), out raycastHit, 1.5f, \uE3CA.HighPolyWithTerrainMask))
					{
						this._beaconDummy.transform.position = raycastHit.point;
						this._beaconDummy.transform.rotation = Quaternion.LookRotation(raycastHit.normal);
						this._beaconMaterialSetter.SetAvailable(this._beaconPlacer.Available);
						this.AllowToPlantBeacon = this._beaconPlacer.Available;
						if (this.AllowToPlantBeacon)
						{
							this.BeaconPosition = this._beaconDummy.transform.position;
							this.BeaconRotation = this._beaconDummy.transform.rotation;
						}
					}
					else
					{
						this._beaconDummy.transform.position = this._playerLookRaycastTransform.position + this._playerLookRaycastTransform.forward;
						this._beaconDummy.transform.rotation = Quaternion.identity;
						this._beaconMaterialSetter.SetAvailable(false);
						this.AllowToPlantBeacon = false;
					}
				}
				if (this.\uE001 != null)
				{
					this.\uE001.ProcessPlacement(this.InteractionRay, this.WeaponRoot.position);
				}
				this.ProceduralWeaponAnimation.StartFovCoroutine(this);
				this.PropUpdate();
			}
			this.ComplexLateUpdate(EUpdateQueue.Update, this.DeltaTime);
			if (this.POM != null)
			{
				if (!this.IsAI)
				{
					this.POM.ExtrudeCamera();
				}
			}
		}

		// Token: 0x06008C99 RID: 35993 RVA: 0x002D6AF4 File Offset: 0x002D4CF4
		public void PropUpdate()
		{
			if (!this._propActive)
			{
				return;
			}
			if (this._hasAnimatorPropBones && this._propActive)
			{
				for (int i = 0; i < this._animatorPropTransforms.Length; i++)
				{
					this._propTransforms[i].SetPositionAndRotation(this._animatorPropTransforms[i].position, this._animatorPropTransforms[i].rotation);
				}
			}
			if (this._firstPersonLeftHand < 1f)
			{
				Quaternion rhs = Quaternion.Inverse(this._markers[0].rotation) * this._animatorPropTransforms[0].rotation;
				Vector3 position = this._markers[0].InverseTransformPoint(this._animatorPropTransforms[0].position);
				this._propTransforms[0].position = this.PlayerBones.LeftPalm.TransformPoint(position);
				this._propTransforms[0].rotation = this.PlayerBones.LeftPalm.rotation * rhs;
			}
		}

		// Token: 0x06008C9A RID: 35994 RVA: 0x002D6C08 File Offset: 0x002D4E08
		public void CalculateScaleValueByFov(float fov)
		{
			float t = Mathf.InverseLerp(50f, 75f, fov);
			this._ribcageScaleCompensated = Mathf.Lerp(1f, 0.65f, t);
		}

		// Token: 0x06008C9B RID: 35995 RVA: 0x002D6C3C File Offset: 0x002D4E3C
		public void RestoreRibcageScale()
		{
			this.RibcageScaleCurrentTarget = 1f;
		}

		// Token: 0x06008C9C RID: 35996 RVA: 0x002D6C4C File Offset: 0x002D4E4C
		public void SetCompensationScale(bool force = false)
		{
			this.RibcageScaleCurrentTarget = this._ribcageScaleCompensated;
			if (force)
			{
				this.RibcageScaleCurrent = this.RibcageScaleCurrentTarget;
				this.ProceduralWeaponAnimation.ResetFovAdjustments(this);
			}
			this.ProceduralWeaponAnimation.SetFovParams(this._ribcageScaleCompensated);
		}

		// Token: 0x06008C9D RID: 35997 RVA: 0x002D6CA0 File Offset: 0x002D4EA0
		public void OnMakingShot([NotNull] \uEEFB weapon, Vector3 force)
		{
			Player.\uE035 uE = new Player.\uE035();
			uE.<>4__this = this;
			uE.weapon = weapon;
			this.ExecuteSkill(new Action(uE.\uE000));
			this.IncreaseAwareness(15f);
			if (this.AIData != null)
			{
				Player.FirearmController firearmController = this.HandsController as Player.FirearmController;
				AISoundType spredPower = AISoundType.gun;
				if (firearmController != null && firearmController.IsSilenced)
				{
					spredPower = AISoundType.silencedGun;
				}
				this.AIData.TryPlayShootSound(this.GetPlayer, this.Position, spredPower);
				if (this.AIData.IsAI)
				{
					this.AIData.BotOwner.ShootData.ShootDoneWeapon();
				}
			}
			if (this.FirstPersonPointOfView && this.IsYourPlayer && \uF024.IsReflexAvailable() && \uF024.IsAutomaticReflexAnalyzerSupported())
			{
				\uF01E.Instance.ReflexController.DoReflexTriggerFlash();
			}
			if (this.FirstPersonPointOfView)
			{
				return;
			}
			this._turnOffFbbikAt = Time.time + this._fbbikCooldown;
			this._fbbik.solver.Quick = false;
			float d = Mathf.Sqrt(uE.weapon.TotalWeight) * uE.weapon.RecoilForceBack / 2400f;
			force *= d;
			foreach (HitReaction.HitPoint hitPoint in this.HitReaction.Recoil)
			{
				hitPoint.Hit(force, this.PlayerBones.WeaponRoot.position);
			}
		}

		// Token: 0x06008C9E RID: 35998 RVA: 0x002D6E48 File Offset: 0x002D5048
		public IEnumerator HitDelay(Action callback)
		{
			int num;
			for (;;)
			{
				int num2;
				num = num2;
				if (num != 0)
				{
					break;
				}
				yield return new WaitForEndOfFrame();
			}
			if (num != 1)
			{
				yield break;
			}
			callback();
			yield break;
		}

		// Token: 0x06008C9F RID: 35999 RVA: 0x002D6E58 File Offset: 0x002D5058
		public virtual void ShotReactions(\uF061 shot, EBodyPart bodyPart)
		{
			if (this.UsedSimplifiedSkeleton)
			{
				Vector3 normalized = shot.Direction.normalized;
				normalized.y = 0f;
				normalized = normalized.normalized;
				Vector3 vector = this.Transform.rotation * normalized;
				this.MovementContext.PlayerAnimator.SetHit((int)bodyPart, -vector.z, -vector.x);
			}
			else
			{
				Vector3 normalized2 = shot.Direction.normalized;
				if (this.PointOfView == EPointOfView.ThirdPerson)
				{
					this._turnOffFbbikAt = Time.time + this._fbbikCooldown;
					this._fbbik.solver.Quick = false;
					BodyPartCollider bodyPartCollider = shot.HittedBallisticCollider as BodyPartCollider;
					if (bodyPartCollider != null)
					{
						this.HitReaction.Hit(bodyPartCollider.BodyPartColliderType, bodyPartCollider.BodyPartType, normalized2, shot.HitPoint, false);
					}
				}
				\uEE5B uEE5B = shot.Weapon as \uEE5B;
				if (uEE5B != null)
				{
					KnifeComponent itemComponent = uEE5B.GetItemComponent<KnifeComponent>();
					Vector3 normalized3 = (shot.Player.iPlayer.Transform.position - this.Transform.position).normalized;
					Vector3 lhs = Vector3.Cross(normalized3, Vector3.up);
					float y = normalized2.y;
					float num = Vector3.Dot(lhs, normalized2);
					float num2 = 1f - Mathf.Abs(Vector3.Dot(normalized3, normalized2));
					num2 = ((bodyPart == EBodyPart.Head) ? num2 : Mathf.Sqrt(num2));
					this.Rotation += new Vector2(-num, -y).normalized * (itemComponent.Template.AppliedTrunkRotation.Random(false) * num2);
					this.ProceduralWeaponAnimation.ForceReact.AddForce(new Vector3(-y, num, 0f).normalized, num2, 1f, itemComponent.Template.AppliedHeadRotation.Random(false));
				}
			}
			if (Singleton<Effects>.Instantiated)
			{
				this._preAllocatedRenderersList.Clear();
				this._playerBody.GetBodyRenderersNonAlloc(this._preAllocatedRenderersList);
				Singleton<Effects>.Instance.EffectsCommutator.PlayerMeshesHit(this._preAllocatedRenderersList, shot.HitPoint, -shot.HitNormal);
			}
		}

		// Token: 0x06008CA0 RID: 36000 RVA: 0x002D70AC File Offset: 0x002D52AC
		private void \uE010(EPointOfView pointOfView)
		{
			this.MovementContext.OnStateChanged += this.\uE011;
			this._ribcageChildRotations = new Quaternion[this.PlayerBones.FovSpecialTransforms.Length];
			this._limbs = this.PlayerBones.Ribcage.Original.GetComponentsInChildren<LimbIK>(true);
			this._limbs[0].enabled = false;
			this._limbs[1].enabled = false;
			this._twistBones = this.PlayerBones.Ribcage.Original.GetComponentsInChildren<TwistRelax>();
			this.HandPosers = this.PlayerBones.Ribcage.Original.GetComponentsInChildren<HandPoser>();
			this.\uE012();
			this.PointOfView = pointOfView;
			this.ProceduralWeaponAnimation.PointOfView = pointOfView;
			this._fbbik.enabled = false;
			this._fbbik.solver.Quick = true;
			this.Grounder.ik = this._fbbik;
			this.Grounder.enabled = false;
			\uF01E.Instance.FoVUpdateAction += this.OnFovUpdatedEvent;
			this.OnFovUpdatedEvent((int)\uF01E.Instance.Fov);
			this.SubscribeVisualEvents();
		}

		// Token: 0x06008CA1 RID: 36001 RVA: 0x002D71FC File Offset: 0x002D53FC
		private void \uE011(EPlayerState previousState, EPlayerState nextState)
		{
			if (!this._isGrenadeOrKnife || this.HandsAnimator == null)
			{
				return;
			}
			if (this.FirstPersonPointOfView)
			{
				this.HandsAnimator.SetPlayerState(ObjectInHandsAnimator.PlayerState.None);
				return;
			}
			switch (nextState)
			{
			case EPlayerState.ProneIdle:
			case EPlayerState.ProneMove:
				break;
			case EPlayerState.Run:
				goto IL_76;
			case EPlayerState.Sprint:
				this.HandsAnimator.SetPlayerState(ObjectInHandsAnimator.PlayerState.Sprint);
				return;
			case EPlayerState.Jump:
				this.HandsAnimator.SetPlayerState(ObjectInHandsAnimator.PlayerState.Jump);
				return;
			default:
				if (nextState != EPlayerState.Transit2Prone)
				{
					goto IL_76;
				}
				break;
			}
			this.HandsAnimator.SetPlayerState(ObjectInHandsAnimator.PlayerState.Prone);
			return;
			IL_76:
			this.HandsAnimator.SetPlayerState(ObjectInHandsAnimator.PlayerState.Idle);
		}

		// Token: 0x06008CA2 RID: 36002 RVA: 0x002D728C File Offset: 0x002D548C
		protected virtual void OnFovUpdatedEvent(int fov)
		{
			if (!this.HealthController.IsAlive)
			{
				return;
			}
			this.CalculateScaleValueByFov((float)fov);
			this.SetCompensationScale(true);
		}

		// Token: 0x06008CA3 RID: 36003 RVA: 0x002D72AC File Offset: 0x002D54AC
		public virtual void OnHealthEffectVisualAdded(\uED31 effect)
		{
			if (effect is \uED3E)
			{
				if (Singleton<Effects>.Instantiated)
				{
					Singleton<Effects>.Instance.EffectsCommutator.StartBleedingForPlayer(this);
				}
			}
		}

		// Token: 0x06008CA4 RID: 36004 RVA: 0x002D72D8 File Offset: 0x002D54D8
		public virtual void OnHealthEffectVisualRemoved(\uED31 effect)
		{
			if (effect is \uED3E)
			{
				if (Singleton<Effects>.Instantiated)
				{
					Singleton<Effects>.Instance.EffectsCommutator.StopBleedingForPlayer(this);
				}
			}
		}

		// Token: 0x06008CA5 RID: 36005 RVA: 0x002D7304 File Offset: 0x002D5504
		protected virtual void OnPlayerVisualDied(EDamageType damageType)
		{
			if (Singleton<Effects>.Instantiated)
			{
				Singleton<Effects>.Instance.EffectsCommutator.StopBleedingForPlayer(this);
			}
		}

		// Token: 0x06008CA6 RID: 36006 RVA: 0x002D7320 File Offset: 0x002D5520
		public void SubscribeVisualEvents()
		{
			this.HealthController.EffectStartedEvent += this.OnHealthEffectVisualAdded;
			this.HealthController.EffectResidualEvent += this.OnHealthEffectVisualRemoved;
			this.HealthController.DiedEvent += this.OnPlayerVisualDied;
		}

		// Token: 0x06008CA7 RID: 36007 RVA: 0x002D7378 File Offset: 0x002D5578
		public void UnsubscribeVisualEvents()
		{
			this.HealthController.EffectStartedEvent -= this.OnHealthEffectVisualAdded;
			this.HealthController.EffectResidualEvent -= this.OnHealthEffectVisualRemoved;
			this.HealthController.DiedEvent -= this.OnPlayerVisualDied;
		}

		// Token: 0x1700140B RID: 5131
		// (get) Token: 0x06008CA8 RID: 36008 RVA: 0x002D73D0 File Offset: 0x002D55D0
		public BifacialTransform WeaponRoot
		{
			get
			{
				return this.PlayerBones.WeaponRoot;
			}
		}

		// Token: 0x1700140C RID: 5132
		// (get) Token: 0x06008CA9 RID: 36009 RVA: 0x002D73E0 File Offset: 0x002D55E0
		public BifacialTransform Fireport
		{
			get
			{
				return this.PlayerBones.Fireport;
			}
		}

		// Token: 0x1700140D RID: 5133
		// (get) Token: 0x06008CAA RID: 36010 RVA: 0x002D73F0 File Offset: 0x002D55F0
		public BifacialTransform[] MultiBarrelFireports
		{
			get
			{
				return this.PlayerBones.MultiBarrelsFireports;
			}
		}

		// Token: 0x1700140E RID: 5134
		// (get) Token: 0x06008CAB RID: 36011 RVA: 0x002D7400 File Offset: 0x002D5600
		public Quaternion TargetHandsRotation
		{
			get
			{
				return Quaternion.Euler(this.MovementContext.Pitch, this.MovementContext.Yaw, 0f);
			}
		}

		// Token: 0x1700140F RID: 5135
		// (get) Token: 0x06008CAC RID: 36012 RVA: 0x002D7424 File Offset: 0x002D5624
		public Quaternion CurrentHandsRotaion
		{
			get
			{
				if ((this.FirstPersonPointOfView ? this.\uE019(PlayerAnimator.FIRST_PERSON_CURVE_WEIGHT) : 1f) == 0f)
				{
					this._currentHandsRotation = Quaternion.Euler(Mathf.LerpAngle(this._currentHandsRotation.eulerAngles.x, this.TargetHandsRotation.eulerAngles.x, 0.9f), Mathf.LerpAngle(this._currentHandsRotation.eulerAngles.y, this.TargetHandsRotation.eulerAngles.y, 0.9f), 0f);
				}
				else
				{
					this._currentHandsRotation = Quaternion.Euler(Mathf.LerpAngle(this._currentHandsRotation.eulerAngles.x, this.TargetHandsRotation.eulerAngles.x, 0.3f), Mathf.LerpAngle(this._currentHandsRotation.eulerAngles.y, this.TargetHandsRotation.eulerAngles.y, 0.3f), 0f);
				}
				return this._currentHandsRotation;
			}
		}

		// Token: 0x17001410 RID: 5136
		// (get) Token: 0x06008CAD RID: 36013 RVA: 0x002D7540 File Offset: 0x002D5740
		public Quaternion HandsRotation
		{
			get
			{
				if (!this._customHandRotator.IsValid)
				{
					return Quaternion.Euler(this.MovementContext.Pitch, this.MovementContext.Yaw, 0f);
				}
				return this._customHandRotator.GetRotation();
			}
		}

		// Token: 0x06008CAE RID: 36014 RVA: 0x002D757C File Offset: 0x002D577C
		public void SwitchHeadLightsAnimation()
		{
			if (this.StateIsSuitableForHandInput && !this.IsHeadLightsAnimationActive)
			{
				this.MovementContext.SetInteractInHands(EInteraction.HelmetRailGear);
			}
			this.IsHeadLightsAnimationActive = true;
			base.StartCoroutine(this.\uE087());
		}

		// Token: 0x06008CAF RID: 36015 RVA: 0x002D75BC File Offset: 0x002D57BC
		public virtual void MouseLook(bool forceApplyToOriginalRibcage = false)
		{
			if (!\uE2F9.Config.UseSpiritPlayer || !this.Spirit.IsActive || forceApplyToOriginalRibcage)
			{
				Action<Player> rotationAction = this.MovementContext.RotationAction;
				if (rotationAction == null)
				{
					return;
				}
				rotationAction(this);
			}
		}

		// Token: 0x06008CB0 RID: 36016 RVA: 0x002D7608 File Offset: 0x002D5808
		private void \uE012()
		{
			this.CameraContainer = this.Transform.Original.FindTransform(\uF1F8.\uE000(137922)).gameObject;
			this.CameraPosition = this.Transform.Original.FindTransform(\uF1F8.\uE000(137906));
			this.ProceduralWeaponAnimation = this.PlayerBones.Ribcage.Original.GetComponent<ProceduralWeaponAnimation>();
			this.ProceduralWeaponAnimation.CameraContainer = this.CameraContainer;
			this.ProceduralWeaponAnimation.Walk.Speed = this.MovementContext.CharacterMovementSpeed;
			this.ProceduralWeaponAnimation.Breath.Physical = this.Physical;
			this.ProceduralWeaponAnimation.HandShakeEffector.Physical = this.Physical;
			this.ProceduralWeaponAnimation.OnPreCollision += this.IkStoreRaw;
			this.MovementContext.OnPoseChanged += this.\uE088;
			this.OnHealthEffectRemoved(null);
		}

		// Token: 0x06008CB1 RID: 36017 RVA: 0x002D771C File Offset: 0x002D591C
		public void UpdateLauncherBones(bool launcherEnable, WeaponPrefab weaponPrefab)
		{
			if (launcherEnable)
			{
				Transform transform = weaponPrefab.transform;
				Transform transform2 = this.PlayerBones.WeaponRoot.Original.GetComponentInChildren<AlternativePropBone>().transform;
				this.ProceduralWeaponAnimation.SetLauncherWeaponBone(weaponPrefab.transform, transform2);
				this.HandsController.HandsHierarchy.GatherUnderbarrelWeaponIK(transform, this._elbowBends);
				return;
			}
			this.UpdateBonesOnWeaponChange(this.HandsController.HandsHierarchy);
		}

		// Token: 0x06008CB2 RID: 36018 RVA: 0x002D7798 File Offset: 0x002D5998
		public void UpdateFirstPersonGrip(GripPose.EGripType type = GripPose.EGripType.Common, TransformLinks transforms = null)
		{
			Player.\uE036 uE = new Player.\uE036();
			uE.type = type;
			uE.<>4__this = this;
			this.HandPosers[0].GripWeight = 0f;
			if (transforms != null)
			{
				this.HandPosers[0].MapGrip(transforms.GetTransform(ECharacterWeaponBones.HumanLPalm));
				this.HandPosers[1].MapGrip(transforms.GetTransform(ECharacterWeaponBones.HumanRPalm));
				this.HandPosers[0].weight = (this.HandPosers[1].weight = 1f);
				this.ProceduralWeaponAnimation.HandsContainer.CameraAnimatedFP = transforms.GetTransform(ECharacterWeaponBones.Camera_animated);
			}
			else
			{
				this.HandPosers[0].weight = (this.HandPosers[1].weight = 0f);
			}
			GripPose[] array = Enumerable.ToArray<GripPose>(Enumerable.Where<GripPose>(this.PlayerBones.WeaponRoot.Original.GetComponentsInChildren<GripPose>(), new Func<GripPose, bool>(uE.\uE000)));
			GripPose gripPose = Enumerable.FirstOrDefault<GripPose>(Enumerable.ThenByDescending<GripPose, int>(Enumerable.OrderByDescending<GripPose, bool>(Enumerable.Where<GripPose>(array, new Func<GripPose, bool>(Player.<>c.<>9.\uE003)), new Func<GripPose, bool>(Player.<>c.<>9.\uE004)), new Func<GripPose, int>(uE.\uE001)));
			GripPose gripPose2 = Enumerable.FirstOrDefault<GripPose>(Enumerable.OrderByDescending<GripPose, int>(Enumerable.Where<GripPose>(array, new Func<GripPose, bool>(Player.<>c.<>9.\uE005)), new Func<GripPose, int>(uE.\uE002)));
			this.HandPosers[0].SetGrip(gripPose);
			this.HandPosers[1].SetGrip(gripPose2);
			this.HandPosers[1].IgnoreIndexFinger = (gripPose2 != null);
			this._ikTargets = new Transform[]
			{
				gripPose ? gripPose.transform : null,
				gripPose2 ? gripPose2.transform : null
			};
		}

		// Token: 0x06008CB3 RID: 36019 RVA: 0x002D79A8 File Offset: 0x002D5BA8
		public void UpdateBonesOnWeaponChange(TransformLinks links)
		{
			this.PlayerBones.UpdateImportantBones(links);
			\uE3D9.SetLayersRecursively<MeshRenderer>(links.gameObject, LayerMask.NameToLayer(\uF1F8.\uE000(27509)), new string[]
			{
				\uF1F8.\uE000(27466)
			});
			this._elbowBends = new Transform[2];
			links.GatherIK(this._markers, this._gripReferences, this._elbowBends);
			this._propBone = links.GetTransformOutOfRangeSafe(ECharacterWeaponBones.prop);
			this._hasAnimatorPropBones = (this._propBone != null);
			if (this._hasAnimatorPropBones)
			{
				this._animatorPropTransforms[0] = this._propBone;
				this._animatorPropTransforms[1] = this._propBone.GetChild(0);
				this._animatorPropTransforms[2] = this._propBone.GetChild(1);
			}
			this._vestMarker = ((links.Transforms.Length > 18) ? links.GetTransform(ECharacterWeaponBones.weapon_vest_IK_marker) : null);
			this.UpdateFirstPersonGrip(GripPose.EGripType.Common, links);
		}

		// Token: 0x06008CB4 RID: 36020 RVA: 0x002D7AB4 File Offset: 0x002D5CB4
		public void FBBIKUpdate(float distance)
		{
			if ((this.EnabledAnimators & Player.EAnimatorMask.FBBIK) == (Player.EAnimatorMask)0)
			{
				return;
			}
			if (this.PointOfView == EPointOfView.ThirdPerson)
			{
				this._fbbik.solver.iterations = (int)Mathf.Clamp(15f / distance, 0f, 2f);
				if (!this._fbbik.solver.Quick)
				{
					if (Time.time > this._turnOffFbbikAt)
					{
						this._fbbik.solver.Quick = true;
					}
				}
			}
			this._fbbik.solver.Update();
		}

		// Token: 0x06008CB5 RID: 36021 RVA: 0x002D7B4C File Offset: 0x002D5D4C
		private void \uE013(float d)
		{
			if (d > 300f)
			{
				return;
			}
			this._limbs[0].solver.Update();
			if (d > 70f)
			{
				return;
			}
			this._limbs[1].solver.Update();
			bool flag = d > 40f;
			if (!flag)
			{
				TwistRelax[] twistBones = this._twistBones;
				for (int i = 0; i < twistBones.Length; i++)
				{
					twistBones[i].Relax();
				}
			}
			this.HandPosers[0].ManualUpdate(flag);
			this.HandPosers[1].ManualUpdate(flag);
		}

		// Token: 0x06008CB6 RID: 36022 RVA: 0x002D7BEC File Offset: 0x002D5DEC
		public Vector3 ProjectLocalPosition(Vector3 position)
		{
			return this.PlayerBones.WeaponRoot.TransformPoint(this.PlayerBones.Weapon_Root_Anim.InverseTransformPoint(position));
		}

		// Token: 0x06008CB7 RID: 36023 RVA: 0x002D7C10 File Offset: 0x002D5E10
		public void DropItemDead(Item item, GameObject prefab)
		{
			\uF181.ReleaseBeginSample(\uF1F8.\uE000(137910), \uF1F8.\uE000(137898));
			int layer = LayerMask.NameToLayer(\uF1F8.\uE000(11535));
			int num = LayerMask.NameToLayer(\uF1F8.\uE000(27466));
			AssetPoolObject[] componentsInChildren = prefab.GetComponentsInChildren<AssetPoolObject>(true);
			Collider collider = null;
			foreach (AssetPoolObject assetPoolObject in componentsInChildren)
			{
				foreach (Collider collider2 in assetPoolObject.Colliders)
				{
					if (!collider2.isTrigger && collider2.gameObject.layer != num)
					{
						assetPoolObject.StoreCollider(collider2);
						collider2.enabled = true;
						collider2.gameObject.layer = layer;
						if (collider == null || collider.bounds.extents.sqrMagnitude < collider2.bounds.extents.sqrMagnitude)
						{
							collider = collider2;
						}
					}
				}
			}
			this._garbage = new Player.\uE005
			{
				Transform = prefab.transform
			};
			Rigidbody rigidbody = prefab.AddComponent<Rigidbody>();
			LootItem component = prefab.GetComponent<LootItem>();
			if (component != null)
			{
				component.SetItemAndRigidbody(item, rigidbody);
			}
			this._garbage.Shift = ((rigidbody != null) ? rigidbody.centerOfMass : Vector3.zero);
			if (collider)
			{
				this._garbage.Transportee = collider.gameObject.AddComponent<CommonTransportee>();
				this._garbage.Transportee.ParentTransform = prefab.transform;
			}
			foreach (object obj in prefab.transform)
			{
				((Transform)obj).localPosition -= this._garbage.Shift;
			}
			TransformLinks componentInChildren = prefab.GetComponentInChildren<TransformLinks>();
			bool flag = item is \uEE87 || item is \uEEC9 || item.GetItemComponent<KnifeComponent>() != null;
			if (!flag)
			{
				this.HandPosers[1].Lerp2Target(EFTHardSettings.Instance.RIGHT_HAND_QTS, 5f, 0.5f);
			}
			RigidbodySpawner rigidbodySpawner = flag ? this.PlayerBones.Forearms[1].GetComponent<RigidbodySpawner>() : base.GetComponentInChildren<RigidbodySpawner>();
			this.Corpse.Ragdoll.AttachWeapon(rigidbody, base.gameObject, this.PlayerBones, componentInChildren, flag, this.Velocity);
			rigidbodySpawner.RemoveEvent += this.RemoveAttachment;
		}

		// Token: 0x06008CB8 RID: 36024 RVA: 0x002D7EF8 File Offset: 0x002D60F8
		public void RemoveAttachment(RigidbodySpawner spawner)
		{
			if (spawner != null)
			{
				spawner.RemoveEvent -= this.RemoveAttachment;
			}
			Player.\uE005 garbage = this._garbage;
			if (garbage == null)
			{
				return;
			}
			garbage.RemovePhysics();
		}

		// Token: 0x06008CB9 RID: 36025 RVA: 0x002D7F28 File Offset: 0x002D6128
		public void ReleaseHand()
		{
			if (this._garbage != null)
			{
				this._garbage.Destroy();
				this._garbage = null;
			}
			this.\uE071();
			this.HandPosers[1].Lerp2Target(EFTHardSettings.Instance.RIGHT_HAND_QTS, 5f, 0.5f);
			this.ProceduralWeaponAnimation.OnPreCollision -= this.IkStoreRaw;
		}

		// Token: 0x06008CBA RID: 36026 RVA: 0x002D7F9C File Offset: 0x002D619C
		public void SpawnInHands(Item item, string parentBone)
		{
			this._spawnedKey = Singleton<\uE90C>.Instance.CreateItem(item, Player.GetVisibleToCamera(this), this, true);
			Transform transform = this._spawnedKey.transform.FindTransform(\uF1F8.\uE000(137879));
			Transform transform2 = this._limbs[0].solver.bone3.transform.FindTransform(parentBone);
			this._spawnedKey.transform.SetParent(transform2, false);
			this._spawnedKey.transform.localRotation = Quaternion.identity;
			this._spawnedKey.transform.localPosition = Vector3.zero;
			this._spawnedKey.SetActive(true);
			if (transform != null)
			{
				Quaternion rhs = Quaternion.Inverse(transform.rotation) * transform2.rotation;
				this._spawnedKey.transform.localRotation *= rhs;
				Vector3 b = transform2.position - transform.position;
				this._spawnedKey.transform.position += b;
			}
			else
			{
				string str = \uF1F8.\uE000(137881);
				GameObject spawnedKey = this._spawnedKey;
				Debug.LogError(str + ((spawnedKey != null) ? spawnedKey.ToString() : null) + \uF1F8.\uE000(137869) + item.Id);
			}
			AudioClip itemClip = Singleton<GUISounds>.Instance.GetItemClip(item.ItemSound, EInventorySoundType.pickup);
			if (itemClip != null)
			{
				BetterSource source = MonoBehaviourSingleton<BetterAudio>.Instance.PlayAtPoint(this.Transform.position, itemClip, BetterAudio.AudioSourceGroupType.Collisions, 30, 1f, EOcclusionTest.None, null, !this.FirstPersonPointOfView, true);
				if (!this.FirstPersonPointOfView)
				{
					if (MonoBehaviourSingleton<SpatialAudioSystem>.Instantiated)
					{
						MonoBehaviourSingleton<SpatialAudioSystem>.Instance.ProcessSourceOcclusion(this, source, false);
					}
				}
			}
		}

		// Token: 0x06008CBB RID: 36027 RVA: 0x002D8174 File Offset: 0x002D6374
		public void ClearPlanting()
		{
			this.\uE001.ClearPlanting();
			this.\uE001.gameObject.SetActive(false);
		}

		// Token: 0x06008CBC RID: 36028 RVA: 0x002D8194 File Offset: 0x002D6394
		public TripwireVisualPlacer CreatePlantPlanner()
		{
			if (this.\uE001 == null)
			{
				GameObject gameObject = UnityEngine.Object.Instantiate<GameObject>(Resources.Load(\uF1F8.\uE000(137599)) as GameObject);
				gameObject.gameObject.SetActive(true);
				gameObject.name = \uF1F8.\uE000(137556);
				this.\uE001 = gameObject.GetComponent<TripwireVisualPlacer>();
			}
			this.\uE001.gameObject.SetActive(true);
			this.\uE001.transform.position = this.WeaponRoot.position;
			return this.\uE001;
		}

		// Token: 0x06008CBD RID: 36029 RVA: 0x002D823C File Offset: 0x002D643C
		public void InitFirstTripwirePoint()
		{
			this.\uE001.InitFirstPoint(this.InteractionRay);
		}

		// Token: 0x06008CBE RID: 36030 RVA: 0x002D8250 File Offset: 0x002D6450
		public GameObject CreateBeacon(Item item, Vector3 position)
		{
			if (this._beaconDummy == null)
			{
				GameObject original = Singleton<\uE90C>.Instance.CreateLootPrefab(item, ECameraType.Default, null);
				this._beaconDummy = UnityEngine.Object.Instantiate<GameObject>(original, position, Quaternion.identity);
				this._beaconDummy.gameObject.SetActive(true);
				this._beaconDummy.name = \uF1F8.\uE000(137536);
				AssetPoolObject component = this._beaconDummy.GetComponent<AssetPoolObject>();
				foreach (Collider collider in component.Colliders)
				{
					collider.enabled = false;
				}
				BoxCollider boxCollider = this._beaconDummy.AddComponent<BoxCollider>();
				boxCollider.enabled = false;
				component.RegisteredComponentsToClean.Add(boxCollider);
				this._beaconMaterialSetter = this._beaconDummy.AddComponent<PreviewMaterialSetter>();
				this._beaconMaterialSetter.SetAvailable(true);
				component.RegisteredComponentsToClean.Add(this._beaconMaterialSetter);
				this._beaconPlacer = this._beaconDummy.AddComponent<BeaconPlacer>();
			}
			return this._beaconDummy;
		}

		// Token: 0x06008CBF RID: 36031 RVA: 0x002D838C File Offset: 0x002D658C
		public void DestroyBeacon()
		{
			if (this._beaconDummy == null)
			{
				return;
			}
			UnityEngine.Object.Destroy(this._beaconDummy);
			this._beaconDummy = null;
			this._beaconMaterialSetter = null;
			this._beaconPlacer = null;
		}

		// Token: 0x06008CC0 RID: 36032 RVA: 0x002D83C4 File Offset: 0x002D65C4
		public void ClearHands()
		{
			if (this._spawnedKey == null)
			{
				return;
			}
			AssetPoolObject.ReturnToPool(this._spawnedKey, true);
			this._spawnedKey = null;
		}

		// Token: 0x06008CC1 RID: 36033 RVA: 0x002D83E8 File Offset: 0x002D65E8
		protected void RestoreIKPos()
		{
			if (this._stored)
			{
				ObjectInHandsAnimator handsAnimator = this.HandsAnimator;
				this._interactionLayerWeight = ((handsAnimator != null) ? handsAnimator.GetLayerWeight(this.HandsAnimator.LACTIONS_LAYER_INDEX) : 0f);
				this._rawWeight = ((this._rawWeight < this._interactionLayerWeight) ? this._interactionLayerWeight : Mathf.SmoothDamp(this._rawWeight, this._interactionLayerWeight, ref this._rawDampVelocity, 0.2f));
				if (this._rawWeight > 0.005f)
				{
					if (this._hasAnimatorPropBones && this._hasProp)
					{
						this._propBone.position = this._propRawPosition;
						this._propBone.rotation = this._propRawRotation;
					}
					this._markers[0].position = Vector3.Lerp(this._markers[0].position, this._lMarkerRawPosition, this._rawWeight);
					this._markers[0].rotation = Quaternion.Slerp(this._markers[0].rotation, this._lMarkerRawRotation, this._rawWeight);
					this._elbowBends[0].position = this._lElbowRawPosition;
				}
				this._stored = false;
			}
		}

		// Token: 0x06008CC2 RID: 36034 RVA: 0x002D8534 File Offset: 0x002D6734
		public void IkStoreRaw()
		{
			if (this._hasAnimatorPropBones && this._hasProp)
			{
				this._propRawPosition = this._propBone.position;
				this._propRawRotation = this._propBone.rotation;
			}
			if (this._markers[0] == null)
			{
				return;
			}
			this._lMarkerRawPosition = this._markers[0].position;
			this._lMarkerRawRotation = this._markers[0].rotation;
			if (this._elbowBends != null)
			{
				if (this._elbowBends.Length != 0)
				{
					this._lElbowRawPosition = this._elbowBends[0].position;
					this._rElbowRawPosition = this._elbowBends[1].position;
					this._stored = true;
					return;
				}
			}
		}

		// Token: 0x06008CC3 RID: 36035 RVA: 0x002D860C File Offset: 0x002D680C
		private void \uE014(float distance2Camera)
		{
			for (int i = 0; i < 2; i++)
			{
				if (!(this._markers[i] == null) && Math.Abs(this._limbs[i].solver.IKPositionWeight) >= 1E-45f)
				{
					if (this._ikTargets[i] != null && distance2Camera < 40f)
					{
						float value = Vector3.Distance(this._markers[i].position, this._gripReferences[i].position);
						float num = Mathf.InverseLerp(0.1f, 0f, value);
						this.HandPosers[i].GripWeight = num;
						this._ikPosition = Vector3.Lerp(this._markers[i].position, this._ikTargets[i].position, num);
						this._ikRotation = Quaternion.Lerp(this._markers[i].rotation, this._ikTargets[i].rotation, num);
					}
					else
					{
						this._ikPosition = this._markers[i].position;
						this._ikRotation = this._markers[i].rotation;
					}
					if (this.LeftHandInteractionTarget != null && i == 0)
					{
						this._ikPosition = Vector3.Lerp(this._ikPosition, this.LeftHandInteractionTarget.transform.position, this.ThirdIkWeight.Value);
						this._ikRotation = Quaternion.Slerp(this._ikRotation, this.LeftHandInteractionTarget.transform.rotation, this.ThirdIkWeight.Value);
					}
					this._limbs[i].solver.SetIKPosition(this._ikPosition);
					this._limbs[i].solver.SetIKRotation(this._ikRotation);
				}
			}
		}

		// Token: 0x06008CC4 RID: 36036 RVA: 0x002D87E8 File Offset: 0x002D69E8
		protected RuntimeAnimatorController CreateAnimatorController()
		{
			return Singleton<\uF1C4>.Instance.GetAsset(this.UsedSimplifiedSkeleton ? \uE71F.ZOMBIE_ANIMATOR_CONTROLLER : \uE71F.PLAYER_DEFAULT_ANIMATOR_CONTROLLER);
		}

		// Token: 0x06008CC5 RID: 36037 RVA: 0x002D8808 File Offset: 0x002D6A08
		private void \uE015()
		{
			if (this.Profile.Side != EPlayerSide.Savage)
			{
				return;
			}
			this._animators[0].SetLayerWeight(16, 0f);
			if (this.Profile.Info.Settings.Role == WildSpawnType.bossBoar)
			{
				this._animators[0].runtimeAnimatorController = Singleton<\uF1C4>.Instance.GetAsset(\uE71F.BOSS_KABAN_ANIMATOR_CONTROLLER);
				this._animators[0].SetLayerWeight(16, 1f);
				return;
			}
		}

		// Token: 0x06008CC6 RID: 36038 RVA: 0x002D8888 File Offset: 0x002D6A88
		private void \uE016()
		{
			if (!\uE2F9.Config.UseBodyFastAnimator && !\uE2F9.Config.UseSpiritPlayer && !this.UsedSimplifiedSkeleton)
			{
				this.\uE015();
			}
			if (this._animators[0].runtimeAnimatorController == null && !\uE2F9.Config.UseBodyFastAnimator)
			{
				RuntimeAnimatorController runtimeAnimatorController = this.CreateAnimatorController();
				this._animators[0].runtimeAnimatorController = runtimeAnimatorController;
			}
			if (\uE2F9.Config.UseSpiritPlayer)
			{
				bool useFastAnimator = this.Profile.Info.Settings.Role.ShallUseFastAnimator() && \uE2F9.Config.UseSpiritFastAnimator;
				this.Spirit.InitBodyAnimator(this._animators[0].updateMode, useFastAnimator);
			}
		}

		// Token: 0x06008CC7 RID: 36039 RVA: 0x002D8964 File Offset: 0x002D6B64
		protected virtual bool UpdateGrenadeAnimatorDuePoV()
		{
			return this.PointOfView == EPointOfView.ThirdPerson;
		}

		// Token: 0x06008CC8 RID: 36040 RVA: 0x002D8970 File Offset: 0x002D6B70
		public void SetEnvironment(string profileID, EnvironmentType environmentType)
		{
			if (profileID != this.ProfileId)
			{
				return;
			}
			this.Environment = environmentType;
		}

		// Token: 0x06008CC9 RID: 36041 RVA: 0x002D8988 File Offset: 0x002D6B88
		private void \uE017(float distance)
		{
			if (distance > 70f)
			{
				return;
			}
			if (this._markers[0] != null && this._vestMarker != null)
			{
				Player.FirearmController firearmController = this._handsController as Player.FirearmController;
				bool flag;
				if (firearmController == null || !firearmController.IsInReloadOperation())
				{
					if (!this._handsController.IsInventoryOpen())
					{
						flag = false;
						goto IL_62;
					}
				}
				flag = !this.IsSprintEnabled;
				IL_62:
				bool flag2 = flag;
				this._utilityLayerWeight = (flag2 ? Mathf.InverseLerp(this.UtilityLayerRange.x, this.UtilityLayerRange.y, Vector3.Distance(this._markers[0].position, this._vestMarker.position)) : Mathf.Lerp(this._utilityLayerWeight, 0f, Time.deltaTime * this.UtilityLayerLerpSpeed));
				this.BodyAnimatorCommon.SetLayerWeight(2, this._utilityLayerWeight);
				return;
			}
			this.BodyAnimatorCommon.SetLayerWeight(2, 0f);
		}

		// Token: 0x06008CCA RID: 36042 RVA: 0x002D8A90 File Offset: 0x002D6C90
		private void \uE018(float curveWeight)
		{
			if (this._elbowBends == null || this._elbowBends[0] == null)
			{
				return;
			}
			Quaternion rotation = Quaternion.Euler(0.65f * this.MovementContext.Pitch, this.MovementContext.Yaw, 0f);
			Vector3 b = rotation * this.ProceduralWeaponAnimation.TurnAway.RElbowShift;
			Vector3 b2 = rotation * this.ProceduralWeaponAnimation.TurnAway.LElbowShift;
			float num = curveWeight * this.\uE019(PlayerAnimator.ELBOW_LEFT_WEIGHT);
			if (num < 1f)
			{
				this.PlayerBones.BendGoals[0].position = Vector3.Lerp(this._elbowBends[0].position + b2, this.PlayerBones.BendGoals[0].position, num);
			}
			float num2 = curveWeight * this.\uE019(PlayerAnimator.ELBOW_RIGHT_WEIGHT);
			if (num2 < 1f)
			{
				this.PlayerBones.BendGoals[1].position = Vector3.Lerp(this._elbowBends[1].position + b, this.PlayerBones.BendGoals[1].position, num2);
			}
		}

		// Token: 0x06008CCB RID: 36043 RVA: 0x002D8BCC File Offset: 0x002D6DCC
		private float \uE019(int hash)
		{
			return Mathf.Min(this._animators[0].GetFloat(hash), 1f);
		}

		// Token: 0x06008CCC RID: 36044 RVA: 0x002D8BE8 File Offset: 0x002D6DE8
		private bool \uE01A()
		{
			foreach (KeyValuePair<EBoundItem, Item> keyValuePair in this.Inventory.FastAccess.BoundItems)
			{
				if (keyValuePair.Value is \uEE28)
				{
					return true;
				}
			}
			return false;
		}

		// Token: 0x06008CCD RID: 36045 RVA: 0x002D8C5C File Offset: 0x002D6E5C
		public void CreateCompass()
		{
			if (this._compassInstantiated || !this.\uE01A())
			{
				return;
			}
			Transform transform = Singleton<\uE90C>.Instance.CreateFromPool<Transform>(new ResourceKey
			{
				path = \uF1F8.\uE000(137548)
			});
			transform.SetParent(this.PlayerBones.Ribcage.Original, false);
			transform.localRotation = Quaternion.identity;
			transform.localPosition = Vector3.zero;
			this.\uE01B(transform.gameObject);
			this._compassInstantiated = true;
		}

		// Token: 0x06008CCE RID: 36046 RVA: 0x002D8CF0 File Offset: 0x002D6EF0
		private void \uE01B(GameObject obj)
		{
			this._hasProp = (obj != null);
			if (this._hasProp)
			{
				this._compassArrow = obj.GetComponentInChildren<CompassArrow>();
				this._compassArrow.NorthDirection = Singleton<LevelSettings>.Instance.NorthVector;
				this._compassArrow.enabled = true;
				this._propTransforms[0] = obj.transform;
				this._propTransforms[1] = obj.transform.FindTransform(\uF1F8.\uE000(137480));
				this._propTransforms[2] = obj.transform.FindTransform(\uF1F8.\uE000(137722));
				obj.SetActive(false);
				return;
			}
			this._propTransforms = new Transform[3];
			this._propActive = false;
			if (this._compassArrow)
			{
				this._compassArrow.enabled = false;
				this._compassArrow = null;
			}
		}

		// Token: 0x06008CCF RID: 36047 RVA: 0x002D8DE8 File Offset: 0x002D6FE8
		public void SetPropVisibility(bool isVisible)
		{
			if (this._playerBody != null && this.FirstPersonPointOfView)
			{
				Action<bool> onPropVisibility = this.OnPropVisibility;
				if (onPropVisibility != null)
				{
					onPropVisibility(isVisible);
				}
			}
			if (this._hasProp && this._hasAnimatorPropBones)
			{
				this._propTransforms[0].gameObject.SetActive(isVisible);
				this._propTransforms[0].transform.SetPositionAndRotation(this._animatorPropTransforms[0].position, this._animatorPropTransforms[0].rotation);
				this._compassArrow.enabled = isVisible;
				this._propActive = isVisible;
			}
		}

		// Token: 0x06008CD0 RID: 36048 RVA: 0x002D8EA0 File Offset: 0x002D70A0
		public void OnRadiolocationZoneEnter()
		{
			Debug.Log(this.Profile.Nickname + \uF1F8.\uE000(137700));
		}

		// Token: 0x06008CD1 RID: 36049 RVA: 0x002D8EC4 File Offset: 0x002D70C4
		public void OnRadiolocationZoneExit()
		{
			Debug.Log(this.Profile.Nickname + \uF1F8.\uE000(137678));
		}

		// Token: 0x06008CD2 RID: 36050 RVA: 0x002D8EE8 File Offset: 0x002D70E8
		protected virtual bool IsVisibleByCullingObject(float cullingDistance)
		{
			return true;
		}

		// Token: 0x06008CD3 RID: 36051 RVA: 0x002D8EEC File Offset: 0x002D70EC
		public virtual void SetAlertedFloat(float alertedFloat)
		{
			if (!this.UsedSimplifiedSkeleton)
			{
				return;
			}
			if (Mathf.Approximately(alertedFloat, 1f))
			{
				this.MovementContext.PlayerAnimatorEnableInert(false);
			}
			this.MovementContext.PlayerAnimator.SetAlert(Mathf.Approximately(alertedFloat, 1f));
			this.MovementContext.PlayerAnimator.SetAlertFloat(alertedFloat);
		}

		// Token: 0x06008CD4 RID: 36052 RVA: 0x002D8F50 File Offset: 0x002D7150
		public virtual void TriggerZombieLost()
		{
			if (!this.UsedSimplifiedSkeleton)
			{
				return;
			}
			this.MovementContext.PlayerAnimatorEnableInert(false);
			this.MovementContext.PlayerAnimator.TriggerIsLost();
		}

		// Token: 0x17001411 RID: 5137
		// (get) Token: 0x06008CD5 RID: 36053 RVA: 0x002D8F78 File Offset: 0x002D7178
		// (set) Token: 0x06008CD6 RID: 36054 RVA: 0x002D8F80 File Offset: 0x002D7180
		public EnvironmentType Environment { get; private set; }

		// Token: 0x17001412 RID: 5138
		// (get) Token: 0x06008CD7 RID: 36055 RVA: 0x002D8F8C File Offset: 0x002D718C
		protected virtual float LandingThreshold
		{
			get
			{
				return 0.3f;
			}
		}

		// Token: 0x17001413 RID: 5139
		// (get) Token: 0x06008CD8 RID: 36056 RVA: 0x002D8F94 File Offset: 0x002D7194
		private float \uE002
		{
			get
			{
				return Mathf.Sign(this.BodyAnimatorCommon.GetFloat(this._animatorFootstepCurveHash));
			}
		}

		// Token: 0x17001414 RID: 5140
		// (get) Token: 0x06008CD9 RID: 36057 RVA: 0x002D8FAC File Offset: 0x002D71AC
		// (set) Token: 0x06008CDA RID: 36058 RVA: 0x002D8FB4 File Offset: 0x002D71B4
		public AudioSource VoipAudioSource
		{
			get
			{
				return this._voipAudioSource;
			}
			set
			{
				this._voipAudioSource = value;
				Action voipSourceBinding = this._voipSourceBinding;
				if (voipSourceBinding != null)
				{
					voipSourceBinding();
				}
				this._voipSourceBinding = null;
				if (this._voipAudioSource == null)
				{
					return;
				}
				\uE9A6 settings = Singleton<\uE9A4>.Instance.Sound.Settings;
				this._voipSourceBinding = settings.VoipEnabled.Bind(new Action<bool>(this.\uE089));
			}
		}

		// Token: 0x17001415 RID: 5141
		// (get) Token: 0x06008CDB RID: 36059 RVA: 0x002D9024 File Offset: 0x002D7224
		protected virtual float MINStepSoundSpeedFactor
		{
			get
			{
				return 0.2f;
			}
		}

		// Token: 0x17001416 RID: 5142
		// (get) Token: 0x06008CDC RID: 36060 RVA: 0x002D902C File Offset: 0x002D722C
		public ETagStatus Fraction
		{
			get
			{
				if (this.Profile.Info.Side == EPlayerSide.Bear)
				{
					return ETagStatus.Bear;
				}
				if (this.Profile.Info.Side != EPlayerSide.Usec)
				{
					return ETagStatus.Scav;
				}
				return ETagStatus.Usec;
			}
		}

		// Token: 0x17001417 RID: 5143
		// (get) Token: 0x06008CDD RID: 36061 RVA: 0x002D9068 File Offset: 0x002D7268
		public float SinceLastStep
		{
			get
			{
				return Time.time - this._lastStepTime;
			}
		}

		// Token: 0x17001418 RID: 5144
		// (get) Token: 0x06008CDE RID: 36062 RVA: 0x002D9078 File Offset: 0x002D7278
		public virtual float ProtagonistHearing
		{
			get
			{
				return 1f;
			}
		}

		// Token: 0x17001419 RID: 5145
		// (get) Token: 0x06008CDF RID: 36063 RVA: 0x002D9080 File Offset: 0x002D7280
		protected virtual float Distance
		{
			get
			{
				if (this.DistanceDirty)
				{
					this._distance = (this.PointOfView.IsFirstPerson() ? 0f : \uF01E.Instance.Distance(this.Transform.position));
					this.DistanceDirty = false;
				}
				return this._distance;
			}
		}

		// Token: 0x1700141A RID: 5146
		// (get) Token: 0x06008CE0 RID: 36064 RVA: 0x002D90D8 File Offset: 0x002D72D8
		// (set) Token: 0x06008CE1 RID: 36065 RVA: 0x002D90FC File Offset: 0x002D72FC
		protected BetterSource SpeechSource
		{
			get
			{
				if (this._speechSource == null)
				{
					this.CreateSpeechSource();
				}
				return this._speechSource;
			}
			set
			{
				this._speechSource = value;
			}
		}

		// Token: 0x1700141B RID: 5147
		// (get) Token: 0x06008CE2 RID: 36066 RVA: 0x002D9108 File Offset: 0x002D7308
		public bool IsUnderRoof
		{
			get
			{
				if (!this._useSimpleUnderRoofCheck)
				{
					return !RainController.IsCameraUnderRain;
				}
				return this.Environment == EnvironmentType.Indoor;
			}
		}

		// Token: 0x1700141C RID: 5148
		// (get) Token: 0x06008CE3 RID: 36067 RVA: 0x002D9124 File Offset: 0x002D7324
		private float \uE003
		{
			get
			{
				return 1f - this.Skills.BotSoundCoef;
			}
		}

		// Token: 0x06008CE4 RID: 36068 RVA: 0x002D913C File Offset: 0x002D733C
		protected virtual void InitAudioController()
		{
			this.\uE01C();
			this.SetAudioProtagonist();
			this._sourcePrewarmer = new \uE40C();
			this.CompositeDisposable.AddDisposable(this.SearchController.SearchOperations.ItemsChanged.Bind(new Action(this.\uE02D)));
			this._stepLayerMask = \uE3CA.AudioControllerStepLayerMask;
			this._soundBySurface = new Dictionary<BaseBallistic.ESurfaceSound, SurfaceSet>();
			\uF1C4 instance = Singleton<\uF1C4>.Instance;
			this._hearingSettings = instance.GetAsset(\uF1F8.\uE000(118958), null);
			this._playerSounds = instance.GetAsset(\uF1F8.\uE000(134817), null);
			this._gearSoundBank = this._playerSounds.Gear;
			this._gearMediumSoundBank = this._playerSounds.GearMedium;
			this._gearFastSoundBank = this._playerSounds.GearFast;
			this._backpackDropBank = this._playerSounds.BackpackDrop;
			this._tinnitus = this._playerSounds.TinnitusSound;
			this.FaceshieldOn = this._playerSounds.FaceShieldOn;
			this.FaceshieldOff = this._playerSounds.FaceShieldOff;
			this.NightVisionOn = this._playerSounds.NightVisionOn;
			this.NightVisionOff = this._playerSounds.NightVisionOff;
			this.ThermalVisionOn = this._playerSounds.ThermalVisionOn;
			this.ThermalVisionOff = this._playerSounds.ThermalVisionOff;
			this.SwitchHeadlights = this._playerSounds.SwitchHeadlights;
			this.FractureSound = this._playerSounds.FractureSound;
			this._animatorFootstepCurveHash = this.BodyAnimatorCommon.StringToHash(\uF1F8.\uE000(168800));
			this.PropIn = (this._playerSounds.PropIn ? new BaseSoundPlayer.SoundElement
			{
				SoundClips = new AudioClip[]
				{
					this._playerSounds.PropIn
				},
				RollOff = 10
			} : null);
			this.PropOut = (this._playerSounds.PropOut ? new BaseSoundPlayer.SoundElement
			{
				SoundClips = new AudioClip[]
				{
					this._playerSounds.PropOut
				},
				RollOff = 10
			} : null);
			foreach (SurfaceSet surfaceSet in this._playerSounds.Sets)
			{
				if (!this._soundBySurface.ContainsKey(surfaceSet.Surface))
				{
					this._soundBySurface.Add(surfaceSet.Surface, surfaceSet);
				}
				else
				{
					Debug.LogError(surfaceSet.Surface.ToString() + \uF1F8.\uE000(137617));
				}
			}
			this._currentSet = this._soundBySurface[BaseBallistic.ESurfaceSound.Concrete];
			this.MovementContext.OnStateChanged += this.\uE035;
			MovementContext movementContext = this.MovementContext;
			movementContext.OnGrounded = (Action<float, float>)Delegate.Combine(movementContext.OnGrounded, new Action<float, float>(this.\uE005));
			this._healthController.ApplyDamageEvent += this.\uE048;
			this._healthController.DiedEvent += this.\uE034;
			this.InitAudioSources();
			this._idleCoroutine = base.StartCoroutine(this.\uE046(EPlayerState.Idle));
			this._exhaustionAudibilityUnsub = this.Physical.SubscribeToAudibleEffects(new Action(this.\uE024));
			GenericEventTranslator eventTranslator = this.EventTranslator;
			eventTranslator.OnSoundBankPlay = (Action<string>)Delegate.Combine(eventTranslator.OnSoundBankPlay, new Action<string>(this.PlaySoundBank));
			foreach (KeyValuePair<BaseBallistic.ESurfaceSound, SurfaceSet> keyValuePair in this._soundBySurface)
			{
				this._runSurfaceCheck = Math.Max(this._runSurfaceCheck, keyValuePair.Value.RunSoundBank.Rolloff);
				this._sprintSurfaceCheck = Math.Max(this._sprintSurfaceCheck, keyValuePair.Value.SprintSoundBank.Rolloff);
				this._landSurfaceCheck = Mathf.Max(this._landSurfaceCheck, keyValuePair.Value.LandingSoundBank.Rolloff);
				this._proneSurfaceCheck = Mathf.Max(this._proneSurfaceCheck, keyValuePair.Value.ProneSoundBank.Rolloff);
			}
			this.Speaker.OnRelease += this.OnSpeakerRelease;
			this.FaceShieldObserver.Changed.Bind(new Action(this.PlayFaceShieldSound));
			this.NightVisionObserver.Changed.Bind(new Action(this.PlayNightVisionSound));
			this.ThermalVisionObserver.Changed.Bind(new Action(this.PlayThermalVisionSound));
			this.Muffled = false;
			if (this.FaceShieldObserver.Component != null)
			{
				this.\uE026();
			}
			if (this.FaceCoverObserver.Component != null)
			{
				this.\uE027();
			}
			this.\uE01D();
			this.CreateGearSource();
			this.\uE029();
			PlayerMountingPointData playerMountingPointData = this.MovementContext.PlayerMountingPointData;
			playerMountingPointData.OnEnterMountedState = (Action<float>)Delegate.Combine(playerMountingPointData.OnEnterMountedState, new Action<float>(this.\uE04B));
			PlayerMountingPointData playerMountingPointData2 = this.MovementContext.PlayerMountingPointData;
			playerMountingPointData2.OnExitMountedState = (Action<float>)Delegate.Combine(playerMountingPointData2.OnExitMountedState, new Action<float>(this.\uE04C));
			this.\uE02A();
			this._priorityCalculator = new \uE53A(200, 128, 64);
		}

		// Token: 0x06008CE5 RID: 36069 RVA: 0x002D96B8 File Offset: 0x002D78B8
		private void \uE01C()
		{
			\uE714 instance = Singleton<\uE714>.Instance;
			if (instance != null)
			{
				this._playerAudioSettings = instance.AudioSettings.PlayerSettings;
			}
		}

		// Token: 0x06008CE6 RID: 36070 RVA: 0x002D96E8 File Offset: 0x002D78E8
		private void \uE01D()
		{
			\uE3A0.OnInitialized -= this.\uE01E;
			if (\uE3A0.Controller != null)
			{
				this.\uE01E(\uE3A0.Controller);
				return;
			}
			Debug.Log(\uF1F8.\uE000(137328));
			\uE3A0.OnInitialized += this.\uE01E;
		}

		// Token: 0x06008CE7 RID: 36071 RVA: 0x002D9740 File Offset: 0x002D7940
		private void \uE01E(\uE39F controller)
		{
			\uE3A0.OnInitialized -= this.\uE01E;
			this.\uE01F(controller.Status);
			controller.StatusChangedEvent += this.\uE01F;
		}

		// Token: 0x06008CE8 RID: 36072 RVA: 0x002D9774 File Offset: 0x002D7974
		private void \uE01F(ESeasonStatus seasonStatus)
		{
			SurfaceSet surfaceSet;
			if (!this._playerSounds.TryGetSeasonMovementSet(seasonStatus, out surfaceSet))
			{
				Debug.Log(string.Format(\uF1F8.\uE000(137294), seasonStatus));
				return;
			}
			if (MonoBehaviourSingleton<AmbientAudioSystem>.Instantiated)
			{
				this._useSimpleUnderRoofCheck = MonoBehaviourSingleton<AmbientAudioSystem>.Instance.UseSimpleUnderRoofCheck;
			}
			else
			{
				Debug.LogWarning(\uF1F8.\uE000(137240));
			}
			bool useOcclusion = this.PointOfView == EPointOfView.ThirdPerson && this is LocalPlayer;
			this._specificStepAudioController = new \uE553(surfaceSet, this, 0.1f, useOcclusion);
			this.\uE023();
		}

		// Token: 0x06008CE9 RID: 36073 RVA: 0x002D9814 File Offset: 0x002D7A14
		public void InitVaultingAudioControllers(IVaultingParameters vaultingParams)
		{
			IPlayerAnimatorEvents playerAnimatorEvents = this.MovementContext.PlayerAnimator.EventsDispatcher.PlayerAnimatorEvents;
			BetterSource source = MonoBehaviourSingleton<BetterAudio>.Instance.GetSource(BetterAudio.AudioSourceGroupType.Character, true);
			Sounds asset = Singleton<\uF1C4>.Instance.GetAsset(\uF1F8.\uE000(134817), null);
			source.SetParent(this.Transform.Original, false);
			source.LocalPosition = new Vector3(0f, 0.1f, 0f);
			source.SetMixerGroup(Singleton<BetterAudio>.Instance.ClientPlayerMovementMixer);
			this.\uE02C(source);
			this._vaultAudioController = new \uEB58(asset, source, playerAnimatorEvents.VaultingSoundsEvents, vaultingParams, this, EVaultingSoundType.Vault);
			this._sprintVaultAudioController = new \uEB58(asset, source, playerAnimatorEvents.SprintVaultSoundsEvents, vaultingParams, this, EVaultingSoundType.SprintVault);
			this._climbAudioController = new \uEB58(asset, source, playerAnimatorEvents.ClimbSoundsEvents, vaultingParams, this, EVaultingSoundType.Climb);
		}

		// Token: 0x06008CEA RID: 36074 RVA: 0x002D98F4 File Offset: 0x002D7AF4
		private void \uE020()
		{
			\uEB57 vaultAudioController = this._vaultAudioController;
			if (vaultAudioController != null)
			{
				vaultAudioController.Dispose();
			}
			\uEB57 sprintVaultAudioController = this._sprintVaultAudioController;
			if (sprintVaultAudioController != null)
			{
				sprintVaultAudioController.Dispose();
			}
			\uEB57 climbAudioController = this._climbAudioController;
			if (climbAudioController == null)
			{
				return;
			}
			climbAudioController.Dispose();
		}

		// Token: 0x06008CEB RID: 36075 RVA: 0x002D9928 File Offset: 0x002D7B28
		public void PlayTripwireInteractionSound(float plantTime, bool hasMultiTool)
		{
			this._tripwireInteractionSoundController.PlayInteractionSound(hasMultiTool);
			this.SendTripwireInteractionSoundState(EInteractionStatus.Started, true, hasMultiTool);
		}

		// Token: 0x06008CEC RID: 36076 RVA: 0x002D9940 File Offset: 0x002D7B40
		public void StopTripwireInteractionSound(bool isSuccess, bool hasMultiTool)
		{
			this._tripwireInteractionSoundController.StopInteractionSound(isSuccess, hasMultiTool);
			this.SendTripwireInteractionSoundState(EInteractionStatus.Finished, isSuccess, hasMultiTool);
		}

		// Token: 0x06008CED RID: 36077 RVA: 0x002D9958 File Offset: 0x002D7B58
		protected virtual void PlayToggleSound(ref bool previousState, bool isOn, AudioClip toggleOn, AudioClip toggleOff)
		{
			if (previousState != isOn)
			{
				Singleton<BetterAudio>.Instance.PlayAtPoint(this.Transform.Original.position + this.SpeechLocalPosition, isOn ? toggleOn : toggleOff, this.Distance, BetterAudio.AudioSourceGroupType.Character, 5, 1f, EOcclusionTest.None, null, false);
			}
			previousState = isOn;
		}

		// Token: 0x06008CEE RID: 36078 RVA: 0x002D99B4 File Offset: 0x002D7BB4
		public void PlayTacticalSound()
		{
			Singleton<BetterAudio>.Instance.PlayAtPoint(this.Transform.Original.position + this.SpeechLocalPosition, this.SwitchHeadlights, this.Distance, BetterAudio.AudioSourceGroupType.Character, 5, 1f, EOcclusionTest.None, null, false);
		}

		// Token: 0x06008CEF RID: 36079 RVA: 0x002D9A00 File Offset: 0x002D7C00
		public void PlayFaceShieldSound()
		{
			FaceShieldComponent component = this.FaceShieldObserver.Component;
			bool isOn = component != null && (component.Togglable == null || component.Togglable.On);
			this.PlayToggleSound(ref this.PreviousFaceShield, isOn, this.FaceshieldOn, this.FaceshieldOff);
		}

		// Token: 0x06008CF0 RID: 36080 RVA: 0x002D9A60 File Offset: 0x002D7C60
		public void PlayNightVisionSound()
		{
			NightVisionComponent component = this.NightVisionObserver.Component;
			bool isOn = component != null && (component.Togglable == null || component.Togglable.On);
			this.PlayToggleSound(ref this.PreviousNightVision, isOn, this.NightVisionOn, this.NightVisionOff);
		}

		// Token: 0x06008CF1 RID: 36081 RVA: 0x002D9AC0 File Offset: 0x002D7CC0
		public void PlayThermalVisionSound()
		{
			ThermalVisionComponent component = this.ThermalVisionObserver.Component;
			bool isOn = component != null && (component.Togglable == null || component.Togglable.On);
			this.PlayToggleSound(ref this.PreviousThermalVision, isOn, this.ThermalVisionOn, this.ThermalVisionOff);
		}

		// Token: 0x06008CF2 RID: 36082 RVA: 0x002D9B20 File Offset: 0x002D7D20
		public virtual void SetAudioProtagonist()
		{
		}

		// Token: 0x06008CF3 RID: 36083 RVA: 0x002D9B24 File Offset: 0x002D7D24
		public void AddVolume(BetterPropagationVolume volume)
		{
			this._soundPropagationVolumes.Add(volume);
			if (volume.MutuallyExclusive)
			{
				this._mutuallyExclusive = volume;
			}
		}

		// Token: 0x06008CF4 RID: 36084 RVA: 0x002D9B4C File Offset: 0x002D7D4C
		public void RemoveVolume(BetterPropagationVolume volume)
		{
			int num = this._soundPropagationVolumes.IndexOf(volume);
			if (num >= 0)
			{
				this._soundPropagationVolumes.RemoveAt(num);
			}
			this._mutuallyExclusive = Enumerable.FirstOrDefault<BetterPropagationVolume>(this._soundPropagationVolumes, new Func<BetterPropagationVolume, bool>(Player.<>c.<>9.\uE006));
		}

		// Token: 0x06008CF5 RID: 36085 RVA: 0x002D9BAC File Offset: 0x002D7DAC
		public List<BetterPropagationVolume> GetPropagationVolume()
		{
			this._volumesBuffer.Clear();
			if (this._mutuallyExclusive != null)
			{
				this._volumesBuffer.Add(this._mutuallyExclusive);
			}
			else
			{
				this._volumesBuffer.AddRange(this._soundPropagationVolumes);
			}
			return this._volumesBuffer;
		}

		// Token: 0x06008CF6 RID: 36086 RVA: 0x002D9C04 File Offset: 0x002D7E04
		public void ToggleMuteSpeechSource(bool muteSpeech)
		{
			this.SpeechSource.source1.mute = muteSpeech;
		}

		// Token: 0x06008CF7 RID: 36087 RVA: 0x002D9C18 File Offset: 0x002D7E18
		public void PlaySpeechFromTime(TaggedClip clip, float time)
		{
			this.\uE042(this.SpeechSource, (float)clip.Falloff);
			if (this.\uE022(this.SpeechSource.MaxDistance))
			{
				return;
			}
			this.UpdateMuffledState();
			this.SpeechSource.gameObject.SetActive(true);
			this.\uE02C(this.SpeechSource);
			this.SpeechSource.source1.spatialBlend = (this.PointOfView.IsFirstPerson() ? 0f : 1f);
			this._speechSource.HrtfIntensity = (this.PointOfView.IsFirstPerson() ? 0f : 1f);
			this._speechSource.DirectivityIntensity = (this.PointOfView.IsFirstPerson() ? 0f : 0.5f);
			this.SpeechSource.source1.time = time;
			float volume = clip.Volume;
			this.SpeechSource.Play(clip.Clip, null, 1f, volume, this.PointOfView.IsFirstPerson(), false);
		}

		// Token: 0x06008CF8 RID: 36088 RVA: 0x002D9D40 File Offset: 0x002D7F40
		private void \uE021(TaggedClip clip)
		{
			this.PlaySpeechFromTime(clip, 0f);
		}

		// Token: 0x06008CF9 RID: 36089 RVA: 0x002D9D50 File Offset: 0x002D7F50
		public virtual void UpdateMuffledState()
		{
			if (!this.OcclusionDirty || !MonoBehaviourSingleton<BetterAudio>.Instantiated)
			{
				return;
			}
			this.OcclusionDirty = false;
			BetterAudio instance = MonoBehaviourSingleton<BetterAudio>.Instance;
			AudioMixerGroup mixerGroup = (this.PointOfView == EPointOfView.FirstPerson) ? instance.ClientPlayerSpeechMixer : instance.ObservedPlayerSpeechMixer;
			if (this.PointOfView == EPointOfView.ThirdPerson)
			{
				if (this.Muffled)
				{
					mixerGroup = instance.SimpleOccludedMixerGroup;
				}
			}
			else
			{
				mixerGroup = (this.Muffled ? instance.SelfSpeechReverb : instance.ClientPlayerSpeechMixer);
			}
			this.SpeechSource.SetMixerGroup(mixerGroup);
		}

		// Token: 0x06008CFA RID: 36090 RVA: 0x002D9DE8 File Offset: 0x002D7FE8
		protected virtual bool CheckSurface(float range)
		{
			if (this.\uE022(range))
			{
				return false;
			}
			ValueTuple<bool, BaseBallistic.ESurfaceSound> valueTuple = this.\uE049();
			bool item = valueTuple.Item1;
			BaseBallistic.ESurfaceSound item2 = valueTuple.Item2;
			this.\uE04A(item, item2);
			if (this.Environment == EnvironmentType.Outdoor)
			{
				this.\uE023();
			}
			return true;
		}

		// Token: 0x06008CFB RID: 36091 RVA: 0x002D9E38 File Offset: 0x002D8038
		private bool \uE022(float spreadRange)
		{
			if (this.FirstPersonPointOfView)
			{
				return false;
			}
			float maxDistance = spreadRange * this.ProtagonistHearing + this.CHECK_RANGE_BUFF;
			return !\uE939.IsInRange(this.Position, maxDistance);
		}

		// Token: 0x06008CFC RID: 36092 RVA: 0x002D9E74 File Offset: 0x002D8074
		private void \uE023()
		{
			this._specificStepAudioController.UpdateUnderRoofStatus(this.IsUnderRoof);
			this.SendUnderRoofStatus(this.IsUnderRoof);
		}

		// Token: 0x06008CFD RID: 36093 RVA: 0x002D9E94 File Offset: 0x002D8094
		private void \uE024()
		{
			bool breathIsAudible = this.Physical.BreathIsAudible;
			if (breathIsAudible == this._exhaustionIsAudible)
			{
				return;
			}
			this._exhaustionIsAudible = breathIsAudible;
			this.HeavyBreath = false;
			this.UpdateBreathStatus();
		}

		// Token: 0x06008CFE RID: 36094 RVA: 0x002D9ED4 File Offset: 0x002D80D4
		protected virtual void UpdateBreathStatus()
		{
			ETagStatus healthStatus = this.HealthStatus;
			bool flag;
			if (healthStatus != ETagStatus.BadlyInjured)
			{
				if (healthStatus != ETagStatus.Dying)
				{
					flag = false;
					goto IL_30;
				}
			}
			flag = (this.HealthController.FindActiveEffect<\uED50>(EBodyPart.Common) == null);
			IL_30:
			bool flag2 = flag;
			bool flag3 = flag2 || this._exhaustionIsAudible || this.Muffled;
			if (!this.HeavyBreath && flag3)
			{
				ETagStatus etagStatus = flag2 ? healthStatus : ETagStatus.Healthy;
				ETagStatus etagStatus2 = this._exhaustionIsAudible ? ETagStatus.Aware : ETagStatus.Unaware;
				if (etagStatus == ETagStatus.Healthy)
				{
					if (etagStatus2 == ETagStatus.Unaware)
					{
						this.Speaker.Play(EPhraseTrigger.OnBreath, etagStatus | etagStatus2, true, new int?(-1));
						goto IL_CD;
					}
				}
				this.Speaker.Play(EPhraseTrigger.OnBreath, etagStatus | etagStatus2, true, null);
			}
			IL_CD:
			this.HeavyBreath = flag3;
		}

		// Token: 0x06008CFF RID: 36095 RVA: 0x002D9FB8 File Offset: 0x002D81B8
		protected void OnSpeakerRelease(bool force)
		{
			this.HeavyBreath = false;
			if (this._healthController.IsAlive)
			{
				this.UpdateBreathStatus();
			}
			if (this.HeavyBreath)
			{
				if (!force)
				{
					return;
				}
			}
			this.\uE025();
		}

		// Token: 0x06008D00 RID: 36096 RVA: 0x002D9FF4 File Offset: 0x002D81F4
		private void \uE025()
		{
			if (this._speechSource == null)
			{
				return;
			}
			this._speechSource.SetParent(null, true);
			this._speechSource.Release();
			this._speechSource = null;
		}

		// Token: 0x06008D01 RID: 36097 RVA: 0x002DA02C File Offset: 0x002D822C
		private void \uE026()
		{
			FaceShieldComponent component = this.FaceShieldObserver.Component;
			this.\uE028(component, EquipmentSlot.Headwear);
		}

		// Token: 0x06008D02 RID: 36098 RVA: 0x002DA050 File Offset: 0x002D8250
		private void \uE027()
		{
			FaceShieldComponent component = this.FaceCoverObserver.Component;
			this.\uE028(component, EquipmentSlot.FaceCover);
		}

		// Token: 0x06008D03 RID: 36099 RVA: 0x002DA074 File Offset: 0x002D8274
		private void \uE028(FaceShieldComponent fs, EquipmentSlot equipmentSlot)
		{
			this.Muffled = false;
			bool flag = false;
			bool flag2 = fs != null && (fs.Togglable == null || fs.Togglable.On);
			if (flag2)
			{
				CompoundItem compoundItem = this.Equipment.GetSlot(equipmentSlot).ContainedItem as CompoundItem;
				bool flag3;
				if (compoundItem != null)
				{
					flag3 = Enumerable.Contains<EBodyPartColliderType>(Enumerable.SelectMany<CompositeArmorComponent, EBodyPartColliderType>(compoundItem.GetItemComponentsInChildren(true), new Func<CompositeArmorComponent, IEnumerable<EBodyPartColliderType>>(Player.<>c.<>9.\uE007)), EBodyPartColliderType.Jaw);
				}
				else
				{
					flag3 = false;
				}
				flag = flag3;
			}
			this.Muffled = (flag2 && flag);
			if (this.FirstPersonPointOfView)
			{
				this.UpdateBreathStatus();
				if (!flag2 && this.Speaker != null && !this.HeavyBreath)
				{
					if (this.Speaker.Importance == 0)
					{
						this.Speaker.Shut();
					}
				}
			}
			this.UpdateMuffledState();
			this.SendVoiceMuffledState(this.Muffled);
		}

		// Token: 0x06008D04 RID: 36100 RVA: 0x002DA178 File Offset: 0x002D8378
		protected virtual void SendVoiceMuffledState(bool isMuffled)
		{
		}

		// Token: 0x06008D05 RID: 36101 RVA: 0x002DA17C File Offset: 0x002D837C
		protected virtual void InitAudioSources()
		{
			this.CreateNestedSource();
		}

		// Token: 0x06008D06 RID: 36102 RVA: 0x002DA184 File Offset: 0x002D8384
		protected virtual void CreateNestedSource()
		{
			BetterAudio instance = MonoBehaviourSingleton<BetterAudio>.Instance;
			this.NestedStepSoundSource = instance.GetSource(BetterAudio.AudioSourceGroupType.Character, true);
			if (this.NestedStepSoundSource == null)
			{
				return;
			}
			bool flag = this.PointOfView == EPointOfView.FirstPerson;
			this.NestedStepSoundSource.SetMixerGroup(flag ? instance.ClientPlayerMovementMixer : instance.ObservedPlayerMovementMixer);
			if (!flag && MonoBehaviourSingleton<SpatialAudioSystem>.Instantiated)
			{
				MonoBehaviourSingleton<SpatialAudioSystem>.Instance.ProcessSourceOcclusion(this, this.NestedStepSoundSource, this.\uE04E());
			}
			this.NestedStepSoundSource.EnableSpatialization = !flag;
			this.NestedStepSoundSource.HrtfIntensity = (flag ? 0f : 1f);
			this.NestedStepSoundSource.SetParent(this.Transform.Original, false);
			this.NestedStepSoundSource.LocalPosition = new Vector3(0f, 0.1f, 0f);
			this.\uE040(EAudioMovementState.Run, false);
			this.\uE02C(this.NestedStepSoundSource);
		}

		// Token: 0x06008D07 RID: 36103 RVA: 0x002DA288 File Offset: 0x002D8488
		protected virtual void CreateSpeechSource()
		{
			BetterAudio instance = MonoBehaviourSingleton<BetterAudio>.Instance;
			this._speechSource = instance.GetSource(BetterAudio.AudioSourceGroupType.Speech, false);
			if (this._speechSource == null)
			{
				return;
			}
			bool flag = this.PointOfView == EPointOfView.FirstPerson;
			this._speechSource.SetMixerGroup(flag ? instance.ClientPlayerSpeechMixer : instance.ObservedPlayerSpeechMixer);
			if (!flag && MonoBehaviourSingleton<SpatialAudioSystem>.Instantiated)
			{
				MonoBehaviourSingleton<SpatialAudioSystem>.Instance.ProcessSourceOcclusion(this, this._speechSource, this.\uE04E());
			}
			if (flag)
			{
				this._speechSource.ReverbSendDB = this._speechSource.AcousticSettings.reverbSendDb + 3f;
			}
			this._speechSource.EnableSpatialization = !flag;
			this._speechSource.SetParent(this.PlayerBones.Head.Original, false);
			this._speechSource.LocalPosition = this.PlayerBones.Head.localPosition;
			this._speechSource.transform.rotation = this.PlayerBones.Head.localRotation;
			this.\uE02C(this._speechSource);
		}

		// Token: 0x06008D08 RID: 36104 RVA: 0x002DA3B4 File Offset: 0x002D85B4
		protected void CreateGearSource()
		{
			if (this._gearSource != null)
			{
				return;
			}
			BetterAudio instance = MonoBehaviourSingleton<BetterAudio>.Instance;
			this._gearSource = instance.GetSource(BetterAudio.AudioSourceGroupType.Character, false);
			bool flag = this.PointOfView == EPointOfView.FirstPerson;
			if (!flag && MonoBehaviourSingleton<SpatialAudioSystem>.Instantiated)
			{
				MonoBehaviourSingleton<SpatialAudioSystem>.Instance.ProcessSourceOcclusion(this, this._gearSource, this.\uE04E());
			}
			this._gearSource.SetBaseVolume(flag ? 0.85f : 1f);
			this._gearSource.HrtfIntensity = (flag ? 0f : 1f);
			this._gearSource.EnableSpatialization = !flag;
			this._gearSource.SetParent(this.Transform.Original, false);
			this._gearSource.LocalPosition = new Vector3(0f, 0.1f, 0f);
			this._gearSource.SetMixerGroup(flag ? instance.ClientPlayerMovementMixer : instance.ObservedPlayerMovementMixer);
		}

		// Token: 0x06008D09 RID: 36105 RVA: 0x002DA4C0 File Offset: 0x002D86C0
		private void \uE029()
		{
			this._tripwireInteractionSoundController = new \uEACB(this);
		}

		// Token: 0x06008D0A RID: 36106 RVA: 0x002DA4D0 File Offset: 0x002D86D0
		private void \uE02A()
		{
			IPlayerAnimatorEvents playerAnimatorEvents = this.MovementContext.PlayerAnimator.EventsDispatcher.PlayerAnimatorEvents;
			this._dropBackPackEvents = playerAnimatorEvents.DropBackpackEvents;
			this._dropBackPackEvents.OnBackpackDropEvent += this.\uE04D;
		}

		// Token: 0x06008D0B RID: 36107 RVA: 0x002DA51C File Offset: 0x002D871C
		private void \uE02B(BetterSource source)
		{
			if (this.PointOfView.IsFirstPerson())
			{
				return;
			}
			this._sourcePrewarmer.ProcessPlayPrewarmSound(source, this.Distance);
		}

		// Token: 0x06008D0C RID: 36108 RVA: 0x002DA540 File Offset: 0x002D8740
		private void \uE02C(BetterSource source)
		{
			if (this.PointOfView.IsFirstPerson())
			{
				return;
			}
			this._sourcePrewarmer.PlayPrewarmSound(source);
		}

		// Token: 0x06008D0D RID: 36109 RVA: 0x002DA55C File Offset: 0x002D875C
		public IEnumerator SupportAudioSourceCoroutine()
		{
			for (;;)
			{
				int num2;
				int num = num2;
				if (num != 0)
				{
					if (num != 1)
					{
						break;
					}
				}
				if (this._searchCount <= 0f)
				{
					goto IL_E1;
				}
				if (!this._healthController.IsAlive)
				{
					goto Block_6;
				}
				if (\uF01E.Instance.Distance(this.Transform.position) <= 14f)
				{
					float num3 = 0.85f;
					BetterSource betterSource = this.\uE02E(this._lastClip);
					AudioMixerGroup observedPlayerMovementMixer = MonoBehaviourSingleton<BetterAudio>.Instance.ObservedPlayerMovementMixer;
					betterSource.SetMixerGroup(observedPlayerMovementMixer);
					betterSource.SetBaseVolume(num3);
					if (!betterSource.source1.isPlaying)
					{
						betterSource.gameObject.SetActive(true);
						betterSource.Play(betterSource.GetClip(0), null, 1f, num3, true, false);
					}
				}
				else
				{
					this.\uE02F();
				}
				yield return new WaitForSeconds(0.5f);
			}
			yield break;
			IL_E1:
			Block_6:
			this.\uE02F();
			yield break;
		}

		// Token: 0x06008D0E RID: 36110 RVA: 0x002DA56C File Offset: 0x002D876C
		private void \uE02D()
		{
			this._searchCount = (float)Enumerable.Count<SearchContentOperation>(this.SearchController.SearchOperations);
			if (this._searchCount > 0f)
			{
				if (this._currentSourceCoroutine != null)
				{
					base.StopCoroutine(this._currentSourceCoroutine);
				}
				AudioClip lootingClip;
				try
				{
					string searchSound = Enumerable.Last<SearchContentOperation>(this.SearchController.SearchOperations).Item.SearchSound;
					lootingClip = Singleton<GUISounds>.Instance.GetLootingClip(searchSound);
				}
				catch (Exception)
				{
					\uF1BE<SearchContentOperation> searchOperations = this.SearchController.SearchOperations;
					\uEEA4 uEEA = Enumerable.Any<SearchContentOperation>(searchOperations) ? Enumerable.Last<SearchContentOperation>(searchOperations).Item : null;
					string text = (uEEA != null) ? uEEA.SearchSound : null;
					string text2 = (uEEA != null) ? uEEA.ShortName : null;
					Debug.LogError(string.Format(\uF1F8.\uE000(137415), new object[]
					{
						Enumerable.Count<SearchContentOperation>(searchOperations),
						uEEA == null,
						text,
						text2
					}));
					return;
				}
				if (lootingClip == null)
				{
					return;
				}
				BetterSource betterSource = this.\uE02E(lootingClip);
				try
				{
					betterSource.Loop = true;
					betterSource.Position = this.MovementContext.PlayerColliderCenter + this.MovementContext.TransformForwardVector / 4f;
					this.\uE042(betterSource, 14f);
				}
				catch (Exception)
				{
					Debug.LogError(string.Format(\uF1F8.\uE000(137357), betterSource == null, this.MovementContext == null));
					return;
				}
				this._currentSourceCoroutine = base.StartCoroutine(this.SupportAudioSourceCoroutine());
				this._lastClip = lootingClip;
				return;
			}
			else
			{
				this.\uE02F();
				if (this._currentSourceCoroutine != null)
				{
					base.StopCoroutine(this._currentSourceCoroutine);
					this._currentSourceCoroutine = null;
				}
			}
		}

		// Token: 0x06008D0F RID: 36111 RVA: 0x002DA76C File Offset: 0x002D896C
		private BetterSource \uE02E(AudioClip clip)
		{
			if (this._searchSource == null)
			{
				this._searchSource = MonoBehaviourSingleton<BetterAudio>.Instance.GetSource(BetterAudio.AudioSourceGroupType.Environment, false);
				if (this._searchSource != null)
				{
					if (this.PointOfView == EPointOfView.ThirdPerson && MonoBehaviourSingleton<SpatialAudioSystem>.Instantiated)
					{
						MonoBehaviourSingleton<SpatialAudioSystem>.Instance.ProcessSourceOcclusion(this, this._searchSource, this.\uE04E());
					}
					this.\uE02C(this._searchSource);
					this._searchSource.EnableSpatialization = (this.PointOfView == EPointOfView.ThirdPerson);
					this._searchSource.source1.clip = clip;
				}
			}
			return this._searchSource;
		}

		// Token: 0x06008D10 RID: 36112 RVA: 0x002DA820 File Offset: 0x002D8A20
		private void \uE02F()
		{
			if (this._searchSource == null)
			{
				return;
			}
			this._searchSource.Stop(0f);
			this._searchSource.Release();
			this._searchSource = null;
		}

		// Token: 0x06008D11 RID: 36113 RVA: 0x002DA85C File Offset: 0x002D8A5C
		public void PlayInteractionSound(AudioClip clip, float volume = 1f, bool loop = true, bool stereo = true)
		{
			if (!this.PointOfView.IsFirstPerson())
			{
				return;
			}
			this.StopInteractionSound(0f);
			this._interactionSource = MonoBehaviourSingleton<BetterAudio>.Instance.GetSource(BetterAudio.AudioSourceGroupType.Nonspatial, true);
			this._interactionSource.Position = this.Position;
			this._interactionSource.Loop = loop;
			this._interactionSource.source1.clip = clip;
			this._interactionSource.SetBaseVolume(volume);
			this._interactionSource.EnableStereo(stereo);
			this._interactionSource.Play(clip, null, 1f, volume, stereo, false);
		}

		// Token: 0x06008D12 RID: 36114 RVA: 0x002DA904 File Offset: 0x002D8B04
		public void StopInteractionSound(float fadeTime = 0f)
		{
			if (this._interactionSource == null)
			{
				return;
			}
			if (fadeTime > 0f)
			{
				if (this.PointOfView.IsFirstPerson())
				{
					this._interactionSource.VolumeFadeOut(fadeTime, new Action(this.\uE08A));
					return;
				}
			}
			this.\uE08A();
		}

		// Token: 0x06008D13 RID: 36115 RVA: 0x002DA960 File Offset: 0x002D8B60
		protected virtual void PlayGroundedSound(float fallHeight, float jumpHeight)
		{
			if (Time.realtimeSinceStartup < this._nextJumpAfter)
			{
				return;
			}
			if (!this.\uE030())
			{
				return;
			}
			float num = fallHeight;
			if (!this.\uE031())
			{
				num = Mathf.Max(fallHeight, jumpHeight);
			}
			if (num > this.LandingThreshold && this.CheckSurface(this._landSurfaceCheck))
			{
				this.\uE02B(this.NestedStepSoundSource);
				float volume = Mathf.InverseLerp(0.1f, this.LandingThreshold * 2.5f, num);
				this.DefaultPlay(this._currentSet.LandingSoundBank, volume, EAudioMovementState.Land);
				this._nextJumpAfter = Time.realtimeSinceStartup + 0.5f;
			}
		}

		// Token: 0x06008D14 RID: 36116 RVA: 0x002DAA0C File Offset: 0x002D8C0C
		private bool \uE030()
		{
			BaseMovementState previousState = this.MovementContext.PreviousState;
			EPlayerState eplayerState = (previousState != null) ? previousState.Name : EPlayerState.None;
			BaseMovementState currentState = this.MovementContext.CurrentState;
			EPlayerState eplayerState2 = (currentState != null) ? currentState.Name : EPlayerState.None;
			if (eplayerState2 != EPlayerState.Run)
			{
				if (eplayerState2 != EPlayerState.Sprint)
				{
					if (eplayerState != EPlayerState.ClimbUp)
					{
						if (eplayerState2 != EPlayerState.ClimbUp)
						{
							return eplayerState != EPlayerState.VaultingLanding;
						}
					}
					return false;
				}
			}
			return true;
		}

		// Token: 0x06008D15 RID: 36117 RVA: 0x002DAA80 File Offset: 0x002D8C80
		private bool \uE031()
		{
			BaseMovementState previousState = this.MovementContext.PreviousState;
			return ((previousState != null) ? previousState.Name : EPlayerState.None) == EPlayerState.ClimbUp;
		}

		// Token: 0x06008D16 RID: 36118 RVA: 0x002DAAA0 File Offset: 0x002D8CA0
		private void \uE032()
		{
			if (this.NestedStepSoundSource != null && !this._enqueuedForRelease)
			{
				this.NestedStepSoundSource.SetParent(null, true);
				this._enqueuedForRelease = true;
				this.NestedStepSoundSource.WaitSeconds(1f, new Action(this.\uE08B));
			}
			Action exhaustionAudibilityUnsub = this._exhaustionAudibilityUnsub;
			if (exhaustionAudibilityUnsub != null)
			{
				exhaustionAudibilityUnsub();
			}
			this._exhaustionAudibilityUnsub = null;
			this._specificStepAudioController.Dispose();
		}

		// Token: 0x06008D17 RID: 36119 RVA: 0x002DAB2C File Offset: 0x002D8D2C
		private void \uE033()
		{
			if (this._gearSource != null)
			{
				this._gearSource.SetParent(null, true);
				this._gearSource.Release();
				this._gearSource = null;
			}
		}

		// Token: 0x06008D18 RID: 36120 RVA: 0x002DAB64 File Offset: 0x002D8D64
		private void \uE034(EDamageType damageType)
		{
			foreach (Coroutine coroutine in new Coroutine[]
			{
				this._sprintCoroutine,
				this._runCoroutine,
				this._idleCoroutine
			})
			{
				if (coroutine != null)
				{
					base.StopCoroutine(coroutine);
				}
			}
			this.\uE032();
			this.\uE020();
			this.\uE033();
			this.StopInteractionSound(0f);
			\uE3A0.OnInitialized -= this.\uE01E;
			if (\uE3A0.Controller != null)
			{
				\uE3A0.Controller.StatusChangedEvent -= this.\uE01F;
			}
		}

		// Token: 0x06008D19 RID: 36121 RVA: 0x002DAC14 File Offset: 0x002D8E14
		private void \uE035(EPlayerState previousState, EPlayerState nextstate)
		{
			this.\uE02B(this.NestedStepSoundSource);
			switch (previousState)
			{
			case EPlayerState.Idle:
				break;
			case EPlayerState.ProneIdle:
			case EPlayerState.ProneMove:
				goto IL_130;
			case EPlayerState.Run:
				goto IL_52;
			case EPlayerState.Sprint:
				if (this._sprintCoroutine != null)
				{
					base.StopCoroutine(this._sprintCoroutine);
					if (!this._playedAtLeastOneStep && this.CheckSurface(this._sprintSurfaceCheck))
					{
						this.DefaultPlay(this._currentSet.SprintSoundBank, 1f, EAudioMovementState.Sprint);
					}
				}
				if (nextstate == EPlayerState.Transition || nextstate == EPlayerState.Idle)
				{
					float num = this.FirstPersonPointOfView ? this._currentSet.StopSoundBank.BaseVolume : 1f;
					this.DefaultPlay(this._currentSet.StopSoundBank, num * this.MovementContext.CovertMovementVolume, EAudioMovementState.Stop);
					goto IL_130;
				}
				goto IL_130;
			default:
				switch (previousState)
				{
				case EPlayerState.IdleZombieState:
				case EPlayerState.TurnZombieState:
					break;
				case EPlayerState.MoveZombieState:
				case EPlayerState.StartMoveZombieState:
				case EPlayerState.EndMoveZombieState:
					goto IL_52;
				default:
					goto IL_130;
				}
				break;
			}
			if (this._idleCoroutine != null)
			{
				base.StopCoroutine(this._idleCoroutine);
				goto IL_130;
			}
			goto IL_130;
			IL_52:
			if (this._runCoroutine != null)
			{
				base.StopCoroutine(this._runCoroutine);
				if (!this._playedAtLeastOneStep && this.SinceLastStep > 0.66f)
				{
					if (this.CheckSurface(this._runSurfaceCheck))
					{
						this.PlayStepSound();
					}
					this._lastStepTime = Time.time;
				}
			}
			IL_130:
			if (nextstate <= EPlayerState.Prone2Stand)
			{
				switch (nextstate)
				{
				case EPlayerState.Idle:
					goto IL_1F2;
				case EPlayerState.ProneIdle:
				case EPlayerState.ProneMove:
					break;
				case EPlayerState.Run:
					goto IL_206;
				case EPlayerState.Sprint:
					this._sprintCoroutine = base.StartCoroutine(this.\uE045(nextstate));
					return;
				case EPlayerState.Jump:
					this.DefaultPlay(this._currentSet.JumpSoundBank, 1f, EAudioMovementState.Jump);
					this.\uE03A(this.MovementContext.CovertEquipmentNoise, true);
					break;
				default:
					if (nextstate != EPlayerState.Prone2Stand)
					{
						return;
					}
					this.\uE03A(0.7f, true);
					return;
				}
				return;
			}
			if (nextstate != EPlayerState.Transit2Prone)
			{
				switch (nextstate)
				{
				case EPlayerState.IdleZombieState:
				case EPlayerState.TurnZombieState:
					break;
				case EPlayerState.MoveZombieState:
				case EPlayerState.StartMoveZombieState:
				case EPlayerState.EndMoveZombieState:
					goto IL_206;
				default:
					return;
				}
			}
			else
			{
				EAudioMovementState movementState = (previousState == EPlayerState.Sprint) ? EAudioMovementState.Drop : EAudioMovementState.None;
				float volume = 0.7f * this.MovementContext.CovertMovementVolume;
				if (previousState == EPlayerState.Sprint)
				{
					this.DefaultPlay(this._currentSet.ProneDropSoundBank, volume, movementState);
					return;
				}
				this.\uE03A(volume, true);
				return;
			}
			IL_1F2:
			this._idleCoroutine = base.StartCoroutine(this.\uE046(nextstate));
			return;
			IL_206:
			this._runCoroutine = base.StartCoroutine(this.\uE047(nextstate));
		}

		// Token: 0x06008D1A RID: 36122 RVA: 0x002DAE88 File Offset: 0x002D9088
		public void DefaultPlay(SoundBank bank, float volume = 1f, EAudioMovementState movementState = EAudioMovementState.None)
		{
			if (bank == null)
			{
				string arg = (this._currentSet != null) ? this._currentSet.ToString() : \uF1F8.\uE000(141106);
				Debug.LogError(string.Format(\uF1F8.\uE000(141111), movementState, arg));
				return;
			}
			this.UpdateMuffledState();
			this.\uE03F(this.NestedStepSoundSource);
			this.\uE040(movementState, false);
			volume *= this.\uE03E(movementState);
			bank.Play(this.NestedStepSoundSource, EnvironmentType.Outdoor, this.Distance, volume, this.Distance, this.FirstPersonPointOfView, true);
			this._specificStepAudioController.Play(movementState, this.Environment, this.Distance, volume, this.Distance, this.FirstPersonPointOfView);
		}

		// Token: 0x06008D1B RID: 36123 RVA: 0x002DAF60 File Offset: 0x002D9160
		public void PlayStepSound()
		{
			this.UpdateMuffledState();
			SoundBank soundBank = (this.Pose == EPlayerPose.Duck) ? this._currentSet.DuckSoundBank : this._currentSet.RunSoundBank;
			EAudioMovementState movementState = (this.Pose == EPlayerPose.Duck) ? EAudioMovementState.Duck : EAudioMovementState.Run;
			float num = this.MovementContext.ClampedSpeed;
			float covertMovementVolumeBySpeed = this.MovementContext.CovertMovementVolumeBySpeed;
			num = Mathf.Max(this.Physical.MinStepSound, num) * covertMovementVolumeBySpeed;
			float num2 = this.\uE037();
			float num3 = this.\uE03E(movementState);
			float num4 = (this.FirstPersonPointOfView || this.\uE04E()) ? soundBank.RandomVolume : 1f;
			float num5 = covertMovementVolumeBySpeed * num2 * num3 * num4;
			this.\uE040(movementState, true);
			soundBank.Play(this.NestedStepSoundSource, EnvironmentType.Outdoor, this.Distance, num5, num, this.FirstPersonPointOfView, true);
			this._specificStepAudioController.Play(movementState, this.Environment, this.Distance, num5, num, this.FirstPersonPointOfView);
			float num6 = this.\uE036(num);
			if (num6 > 0f)
			{
				base.StartCoroutine(this.\uE044(num6));
			}
		}

		// Token: 0x06008D1C RID: 36124 RVA: 0x002DB0A4 File Offset: 0x002D92A4
		private float \uE036(float speed)
		{
			if (this.Pose != EPlayerPose.Duck)
			{
				return Mathf.Clamp(speed * 0.75f * Mathf.Sqrt(this.MovementContext.PoseLevel), 0.1f, 0.5f);
			}
			return Mathf.Clamp(speed, 0f, 0.3f);
		}

		// Token: 0x06008D1D RID: 36125 RVA: 0x002DB0F4 File Offset: 0x002D92F4
		private float \uE037()
		{
			return Mathf.Clamp(this.\uE039(), this._playerAudioSettings.MinSpeedVolumeMult, 1f);
		}

		// Token: 0x06008D1E RID: 36126 RVA: 0x002DB114 File Offset: 0x002D9314
		private float \uE038()
		{
			float t = this.\uE039();
			return Mathf.Lerp(this._playerAudioSettings.MinSpeedRolloffMult, 1f, t);
		}

		// Token: 0x06008D1F RID: 36127 RVA: 0x002DB140 File Offset: 0x002D9340
		private float \uE039()
		{
			return Mathf.InverseLerp(0f, this.MovementContext.MaxSpeed, this.MovementContext.CharacterMovementSpeed);
		}

		// Token: 0x06008D20 RID: 36128 RVA: 0x002DB164 File Offset: 0x002D9364
		private void \uE03A(float volume = 1f, bool fast = false)
		{
			SoundBank bank = fast ? this._gearFastSoundBank : this._gearSoundBank;
			this.\uE03B(bank, volume);
		}

		// Token: 0x06008D21 RID: 36129 RVA: 0x002DB194 File Offset: 0x002D9394
		private void \uE03B(SoundBank bank, float volume = 1f)
		{
			if (!this._healthController.IsAlive)
			{
				return;
			}
			this.UpdateMuffledState();
			float rolloff = this.\uE041(EAudioMovementState.Gear, false);
			volume *= this.\uE03E(EAudioMovementState.Gear) * this.MovementContext.CovertEquipmentNoise;
			this._gearSource.gameObject.SetActive(true);
			this.\uE042(this._gearSource, rolloff);
			bank.Play(this._gearSource, EnvironmentType.Outdoor, this.Distance, volume, this.Distance, this.FirstPersonPointOfView, true);
		}

		// Token: 0x06008D22 RID: 36130 RVA: 0x002DB224 File Offset: 0x002D9424
		private void \uE03C(float speed = 55f)
		{
			if (Time.time - this._lastTimeTurnSound >= this.maxLengthTurnSound)
			{
				float num = Mathf.InverseLerp(1f, 360f + (1f - this.MovementContext.PoseLevel) * 360f, this.\uE03D());
				SoundBank turnSoundBank = this._currentSet.TurnSoundBank;
				float volume = num * this.MovementContext.CovertMovementVolume * turnSoundBank.BaseVolume;
				this.DefaultPlay(turnSoundBank, volume, EAudioMovementState.Turn);
				this._lastTimeTurnSound = Time.time;
				if (num > 0.4f)
				{
					this.\uE03A(volume, false);
				}
			}
		}

		// Token: 0x06008D23 RID: 36131 RVA: 0x002DB2C0 File Offset: 0x002D94C0
		private float \uE03D()
		{
			return Mathf.Max(this.UsedSimplifiedSkeleton ? 45f : 0f, this.MovementContext.AverageRotationSpeed.Avarage);
		}

		// Token: 0x06008D24 RID: 36132 RVA: 0x002DB2EC File Offset: 0x002D94EC
		public void PlaySoundBank(string soundBank)
		{
			if (soundBank == \uF1F8.\uE000(166167))
			{
				if (this.SinceLastStep < 0.5f)
				{
					return;
				}
				if (this.CheckSurface(this._proneSurfaceCheck))
				{
					this.UpdateMuffledState();
					this.\uE03F(this.NestedStepSoundSource);
					SoundBank proneSoundBank = this._currentSet.ProneSoundBank;
					float b = this.MovementContext.CovertMovementVolume * this.MovementContext.ClampedSpeed * this._currentSet.ProneSoundBank.BaseVolume;
					float num = Mathf.Max(0.4f, b);
					num *= this.\uE03E(EAudioMovementState.Prone);
					this.\uE040(EAudioMovementState.Prone, false);
					proneSoundBank.Play(this.NestedStepSoundSource, EnvironmentType.Outdoor, this.Distance, num, this.Distance, this.FirstPersonPointOfView, true);
					this._specificStepAudioController.Play(EAudioMovementState.Prone, this.Environment, this.Distance, num, this.Distance, this.FirstPersonPointOfView);
					this._lastStepTime = Time.time;
				}
			}
		}

		// Token: 0x06008D25 RID: 36133 RVA: 0x002DB3FC File Offset: 0x002D95FC
		private float \uE03E(EAudioMovementState movementState)
		{
			return this.\uE043(movementState) / this._playerAudioSettings.BaseMaxMovementRolloff * this.\uE003;
		}

		// Token: 0x06008D26 RID: 36134 RVA: 0x002DB418 File Offset: 0x002D9618
		private void \uE03F(BetterSource source)
		{
			int priority = this._priorityCalculator.CalculatePriority(this.Distance, source.MaxDistance);
			source.SetPriority(priority);
		}

		// Token: 0x06008D27 RID: 36135 RVA: 0x002DB444 File Offset: 0x002D9644
		private void \uE040(EAudioMovementState movementState = EAudioMovementState.None, bool includeSpeedMult = false)
		{
			this.\uE042(this.NestedStepSoundSource, this.\uE041(movementState, includeSpeedMult));
			this._specificStepAudioController.UpdateSoundRolloff(this.NestedStepSoundSource.MaxDistance);
		}

		// Token: 0x06008D28 RID: 36136 RVA: 0x002DB470 File Offset: 0x002D9670
		private float \uE041(EAudioMovementState movementState = EAudioMovementState.None, bool includeSpeedMult = false)
		{
			float num = includeSpeedMult ? this.\uE038() : 1f;
			float baseMaxMovementRolloff = this._playerAudioSettings.BaseMaxMovementRolloff;
			float multByMovement = this._playerAudioSettings.GetMultByMovement(movementState);
			float num2 = baseMaxMovementRolloff * this.ProtagonistHearing * this.Physical.SoundRadius * multByMovement * num;
			this._cachedMovementRolloff[movementState] = num2;
			return num2;
		}

		// Token: 0x06008D29 RID: 36137 RVA: 0x002DB4D8 File Offset: 0x002D96D8
		private void \uE042(BetterSource source, float rolloff)
		{
			float rolloff2 = rolloff * this._playerAudioSettings.GetRolloffMultByEnvironment(this.Environment) * this.ProtagonistHearing;
			source.SetRolloff(rolloff2);
		}

		// Token: 0x06008D2A RID: 36138 RVA: 0x002DB508 File Offset: 0x002D9708
		private float \uE043(EAudioMovementState movementState)
		{
			float result;
			if (!this._cachedMovementRolloff.TryGetValue(movementState, out result))
			{
				return this.\uE041(movementState, false);
			}
			return result;
		}

		// Token: 0x06008D2B RID: 36139 RVA: 0x002DB530 File Offset: 0x002D9730
		private IEnumerator \uE044(float volume = 1f)
		{
			int num;
			for (;;)
			{
				int num2;
				num = num2;
				if (num != 0)
				{
					break;
				}
				yield return this._gearWalkDelaySec;
			}
			if (num != 1)
			{
				yield break;
			}
			if (this._gearSource != null)
			{
				this.\uE03A(volume, false);
			}
			yield break;
		}

		// Token: 0x06008D2C RID: 36140 RVA: 0x002DB548 File Offset: 0x002D9748
		private IEnumerator \uE045(EPlayerState state = EPlayerState.Sprint)
		{
			for (;;)
			{
				int num2;
				int num = num2;
				if (num != 0)
				{
					if (num != 1)
					{
						break;
					}
				}
				else
				{
					this._playedAtLeastOneStep = false;
				}
				if (this.CurrentState.Name != state)
				{
					goto Block_10;
				}
				float uE = this.\uE002;
				if (Math.Abs(this._sign - uE) >= 1E-45f)
				{
					this._sign = uE;
					float num3 = Time.time - this._lastStepTime;
					if (num3 > 0.2f && this.MovementContext.FreefallTime < 0.6f)
					{
						this._playedAtLeastOneStep = true;
						this._lastStepTime = Time.time;
						this.\uE03F(this.NestedStepSoundSource);
						if (this.CheckSurface(this._sprintSurfaceCheck))
						{
							this.UpdateMuffledState();
							SoundBank sprintSoundBank = this._currentSet.SprintSoundBank;
							float num4 = this.FirstPersonPointOfView ? sprintSoundBank.BaseVolume : 1f;
							float num5 = 0.5f + 3f * this.Physical.Overweight;
							float num6 = this.\uE03E(EAudioMovementState.Sprint) * num4 * num5;
							this.\uE040(EAudioMovementState.Sprint, false);
							this._currentSet.SprintSoundBank.Play(this.NestedStepSoundSource, EnvironmentType.Outdoor, this.Distance, num6, this.Distance, this.FirstPersonPointOfView, true);
							this._specificStepAudioController.Play(EAudioMovementState.Sprint, this.Environment, this.Distance, num6, this.Distance, this.FirstPersonPointOfView);
							this.\uE03A(1f, false);
							if (num3 < 1.2f && this.FirstPersonPointOfView)
							{
								this.ProceduralWeaponAnimation.Walk.StepFrequency = 0.5f / Mathf.Clamp(num3, 0.3f, 0.8f);
							}
						}
					}
				}
				yield return null;
			}
			yield break;
			Block_10:
			yield break;
		}

		// Token: 0x06008D2D RID: 36141 RVA: 0x002DB560 File Offset: 0x002D9760
		private IEnumerator \uE046(EPlayerState state = EPlayerState.Idle)
		{
			for (;;)
			{
				 obj;
				switch (obj)
				{
				case 0:
					goto IL_95;
				case 1:
					goto IL_69;
				case 2:
					goto IL_95;
				}
				break;
				IL_95:
				if (this.CurrentState.Name != state)
				{
					goto IL_AA;
				}
				if (!this.HealthController.IsAlive)
				{
					goto Block_4;
				}
				float num = Math.Abs(this.HandsToBodyAngle);
				if (num > EFTHardSettings.Instance.TURN_ANGLE)
				{
					this.\uE03C(num);
					yield return new WaitForSeconds(EFTHardSettings.Instance.TURN_SOUND_DELAY);
					continue;
				}
				IL_69:
				yield return null;
			}
			yield break;
			IL_AA:
			Block_4:
			yield break;
		}

		// Token: 0x06008D2E RID: 36142 RVA: 0x002DB578 File Offset: 0x002D9778
		private IEnumerator \uE047(EPlayerState state = EPlayerState.Run)
		{
			for (;;)
			{
				int num2;
				int num = num2;
				if (num != 0)
				{
					if (num != 1)
					{
						break;
					}
				}
				else
				{
					this._playedAtLeastOneStep = false;
				}
				if (this.CurrentState.Name != state)
				{
					goto Block_9;
				}
				float uE = this.\uE002;
				if (Math.Abs(this._sign - uE) >= 1E-45f)
				{
					this._sign = uE;
					float sinceLastStep = this.SinceLastStep;
					if (sinceLastStep > 0.2f && this.MovementContext.FreefallTime < 1f)
					{
						this._lastStepTime = Time.time;
						this._playedAtLeastOneStep = true;
						if (this.CheckSurface(this._runSurfaceCheck))
						{
							if (sinceLastStep < 1.2f && this.FirstPersonPointOfView)
							{
								this.ProceduralWeaponAnimation.Walk.StepFrequency = 0.5f / Mathf.Clamp(sinceLastStep, 0.7f - this.MovementContext.SmoothedCharacterMovementSpeed / 2f, 1.2f);
							}
							this.PlayStepSound();
						}
					}
				}
				yield return null;
			}
			yield break;
			Block_9:
			yield break;
		}

		// Token: 0x06008D2F RID: 36143 RVA: 0x002DB590 File Offset: 0x002D9790
		private void \uE048(EBodyPart bodyPart, float damage, \uF061 damageInfo)
		{
			if (this.IsAI || damage < 1f)
			{
				return;
			}
			EDamageType damageType = damageInfo.DamageType;
			if (damageType != EDamageType.Fall)
			{
				if (damageType != EDamageType.Barbed)
				{
					return;
				}
			}
			this.Say(EPhraseTrigger.OnBeingHurt, true, 0f, (ETagStatus)0, 100, false);
		}

		// Token: 0x06008D30 RID: 36144 RVA: 0x002DB5E0 File Offset: 0x002D97E0
		[return: TupleElementNames(new string[]
		{
			"hit",
			"surfaceSound"
		})]
		private ValueTuple<bool, BaseBallistic.ESurfaceSound> \uE049()
		{
			Vector3 playerColliderCenter = this.MovementContext.PlayerColliderCenter;
			float num = this.MovementContext.CharacterController.height + 0.5f;
			Vector3 endPos = playerColliderCenter + Vector3.down * num;
			BaseBallistic.ESurfaceSound item = BaseBallistic.ESurfaceSound.Concrete;
			RaycastHit raycastHit;
			if (!\uE450.GetNearestHit(playerColliderCenter, endPos, out raycastHit, num, this._stepLayerMask))
			{
				return new ValueTuple<bool, BaseBallistic.ESurfaceSound>(false, item);
			}
			if (raycastHit.collider == null)
			{
				return new ValueTuple<bool, BaseBallistic.ESurfaceSound>(false, item);
			}
			BaseBallistic component = raycastHit.collider.GetComponent<BaseBallistic>();
			if (component != null)
			{
				item = component.GetSurfaceSound(raycastHit.point);
			}
			return new ValueTuple<bool, BaseBallistic.ESurfaceSound>(true, item);
		}

		// Token: 0x06008D31 RID: 36145 RVA: 0x002DB694 File Offset: 0x002D9894
		private void \uE04A(bool hit, BaseBallistic.ESurfaceSound surfaceSound)
		{
			if (!hit)
			{
				return;
			}
			if (this.CurrentSurface != surfaceSound)
			{
				this.CurrentSurface = surfaceSound;
				this._currentSet = this._soundBySurface[surfaceSound];
				this._specificStepAudioController.UpdateSurface(surfaceSound);
			}
			this.MovementContext.SoftSurface = (this.CurrentSurface == BaseBallistic.ESurfaceSound.Asphalt || this.CurrentSurface == BaseBallistic.ESurfaceSound.Concrete || this.CurrentSurface == BaseBallistic.ESurfaceSound.Gravel || this.CurrentSurface == BaseBallistic.ESurfaceSound.Soil || this.CurrentSurface == BaseBallistic.ESurfaceSound.Wood || this.CurrentSurface == BaseBallistic.ESurfaceSound.WoodThick || this.CurrentSurface == BaseBallistic.ESurfaceSound.Puddle);
		}

		// Token: 0x06008D32 RID: 36146 RVA: 0x002DB730 File Offset: 0x002D9930
		private void \uE04B(float timeToMount)
		{
			this.\uE03B(this._gearMediumSoundBank, this._gearMediumSoundBank.RandomVolume);
		}

		// Token: 0x06008D33 RID: 36147 RVA: 0x002DB74C File Offset: 0x002D994C
		private void \uE04C(float timeToUnmount)
		{
			this.\uE03B(this._gearMediumSoundBank, this._gearMediumSoundBank.RandomVolume);
		}

		// Token: 0x06008D34 RID: 36148 RVA: 0x002DB768 File Offset: 0x002D9968
		private void \uE04D(IAnimatorEventParameter animatorEventParameter)
		{
			this.\uE03B(this._backpackDropBank, this._backpackDropBank.RandomVolume);
		}

		// Token: 0x06008D35 RID: 36149 RVA: 0x002DB784 File Offset: 0x002D9984
		private bool \uE04E()
		{
			return !this.FirstPersonPointOfView && this.UsedSimplifiedSkeleton;
		}

		// Token: 0x06008D36 RID: 36150 RVA: 0x002DB798 File Offset: 0x002D9998
		protected virtual void SendUnderRoofStatus(bool isUnderRoof)
		{
		}

		// Token: 0x06008D37 RID: 36151 RVA: 0x002DB79C File Offset: 0x002D999C
		protected virtual void SendTripwireInteractionSoundState(EInteractionStatus interactionStatus, bool isSuccess, bool hasMultiTool)
		{
		}

		// Token: 0x1700141D RID: 5149
		// (get) Token: 0x06008D38 RID: 36152 RVA: 0x002DB7A0 File Offset: 0x002D99A0
		// (set) Token: 0x06008D39 RID: 36153 RVA: 0x002DB7A8 File Offset: 0x002D99A8
		private protected GameWorld GameWorld { protected get; private set; }

		// Token: 0x1700141E RID: 5150
		// (get) Token: 0x06008D3A RID: 36154 RVA: 0x002DB7B4 File Offset: 0x002D99B4
		// (set) Token: 0x06008D3B RID: 36155 RVA: 0x002DB7BC File Offset: 0x002D99BC
		public bool IsInBufferZone { get; set; }

		// Token: 0x1400017D RID: 381
		// (add) Token: 0x06008D3C RID: 36156 RVA: 0x002DB7C8 File Offset: 0x002D99C8
		// (remove) Token: 0x06008D3D RID: 36157 RVA: 0x002DB80C File Offset: 0x002D9A0C
		public event \uE86E OnPlayerDead;

		// Token: 0x1400017E RID: 382
		// (add) Token: 0x06008D3E RID: 36158 RVA: 0x002DB850 File Offset: 0x002D9A50
		// (remove) Token: 0x06008D3F RID: 36159 RVA: 0x002DB890 File Offset: 0x002D9A90
		public static event Action<Player, IPlayer, \uF061, EBodyPart> OnPlayerDeadStatic;

		// Token: 0x1400017F RID: 383
		// (add) Token: 0x06008D40 RID: 36160 RVA: 0x002DB8D0 File Offset: 0x002D9AD0
		// (remove) Token: 0x06008D41 RID: 36161 RVA: 0x002DB914 File Offset: 0x002D9B14
		public event \uE86F OnPlayerDeadOrUnspawn;

		// Token: 0x14000180 RID: 384
		// (add) Token: 0x06008D42 RID: 36162 RVA: 0x002DB958 File Offset: 0x002D9B58
		// (remove) Token: 0x06008D43 RID: 36163 RVA: 0x002DB99C File Offset: 0x002D9B9C
		public event Action<bool> OnSenseChanged;

		// Token: 0x14000181 RID: 385
		// (add) Token: 0x06008D44 RID: 36164 RVA: 0x002DB9E0 File Offset: 0x002D9BE0
		// (remove) Token: 0x06008D45 RID: 36165 RVA: 0x002DBA24 File Offset: 0x002D9C24
		public event Action PossibleInteractionsChanged;

		// Token: 0x14000182 RID: 386
		// (add) Token: 0x06008D46 RID: 36166 RVA: 0x002DBA68 File Offset: 0x002D9C68
		// (remove) Token: 0x06008D47 RID: 36167 RVA: 0x002DBAAC File Offset: 0x002D9CAC
		public event Action<EPhraseTrigger, int> PhraseSituation;

		// Token: 0x14000183 RID: 387
		// (add) Token: 0x06008D48 RID: 36168 RVA: 0x002DBAF0 File Offset: 0x002D9CF0
		// (remove) Token: 0x06008D49 RID: 36169 RVA: 0x002DBB34 File Offset: 0x002D9D34
		public event Action<bool> OnGlassesChanged;

		// Token: 0x14000184 RID: 388
		// (add) Token: 0x06008D4A RID: 36170 RVA: 0x002DBB78 File Offset: 0x002D9D78
		// (remove) Token: 0x06008D4B RID: 36171 RVA: 0x002DBBBC File Offset: 0x002D9DBC
		public event Action<Player, bool> OnInventoryOpened;

		// Token: 0x14000185 RID: 389
		// (add) Token: 0x06008D4C RID: 36172 RVA: 0x002DBC00 File Offset: 0x002D9E00
		// (remove) Token: 0x06008D4D RID: 36173 RVA: 0x002DBC44 File Offset: 0x002D9E44
		public event Action OnStartInventoryOpen;

		// Token: 0x14000186 RID: 390
		// (add) Token: 0x06008D4E RID: 36174 RVA: 0x002DBC88 File Offset: 0x002D9E88
		// (remove) Token: 0x06008D4F RID: 36175 RVA: 0x002DBCCC File Offset: 0x002D9ECC
		public event Action OnStartQuickdrawPistol;

		// Token: 0x1700141F RID: 5151
		// (get) Token: 0x06008D50 RID: 36176 RVA: 0x002DBD10 File Offset: 0x002D9F10
		// (set) Token: 0x06008D51 RID: 36177 RVA: 0x002DBD18 File Offset: 0x002D9F18
		public GenericEventTranslator EventTranslator { get; private set; }

		// Token: 0x17001420 RID: 5152
		// (get) Token: 0x06008D52 RID: 36178 RVA: 0x002DBD24 File Offset: 0x002D9F24
		public IVaultingComponent VaultingComponent
		{
			get
			{
				return this._vaultingComponent;
			}
		}

		// Token: 0x17001421 RID: 5153
		// (get) Token: 0x06008D53 RID: 36179 RVA: 0x002DBD2C File Offset: 0x002D9F2C
		public IVaultingComponentDebug VaultingComponentDebug
		{
			get
			{
				return this._vaultingComponentDebug;
			}
		}

		// Token: 0x17001422 RID: 5154
		// (get) Token: 0x06008D54 RID: 36180 RVA: 0x002DBD34 File Offset: 0x002D9F34
		public IVaultingParameters VaultingParameters
		{
			get
			{
				return this._vaultingParameters;
			}
		}

		// Token: 0x17001423 RID: 5155
		// (get) Token: 0x06008D55 RID: 36181 RVA: 0x002DBD3C File Offset: 0x002D9F3C
		public IVaultingGameplayRestrictions VaultingGameplayRestrictions
		{
			get
			{
				return this._vaultingGameplayRestrictions;
			}
		}

		// Token: 0x17001424 RID: 5156
		// (get) Token: 0x06008D56 RID: 36182 RVA: 0x002DBD44 File Offset: 0x002D9F44
		public bool IsEnableVaulting
		{
			get
			{
				return Singleton<\uE714>.Instance.VaultingSettings.IsActive;
			}
		}

		// Token: 0x17001425 RID: 5157
		// (get) Token: 0x06008D57 RID: 36183 RVA: 0x002DBD58 File Offset: 0x002D9F58
		public IWeaponMountingComponent WeaponMountingComponent
		{
			get
			{
				return this._weaponMountingComponent;
			}
		}

		// Token: 0x17001426 RID: 5158
		// (get) Token: 0x06008D58 RID: 36184 RVA: 0x002DBD60 File Offset: 0x002D9F60
		// (set) Token: 0x06008D59 RID: 36185 RVA: 0x002DBD68 File Offset: 0x002D9F68
		public Player.\uE00F<NightVisionComponent> NightVisionObserver { get; protected set; }

		// Token: 0x17001427 RID: 5159
		// (get) Token: 0x06008D5A RID: 36186 RVA: 0x002DBD74 File Offset: 0x002D9F74
		// (set) Token: 0x06008D5B RID: 36187 RVA: 0x002DBD7C File Offset: 0x002D9F7C
		public Player.\uE00F<ThermalVisionComponent> ThermalVisionObserver { get; protected set; }

		// Token: 0x17001428 RID: 5160
		// (get) Token: 0x06008D5C RID: 36188 RVA: 0x002DBD88 File Offset: 0x002D9F88
		// (set) Token: 0x06008D5D RID: 36189 RVA: 0x002DBD90 File Offset: 0x002D9F90
		public Player.\uE00F<FaceShieldComponent> FaceShieldObserver { get; protected set; }

		// Token: 0x17001429 RID: 5161
		// (get) Token: 0x06008D5E RID: 36190 RVA: 0x002DBD9C File Offset: 0x002D9F9C
		// (set) Token: 0x06008D5F RID: 36191 RVA: 0x002DBDA4 File Offset: 0x002D9FA4
		public Player.\uE00F<FaceShieldComponent> FaceCoverObserver { get; protected set; }

		// Token: 0x1700142A RID: 5162
		// (get) Token: 0x06008D60 RID: 36192 RVA: 0x002DBDB0 File Offset: 0x002D9FB0
		// (set) Token: 0x06008D61 RID: 36193 RVA: 0x002DBDB8 File Offset: 0x002D9FB8
		public string Location { get; set; }

		// Token: 0x1700142B RID: 5163
		// (get) Token: 0x06008D62 RID: 36194 RVA: 0x002DBDC4 File Offset: 0x002D9FC4
		// (set) Token: 0x06008D63 RID: 36195 RVA: 0x002DBDCC File Offset: 0x002D9FCC
		public ISpawnPoint SpawnPoint { get; set; }

		// Token: 0x1700142C RID: 5164
		// (get) Token: 0x06008D64 RID: 36196 RVA: 0x002DBDD8 File Offset: 0x002D9FD8
		// (set) Token: 0x06008D65 RID: 36197 RVA: 0x002DBDE0 File Offset: 0x002D9FE0
		public float RayLength { get; private set; }

		// Token: 0x1700142D RID: 5165
		// (get) Token: 0x06008D66 RID: 36198 RVA: 0x002DBDEC File Offset: 0x002D9FEC
		// (set) Token: 0x06008D67 RID: 36199 RVA: 0x002DBDF4 File Offset: 0x002D9FF4
		public InteractableObject InteractableObject { get; private set; }

		// Token: 0x1700142E RID: 5166
		// (get) Token: 0x06008D68 RID: 36200 RVA: 0x002DBE00 File Offset: 0x002DA000
		// (set) Token: 0x06008D69 RID: 36201 RVA: 0x002DBE08 File Offset: 0x002DA008
		public bool InteractableObjectIsProxy { get; private set; }

		// Token: 0x1700142F RID: 5167
		// (get) Token: 0x06008D6A RID: 36202 RVA: 0x002DBE14 File Offset: 0x002DA014
		// (set) Token: 0x06008D6B RID: 36203 RVA: 0x002DBE1C File Offset: 0x002DA01C
		public bool IsAgressorInLighthouseTraderZone { get; set; }

		// Token: 0x17001430 RID: 5168
		// (get) Token: 0x06008D6C RID: 36204 RVA: 0x002DBE28 File Offset: 0x002DA028
		// (set) Token: 0x06008D6D RID: 36205 RVA: 0x002DBE30 File Offset: 0x002DA030
		public Player InteractablePlayer { get; private set; }

		// Token: 0x17001431 RID: 5169
		// (get) Token: 0x06008D6E RID: 36206 RVA: 0x002DBE3C File Offset: 0x002DA03C
		// (set) Token: 0x06008D6F RID: 36207 RVA: 0x002DBE44 File Offset: 0x002DA044
		public PlaceItemTrigger PlaceItemZone { get; set; }

		// Token: 0x17001432 RID: 5170
		// (get) Token: 0x06008D70 RID: 36208 RVA: 0x002DBE50 File Offset: 0x002DA050
		// (set) Token: 0x06008D71 RID: 36209 RVA: 0x002DBE58 File Offset: 0x002DA058
		public ExfiltrationPoint ExfiltrationPoint { get; private set; }

		// Token: 0x17001433 RID: 5171
		// (get) Token: 0x06008D72 RID: 36210 RVA: 0x002DBE64 File Offset: 0x002DA064
		// (set) Token: 0x06008D73 RID: 36211 RVA: 0x002DBE6C File Offset: 0x002DA06C
		public bool ExitTriggerZone { get; private set; }

		// Token: 0x17001434 RID: 5172
		// (get) Token: 0x06008D74 RID: 36212 RVA: 0x002DBE78 File Offset: 0x002DA078
		// (set) Token: 0x06008D75 RID: 36213 RVA: 0x002DBE80 File Offset: 0x002DA080
		public MalfunctionRandom MalfRandoms { get; protected set; } = new MalfunctionRandom(0);

		// Token: 0x17001435 RID: 5173
		// (get) Token: 0x06008D76 RID: 36214 RVA: 0x002DBE8C File Offset: 0x002DA08C
		public string Infiltration
		{
			get
			{
				return this.Profile.Info.EntryPoint;
			}
		}

		// Token: 0x17001436 RID: 5174
		// (get) Token: 0x06008D77 RID: 36215 RVA: 0x002DBEA0 File Offset: 0x002DA0A0
		public string GroupId
		{
			get
			{
				return this.Profile.Info.GroupId;
			}
		}

		// Token: 0x17001437 RID: 5175
		// (get) Token: 0x06008D78 RID: 36216 RVA: 0x002DBEB4 File Offset: 0x002DA0B4
		public string TeamId
		{
			get
			{
				return this.Profile.Info.TeamId;
			}
		}

		// Token: 0x17001438 RID: 5176
		// (get) Token: 0x06008D79 RID: 36217 RVA: 0x002DBEC8 File Offset: 0x002DA0C8
		public float CarryingWeightRelativeModifier
		{
			get
			{
				return this.Skills.CarryingWeightRelativeModifier * this.HealthController.CarryingWeightRelativeModifier;
			}
		}

		// Token: 0x17001439 RID: 5177
		// (get) Token: 0x06008D7A RID: 36218 RVA: 0x002DBEE4 File Offset: 0x002DA0E4
		public float CarryingWeightAbsoluteModifier
		{
			get
			{
				return this.HealthController.CarryingWeightAbsoluteModifier;
			}
		}

		// Token: 0x1700143A RID: 5178
		// (get) Token: 0x06008D7B RID: 36219 RVA: 0x002DBEF4 File Offset: 0x002DA0F4
		protected Inventory Inventory
		{
			get
			{
				return this.InventoryController.Inventory;
			}
		}

		// Token: 0x1700143B RID: 5179
		// (get) Token: 0x06008D7C RID: 36220 RVA: 0x002DBF04 File Offset: 0x002DA104
		protected InventoryEquipment Equipment
		{
			get
			{
				return this.Inventory.Equipment;
			}
		}

		// Token: 0x1700143C RID: 5180
		// (get) Token: 0x06008D7D RID: 36221 RVA: 0x002DBF14 File Offset: 0x002DA114
		// (set) Token: 0x06008D7E RID: 36222 RVA: 0x002DBF1C File Offset: 0x002DA11C
		public bool IsInventoryOpened
		{
			get
			{
				return this._isInventoryOpened;
			}
			set
			{
				this._isInventoryOpened = value;
			}
		}

		// Token: 0x1700143D RID: 5181
		// (get) Token: 0x06008D7F RID: 36223 RVA: 0x002DBF28 File Offset: 0x002DA128
		public RecodableItemsHandler RecodableItemsHandler
		{
			get
			{
				return this.recodableItemsHandler;
			}
		}

		// Token: 0x1700143E RID: 5182
		// (get) Token: 0x06008D80 RID: 36224 RVA: 0x002DBF30 File Offset: 0x002DA130
		public float BlindnessDuration
		{
			get
			{
				ThermalVisionComponent component = this.ThermalVisionObserver.Component;
				if (((component != null) ? component.Togglable : null) != null && this.ThermalVisionObserver.Component.Togglable.On)
				{
					return 0f;
				}
				FaceShieldComponent component2 = this.FaceShieldObserver.Component;
				float num = (component2 != null && (component2.Togglable == null || component2.Togglable.On)) ? (1f - component2.BlindnessProtection) : 1f;
				\uEECD uEECD = this.Equipment.GetSlot(EquipmentSlot.Eyewear).ContainedItem as \uEECD;
				float num2 = (uEECD != null) ? (1f - uEECD.BlindnessProtection) : 1f;
				\uEE35 uEE = this.Equipment.GetSlot(EquipmentSlot.FaceCover).ContainedItem as \uEE35;
				if (uEE == null)
				{
					return num * num2;
				}
				FaceShieldComponent faceShield = uEE.FaceShield;
				bool flag = faceShield != null && (faceShield.Togglable == null || faceShield.Togglable.On);
				return num * num2 * (flag ? (1f - faceShield.BlindnessProtection) : 1f);
			}
		}

		// Token: 0x1700143F RID: 5183
		// (get) Token: 0x06008D81 RID: 36225 RVA: 0x002DC078 File Offset: 0x002DA278
		public int CurrentHour
		{
			get
			{
				if (this.GameWorld != null && this.GameWorld.GameDateTime != null)
				{
					return this.GameWorld.GameDateTime.Calculate().Hour;
				}
				return 0;
			}
		}

		// Token: 0x17001440 RID: 5184
		// (get) Token: 0x06008D83 RID: 36227 RVA: 0x002DC13C File Offset: 0x002DA33C
		// (set) Token: 0x06008D82 RID: 36226 RVA: 0x002DC0C0 File Offset: 0x002DA2C0
		private bool \uE004
		{
			get
			{
				return this._sense;
			}
			set
			{
				this._sense = value;
				bool flag = this.HandsController != null && this.HandsController.IsAiming;
				bool flag2 = this._sense && !flag;
				if (this._displaySense != flag2)
				{
					this._displaySense = flag2;
					Action<bool> onSenseChanged = this.OnSenseChanged;
					if (onSenseChanged == null)
					{
						return;
					}
					onSenseChanged(this._displaySense);
				}
			}
		}

		// Token: 0x17001441 RID: 5185
		// (get) Token: 0x06008D84 RID: 36228 RVA: 0x002DC144 File Offset: 0x002DA344
		public string KillerId
		{
			get
			{
				\uE703 player = this.LastDamageInfo.Player;
				if (player != null)
				{
					if (this != player)
					{
						return player.iPlayer.ProfileId;
					}
				}
				return null;
			}
		}

		// Token: 0x17001442 RID: 5186
		// (get) Token: 0x06008D85 RID: 36229 RVA: 0x002DC17C File Offset: 0x002DA37C
		public string KillerAccountId
		{
			get
			{
				\uE703 player = this.LastDamageInfo.Player;
				if (player != null)
				{
					if (this != player)
					{
						return player.iPlayer.AccountId;
					}
				}
				return null;
			}
		}

		// Token: 0x17001443 RID: 5187
		// (get) Token: 0x06008D86 RID: 36230 RVA: 0x002DC1B4 File Offset: 0x002DA3B4
		public bool HasGlasses
		{
			get
			{
				return this.Equipment.GetSlot(EquipmentSlot.Eyewear).ContainedItem is \uEECD || this.Equipment.GetSlot(EquipmentSlot.Headwear).ContainedItem is \uEECD;
			}
		}

		// Token: 0x17001444 RID: 5188
		// (get) Token: 0x06008D87 RID: 36231 RVA: 0x002DC1EC File Offset: 0x002DA3EC
		public bool HandsIsEmpty
		{
			get
			{
				return this.HandsController is Player.EmptyHandsController;
			}
		}

		// Token: 0x17001445 RID: 5189
		// (get) Token: 0x06008D88 RID: 36232 RVA: 0x002DC1FC File Offset: 0x002DA3FC
		public bool IsWeaponOrKnifeInHands
		{
			get
			{
				return this.HandsController is Player.FirearmController || this.HandsController is Player.BaseKnifeController;
			}
		}

		// Token: 0x06008D89 RID: 36233 RVA: 0x002DC21C File Offset: 0x002DA41C
		protected static TPlayer Create<TPlayer>(GameWorld gameWorld, ResourceKey assetName, int playerId, Vector3 position, EUpdateQueue updateQueue, Player.EUpdateMode armsUpdateMode, Player.EUpdateMode bodyUpdateMode, CharacterControllerSpawner.Mode characterControllerMode, Func<float> getSensitivity, Func<float> getAimingSensitivity, string prefix, bool isThirdPerson, bool useSimplifiedSkeleton = false) where TPlayer : Player
		{
			GameObject gameObject = Singleton<\uE90C>.Instance.CreatePlayerObject(assetName);
			gameObject.name = prefix + gameObject.name;
			gameObject.transform.parent = null;
			Animator componentInChildren = gameObject.GetComponentInChildren<Animator>(true);
			gameObject.SetActive(true);
			return Player.\uE04F<TPlayer>(gameWorld, gameObject, componentInChildren, playerId, position, updateQueue, armsUpdateMode, bodyUpdateMode, characterControllerMode, getSensitivity, getAimingSensitivity, isThirdPerson, useSimplifiedSkeleton);
		}

		// Token: 0x06008D8A RID: 36234 RVA: 0x002DC28C File Offset: 0x002DA48C
		private static \uE0B2 \uE04F<\uE0B2>(GameWorld gameWorld, GameObject poolObject, Animator animator, int playerId, Vector3 position, EUpdateQueue updateQueue, Player.EUpdateMode armsUpdateMode, Player.EUpdateMode bodyUpdateMode, CharacterControllerSpawner.Mode characterControllerMode, Func<float> getSensitivity, Func<float> getAimingSensitivity, bool isThirdPerson, bool useSimplifiedSkeleton = false) where \uE0B2 : Player
		{
			PlayerPoolObject component = poolObject.GetComponent<PlayerPoolObject>();
			\uE0B2 uE0B = poolObject.AddComponent<\uE0B2>();
			uE0B.PlayerId = playerId;
			component.RegisteredComponentsToClean.Add(uE0B);
			uE0B.GameWorld = gameWorld;
			uE0B._updateQueue = updateQueue;
			uE0B.GetSensitivity = getSensitivity;
			uE0B.GetAimingSensitivity = getAimingSensitivity;
			uE0B.MalfRandoms = new MalfunctionRandom(UnityEngine.Random.Range(int.MinValue, int.MaxValue));
			uE0B._heavyVestsDeflectRandoms = new \uF057(512, 0, 0);
			uE0B._armsUpdateMode = armsUpdateMode;
			uE0B.TrunkRotationLimit = EFTHardSettings.Instance.HANDS_TO_BODY_MAX_ANGLE;
			uE0B._bodyUpdateMode = bodyUpdateMode;
			uE0B.PlayerBones = component.PlayerBones;
			uE0B.PlayerBones.Player = uE0B;
			uE0B._animators = new IAnimator[2];
			uE0B.CreateBodyAnimator(animator, updateQueue, useSimplifiedSkeleton);
			uE0B.UsedSimplifiedSkeleton = useSimplifiedSkeleton;
			foreach (Collider collider in component.Colliders)
			{
				collider.enabled = true;
			}
			uE0B.Transform.Original.position = position;
			uE0B._characterController = component.CharacterControllerSpawner.Spawn(characterControllerMode, uE0B, uE0B.gameObject, false, isThirdPerson);
			uE0B._triggerColliderSearcher = component.CharacterControllerSpawner.TriggerColliderSearcher;
			uE0B._customHandRotator = new \uE872();
			uE0B.POM = component.PlayerOverlapManager;
			if (uE0B.POM != null)
			{
				uE0B.POM.Init(uE0B._characterController.GetCollider());
			}
			IKAuthority[] behaviours = uE0B.BodyAnimatorCommon.GetBehaviours<IKAuthority>();
			for (int i = 0; i < behaviours.Length; i++)
			{
				behaviours[i].PlayerBones = uE0B.PlayerBones;
			}
			uE0B.Grounder = component.GrounderFbbik;
			uE0B.Grounder.enabled = true;
			uE0B._fbbik = component.FullBodyBipedIk;
			uE0B.HitReaction = component.HitReaction;
			uE0B.HitReaction.enabled = false;
			uE0B._limbs = component.LimbIks;
			LimbIK[] limbs = uE0B._limbs;
			for (int i = 0; i < limbs.Length; i++)
			{
				limbs[i].enabled = true;
			}
			if (\uE2F9.Config.UseSpiritPlayer)
			{
				PlayerSpirit playerSpirit = Singleton<\uE90C>.Instance.CreateFromPool<PlayerSpirit>(useSimplifiedSkeleton ? \uE71F.ZOMBIE_SPIRIT_RESOURCE_KEY : \uE71F.PLAYER_SPIRIT_RESOURCE_KEY);
				playerSpirit.transform.position = Vector3.zero;
				playerSpirit.gameObject.SetActive(true);
				uE0B.Spirit = playerSpirit;
				uE0B.Transform.Original.SetParent(playerSpirit.transform, false);
				playerSpirit.Init(uE0B, position, uE0B._bodyUpdateMode != Player.EUpdateMode.None, characterControllerMode, null);
			}
			uE0B.Logger = new Player.\uE00E(LoggerMode.Add);
			return uE0B;
		}

		// Token: 0x06008D8B RID: 36235 RVA: 0x002DC638 File Offset: 0x002DA838
		protected virtual \uE383 CreatePhysical()
		{
			return new \uE381();
		}

		// Token: 0x06008D8C RID: 36236 RVA: 0x002DC640 File Offset: 0x002DA840
		protected virtual void CreateBodyAnimator(Animator animator, EUpdateQueue updateQueue, bool useSimplifiedSkeleton)
		{
			if (\uE2F9.Config.UseBodyFastAnimator)
			{
				\uE5FA fastAnimatorController = \uE617.Deserialize(Singleton<\uF1C4>.Instance.GetAsset(this.UsedSimplifiedSkeleton ? \uE71F.ZOMBIE_FAST_ANIMATOR_CONTROLLER : \uE71F.PLAYER_FAST_ANIMATOR_CONTROLLER).bytes);
				RootMotionBlendTable asset = Singleton<\uF1C4>.Instance.GetAsset(this.UsedSimplifiedSkeleton ? \uE71F.ZOMBIE_ROOTMOTION_TABLE : \uE71F.PLAYER_ROOTMOTION_TABLE);
				asset.LoadNodes();
				this._bodyUpdateMode = Player.EUpdateMode.Manual;
				this._animators[0] = \uE676.CreateAnimator(fastAnimatorController, asset._loadedNodes, this.PlayerBones.BodyTransform.Original, this.PlayerBones.PlayableAnimator);
				this._animators[0].cullingMode = AnimatorCullingMode.AlwaysAnimate;
				this._animators[0].updateMode = ((updateQueue == EUpdateQueue.FixedUpdate) ? AnimatorUpdateMode.AnimatePhysics : AnimatorUpdateMode.Normal);
				CharacterClipsKeeper asset2 = Singleton<\uF1C4>.Instance.GetAsset(this.UsedSimplifiedSkeleton ? \uE71F.ZOMBIE_ANIMATION_CLIPS_KEEPER : \uE71F.PLAYER_ANIMATION_CLIPS_KEEPER);
				\uE611 uE = this._animators[0] as \uE611;
				this.PlayerBones.PlayableAnimator.Init(this._animators[0], uE.GetParametersCache(), asset, asset2, false);
				this.PlayerBones.PlayableAnimator.SetCuller(new \uE60F(this.PlayerBones.PlayableAnimator));
				this.PlayerBones.PlayableAnimator.Play();
				for (int i = 0; i < this.PlayerBones.PlayableAnimator.initialLayerInfo.Length; i++)
				{
					this._animators[0].SetLayerWeight(i, this.PlayerBones.PlayableAnimator.initialLayerInfo[i].weight);
				}
				return;
			}
			this._animators[0] = \uE676.CreateAnimator(animator);
			this._animators[0].cullingMode = AnimatorCullingMode.AlwaysAnimate;
			this._animators[0].updateMode = ((updateQueue == EUpdateQueue.FixedUpdate) ? AnimatorUpdateMode.AnimatePhysics : AnimatorUpdateMode.Normal);
			if (useSimplifiedSkeleton)
			{
				return;
			}
			this._animators[0].SetLayerWeight(17, 0f);
			this._animators[0].SetLayerWeight(19, 0f);
			if (this.IsAI)
			{
				this._animators[0].SetLayerWeight(15, 0f);
			}
		}

		// Token: 0x06008D8D RID: 36237 RVA: 0x002DC86C File Offset: 0x002DAA6C
		private void \uE050()
		{
			if (this._createdAnimator == null || this._createdRuntimeAnimatorController == null || \uE2F9.Config.UseBodyFastAnimator)
			{
				return;
			}
			this._animators[0].runtimeAnimatorController = this._createdRuntimeAnimatorController;
			if (this._createdAnimator.runtimeAnimatorController == null)
			{
				this._createdAnimator.runtimeAnimatorController = this._createdRuntimeAnimatorController;
			}
			this._createdAnimator = null;
			this._createdRuntimeAnimatorController = null;
		}

		// Token: 0x06008D8E RID: 36238 RVA: 0x002DC900 File Offset: 0x002DAB00
		protected virtual Task Init(Quaternion rotation, string layerName, EPointOfView pointOfView, Profile profile, Player.PlayerInventoryController inventoryController, IHealthController healthController, IStatisticsManager statisticsManager, \uF15B questController, \uF17A achievementsController, \uEB3A prestigeController, \uE75E filter, Player.EVoipState voipState, bool aiControlled = false, bool async = true)
		{
			Player.\uE041 uE;
			uE.<>t__builder = AsyncTaskMethodBuilder.Create();
			uE.<>4__this = this;
			uE.rotation = rotation;
			uE.layerName = layerName;
			uE.pointOfView = pointOfView;
			uE.profile = profile;
			uE.inventoryController = inventoryController;
			uE.healthController = healthController;
			uE.statisticsManager = statisticsManager;
			uE.questController = questController;
			uE.achievementsController = achievementsController;
			uE.prestigeController = prestigeController;
			uE.filter = filter;
			uE.voipState = voipState;
			uE.aiControlled = aiControlled;
			uE.async = async;
			uE.<>1__state = -1;
			uE.<>t__builder.Start<Player.\uE041>(ref uE);
			return uE.<>t__builder.Task;
		}

		// Token: 0x06008D8F RID: 36239 RVA: 0x002DC9DC File Offset: 0x002DABDC
		private void \uE051(bool aiControlled)
		{
			if (aiControlled)
			{
				return;
			}
			\uE714.\uE019 mountingSettings = Singleton<\uE714>.Instance.MountingSettings;
			this._weaponMountingComponent = new \uEB45(this._playerBody.PlayerBones.weaponMountingView, this.MovementContext, this.ProceduralWeaponAnimation, mountingSettings.PointDetectionSettings, mountingSettings.MovementSettings, this.ProceduralWeaponAnimation.HandsContainer);
			this.HandsChangingEvent += this._weaponMountingComponent.CancelFindingPoint;
		}

		// Token: 0x06008D90 RID: 36240 RVA: 0x002DCA50 File Offset: 0x002DAC50
		protected virtual void InitVaultingComponent(bool aiControlled)
		{
			if (aiControlled)
			{
				return;
			}
			\uE714.VaultingGlobalSettings vaultingSettings = Singleton<\uE714>.Instance.VaultingSettings;
			if (!vaultingSettings.IsActive)
			{
				return;
			}
			\uEB54 uEB = new \uEB54(this.MovementContext, vaultingSettings, new Func<bool>(this.\uE08C), new Func<bool>(this.\uE08D), new Func<bool>(this.\uE08E));
			this._vaultingComponent = uEB;
			this._vaultingComponentDebug = uEB;
			this._vaultingParameters = uEB;
			this.UpdateEvent += this._vaultingComponent.DoVaultingTick;
			this._vaultingGameplayRestrictions = new \uEB56(this, uEB);
			this.InitVaultingAudioControllers(this._vaultingParameters);
		}

		// Token: 0x06008D91 RID: 36241 RVA: 0x002DCAF8 File Offset: 0x002DACF8
		protected virtual void CreateSlotObservers()
		{
			this.NightVisionObserver = new Player.\uE00F<NightVisionComponent>(this.Equipment.GetSlot(EquipmentSlot.Headwear), new Func<NightVisionComponent, Action, Action>(Player.<>c.<>9.\uE008));
			this.ThermalVisionObserver = new Player.\uE00F<ThermalVisionComponent>(this.Equipment.GetSlot(EquipmentSlot.Headwear), new Func<ThermalVisionComponent, Action, Action>(Player.<>c.<>9.\uE009));
			this.FaceShieldObserver = new Player.\uE00F<FaceShieldComponent>(this.Equipment.GetSlot(EquipmentSlot.Headwear), new Func<FaceShieldComponent, Action, Action>(Player.<>c.<>9.\uE00A));
			this.FaceCoverObserver = new Player.\uE00F<FaceShieldComponent>(this.Equipment.GetSlot(EquipmentSlot.FaceCover), new Func<FaceShieldComponent, Action, Action>(Player.<>c.<>9.\uE00B));
		}

		// Token: 0x06008D92 RID: 36242 RVA: 0x002DCBE4 File Offset: 0x002DADE4
		private void \uE052(EBodyPart arg1, ValueStruct arg2)
		{
			this.ExecuteSkill(new Action<float>(this.Skills.SurgeryAction.Complete));
			this.UpdateSpeedLimitByHealth();
		}

		// Token: 0x06008D93 RID: 36243 RVA: 0x002DCC0C File Offset: 0x002DAE0C
		private void \uE053(EBodyPart arg1, EDamageType arg2)
		{
			if (arg1 != EBodyPart.LeftLeg)
			{
				if (arg1 != EBodyPart.RightLeg)
				{
					goto IL_2A;
				}
			}
			if (this.CurrentState.Name == EPlayerState.Sprint)
			{
				this.StartInflictSelfDamageCoroutine();
			}
			IL_2A:
			this.UpdateConditionsAfterBodyPartStateChanged(arg1);
		}

		// Token: 0x06008D94 RID: 36244 RVA: 0x002DCC40 File Offset: 0x002DAE40
		public void BindSlotViewChangedAction(EquipmentSlot slot, Action<GameObject> action)
		{
			this._playerBody.SlotViews.GetByKey(slot).ParentedModel.Bind(action);
		}

		// Token: 0x06008D95 RID: 36245 RVA: 0x002DCC60 File Offset: 0x002DAE60
		private void \uE054(GameObject _)
		{
			this._helmetLightControllers = this.PlayerBones.Head.Original.GetComponentsInChildrenActiveIgnoreFirstLevel<TacticalComboVisualController>();
			foreach (TacticalComboVisualController tacticalComboVisualController in this._helmetLightControllers)
			{
				tacticalComboVisualController.UpdateBeams(false);
			}
			this.SendHeadlightsPacket(true);
		}

		// Token: 0x06008D96 RID: 36246 RVA: 0x002DCCD0 File Offset: 0x002DAED0
		public virtual void Say(EPhraseTrigger phrase, bool demand = false, float delay = 0f, ETagStatus mask = (ETagStatus)0, int probability = 100, bool aggressive = false)
		{
			if (phrase == EPhraseTrigger.Cooperation)
			{
				this.\uE0A6(EInteraction.FriendlyGesture);
			}
			if (phrase == EPhraseTrigger.MumblePhrase)
			{
				phrase = ((aggressive || Time.time < this.Awareness) ? EPhraseTrigger.OnFight : EPhraseTrigger.OnMutter);
			}
			if (!this.Speaker.OnDemandOnly || demand)
			{
				if (Singleton<\uE34D>.Instantiated)
				{
					Singleton<\uE34D>.Instance.SayPhrase(this, phrase);
				}
				if (demand || probability > 99 || probability > UnityEngine.Random.Range(0, 100))
				{
					ETagStatus etagStatus;
					if (!aggressive)
					{
						if (this.Awareness <= Time.time)
						{
							etagStatus = ETagStatus.Unaware;
							goto IL_A0;
						}
					}
					etagStatus = ETagStatus.Combat;
					IL_A0:
					ETagStatus etagStatus2 = etagStatus;
					if (delay > 0f)
					{
						this.Speaker.Queue(phrase, this.HealthStatus | mask | etagStatus2, delay, demand);
						return;
					}
					this.Speaker.Play(phrase, this.HealthStatus | mask | etagStatus2, demand, null);
				}
				return;
			}
			Action<EPhraseTrigger, int> phraseSituation = this.PhraseSituation;
			if (phraseSituation == null)
			{
				return;
			}
			phraseSituation(phrase, 5);
		}

		// Token: 0x06008D97 RID: 36247 RVA: 0x002DCDDC File Offset: 0x002DAFDC
		public void NeedRepairMalfPhraseSituation(Weapon.EMalfunctionState malfState, bool isKnown)
		{
			if (isKnown)
			{
				if (malfState != Weapon.EMalfunctionState.SoftSlide)
				{
					if (malfState != Weapon.EMalfunctionState.HardSlide)
					{
						goto IL_27;
					}
				}
				Action<EPhraseTrigger, int> phraseSituation = this.PhraseSituation;
				if (phraseSituation == null)
				{
					return;
				}
				phraseSituation(EPhraseTrigger.OnWeaponJammed, 5);
				return;
			}
			IL_27:
			Action<EPhraseTrigger, int> phraseSituation2 = this.PhraseSituation;
			if (phraseSituation2 == null)
			{
				return;
			}
			phraseSituation2(EPhraseTrigger.WeaponBroken, 5);
		}

		// Token: 0x17001446 RID: 5190
		// (get) Token: 0x06008D98 RID: 36248 RVA: 0x002DCE18 File Offset: 0x002DB018
		public virtual Vector3 LocalShotDirection
		{
			get
			{
				return this.ProceduralWeaponAnimation.ShotDirection;
			}
		}

		// Token: 0x06008D99 RID: 36249 RVA: 0x002DCE28 File Offset: 0x002DB028
		protected virtual void OnPhraseTold(EPhraseTrigger @event, TaggedClip clip, TagBank bank, \uE91A speaker)
		{
			this.\uE021(clip);
		}

		// Token: 0x17001447 RID: 5191
		// (get) Token: 0x06008D9A RID: 36250 RVA: 0x002DCE34 File Offset: 0x002DB034
		public ETagStatus HealthStatus
		{
			get
			{
				float normalized = this.HealthController.GetBodyPartHealth(EBodyPart.Common, false).Normalized;
				int num;
				int num2;
				this.HealthController.GetBodyPartsInCriticalCondition(0.15f, out num, out num2);
				if (num2 > 0 || normalized < 0.2f)
				{
					return ETagStatus.Dying;
				}
				if (num <= 2)
				{
					if (normalized >= 0.4f)
					{
						if (normalized < 0.9f)
						{
							return ETagStatus.Injured;
						}
						return ETagStatus.Healthy;
					}
				}
				return ETagStatus.BadlyInjured;
			}
		}

		// Token: 0x06008D9B RID: 36251 RVA: 0x002DCEC0 File Offset: 0x002DB0C0
		private void OnControllerColliderHit(ControllerColliderHit hit)
		{
			this.MovementContext.OnControllerColliderHit(hit);
		}

		// Token: 0x06008D9C RID: 36252 RVA: 0x002DCED0 File Offset: 0x002DB0D0
		protected virtual void OnDestroy()
		{
			this.Destroyed = true;
			\uE3A0.OnInitialized -= this.\uE01E;
			\uF01E.Instance.FoVUpdateAction -= this.OnFovUpdatedEvent;
			if (this.Speaker != null)
			{
				this.Speaker.OnPhraseTold -= this.OnPhraseTold;
				this.Speaker.OnDestroy();
			}
			this.\uE032();
			this.\uE020();
			this.\uE033();
			this.StopInteractionSound(0f);
			this.Dispose();
			if (\uE2F9.Config.UseSpiritPlayer)
			{
				if (this.Spirit != null)
				{
					this.Spirit.IsStub = true;
					UnityEngine.Object.Destroy(this.Spirit.gameObject);
				}
			}
		}

		// Token: 0x06008D9D RID: 36253 RVA: 0x002DCFB0 File Offset: 0x002DB1B0
		protected virtual void TraderStandingHandler(Profile.TraderInfo traderInfo)
		{
		}

		// Token: 0x06008D9E RID: 36254 RVA: 0x002DCFB4 File Offset: 0x002DB1B4
		public virtual void OnInteractWithLightHouseTraderZone(\uF043[] AllowedPlayers, \uF043[] UnallowedPlayers)
		{
		}

		// Token: 0x06008D9F RID: 36255 RVA: 0x002DCFB8 File Offset: 0x002DB1B8
		public virtual void OnLighthouseTraderZoneDebugToolSwitch(bool active)
		{
		}

		// Token: 0x06008DA0 RID: 36256 RVA: 0x002DCFBC File Offset: 0x002DB1BC
		public virtual void ShowStringNotification(string message)
		{
		}

		// Token: 0x06008DA1 RID: 36257 RVA: 0x002DCFC0 File Offset: 0x002DB1C0
		private void \uE055(EBodyPart bodyPart, float diff, \uF061 damageInfo)
		{
			if (Mathf.Abs(diff) < 0.01f)
			{
				return;
			}
			this.UpdateConditionsAfterBodyPartStateChanged(bodyPart);
		}

		// Token: 0x06008DA2 RID: 36258 RVA: 0x002DCFD8 File Offset: 0x002DB1D8
		public void UpdateConditionsAfterBodyPartStateChanged(EBodyPart bodyPart)
		{
			if (bodyPart != EBodyPart.LeftLeg)
			{
				if (bodyPart != EBodyPart.RightLeg)
				{
					if (bodyPart != EBodyPart.LeftArm)
					{
						if (bodyPart != EBodyPart.RightArm)
						{
							goto IL_2C;
						}
					}
					this.UpdateArmsCondition();
					goto IL_2C;
				}
			}
			this.UpdateSpeedLimitByHealth();
			IL_2C:
			this.UpdateBreathStatus();
		}

		// Token: 0x06008DA3 RID: 36259 RVA: 0x002DD00C File Offset: 0x002DB20C
		public virtual void UpdateArmsCondition()
		{
			if (this.HealthController.FindActiveEffect<\uED50>(EBodyPart.Common) != null)
			{
				this.MovementContext.SetPhysicalCondition(EPhysicalCondition.LeftArmDamaged, false);
				this.MovementContext.SetPhysicalCondition(EPhysicalCondition.RightArmDamaged, false);
				return;
			}
			bool val = this.HealthController.IsBodyPartBroken(EBodyPart.LeftArm) || this.HealthController.IsBodyPartDestroyed(EBodyPart.LeftArm);
			bool val2 = this.HealthController.IsBodyPartBroken(EBodyPart.RightArm) || this.HealthController.IsBodyPartDestroyed(EBodyPart.RightArm);
			this.MovementContext.SetPhysicalCondition(EPhysicalCondition.LeftArmDamaged, val);
			this.MovementContext.SetPhysicalCondition(EPhysicalCondition.RightArmDamaged, val2);
		}

		// Token: 0x06008DA4 RID: 36260 RVA: 0x002DD0BC File Offset: 0x002DB2BC
		public virtual void OnChangeRadioTransmitterState(bool isEncoded, RadioTransmitterStatus status, bool isAgressor)
		{
			RadioTransmitterRecodableComponent radioTransmitterRecodableComponent;
			if (this.RecodableItemsHandler.TryToGetRecodableComponent<RadioTransmitterRecodableComponent>(out radioTransmitterRecodableComponent))
			{
				radioTransmitterRecodableComponent.SetStatus(status);
			}
			this.IsAgressorInLighthouseTraderZone = isAgressor;
		}

		// Token: 0x06008DA5 RID: 36261 RVA: 0x002DD0EC File Offset: 0x002DB2EC
		public virtual void OnHealthEffectAdded(\uED31 effect)
		{
			Player.\uE03A uE03A = new Player.\uE03A();
			uE03A.<>4__this = this;
			uE03A.effect = effect;
			bool flag = true;
			if (uE03A.effect is \uED4D)
			{
				this.MovementContext.SetPhysicalCondition(EPhysicalCondition.Tremor, true);
			}
			else if (uE03A.effect is \uED4F)
			{
				if (this.MovementContext.PhysicalConditionIs(EPhysicalCondition.OnPainkillers))
				{
					flag = false;
				}
			}
			else if (uE03A.effect is \uED50 || uE03A.effect is \uED48 || uE03A.effect is \uED40)
			{
				this.UpdateSpeedLimitByHealth();
				this.UpdateArmsCondition();
				if (uE03A.effect is \uED48)
				{
					this.Physical.BerserkRestorationFactor = true;
					this.Say(EPhraseTrigger.OnFight, true, 0f, (ETagStatus)0, 100, false);
				}
				\uED40 uED = uE03A.effect as \uED40;
				if (uED != null && !uED.WasPaused && this.FractureSound != null && Singleton<BetterAudio>.Instantiated)
				{
					Singleton<BetterAudio>.Instance.PlayAtPoint(this.Position, this.FractureSound, \uF01E.Instance.Distance(this.Position), BetterAudio.AudioSourceGroupType.Impacts, 15, 1f, EOcclusionTest.Fast, null, false);
				}
			}
			else if (uE03A.effect is \uED5D)
			{
				this.MovementContext.SetPhysicalCondition(EPhysicalCondition.Panic, true);
			}
			else if (uE03A.effect is \uED53)
			{
				this.MovementContext.SetPhysicalCondition(EPhysicalCondition.Tremor, true);
			}
			else
			{
				\uED62 uED2 = uE03A.effect as \uED62;
				if (uED2 != null)
				{
					this.MovementContext.SetPhysicalCondition(EPhysicalCondition.UsingMeds, true);
					if (uED2.NoMove)
					{
						this.MovementContext.SetPhysicalCondition(EPhysicalCondition.HealingLegs, true);
					}
				}
				else if (uE03A.effect is \uED4E)
				{
					this.ExecuteSkill(new Action(uE03A.\uE000));
				}
				else if (uE03A.effect is \uED58)
				{
					this.Fatigue = uE03A.effect;
				}
				else if (uE03A.effect is \uED4A)
				{
					this.\uE056(uE03A.effect.WorkStateTime);
				}
			}
			if (flag)
			{
				this.ExecuteSkill(new Action(uE03A.\uE001));
			}
		}

		// Token: 0x06008DA6 RID: 36262 RVA: 0x002DD344 File Offset: 0x002DB544
		private void \uE056(float time)
		{
			if (!(this.Equipment.GetSlot(EquipmentSlot.Earpiece).ContainedItem is \uEE4B))
			{
				Singleton<BetterAudio>.Instance.StartTinnitusEffect(time, this._tinnitus);
			}
		}

		// Token: 0x06008DA7 RID: 36263 RVA: 0x002DD370 File Offset: 0x002DB570
		public virtual void OnHealthEffectRemoved(\uED31 effect)
		{
			if (effect is \uED4D)
			{
				this.MovementContext.SetPhysicalCondition(EPhysicalCondition.Tremor, false);
				return;
			}
			if (effect is \uED50 || effect is \uED48 || effect is \uED40)
			{
				this.UpdateSpeedLimitByHealth();
				this.UpdateArmsCondition();
				if (effect is \uED48)
				{
					this.Physical.BerserkRestorationFactor = false;
					return;
				}
			}
			else
			{
				if (effect is \uED53 && this._healthController.FindActiveEffect<\uED53>(EBodyPart.Common) == null)
				{
					this.MovementContext.SetPhysicalCondition(EPhysicalCondition.Tremor, false);
					return;
				}
				if (effect is \uED5D && this._healthController.FindActiveEffect<\uED5D>(EBodyPart.Common) == null)
				{
					this.MovementContext.SetPhysicalCondition(EPhysicalCondition.Panic, false);
					return;
				}
				if (effect is \uED62 && this._healthController.FindActiveEffect<\uED62>(EBodyPart.Common) == null)
				{
					this.MovementContext.SetPhysicalCondition(EPhysicalCondition.UsingMeds, false);
					this.MovementContext.SetPhysicalCondition(EPhysicalCondition.HealingLegs, false);
					this.MovementContext.SetPhysicalCondition(EPhysicalCondition.RightLegDamaged, this.HealthController.IsBodyPartBroken(EBodyPart.RightLeg) || this.HealthController.IsBodyPartDestroyed(EBodyPart.RightLeg));
					this.MovementContext.SetPhysicalCondition(EPhysicalCondition.LeftLegDamaged, this.HealthController.IsBodyPartBroken(EBodyPart.LeftLeg) || this.HealthController.IsBodyPartDestroyed(EBodyPart.LeftLeg));
					return;
				}
				if (effect is \uED4E)
				{
					this.ExecuteSkill(new Action(this.\uE08F));
					return;
				}
				if (effect is \uED58)
				{
					this.Fatigue = null;
				}
			}
		}

		// Token: 0x06008DA8 RID: 36264 RVA: 0x002DD510 File Offset: 0x002DB710
		protected virtual void UpdateSpeedLimitByHealth()
		{
			this.MovementContext.SetPhysicalCondition(EPhysicalCondition.OnPainkillers, this.HealthController.FindActiveEffect<\uED50>(EBodyPart.Common) != null || this.HealthController.FindActiveEffect<\uED48>(EBodyPart.Common) != null);
			this.MovementContext.SetPhysicalCondition(EPhysicalCondition.RightLegDamaged, this.HealthController.IsBodyPartBroken(EBodyPart.RightLeg) || this.HealthController.IsBodyPartDestroyed(EBodyPart.RightLeg));
			this.MovementContext.SetPhysicalCondition(EPhysicalCondition.LeftLegDamaged, this.HealthController.IsBodyPartBroken(EBodyPart.LeftLeg) || this.HealthController.IsBodyPartDestroyed(EBodyPart.LeftLeg));
			this.RemoveStateSpeedLimit(Player.ESpeedLimit.HealthCondition);
			if (this.MovementContext.PhysicalConditionIs(EPhysicalCondition.RightLegDamaged) || this.MovementContext.PhysicalConditionIs(EPhysicalCondition.LeftLegDamaged))
			{
				if (!this.MovementContext.PhysicalConditionIs(EPhysicalCondition.OnPainkillers))
				{
					this.MovementContext.EnableSprint(false);
					if (this.MovementContext.PhysicalConditionIs(EPhysicalCondition.RightLegDamaged))
					{
						if (this.MovementContext.PhysicalConditionIs(EPhysicalCondition.LeftLegDamaged))
						{
							this.AddStateSpeedLimit(0.2f, Player.ESpeedLimit.HealthCondition);
							goto IL_10F;
						}
					}
					this.AddStateSpeedLimit(0.3f, Player.ESpeedLimit.HealthCondition);
				}
				IL_10F:
				if (this.CurrentState.Name == EPlayerState.Sprint)
				{
					this.StartInflictSelfDamageCoroutine();
				}
			}
		}

		// Token: 0x06008DA9 RID: 36265 RVA: 0x002DD64C File Offset: 0x002DB84C
		public void OnItemRemoved(\uEED9 eventArgs)
		{
			if (eventArgs.Status == CommandStatus.Succeed)
			{
				this.OnItemAddedOrRemoved(eventArgs.Item, eventArgs.From, false);
			}
		}

		// Token: 0x06008DAA RID: 36266 RVA: 0x002DD66C File Offset: 0x002DB86C
		public void OnSetInHands(\uEEDF eventArgs)
		{
			if (eventArgs.Status == CommandStatus.Succeed)
			{
				this._itemInHands.Value = eventArgs.Item;
			}
		}

		// Token: 0x06008DAB RID: 36267 RVA: 0x002DD688 File Offset: 0x002DB888
		public void OnItemAdded(\uEED8 eventArgs)
		{
			if (eventArgs.Status == CommandStatus.Succeed)
			{
				this.OnItemAddedOrRemoved(eventArgs.Item, eventArgs.To, true);
				ArmorComponent itemComponent = eventArgs.Item.GetItemComponent<ArmorComponent>();
				if (itemComponent != null)
				{
					this.OnArmorPointsChanged(itemComponent, true);
				}
				SideEffectComponent itemComponent2 = eventArgs.Item.GetItemComponent<SideEffectComponent>();
				if (itemComponent2 != null)
				{
					this.OnSideEffectApplied(itemComponent2);
				}
			}
		}

		// Token: 0x06008DAC RID: 36268 RVA: 0x002DD6F4 File Offset: 0x002DB8F4
		public void SwitchHeadLights(bool togglesActive, bool changesState)
		{
			if (this.IsHeadLightsAnimationActive || !this.StateIsSuitableForHandInput || !Enumerable.Any<TacticalComboVisualController>(this._helmetLightControllers))
			{
				return;
			}
			foreach (TacticalComboVisualController tacticalComboVisualController in this._helmetLightControllers)
			{
				\uE825 lightState = tacticalComboVisualController.LightMod.GetLightState(togglesActive, changesState);
				tacticalComboVisualController.LightMod.SetLightState(lightState);
			}
			this.SendHeadlightsPacket(false);
			this.SwitchHeadLightsAnimation();
		}

		// Token: 0x06008DAD RID: 36269 RVA: 0x002DD784 File Offset: 0x002DB984
		protected virtual void SendHeadlightsPacket(bool isSilent)
		{
		}

		// Token: 0x06008DAE RID: 36270 RVA: 0x002DD788 File Offset: 0x002DB988
		protected virtual void SendWeaponLightPacket()
		{
		}

		// Token: 0x06008DAF RID: 36271 RVA: 0x002DD78C File Offset: 0x002DB98C
		protected void UpdatePhonesReally()
		{
			\uEADF uEADF;
			if (!\uF00A.TryGetData<\uEADF>(out uEADF))
			{
				return;
			}
			CompoundItem compoundItem = this.Equipment.GetSlot(EquipmentSlot.Headwear).ContainedItem as CompoundItem;
			CompoundItem compoundItem2 = this.Equipment.GetSlot(EquipmentSlot.FaceCover).ContainedItem as CompoundItem;
			\uEE4B uEE4B;
			if ((uEE4B = (this.Equipment.GetSlot(EquipmentSlot.Earpiece).ContainedItem as \uEE4B)) == null)
			{
				uEE4B = ((compoundItem != null) ? Enumerable.FirstOrDefault<\uEE4B>(Enumerable.OfType<\uEE4B>(compoundItem.GetAllItemsFromCollection())) : null);
			}
			\uEE4B uEE4B2 = uEE4B;
			\uEE4A template = uEADF.Default;
			if (uEE4B2 != null)
			{
				template = uEE4B2.Template;
			}
			if (template.IsDefault())
			{
				\uEDF2 uEDF = ((compoundItem != null) ? compoundItem.Template : null) as \uEDF2;
				if (uEDF != null)
				{
					EDeafStrength deafStrength = Enumerable.FirstOrDefault<EDeafStrength>(Enumerable.OrderByDescending<EDeafStrength, int>(Enumerable.Append<EDeafStrength>(Enumerable.Select<CompositeArmorComponent, EDeafStrength>(compoundItem.GetItemComponentsInChildren(true), new Func<CompositeArmorComponent, EDeafStrength>(Player.<>c.<>9.\uE00C)), uEDF.DeafStrength), new Func<EDeafStrength, int>(Player.<>c.<>9.\uE00D)));
					template = uEADF.GetHeadphonesTemplateByDeaf(deafStrength);
				}
			}
			if (template.IsDefault())
			{
				if (compoundItem2 != null)
				{
					EDeafStrength deafStrength2 = Enumerable.FirstOrDefault<EDeafStrength>(Enumerable.OrderByDescending<EDeafStrength, int>(Enumerable.Select<CompositeArmorComponent, EDeafStrength>(compoundItem2.GetItemComponentsInChildren(true), new Func<CompositeArmorComponent, EDeafStrength>(Player.<>c.<>9.\uE00E)), new Func<EDeafStrength, int>(Player.<>c.<>9.\uE00F)));
					template = uEADF.GetHeadphonesTemplateByDeaf(deafStrength2);
				}
			}
			Singleton<BetterAudio>.Instance.ApplyHeadphonesTemplate(template);
		}

		// Token: 0x06008DB0 RID: 36272 RVA: 0x002DD94C File Offset: 0x002DBB4C
		protected virtual void UpdatePhones()
		{
			if (this.IsYourPlayer)
			{
				this.UpdatePhonesReally();
			}
		}

		// Token: 0x06008DB1 RID: 36273 RVA: 0x002DD95C File Offset: 0x002DBB5C
		protected virtual void OnItemAddedOrRemoved(Item item, ItemAddress location, bool added)
		{
			Player.\uE03B uE03B = new Player.\uE03B();
			if (location is \uEF00)
			{
				return;
			}
			uE03B.headSlots = new Slot[]
			{
				this.Equipment.GetSlot(EquipmentSlot.Eyewear),
				this.Equipment.GetSlot(EquipmentSlot.Headwear),
				this.Equipment.GetSlot(EquipmentSlot.FaceCover)
			};
			IEnumerable<ItemAddress> allParentLocations = location.GetAllParentLocations(true);
			if (Enumerable.Any<ItemAddress>(allParentLocations, new Func<ItemAddress, bool>(uE03B.\uE000)))
			{
				Action<bool> onGlassesChanged = this.OnGlassesChanged;
				if (onGlassesChanged != null)
				{
					onGlassesChanged(this.HasGlasses);
				}
				if (Enumerable.Any<NightVisionComponent>(item.GetItemComponentsInChildren(true)))
				{
					this.NightVisionObserver.Update();
				}
				if (Enumerable.Any<ThermalVisionComponent>(item.GetItemComponentsInChildren(true)))
				{
					this.ThermalVisionObserver.Update();
				}
				if (Enumerable.Any<FaceShieldComponent>(item.GetItemComponentsInChildren(true)))
				{
					this.FaceShieldObserver.Update();
					this.FaceCoverObserver.Update();
				}
			}
			uE03B.armorSlots = Enumerable.ToArray<Slot>(Enumerable.Select<EquipmentSlot, Slot>(Inventory.ArmorSlots, new Func<EquipmentSlot, Slot>(this.Equipment.GetSlot)));
			if (Enumerable.Any<ArmorComponent>(item.GetItemComponentsInChildren(true)))
			{
				if (Enumerable.Any<ItemAddress>(allParentLocations, new Func<ItemAddress, bool>(uE03B.\uE001)))
				{
					goto IL_140;
				}
			}
			if (item.GetItemComponent<EquipmentPenaltyComponent>() == null)
			{
				goto IL_152;
			}
			IL_140:
			this.RecalculateEquipmentParams();
			IL_152:
			this.UpdatePhones();
		}

		// Token: 0x17001448 RID: 5192
		// (get) Token: 0x06008DB2 RID: 36274 RVA: 0x002DDAC4 File Offset: 0x002DBCC4
		public string TryGetId
		{
			get
			{
				Profile profile = this.Profile;
				string result;
				if ((result = ((profile != null) ? profile.Id : null)) == null)
				{
					result = this.PlayerId.ToString();
				}
				return result;
			}
		}

		// Token: 0x17001449 RID: 5193
		// (get) Token: 0x06008DB3 RID: 36275 RVA: 0x002DDAFC File Offset: 0x002DBCFC
		// (set) Token: 0x06008DB4 RID: 36276 RVA: 0x002DDB04 File Offset: 0x002DBD04
		public int PlayerId { get; private set; }

		// Token: 0x1700144A RID: 5194
		// (get) Token: 0x06008DB5 RID: 36277 RVA: 0x002DDB10 File Offset: 0x002DBD10
		public string ProfileId
		{
			get
			{
				return this.Profile.Id;
			}
		}

		// Token: 0x1700144B RID: 5195
		// (get) Token: 0x06008DB6 RID: 36278 RVA: 0x002DDB20 File Offset: 0x002DBD20
		public string AccountId
		{
			get
			{
				return this.Profile.AccountId;
			}
		}

		// Token: 0x1700144C RID: 5196
		// (get) Token: 0x06008DB7 RID: 36279 RVA: 0x002DDB30 File Offset: 0x002DBD30
		// (set) Token: 0x06008DB8 RID: 36280 RVA: 0x002DDB38 File Offset: 0x002DBD38
		public Profile Profile { get; private set; }

		// Token: 0x1700144D RID: 5197
		// (get) Token: 0x06008DB9 RID: 36281 RVA: 0x002DDB44 File Offset: 0x002DBD44
		// (set) Token: 0x06008DBA RID: 36282 RVA: 0x002DDB4C File Offset: 0x002DBD4C
		public IStatisticsManager StatisticsManager { get; protected set; }

		// Token: 0x1700144E RID: 5198
		// (get) Token: 0x06008DBB RID: 36283 RVA: 0x002DDB58 File Offset: 0x002DBD58
		public SkillManager Skills
		{
			get
			{
				Profile profile = this.Profile;
				if (profile == null)
				{
					return null;
				}
				return profile.Skills;
			}
		}

		// Token: 0x14000187 RID: 391
		// (add) Token: 0x06008DBC RID: 36284 RVA: 0x002DDB6C File Offset: 0x002DBD6C
		// (remove) Token: 0x06008DBD RID: 36285 RVA: 0x002DDBB0 File Offset: 0x002DBDB0
		public event Action<string, int> OnSpecialPlaceVisited;

		// Token: 0x1700144F RID: 5199
		// (get) Token: 0x06008DBE RID: 36286 RVA: 0x002DDBF4 File Offset: 0x002DBDF4
		public EUpdateQueue UpdateQueue
		{
			get
			{
				return this._updateQueue;
			}
		}

		// Token: 0x17001450 RID: 5200
		// (get) Token: 0x06008DBF RID: 36287 RVA: 0x002DDBFC File Offset: 0x002DBDFC
		public EUpdateQueue ArmsUpdateQueue
		{
			get
			{
				return this._armsUpdateQueue;
			}
		}

		// Token: 0x17001451 RID: 5201
		// (get) Token: 0x06008DC0 RID: 36288 RVA: 0x002DDC04 File Offset: 0x002DBE04
		// (set) Token: 0x06008DC1 RID: 36289 RVA: 0x002DDC0C File Offset: 0x002DBE0C
		public ECameraType VisibleToCameraType { get; set; }

		// Token: 0x17001452 RID: 5202
		// (get) Token: 0x06008DC2 RID: 36290 RVA: 0x002DDC18 File Offset: 0x002DBE18
		// (set) Token: 0x06008DC3 RID: 36291 RVA: 0x002DDC20 File Offset: 0x002DBE20
		public bool IsVisibleToCamera { get; set; } = true;

		// Token: 0x06008DC4 RID: 36292 RVA: 0x002DDC2C File Offset: 0x002DBE2C
		public static ECameraType GetVisibleToCamera(IPlayer player)
		{
			if (player == null)
			{
				return ECameraType.Default;
			}
			return player.VisibleToCameraType;
		}

		// Token: 0x17001453 RID: 5203
		// (get) Token: 0x06008DC5 RID: 36293 RVA: 0x002DDC3C File Offset: 0x002DBE3C
		public EUpdateQueue PhysicalUpdateQueue
		{
			get
			{
				return EUpdateQueue.Update;
			}
		}

		// Token: 0x17001454 RID: 5204
		// (get) Token: 0x06008DC6 RID: 36294 RVA: 0x002DDC40 File Offset: 0x002DBE40
		public Player.EUpdateMode ArmsUpdateMode
		{
			get
			{
				return this._armsUpdateMode;
			}
		}

		// Token: 0x17001455 RID: 5205
		// (get) Token: 0x06008DC7 RID: 36295 RVA: 0x002DDC48 File Offset: 0x002DBE48
		public Player.EUpdateMode BodyUpdateMode
		{
			get
			{
				return this._bodyUpdateMode;
			}
		}

		// Token: 0x06008DC8 RID: 36296 RVA: 0x002DDC50 File Offset: 0x002DBE50
		[CanBeNull]
		public TItem TryGetItemInHands<TItem>() where TItem : Item
		{
			if (this._handsController == null)
			{
				return default(TItem);
			}
			return this._handsController.Item as TItem;
		}

		// Token: 0x17001456 RID: 5206
		// (get) Token: 0x06008DC9 RID: 36297 RVA: 0x002DDC90 File Offset: 0x002DBE90
		public Player GetPlayer
		{
			get
			{
				return this;
			}
		}

		// Token: 0x17001457 RID: 5207
		// (get) Token: 0x06008DCA RID: 36298 RVA: 0x002DDC94 File Offset: 0x002DBE94
		// (set) Token: 0x06008DCB RID: 36299 RVA: 0x002DDC9C File Offset: 0x002DBE9C
		public IAIData AIData { get; protected set; }

		// Token: 0x17001458 RID: 5208
		// (get) Token: 0x06008DCC RID: 36300 RVA: 0x002DDCA8 File Offset: 0x002DBEA8
		// (set) Token: 0x06008DCD RID: 36301 RVA: 0x002DDCB0 File Offset: 0x002DBEB0
		public PlayerLoyaltyData Loyalty { get; protected set; }

		// Token: 0x17001459 RID: 5209
		// (get) Token: 0x06008DCE RID: 36302 RVA: 0x002DDCBC File Offset: 0x002DBEBC
		public bool IsAI
		{
			get
			{
				return this.AIData != null && this.AIData.IsAI;
			}
		}

		// Token: 0x06008DCF RID: 36303 RVA: 0x002DDCD4 File Offset: 0x002DBED4
		public virtual void OnDeserializeFromServer(byte channelId, \uE630 reader)
		{
		}

		// Token: 0x06008DD0 RID: 36304 RVA: 0x002DDCD8 File Offset: 0x002DBED8
		public RadioTransmitterRecodableComponent FindRadioTransmitter()
		{
			RadioTransmitterRecodableComponent result;
			if (this.RecodableItemsHandler.TryToGetRecodableComponent<RadioTransmitterRecodableComponent>(out result))
			{
				return result;
			}
			return null;
		}

		// Token: 0x06008DD1 RID: 36305 RVA: 0x002DDCF8 File Offset: 0x002DBEF8
		public \uEE2D FindCultistAmulet()
		{
			Slot[] slots = (this.InventoryController.Inventory.Equipment.GetSlot(EquipmentSlot.Pockets).ContainedItem as \uEE8F).Slots;
			for (int i = 0; i < slots.Length; i++)
			{
				\uEE2D uEE2D = slots[i].ContainedItem as \uEE2D;
				if (uEE2D != null)
				{
					return uEE2D;
				}
			}
			return null;
		}

		// Token: 0x06008DD2 RID: 36306 RVA: 0x002DDD5C File Offset: 0x002DBF5C
		public bool HasMarkOfUnknown(out \uEE6B markOfUnknown)
		{
			CompoundItem compoundItem = this.InventoryController.Inventory.Equipment.GetSlot(EquipmentSlot.Pockets).ContainedItem as \uEE8F;
			markOfUnknown = null;
			Slot[] slots = compoundItem.Slots;
			for (int i = 0; i < slots.Length; i++)
			{
				\uEE6B uEE6B = slots[i].ContainedItem as \uEE6B;
				if (uEE6B != null)
				{
					markOfUnknown = uEE6B;
					return true;
				}
			}
			return false;
		}

		// Token: 0x14000188 RID: 392
		// (add) Token: 0x06008DD3 RID: 36307 RVA: 0x002DDDCC File Offset: 0x002DBFCC
		// (remove) Token: 0x06008DD4 RID: 36308 RVA: 0x002DDE10 File Offset: 0x002DC010
		public event Action<IPlayer> OnIPlayerDeadOrUnspawn;

		// Token: 0x1700145A RID: 5210
		// (get) Token: 0x06008DD5 RID: 36309 RVA: 0x002DDE54 File Offset: 0x002DC054
		// (set) Token: 0x06008DD6 RID: 36310 RVA: 0x002DDE5C File Offset: 0x002DC05C
		public Dictionary<BodyPartType, EnemyPart> MainParts { get; private set; }

		// Token: 0x14000189 RID: 393
		// (add) Token: 0x06008DD7 RID: 36311 RVA: 0x002DDE68 File Offset: 0x002DC068
		// (remove) Token: 0x06008DD8 RID: 36312 RVA: 0x002DDEAC File Offset: 0x002DC0AC
		public event Action<Player.AbstractHandsController, Player.AbstractHandsController> OnHandsControllerChanged;

		// Token: 0x06008DD9 RID: 36313 RVA: 0x002DDEF0 File Offset: 0x002DC0F0
		public bool HasFirearmInHands()
		{
			Player.FirearmController firearmController = this.HandsController as Player.FirearmController;
			return firearmController != null && !firearmController.Weapon.IsStationaryWeapon;
		}

		// Token: 0x1700145B RID: 5211
		// (get) Token: 0x06008DDA RID: 36314 RVA: 0x002DDF24 File Offset: 0x002DC124
		// (set) Token: 0x06008DDB RID: 36315 RVA: 0x002DDF2C File Offset: 0x002DC12C
		public virtual Player.AbstractHandsController HandsController
		{
			get
			{
				return this._handsController;
			}
			protected set
			{
				Player.AbstractHandsController handsController = this._handsController;
				this._handsController = value;
				PlayerAnimator.EWeaponAnimationType weaponAnimationType = this.GetWeaponAnimationType(this._handsController);
				this.MovementContext.PlayerAnimatorSetWeaponId(weaponAnimationType);
				this._isGrenadeOrKnife = (this._handsController != null && weaponAnimationType > PlayerAnimator.EWeaponAnimationType.Rifle);
				if (this._isGrenadeOrKnife)
				{
					this.\uE011(this.MovementContext.CurrentState.Name, this.MovementContext.CurrentState.Name);
				}
				if (handsController != this._handsController)
				{
					if (this.OnHandsControllerChanged != null)
					{
						this.OnHandsControllerChanged(handsController, this._handsController);
					}
				}
			}
		}

		// Token: 0x06008DDC RID: 36316 RVA: 0x002DDFEC File Offset: 0x002DC1EC
		protected PlayerAnimator.EWeaponAnimationType GetWeaponAnimationType(Player.AbstractHandsController handsController)
		{
			if (!(handsController == null) && handsController.Item != null)
			{
				if (!(handsController is Player.EmptyHandsController))
				{
					Item item = handsController.Item;
					if (item is \uEE87 || item is \uEE91 || item is \uEE96)
					{
						return PlayerAnimator.EWeaponAnimationType.Pistol;
					}
					\uEEA0 uEEA = item as \uEEA0;
					if (uEEA != null)
					{
						if (!uEEA.WeapClass.Equals(\uF1F8.\uE000(44568)))
						{
							return PlayerAnimator.EWeaponAnimationType.Rifle;
						}
						return PlayerAnimator.EWeaponAnimationType.Pistol;
					}
					else
					{
						\uEE47 uEE = item as \uEE47;
						if (uEE != null && uEE.IsFlareGun)
						{
							return PlayerAnimator.EWeaponAnimationType.Pistol;
						}
						if (item.GetItemComponent<KnifeComponent>() != null)
						{
							return PlayerAnimator.EWeaponAnimationType.Knife;
						}
						if (item is \uEEC9)
						{
							return PlayerAnimator.EWeaponAnimationType.ThrowWeapon;
						}
						if (item is \uEEA2)
						{
							return PlayerAnimator.EWeaponAnimationType.RocketLauncher;
						}
						return PlayerAnimator.EWeaponAnimationType.Rifle;
					}
				}
			}
			return PlayerAnimator.EWeaponAnimationType.EmptyHands;
		}

		// Token: 0x1700145C RID: 5212
		// (get) Token: 0x06008DDD RID: 36317 RVA: 0x002DE0B8 File Offset: 0x002DC2B8
		public EPlayerState CurrentStateName
		{
			get
			{
				return this.MovementContext.CurrentState.Name;
			}
		}

		// Token: 0x1700145D RID: 5213
		// (get) Token: 0x06008DDE RID: 36318 RVA: 0x002DE0CC File Offset: 0x002DC2CC
		public virtual InventoryController InventoryController
		{
			get
			{
				return this._inventoryController;
			}
		}

		// Token: 0x1700145E RID: 5214
		// (get) Token: 0x06008DDF RID: 36319 RVA: 0x002DE0D4 File Offset: 0x002DC2D4
		internal \uF15B \uE005
		{
			get
			{
				return this._questController;
			}
		}

		// Token: 0x1700145F RID: 5215
		// (get) Token: 0x06008DE0 RID: 36320 RVA: 0x002DE0DC File Offset: 0x002DC2DC
		public IPlayerSearchController SearchController
		{
			get
			{
				return this._inventoryController.PlayerSearchController;
			}
		}

		// Token: 0x17001460 RID: 5216
		// (get) Token: 0x06008DE1 RID: 36321 RVA: 0x002DE0EC File Offset: 0x002DC2EC
		internal \uF17A \uE006
		{
			get
			{
				return this._achievementsController;
			}
		}

		// Token: 0x17001461 RID: 5217
		// (get) Token: 0x06008DE2 RID: 36322 RVA: 0x002DE0F4 File Offset: 0x002DC2F4
		internal \uEB3A \uE007
		{
			get
			{
				return this._prestigeController;
			}
		}

		// Token: 0x17001462 RID: 5218
		// (get) Token: 0x06008DE3 RID: 36323 RVA: 0x002DE0FC File Offset: 0x002DC2FC
		internal IEnumerable<\uF158> \uE008
		{
			get
			{
				for (;;)
				{
					 obj;
					switch (obj)
					{
					case 0:
						if (this._questController != null)
						{
							yield return this._questController;
							continue;
						}
						goto IL_46;
					case 1:
						goto IL_46;
					case 2:
						goto IL_6A;
					case 3:
						goto IL_AB;
					}
					break;
					IL_46:
					if (this._achievementsController != null)
					{
						yield return this._achievementsController;
						continue;
					}
					IL_6A:
					if (this._prestigeController == null)
					{
						goto IL_BA;
					}
					yield return this._prestigeController;
				}
				yield break;
				IL_AB:
				IL_BA:
				yield break;
			}
		}

		// Token: 0x17001463 RID: 5219
		// (get) Token: 0x06008DE4 RID: 36324 RVA: 0x002DE10C File Offset: 0x002DC30C
		public int Id
		{
			get
			{
				return this.PlayerId;
			}
		}

		// Token: 0x17001464 RID: 5220
		// (get) Token: 0x06008DE5 RID: 36325 RVA: 0x002DE114 File Offset: 0x002DC314
		public string FullIdInfoClean
		{
			get
			{
				string result;
				if ((result = this._fullIdInfo) == null)
				{
					string[] array = new string[7];
					array[0] = \uF1F8.\uE000(50000);
					int num = 1;
					Profile profile = this.Profile;
					array[num] = (((profile != null) ? profile.Nickname : null) ?? \uF1F8.\uE000(43622));
					array[2] = \uF1F8.\uE000(141062);
					int num2 = 3;
					Profile profile2 = this.Profile;
					array[num2] = (((profile2 != null) ? profile2.AccountId : null) ?? \uF1F8.\uE000(43622));
					array[4] = \uF1F8.\uE000(141062);
					int num3 = 5;
					Profile profile3 = this.Profile;
					array[num3] = (((profile3 != null) ? profile3.Id : null) ?? \uF1F8.\uE000(43622));
					array[6] = \uF1F8.\uE000(43332);
					result = (this._fullIdInfo = string.Concat(array));
				}
				return result;
			}
		}

		// Token: 0x17001465 RID: 5221
		// (get) Token: 0x06008DE6 RID: 36326 RVA: 0x002DE1EC File Offset: 0x002DC3EC
		public virtual string FullIdInfo
		{
			get
			{
				return this.FullIdInfoClean;
			}
		}

		// Token: 0x17001466 RID: 5222
		// (get) Token: 0x06008DE7 RID: 36327 RVA: 0x002DE1F4 File Offset: 0x002DC3F4
		public EPlayerSide Side
		{
			get
			{
				return this.Profile.Info.Side;
			}
		}

		// Token: 0x17001467 RID: 5223
		// (get) Token: 0x06008DE8 RID: 36328 RVA: 0x002DE208 File Offset: 0x002DC408
		public BifacialTransform Transform
		{
			get
			{
				return this.PlayerBones.BodyTransform;
			}
		}

		// Token: 0x17001468 RID: 5224
		// (get) Token: 0x06008DE9 RID: 36329 RVA: 0x002DE218 File Offset: 0x002DC418
		public IHealthController HealthController
		{
			get
			{
				return this._healthController;
			}
		}

		// Token: 0x17001469 RID: 5225
		// (get) Token: 0x06008DEA RID: 36330 RVA: 0x002DE220 File Offset: 0x002DC420
		public ActiveHealthController ActiveHealthController
		{
			get
			{
				return this._healthController as ActiveHealthController;
			}
		}

		// Token: 0x1700146A RID: 5226
		// (get) Token: 0x06008DEB RID: 36331 RVA: 0x002DE230 File Offset: 0x002DC430
		// (set) Token: 0x06008DEC RID: 36332 RVA: 0x002DE238 File Offset: 0x002DC438
		public virtual float Awareness
		{
			get
			{
				return this._awareness;
			}
			set
			{
				this._awareness = value;
			}
		}

		// Token: 0x06008DED RID: 36333 RVA: 0x002DE244 File Offset: 0x002DC444
		public void SetDeltaTimeDelegate(Player.\uE010 deltaTimeDelegate)
		{
			this._deltaTimeDelegate = (deltaTimeDelegate ?? Player._defaultDeltaTimeDelegate);
		}

		// Token: 0x1700146B RID: 5227
		// (get) Token: 0x06008DEE RID: 36334 RVA: 0x002DE258 File Offset: 0x002DC458
		public float DeltaTime
		{
			get
			{
				return this._deltaTimeDelegate();
			}
		}

		// Token: 0x06008DEF RID: 36335 RVA: 0x002DE268 File Offset: 0x002DC468
		private void FixedUpdate()
		{
			this._nFixedFrames++;
			this._fixedTime += Time.fixedDeltaTime;
		}

		// Token: 0x06008DF0 RID: 36336 RVA: 0x002DE28C File Offset: 0x002DC48C
		public virtual void FixedUpdateTick()
		{
			this.ComplexUpdate(EUpdateQueue.FixedUpdate, Time.fixedUnscaledDeltaTime);
		}

		// Token: 0x06008DF1 RID: 36337 RVA: 0x002DE29C File Offset: 0x002DC49C
		public virtual void AfterMainTick()
		{
		}

		// Token: 0x06008DF2 RID: 36338 RVA: 0x002DE2A0 File Offset: 0x002DC4A0
		public virtual void UpdateTick()
		{
			float deltaTime = this.DeltaTime;
			this.ComplexUpdate(EUpdateQueue.Update, deltaTime);
		}

		// Token: 0x06008DF3 RID: 36339 RVA: 0x002DE2BC File Offset: 0x002DC4BC
		private IEnumerator \uE057()
		{
			for (;;)
			{
				int num2;
				int num = num2;
				if (num != 0)
				{
					if (num != 1)
					{
						break;
					}
					this.ComplexLateUpdate(EUpdateQueue.FixedUpdate, Time.fixedUnscaledDeltaTime);
				}
				yield return this._waitForFixedUpdate;
			}
			yield break;
			yield break;
		}

		// Token: 0x1400018A RID: 394
		// (add) Token: 0x06008DF4 RID: 36340 RVA: 0x002DE2CC File Offset: 0x002DC4CC
		// (remove) Token: 0x06008DF5 RID: 36341 RVA: 0x002DE310 File Offset: 0x002DC510
		public event Action UpdateEvent;

		// Token: 0x1400018B RID: 395
		// (add) Token: 0x06008DF6 RID: 36342 RVA: 0x002DE354 File Offset: 0x002DC554
		// (remove) Token: 0x06008DF7 RID: 36343 RVA: 0x002DE398 File Offset: 0x002DC598
		public event Action FixedUpdateEvent;

		// Token: 0x06008DF8 RID: 36344 RVA: 0x002DE3DC File Offset: 0x002DC5DC
		public void ComplexUpdate(EUpdateQueue queue, float deltaTime)
		{
			if (this.HealthController == null || !this.HealthController.IsAlive)
			{
				return;
			}
			if (this.UpdateQueue == queue)
			{
				this.ManualUpdate(deltaTime, null, 1);
				this._bodyupdated = true;
				this._bodyTime = deltaTime;
			}
			if (this.ArmsUpdateQueue == queue)
			{
				this.ArmsUpdate(deltaTime);
				this._armsupdated = true;
				this._armsTime = deltaTime;
			}
			if (this.PhysicalUpdateQueue == queue)
			{
				this.Physical.Update(deltaTime);
			}
			if (queue == EUpdateQueue.Update)
			{
				Action updateEvent = this.UpdateEvent;
				if (updateEvent != null)
				{
					updateEvent();
				}
			}
			if (queue == EUpdateQueue.FixedUpdate)
			{
				Action fixedUpdateEvent = this.FixedUpdateEvent;
				if (fixedUpdateEvent == null)
				{
					return;
				}
				fixedUpdateEvent();
			}
		}

		// Token: 0x06008DF9 RID: 36345 RVA: 0x002DE4A4 File Offset: 0x002DC6A4
		protected virtual void ComplexLateUpdate(EUpdateQueue queue, float deltaTime)
		{
			if (this.ArmsUpdateQueue == queue && this.ArmsUpdateMode == Player.EUpdateMode.Auto)
			{
				this.\uE058(deltaTime);
			}
			this.MovementContext.LateFixedUpdate();
		}

		// Token: 0x06008DFA RID: 36346 RVA: 0x002DE4D0 File Offset: 0x002DC6D0
		public virtual void ArmsUpdate(float deltaTime)
		{
			if (this._handsController != null)
			{
				this._handsController.ManualUpdate(deltaTime);
			}
			if (this.ArmsUpdateMode == Player.EUpdateMode.Manual)
			{
				this.ArmsAnimatorCommon.Update(deltaTime);
				IAnimator underbarrelWeaponArmsAnimator = this.UnderbarrelWeaponArmsAnimator;
				if (underbarrelWeaponArmsAnimator != null)
				{
					underbarrelWeaponArmsAnimator.Update(deltaTime);
				}
			}
			this._armsupdated = true;
			this._armsTime = deltaTime;
			if (this.ArmsUpdateMode == Player.EUpdateMode.Manual)
			{
				this.\uE058(deltaTime);
			}
		}

		// Token: 0x06008DFB RID: 36347 RVA: 0x002DE550 File Offset: 0x002DC750
		public virtual void BodyUpdate(float deltaTime, int loop = 1)
		{
			if (this.BodyUpdateMode == Player.EUpdateMode.Manual)
			{
				for (int i = 0; i < loop; i++)
				{
					float dt = deltaTime / (float)loop;
					this.BodyAnimatorCommon.Update(dt);
				}
			}
			if (\uE2F9.Config.UseBodyFastAnimator)
			{
				if (this.HealthController != null)
				{
					if (this.HealthController.IsAlive)
					{
						this.PlayerBones.PlayableAnimator.Process(this.IsVisible, deltaTime);
					}
				}
			}
		}

		// Token: 0x06008DFC RID: 36348 RVA: 0x002DE5D4 File Offset: 0x002DC7D4
		public virtual void ManualUpdate(float deltaTime, float? platformDeltaTime = null, int loop = 1)
		{
			this.LastDeltaTime = deltaTime;
			if (Mathf.Approximately(deltaTime, 0f))
			{
				Debug.LogErrorFormat(\uF1F8.\uE000(141060), new object[]
				{
					deltaTime
				});
				return;
			}
			this.\uE00D(deltaTime);
			if (loop == 1)
			{
				this.HealthControllerUpdate(platformDeltaTime ?? deltaTime);
			}
			this.BodyUpdate(deltaTime, 1);
			if (Vector2.Distance(this._targetRotationPitch, this._rotationPitchLimit) < 0.1f)
			{
				this._rotationPitchLimit = this._targetRotationPitch;
			}
			else
			{
				this._rotationPitchLimit = Vector2.Lerp(this._rotationPitchLimit, this._targetRotationPitch, 0.1f);
			}
			this.UpdateTriggerColliderSearcher(deltaTime, true);
		}

		// Token: 0x06008DFD RID: 36349 RVA: 0x002DE6AC File Offset: 0x002DC8AC
		protected virtual void HealthControllerUpdate(float deltaTime)
		{
			if (!(this._healthController is \uED20))
			{
				this._healthController.ManualUpdate(deltaTime);
			}
		}

		// Token: 0x06008DFE RID: 36350 RVA: 0x002DE6C8 File Offset: 0x002DC8C8
		protected virtual void UpdateTriggerColliderSearcher(float deltaTime, bool isCloseToCamera = true)
		{
			this.GetTriggerColliderSearcher().ManualUpdate(deltaTime, isCloseToCamera);
		}

		// Token: 0x06008DFF RID: 36351 RVA: 0x002DE6D8 File Offset: 0x002DC8D8
		private void \uE058(float deltaTime)
		{
			if (this._handsController != null)
			{
				this._handsController.EmitEvents();
				if (this.IsYourPlayer)
				{
					\uE36B.\uE001.SyncTransforms();
				}
				this._handsController.BallisticUpdate(deltaTime);
			}
		}

		// Token: 0x06008E00 RID: 36352 RVA: 0x002DE728 File Offset: 0x002DC928
		public void SetOwnerToAIData(BotOwner bot)
		{
			if (this.AIData == null)
			{
				this.AIData = new \uE2BE(bot, this);
			}
			else
			{
				this.AIData.BotOwner = bot;
			}
			this.Physical.EncumberDisabled = true;
		}

		// Token: 0x1700146C RID: 5228
		// (get) Token: 0x06008E01 RID: 36353 RVA: 0x002DE760 File Offset: 0x002DC960
		protected virtual Ray InteractionRay
		{
			get
			{
				return new Ray(this._playerLookRaycastTransform.position - this._playerLookRaycastTransform.forward * EFTHardSettings.Instance.BEHIND_CAST, this._playerLookRaycastTransform.forward);
			}
		}

		// Token: 0x1700146D RID: 5229
		// (get) Token: 0x06008E02 RID: 36354 RVA: 0x002DE79C File Offset: 0x002DC99C
		// (set) Token: 0x06008E03 RID: 36355 RVA: 0x002DE7A4 File Offset: 0x002DC9A4
		public Vector3 InteractionRayOriginOnStartOperation { get; private set; }

		// Token: 0x1700146E RID: 5230
		// (get) Token: 0x06008E04 RID: 36356 RVA: 0x002DE7B0 File Offset: 0x002DC9B0
		// (set) Token: 0x06008E05 RID: 36357 RVA: 0x002DE7B8 File Offset: 0x002DC9B8
		public Vector3 InteractionRayDirectionOnStartOperation { get; private set; }

		// Token: 0x06008E06 RID: 36358 RVA: 0x002DE7C4 File Offset: 0x002DC9C4
		public void SaveInteractionRayInfo()
		{
			this.InteractionRayOriginOnStartOperation = this.InteractionRay.origin;
			this.InteractionRayDirectionOnStartOperation = this.InteractionRay.direction;
		}

		// Token: 0x06008E07 RID: 36359 RVA: 0x002DE7FC File Offset: 0x002DC9FC
		public virtual void InteractionRaycast()
		{
			if (this._playerLookRaycastTransform == null || !this.HealthController.IsAlive)
			{
				return;
			}
			InteractableObject interactableObject = null;
			this.InteractableObjectIsProxy = false;
			Player player = null;
			Ray interactionRay = this.InteractionRay;
			if (this.CurrentState.CanInteract && this.HandsController && this.HandsController.CanInteract())
			{
				RaycastHit raycastHit;
				GameObject gameObject = GameWorld.FindInteractable(interactionRay, out raycastHit);
				if (gameObject != null)
				{
					InteractiveProxy interactiveProxy = null;
					interactableObject = gameObject.GetComponentInParent<InteractableObject>();
					if (interactableObject == null)
					{
						interactiveProxy = gameObject.GetComponent<InteractiveProxy>();
						if (interactiveProxy != null && raycastHit.distance < EFTHardSettings.Instance.DOOR_RAYCAST_DISTANCE + EFTHardSettings.Instance.BEHIND_CAST)
						{
							this.InteractableObjectIsProxy = true;
							interactableObject = interactiveProxy.Link;
						}
					}
					if (interactableObject != null && interactiveProxy == null)
					{
						if (interactableObject.InteractsFromAppropriateDirection(this.LookDirection))
						{
							if (raycastHit.distance > EFTHardSettings.Instance.LOOT_RAYCAST_DISTANCE + EFTHardSettings.Instance.BEHIND_CAST || !interactableObject.isActiveAndEnabled)
							{
								interactableObject = null;
							}
							else if (raycastHit.distance > EFTHardSettings.Instance.DOOR_RAYCAST_DISTANCE + EFTHardSettings.Instance.BEHIND_CAST && interactableObject is Door)
							{
								interactableObject = null;
							}
						}
						else
						{
							interactableObject = null;
						}
					}
					player = ((interactableObject == null) ? gameObject.GetComponent<Player>() : null);
				}
				this.RayLength = raycastHit.distance;
			}
			WorldInteractiveObject worldInteractiveObject = interactableObject as WorldInteractiveObject;
			if (worldInteractiveObject != null)
			{
				BufferGateSwitcher bufferGateSwitcher = worldInteractiveObject as BufferGateSwitcher;
				if (bufferGateSwitcher != null)
				{
					EDoorState bufferGatesState = bufferGateSwitcher.BufferGatesState;
					if (interactableObject == this.InteractableObject)
					{
						this._nextCastHasForceEvent = true;
					}
				}
				else
				{
					EDoorState doorState = worldInteractiveObject.DoorState;
					if (doorState == EDoorState.Interacting || !worldInteractiveObject.Operatable || (doorState == EDoorState.Locked && worldInteractiveObject.DoorKeyOpenInteraction == EInteraction.DoorCardOpen && !this.InteractableObjectIsProxy) || (this.InteractableObjectIsProxy && doorState != EDoorState.Locked))
					{
						interactableObject = null;
					}
					else if (interactableObject == this.InteractableObject && this._lastInteractionState != doorState)
					{
						this._nextCastHasForceEvent = true;
					}
				}
				if (worldInteractiveObject != null && worldInteractiveObject.NoInteractionsAllowed)
				{
					interactableObject = null;
				}
			}
			else
			{
				LootItem lootItem = interactableObject as LootItem;
				if (lootItem != null)
				{
					Weapon weapon = lootItem.Item as Weapon;
					if (weapon != null && weapon.IsOneOff && weapon.Repairable.Durability == 0f)
					{
						interactableObject = null;
					}
				}
				else
				{
					StationaryWeapon stationaryWeapon = interactableObject as StationaryWeapon;
					if (stationaryWeapon != null)
					{
						if (stationaryWeapon.Locked)
						{
							interactableObject = null;
						}
						else if (interactableObject == this.InteractableObject && this._lastInteractionState != stationaryWeapon.State)
						{
							this._nextCastHasForceEvent = true;
						}
					}
					else
					{
						LookAtProxy lookAtProxy = interactableObject as LookAtProxy;
						if (lookAtProxy != null)
						{
							lookAtProxy.Execute();
						}
						else if (interactableObject != null)
						{
							if (this._lastStateUpdateTime != interactableObject.StateUpdateTime)
							{
								this._nextCastHasForceEvent = true;
							}
							this._lastStateUpdateTime = interactableObject.StateUpdateTime;
						}
					}
				}
			}
			if (interactableObject != this.InteractableObject || this._nextCastHasForceEvent)
			{
				this._nextCastHasForceEvent = false;
				this.InteractableObject = interactableObject;
				WorldInteractiveObject worldInteractiveObject2 = this.InteractableObject as WorldInteractiveObject;
				if (worldInteractiveObject2 != null)
				{
					this._lastInteractionState = worldInteractiveObject2.DoorState;
				}
				else
				{
					StationaryWeapon stationaryWeapon2 = this.InteractableObject as StationaryWeapon;
					if (stationaryWeapon2 != null)
					{
						this._lastInteractionState = stationaryWeapon2.State;
					}
				}
				Action possibleInteractionsChanged = this.PossibleInteractionsChanged;
				if (possibleInteractionsChanged != null)
				{
					possibleInteractionsChanged();
				}
			}
			if (player != this.InteractablePlayer || this._nextCastHasForceEvent)
			{
				this._nextCastHasForceEvent = false;
				this.InteractablePlayer = ((player != this) ? player : null);
				if (player == this)
				{
					Debug.LogWarning(this.Profile.Nickname + \uF1F8.\uE000(141264));
				}
				Action possibleInteractionsChanged2 = this.PossibleInteractionsChanged;
				if (possibleInteractionsChanged2 != null)
				{
					possibleInteractionsChanged2();
				}
			}
			if (player == null && interactableObject == null)
			{
				float radius = 0.1f * (1f + this.Skills.PerceptionLootDot);
				float distance = 1.5f;
				if (this.Skills.PerceptionEliteNoIdea)
				{
					distance = 2.35f;
					radius = 1.1f;
					interactionRay.origin = this.Transform.position + Vector3.up * 3f;
					interactionRay.direction = Vector3.down;
				}
				this.\uE004 = GameWorld.InteractionSense(interactionRay.origin, interactionRay.direction, radius, distance);
				return;
			}
			this.\uE004 = false;
		}

		// Token: 0x06008E08 RID: 36360 RVA: 0x002DECA4 File Offset: 0x002DCEA4
		public virtual void PauseAllEffectsOnPlayer()
		{
		}

		// Token: 0x06008E09 RID: 36361 RVA: 0x002DECA8 File Offset: 0x002DCEA8
		public virtual void UnpauseAllEffectsOnPlayer()
		{
		}

		// Token: 0x06008E0A RID: 36362 RVA: 0x002DECAC File Offset: 0x002DCEAC
		public virtual void ShowHelloNotification(string sender)
		{
			\uEA30.DisplayMessageNotification(string.Format(\uF1F8.\uE000(141234).Localized(null), sender), ENotificationDurationType.Default, ENotificationIconType.Default, null);
		}

		// Token: 0x06008E0B RID: 36363 RVA: 0x002DECE0 File Offset: 0x002DCEE0
		public void ResetInteractionRaycast(\uE2FB @object)
		{
			if (@object != this.InteractableObject)
			{
				return;
			}
			this.InteractableObject = null;
			Action possibleInteractionsChanged = this.PossibleInteractionsChanged;
			if (possibleInteractionsChanged == null)
			{
				return;
			}
			possibleInteractionsChanged();
		}

		// Token: 0x06008E0C RID: 36364 RVA: 0x002DED04 File Offset: 0x002DCF04
		public void OnPlaceItemTriggerChanged([CanBeNull] PlaceItemTrigger zone)
		{
			this.PlaceItemZone = zone;
			if (zone == null)
			{
				this.DestroyBeacon();
			}
			Action possibleInteractionsChanged = this.PossibleInteractionsChanged;
			if (possibleInteractionsChanged == null)
			{
				return;
			}
			possibleInteractionsChanged();
		}

		// Token: 0x06008E0D RID: 36365 RVA: 0x002DED34 File Offset: 0x002DCF34
		public void AddTriggerZone(TriggerWithId zone)
		{
			string id = zone.Id;
			if (this.TriggerZones.Contains(id))
			{
				return;
			}
			this.TriggerZones.Add(id);
		}

		// Token: 0x06008E0E RID: 36366 RVA: 0x002DED64 File Offset: 0x002DCF64
		public void RemoveTriggerZone(TriggerWithId zone)
		{
			string id = zone.Id;
			if (!this.TriggerZones.Contains(id))
			{
				return;
			}
			this.TriggerZones.Remove(id);
		}

		// Token: 0x1700146F RID: 5231
		// (get) Token: 0x06008E0F RID: 36367 RVA: 0x002DED94 File Offset: 0x002DCF94
		// (set) Token: 0x06008E10 RID: 36368 RVA: 0x002DED9C File Offset: 0x002DCF9C
		private int \uE009
		{
			get
			{
				return this._negativeBuffsCount;
			}
			set
			{
				if (this._negativeBuffsCount < 1 && value > 0)
				{
					this.ExecuteSkill(new Action(this.\uE090));
				}
				if (this._negativeBuffsCount > 0)
				{
					if (value < 1)
					{
						this.ExecuteSkill(new Action(this.\uE091));
					}
				}
				this._negativeBuffsCount = value;
			}
		}

		// Token: 0x17001470 RID: 5232
		// (get) Token: 0x06008E11 RID: 36369 RVA: 0x002DEE00 File Offset: 0x002DD000
		// (set) Token: 0x06008E12 RID: 36370 RVA: 0x002DEE14 File Offset: 0x002DD014
		public virtual bool IsVisible
		{
			get
			{
				return this.FirstPersonPointOfView || this.OnScreen;
			}
			set
			{
			}
		}

		// Token: 0x17001471 RID: 5233
		// (get) Token: 0x06008E13 RID: 36371 RVA: 0x002DEE18 File Offset: 0x002DD018
		public virtual float SqrCameraDistance
		{
			get
			{
				if (this.FirstPersonPointOfView)
				{
					return 0f;
				}
				return \uF01E.Instance.SqrDistance(this.Transform.position);
			}
		}

		// Token: 0x06008E14 RID: 36372 RVA: 0x002DEE40 File Offset: 0x002DD040
		public void SetInteractInHands(EInteraction interaction)
		{
			this.MovementContext.SetInteractInHands(interaction);
		}

		// Token: 0x06008E15 RID: 36373 RVA: 0x002DEE50 File Offset: 0x002DD050
		public void UpdateInteractionCast()
		{
			this._nextCastHasForceEvent = true;
		}

		// Token: 0x06008E16 RID: 36374 RVA: 0x002DEE5C File Offset: 0x002DD05C
		public Vector3 PlayerColliderPointOnCenterAxis(float relativeHeight)
		{
			return this.MovementContext.PlayerColliderPointOnCenterAxis(relativeHeight);
		}

		// Token: 0x17001472 RID: 5234
		// (get) Token: 0x06008E17 RID: 36375 RVA: 0x002DEE6C File Offset: 0x002DD06C
		// (set) Token: 0x06008E18 RID: 36376 RVA: 0x002DEE74 File Offset: 0x002DD074
		public PlayerBones PlayerBones { get; set; }

		// Token: 0x06008E19 RID: 36377 RVA: 0x002DEE80 File Offset: 0x002DD080
		protected virtual void SetupHitColliders()
		{
			this._hitColliders = base.GetComponentsInChildren<BodyPartCollider>();
			this._armorPlateColliders = base.GetComponentsInChildren<ArmorPlateCollider>(true);
			foreach (BodyPartCollider bodyPartCollider in this._hitColliders)
			{
				this.\uE059(bodyPartCollider, false);
			}
			foreach (ArmorPlateCollider bodyPartCollider2 in this._armorPlateColliders)
			{
				this.\uE059(bodyPartCollider2, true);
			}
		}

		// Token: 0x06008E1A RID: 36378 RVA: 0x002DEEFC File Offset: 0x002DD0FC
		private void \uE059(BodyPartCollider bodyPartCollider, bool includeChild)
		{
			int layer = LayerMask.NameToLayer(\uF1F8.\uE000(27516));
			bodyPartCollider.SetUpPlayer(this);
			bodyPartCollider.PlayerProfileID = this.ProfileId;
			bodyPartCollider.gameObject.layer = layer;
			if (!includeChild)
			{
				return;
			}
			foreach (object obj in bodyPartCollider.transform)
			{
				((Transform)obj).gameObject.layer = layer;
			}
		}

		// Token: 0x06008E1B RID: 36379 RVA: 0x002DEF98 File Offset: 0x002DD198
		public virtual void SetInventoryOpened(bool opened)
		{
			if (opened)
			{
				this.MovementContext.SetBlindFire(0);
				if (this.MovementContext.IsInMountedState)
				{
					this.MovementContext.ExitMountedState();
				}
			}
			else
			{
				if (this._waitInventoryCoroutine != null)
				{
					base.StopCoroutine(this._waitInventoryCoroutine);
				}
				this.MovementContext.PlayerAnimator.SetInventory(false);
				this.MovementContext.PlayerAnimator.SetInventoryOperation(false);
				this.OnInventoryInteraction(false, false);
			}
			this._isInventoryOpened = opened;
			this.InventoryOpenRaiseAction(opened);
			if (this._handsController != null)
			{
				this._handsController.SetInventoryOpened(opened);
				if (opened)
				{
					this.MovementContext.PlayerAnimator.AnimatedInteractions.ForceStopInteractions();
					this._waitInventoryCoroutine = base.StartCoroutine(this.\uE05A());
				}
			}
		}

		// Token: 0x06008E1C RID: 36380 RVA: 0x002DF084 File Offset: 0x002DD284
		private IEnumerator \uE05A()
		{
			for (;;)
			{
				 obj;
				bool flag;
				switch (obj)
				{
				case 0:
					flag = (this._handsController.FirearmsAnimator.CurrentStateNameIs(1, \uF1F8.\uE000(20089)) || this._handsController.FirearmsAnimator.CurrentStateNameIs(1, \uF1F8.\uE000(14574)));
					if (flag)
					{
						goto Block_2;
					}
					goto IL_A8;
				case 1:
					goto IL_A8;
				case 2:
					goto IL_1FA;
				}
				goto Block_8;
				IL_A8:
				if (!this._handsController.FirearmsAnimator.CurrentStateNameIs(1, \uF1F8.\uE000(20089)) && !this._handsController.FirearmsAnimator.CurrentStateNameIs(1, \uF1F8.\uE000(14574)) && this.IsInventoryOpened)
				{
					yield return null;
					continue;
				}
				flag = (this._handsController.FirearmsAnimator.CurrentStateNameIs(1, \uF1F8.\uE000(20089)) || this._handsController.FirearmsAnimator.CurrentStateNameIs(1, \uF1F8.\uE000(14574)));
				this.MovementContext.PlayerAnimator.SetInventory(flag);
				this.OnInventoryInteraction(flag, false);
				IL_1FA:
				if (!this._isInventoryOpened)
				{
					goto Block_9;
				}
				if (!this._handsController.FirearmsAnimator.CurrentStateNameIs(1, \uF1F8.\uE000(20089)) && !this._handsController.FirearmsAnimator.CurrentStateNameIs(1, \uF1F8.\uE000(14574)))
				{
					this.OnInventoryInteraction(flag, true);
					this.MovementContext.PlayerAnimator.SetInventoryOperation(true);
				}
				else
				{
					this.OnInventoryInteraction(flag, false);
					this.MovementContext.PlayerAnimator.SetInventoryOperation(false);
				}
				yield return null;
			}
			Block_2:
			this.MovementContext.PlayerAnimator.SetInventory(true);
			this.OnInventoryInteraction(true, false);
			yield break;
			Block_8:
			yield break;
			Block_9:
			yield break;
		}

		// Token: 0x06008E1D RID: 36381 RVA: 0x002DF094 File Offset: 0x002DD294
		public void InventoryOpenRaiseAction(bool opened)
		{
			Action onStartInventoryOpen = this.OnStartInventoryOpen;
			if (onStartInventoryOpen != null)
			{
				onStartInventoryOpen();
			}
			Action<Player, bool> onInventoryOpened = this.OnInventoryOpened;
			if (onInventoryOpened == null)
			{
				return;
			}
			onInventoryOpened(this, opened);
		}

		// Token: 0x06008E1E RID: 36382 RVA: 0x002DF0BC File Offset: 0x002DD2BC
		public virtual void ExecuteShotSkill(Item weapon)
		{
			if (weapon is \uEEC9 || this.IsAI)
			{
				return;
			}
			Type type = weapon.GetType();
			if (typeof(\uEDF9).IsAssignableFrom(type))
			{
				type = typeof(\uEDF9);
			}
			float val = this.Skills.WeaponBuffs.ContainsKey(type) ? this.Skills.WeaponBuffs[type][EBuffId.WeaponDoubleMastering].Value : 1f;
			this.Skills.WeaponShotAction.Complete(weapon, val);
		}

		// Token: 0x06008E1F RID: 36383 RVA: 0x002DF160 File Offset: 0x002DD360
		protected virtual void ManageAggressor(\uF061 damageInfo, EBodyPart bodyPart, EBodyPartColliderType colliderType)
		{
			if (this._isDeadAlready)
			{
				return;
			}
			if (!this.HealthController.IsAlive)
			{
				this._isDeadAlready = true;
			}
			Player player = (damageInfo.Player == null) ? null : this.GameWorld.GetEverExistedPlayerByID(damageInfo.Player.iPlayer.ProfileId);
			if (player == this)
			{
				return;
			}
			if (player == null)
			{
				if (damageInfo.Player != null && damageInfo.Player.iPlayer != null)
				{
					\uE398 aggressor = new \uE398(damageInfo.Player.iPlayer.AccountId, damageInfo.Player.iPlayer.ProfileId, damageInfo.Player.Nickname, damageInfo.Player.iPlayer.Profile.Info.MainProfileNickname, damageInfo.Player.iPlayer.Side, colliderType, (damageInfo.Weapon != null) ? damageInfo.Weapon.ShortName : string.Empty, damageInfo.Player.iPlayer.Profile.Info.SelectedMemberCategory, damageInfo.Player.iPlayer.Profile.Info.Settings.Role);
					this.Profile.EftStats.Aggressor = aggressor;
					this.LastAggressor = damageInfo.Player.iPlayer;
					this.LastDamageInfo = damageInfo;
					this.LastBodyPart = bodyPart;
				}
				else
				{
					this.Profile.EftStats.Aggressor = null;
					this.LastAggressor = null;
					this.LastDamageInfo = damageInfo;
					this.LastBodyPart = bodyPart;
				}
				if (damageInfo.DamageType == EDamageType.Artillery)
				{
					\uE398 aggressor2 = new \uE398(\uF1F8.\uE000(53009), \uF1F8.\uE000(141223), \uF1F8.\uE000(141212).Localized(null), string.Empty, EPlayerSide.Savage, colliderType, \uF1F8.\uE000(140917), EMemberCategory.Default, WildSpawnType.assault);
					this.Profile.EftStats.Aggressor = aggressor2;
					this.LastAggressor = null;
					this.LastDamageInfo = damageInfo;
					this.LastBodyPart = bodyPart;
				}
				return;
			}
			if (damageInfo.Weapon != null && !player.Profile.Info.GroupId.EqualsAndNotNull(this.Profile.Info.GroupId))
			{
				player.ExecuteShotSkill(damageInfo.Weapon);
			}
			bool isHeavyDamage = damageInfo.DidBodyDamage / this.HealthController.GetBodyPartHealth(bodyPart, false).Maximum >= 0.6f && this.HealthController.FindExistingEffect<\uED3F>(bodyPart) != null;
			player.StatisticsManager.OnEnemyDamage(damageInfo, bodyPart, this.Profile.Id, this.Profile.Info.Side, this.Profile.Info.Settings.Role, this.Profile.Info.GroupId, this.HealthController.GetBodyPartHealth(EBodyPart.Common, false).Maximum, isHeavyDamage, Vector3.Distance(player.Transform.position, this.Transform.position), this.CurrentHour, this.Inventory.EquippedInSlotsTemplateIds, this.HealthController.BodyPartEffects, this.TriggerZones);
			if (string.IsNullOrEmpty(player.Profile.Info.Nickname) || player == this || player.ProfileId == this.ProfileId)
			{
				return;
			}
			this.\uE05B(damageInfo, bodyPart, player);
			this.LastAggressor = player;
			this.LastDamageInfo = damageInfo;
			this.LastBodyPart = bodyPart;
			IAIData aidata = player.AIData;
			Profile profile = (aidata != null && aidata.IsAI) ? null : player.Profile;
			this.Profile.EftStats.Aggressor = new \uE398((profile != null) ? profile.AccountId : null, (profile != null) ? profile.Id : null, player.Profile.Nickname, player.Profile.Info.MainProfileNickname, player.Profile.Info.Side, colliderType, (damageInfo.Weapon != null) ? damageInfo.Weapon.ShortName : string.Empty, player.Profile.Info.SelectedMemberCategory, player.Profile.Info.Settings.Role);
			if (!this.HealthController.IsAlive)
			{
				player.Say(EPhraseTrigger.OnEnemyDown, false, UnityEngine.Random.Range(0f, 1f), this.Speaker.SideTag, 70, false);
				return;
			}
			bool flag = true;
			if (player.IsAI && damageInfo.Weapon != null && damageInfo.Weapon is \uEE5B)
			{
				flag = false;
			}
			if (flag)
			{
				player.Say(EPhraseTrigger.OnEnemyShot, false, UnityEngine.Random.Range(0f, 1f), this.Speaker.SideTag, 30, false);
				this.GameWorld.SpeakerManager.GroupEvent(this.PlayerId, EPhraseTrigger.Hit, this.Transform.position, player.Speaker.SideTag, 30);
			}
		}

		// Token: 0x06008E20 RID: 36384 RVA: 0x002DF64C File Offset: 0x002DD84C
		private void \uE05B(\uF061 damageInfo, EBodyPart bodyPart, Player aggressor)
		{
			if (aggressor != null)
			{
				if (aggressor.AIData.IsAI)
				{
					BotOwner botOwner = aggressor.AIData.BotOwner;
					botOwner.EnemiesController.HitTarget(this, damageInfo, bodyPart);
					botOwner.BotPersonalStats.HitTarget(this, damageInfo, bodyPart);
				}
			}
		}

		// Token: 0x06008E21 RID: 36385 RVA: 0x002DF6A0 File Offset: 0x002DD8A0
		public virtual void ApplyExplosionDamageToArmor(Dictionary<\uE866, float> armorDamage, \uF061 damageInfo)
		{
			this._preAllocatedArmorComponents.Clear();
			this.Inventory.GetPutOnArmorsNonAlloc(this._preAllocatedArmorComponents);
			foreach (ArmorComponent armorComponent in this._preAllocatedArmorComponents)
			{
				float num = 0f;
				foreach (KeyValuePair<\uE866, float> keyValuePair in armorDamage)
				{
					if (armorComponent.ShotMatches(keyValuePair.Key.BodyPartColliderType, keyValuePair.Key.ArmorPlateCollider))
					{
						num += keyValuePair.Value;
					}
				}
				if (num > 0f)
				{
					num = armorComponent.ApplyExplosionDurabilityDamage(num, damageInfo, this._preAllocatedArmorComponents);
					this.\uE05D(num, armorComponent);
				}
			}
		}

		// Token: 0x06008E22 RID: 36386 RVA: 0x002DF7B0 File Offset: 0x002DD9B0
		public bool IsShotDeflectedByHeavyArmor(EBodyPartColliderType colliderType, EArmorPlateCollider armorPlateCollider, int shotSeed)
		{
			if (!this.Skills.HeavyVestNoBodyDamageDeflectChance)
			{
				return false;
			}
			\uE714.\uE039 heavyVests = Singleton<\uE714>.Instance.SkillsSettings.HeavyVests;
			this._preAllocatedArmorComponents.Clear();
			this.Inventory.GetPutOnArmorsNonAlloc(this._preAllocatedArmorComponents);
			foreach (ArmorComponent armorComponent in this._preAllocatedArmorComponents)
			{
				RepairableComponent repairable = armorComponent.Repairable;
				if (armorComponent.ArmorType == EArmorType.Heavy && repairable.Durability >= heavyVests.RicochetChanceHVestsCurrentDurabilityThreshold * repairable.MaxDurability && repairable.Durability >= heavyVests.RicochetChanceHVestsMaxDurabilityThreshold * (float)repairable.TemplateDurability && armorComponent.ShotMatches(colliderType, armorPlateCollider))
				{
					if (this._heavyVestsDeflectRandoms.GetRandom(shotSeed) < heavyVests.RicochetChanceHVestsEliteLevel)
					{
						return true;
					}
				}
			}
			return false;
		}

		// Token: 0x06008E23 RID: 36387 RVA: 0x002DF8B8 File Offset: 0x002DDAB8
		private bool \uE05C(EBodyPartColliderType colliderType)
		{
			if (!this.Skills.LightVestBleedingProtection)
			{
				return false;
			}
			this._preAllocatedArmorComponents.Clear();
			this.Inventory.GetPutOnArmorsNonAlloc(this._preAllocatedArmorComponents);
			foreach (ArmorComponent armorComponent in this._preAllocatedArmorComponents)
			{
				if (!armorComponent.IsDestroyed && armorComponent.ArmorType == EArmorType.Light)
				{
					using (IEnumerator<EBodyPartColliderType> enumerator2 = armorComponent.ArmorColliders.GetEnumerator())
					{
						while (enumerator2.MoveNext())
						{
							if (enumerator2.Current == colliderType)
							{
								return true;
							}
						}
					}
				}
			}
			return false;
		}

		// Token: 0x06008E24 RID: 36388 RVA: 0x002DF98C File Offset: 0x002DDB8C
		private void \uE05D(float armorDamage, ArmorComponent armorComponent)
		{
			Player.\uE016 uE = new Player.\uE016();
			uE.<>4__this = this;
			uE.armorDamage = armorDamage;
			if (uE.armorDamage > 0.1f)
			{
				if (!armorComponent.IsDestroyed)
				{
					EArmorType armorType = armorComponent.ArmorType;
					if (armorType == EArmorType.Light)
					{
						this.ExecuteSkill(new Action(uE.\uE000));
						return;
					}
					if (armorType != EArmorType.Heavy)
					{
						return;
					}
					this.ExecuteSkill(new Action(uE.\uE001));
				}
			}
		}

		// Token: 0x06008E25 RID: 36389 RVA: 0x002DFA10 File Offset: 0x002DDC10
		[CanBeNull]
		protected List<ArmorComponent> ProceedDamageThroughArmor(ref \uF061 damageInfo, EBodyPartColliderType colliderType, EArmorPlateCollider armorPlateCollider, bool damageInfoIsLocal = true)
		{
			this._preAllocatedArmorComponents.Clear();
			this.Inventory.GetPutOnArmorsNonAlloc(this._preAllocatedArmorComponents);
			List<ArmorComponent> list = null;
			bool flag = false;
			bool flag2 = false;
			bool flag3 = false;
			foreach (ArmorComponent armorComponent in this._preAllocatedArmorComponents)
			{
				flag3 = (armorComponent.Item.TemplateId == \uEEFA.InvincibleBalaclava);
				if (flag3)
				{
					break;
				}
			}
			for (int i = 0; i < this._preAllocatedArmorComponents.Count; i++)
			{
				ArmorComponent armorComponent2 = this._preAllocatedArmorComponents[i];
				float num = 0f;
				if (armorComponent2.ShotMatches(colliderType, armorPlateCollider))
				{
					if (flag || flag2)
					{
						float num2 = armorComponent2.BluntThroughput;
						if (armorComponent2.ArmorType == EArmorType.Heavy)
						{
							num2 *= 1f - this.Skills.HeavyVestBluntThroughputDamageReduction;
						}
						damageInfo.Damage *= num2;
					}
					else
					{
						if (list == null)
						{
							list = new List<ArmorComponent>();
						}
						list.Add(armorComponent2);
						if (this._healthController.IsAlive)
						{
							num = armorComponent2.ApplyDamage(ref damageInfo, colliderType, armorPlateCollider, damageInfoIsLocal, this._preAllocatedArmorComponents, this.Skills.LightVestMeleeWeaponDamageReduction, this.Skills.HeavyVestBluntThroughputDamageReduction);
							this.\uE05D(num, armorComponent2);
						}
						flag = (armorComponent2.Item.Id == damageInfo.BlockedBy);
						flag2 = (armorComponent2.Item.Id == damageInfo.DeflectedBy);
					}
				}
				if (num > 0.1f)
				{
					this.OnArmorPointsChanged(armorComponent2, false);
				}
			}
			if (flag3)
			{
				damageInfo.Damage = 0f;
			}
			return list;
		}

		// Token: 0x06008E26 RID: 36390 RVA: 0x002DFC60 File Offset: 0x002DDE60
		protected virtual void OnArmorPointsChanged(ArmorComponent armor, bool children = false)
		{
		}

		// Token: 0x06008E27 RID: 36391 RVA: 0x002DFC64 File Offset: 0x002DDE64
		protected virtual void OnSideEffectApplied(SideEffectComponent sideEffect)
		{
		}

		// Token: 0x06008E28 RID: 36392 RVA: 0x002DFC68 File Offset: 0x002DDE68
		public void SetDogtagInfo(\uECEE deathPacket)
		{
			EPlayerSide eplayerSide = (EPlayerSide)deathPacket.Side;
			WildSpawnType role = (WildSpawnType)deathPacket.Role;
			if (role != WildSpawnType.pmcBEAR)
			{
				if (role == WildSpawnType.pmcUSEC)
				{
					eplayerSide = EPlayerSide.Usec;
				}
			}
			else
			{
				eplayerSide = EPlayerSide.Bear;
			}
			if (eplayerSide == EPlayerSide.Savage)
			{
				return;
			}
			Item containedItem = this.Equipment.GetSlot(EquipmentSlot.Dogtag).ContainedItem;
			if (containedItem == null)
			{
				Debug.LogErrorFormat(\uF1F8.\uE000(140890), new object[]
				{
					eplayerSide,
					this.FullIdInfo
				});
				return;
			}
			DogtagComponent itemComponent = containedItem.GetItemComponent<DogtagComponent>();
			if (itemComponent != null)
			{
				itemComponent.Item.SpawnedInSession = true;
				itemComponent.AccountId = deathPacket.AccountId;
				itemComponent.ProfileId = deathPacket.ProfileId;
				itemComponent.Nickname = deathPacket.Nickname;
				itemComponent.KillerAccountId = deathPacket.KillerAccountId;
				itemComponent.KillerProfileId = deathPacket.KillerProfileId;
				itemComponent.KillerName = deathPacket.KillerName;
				itemComponent.Side = eplayerSide;
				itemComponent.Level = deathPacket.Level;
				itemComponent.Time = \uE6D7.UniversalDateTimeFromUnixTime(deathPacket.Time).ToLocalTime();
				itemComponent.Status = deathPacket.Status;
				itemComponent.WeaponName = deathPacket.WeaponName;
				itemComponent.GroupId = this.GroupId;
				return;
			}
			Debug.LogError(\uF1F8.\uE000(140818));
		}

		// Token: 0x06008E29 RID: 36393 RVA: 0x002DFDC4 File Offset: 0x002DDFC4
		protected void RecalculateEquipmentParams()
		{
			float num = 0f;
			float num2 = 0f;
			float ergonomicsPenalty = this.ErgonomicsPenalty;
			this._preAllocatedArmorComponents.Clear();
			this.Inventory.GetPutOnArmorsNonAlloc(this._preAllocatedArmorComponents);
			EArmorPlateCollider earmorPlateCollider = (EArmorPlateCollider)0;
			foreach (ArmorComponent armorComponent in this._preAllocatedArmorComponents)
			{
				earmorPlateCollider |= armorComponent.ArmorPlateCollidersMask;
			}
			if (this.PlayerBones)
			{
				this.PlayerBones.SetArmorPlateCollidersState(earmorPlateCollider);
			}
			this._ergonomicsPenalty = 0f;
			for (int i = 0; i < this._preAllocatedArmorComponents.Count; i++)
			{
				ArmorComponent armorComponent2 = this._preAllocatedArmorComponents[i];
				float num3 = 0f;
				if (armorComponent2.ArmorType == EArmorType.Light)
				{
					num3 = this.Skills.LightVestMoveSpeedPenaltyReduction;
				}
				if (armorComponent2.ArmorType == EArmorType.Heavy)
				{
					num3 = this.Skills.HeavyVestMoveSpeedPenaltyReduction;
				}
				num += armorComponent2.SpeedPenalty * (1f - num3);
				num2 += armorComponent2.MousePenalty * (1f - num3);
				this._ergonomicsPenalty += armorComponent2.WeaponErgonomicPenalty;
			}
			this._preAllocatedBackpackPenaltyComponent = this.Inventory.GetPutOnBackpack();
			if (this._preAllocatedBackpackPenaltyComponent != null)
			{
				num += this._preAllocatedBackpackPenaltyComponent.Template.SpeedPenaltyPercent;
				num2 += this._preAllocatedBackpackPenaltyComponent.Template.MousePenalty;
				this._ergonomicsPenalty += this._preAllocatedBackpackPenaltyComponent.Template.WeaponErgonomicPenalty;
			}
			this._preAllocatedArmorComponents.Clear();
			this._ergonomicsPenalty /= 100f;
			this.RemoveStateSpeedLimit(Player.ESpeedLimit.Armor);
			if (num < 0f)
			{
				this.AddStateSpeedLimit((100f + num) / 100f * this.MovementContext.MaxSpeed, Player.ESpeedLimit.Armor);
			}
			if (Math.Abs(this._ergonomicsPenalty - ergonomicsPenalty) > 0f)
			{
				this.ProceduralWeaponAnimation.UpdateWeaponVariables();
			}
			this.RemoveMouseSensitivityModifier(Player.EMouseSensitivityModifier.Armor);
			if (num2 < 0f)
			{
				this.AddMouseSensitivityModifier(Player.EMouseSensitivityModifier.Armor, num2 / 100f);
			}
		}

		// Token: 0x06008E2A RID: 36394 RVA: 0x002E0024 File Offset: 0x002DE224
		public virtual void ApplyHitDebuff(float damage, float staminaBurnRate, EBodyPart bodyPartType, EDamageType damageType)
		{
			if (damageType.IsEnemyDamage())
			{
				this.IncreaseAwareness(20f);
			}
			if (this.HealthController.IsAlive && (!this.MovementContext.PhysicalConditionIs(EPhysicalCondition.OnPainkillers) || damage > 4f) && !this.IsAI)
			{
				if (this.Speaker != null)
				{
					this.Speaker.Play(EPhraseTrigger.OnBeingHurt, this.HealthStatus, true, null);
				}
				else
				{
					Debug.LogError(\uF1F8.\uE000(141020));
				}
			}
			if (!damageType.IsWeaponInduced())
			{
				return;
			}
			this._accumulatedDebuffDamage = ((this._lastHitDebuffFrame == Time.frameCount) ? (this._accumulatedDebuffDamage + staminaBurnRate) : staminaBurnRate);
			float num = Mathf.InverseLerp(55f, 10f, this._accumulatedDebuffDamage);
			if (num < 1f)
			{
				this.UpdateSpeedLimit(num, Player.ESpeedLimit.Shot, 0.66f);
			}
			this._lastHitDebuffFrame = Time.frameCount;
			this.Physical.BulletHit(staminaBurnRate);
			if (bodyPartType == EBodyPart.LeftLeg || bodyPartType == EBodyPart.RightLeg)
			{
				if (!this.MovementContext.PhysicalConditionIs(EPhysicalCondition.OnPainkillers))
				{
					this.Physical.Sprint(false);
				}
			}
		}

		// Token: 0x06008E2B RID: 36395 RVA: 0x002E0168 File Offset: 0x002DE368
		public virtual bool SetShotStatus(BodyPartCollider bodypart, \uF064 shot, Vector3 hitpoint, Vector3 shotNormal, Vector3 shotDirection)
		{
			this._preAllocatedArmorComponents.Clear();
			this.Inventory.GetPutOnArmorsNonAlloc(this._preAllocatedArmorComponents);
			ArmorPlateCollider armorPlateCollider = bodypart as ArmorPlateCollider;
			EArmorPlateCollider armorPlateCollider2 = (armorPlateCollider == null) ? ((EArmorPlateCollider)0) : armorPlateCollider.ArmorPlateColliderType;
			for (int i = 0; i < this._preAllocatedArmorComponents.Count; i++)
			{
				ArmorComponent armorComponent = this._preAllocatedArmorComponents[i];
				if (armorComponent.ShotMatches(bodypart.BodyPartColliderType, armorPlateCollider2))
				{
					if (armorComponent.Deflects(shotDirection, shotNormal, shot))
					{
						return true;
					}
					if (shot.BlockedBy == null)
					{
						armorComponent.SetPenetrationStatus(shot);
					}
				}
			}
			return false;
		}

		// Token: 0x06008E2C RID: 36396 RVA: 0x002E0220 File Offset: 0x002DE420
		public bool CheckArmorHitByDirection(BodyPartCollider bodyPart)
		{
			this._preAllocatedArmorComponents.Clear();
			this.Inventory.GetPutOnArmorsNonAlloc(this._preAllocatedArmorComponents);
			ArmorPlateCollider armorPlateCollider = bodyPart as ArmorPlateCollider;
			EArmorPlateCollider armorPlateCollider2 = (armorPlateCollider == null) ? ((EArmorPlateCollider)0) : armorPlateCollider.ArmorPlateColliderType;
			using (List<ArmorComponent>.Enumerator enumerator = this._preAllocatedArmorComponents.GetEnumerator())
			{
				while (enumerator.MoveNext())
				{
					if (enumerator.Current.ShotMatches(bodyPart.BodyPartColliderType, armorPlateCollider2))
					{
						return true;
					}
				}
			}
			return false;
		}

		// Token: 0x06008E2D RID: 36397 RVA: 0x002E02C4 File Offset: 0x002DE4C4
		public bool TryGetArmorResistData(BodyPartCollider bodyPart, float penetrationPower, out \uE329 armorResistanceData)
		{
			armorResistanceData = default(\uE329);
			this._preAllocatedArmorComponents.Clear();
			this.Inventory.GetPutOnArmorsNonAlloc(this._preAllocatedArmorComponents);
			ArmorPlateCollider armorPlateCollider = bodyPart as ArmorPlateCollider;
			EArmorPlateCollider armorPlateCollider2 = (armorPlateCollider == null) ? ((EArmorPlateCollider)0) : armorPlateCollider.ArmorPlateColliderType;
			for (int i = 0; i < this._preAllocatedArmorComponents.Count; i++)
			{
				ArmorComponent armorComponent = this._preAllocatedArmorComponents[i];
				if (armorComponent.ShotMatches(bodyPart.BodyPartColliderType, armorPlateCollider2))
				{
					armorResistanceData = \uE32A.RealResistance(armorComponent.Repairable.Durability, (float)armorComponent.Repairable.TemplateDurability, armorComponent.ArmorClass, penetrationPower);
					return true;
				}
			}
			return false;
		}

		// Token: 0x06008E2E RID: 36398 RVA: 0x002E038C File Offset: 0x002DE58C
		public virtual \uE870 ApplyShot(\uF061 damageInfo, EBodyPart bodyPartType, EBodyPartColliderType colliderType, EArmorPlateCollider armorPlateCollider, \uF060 shotId)
		{
			if (!this._healthController.IsAlive)
			{
				return null;
			}
			bool flag = damageInfo.DeflectedBy != null;
			float damage = damageInfo.Damage;
			List<ArmorComponent> list = this.ProceedDamageThroughArmor(ref damageInfo, colliderType, armorPlateCollider, true);
			MaterialType material = flag ? MaterialType.HelmetRicochet : ((list == null || list.Count < 1) ? MaterialType.Body : list[0].Material);
			\uE870 uE = new \uE870
			{
				PoV = this.PointOfView,
				Penetrated = damageInfo.Penetrated,
				Material = material
			};
			float num = damage - damageInfo.Damage;
			this.ProceedLocalAbsorbedDamage(ref damageInfo, num);
			this.ApplyDamageInfo(damageInfo, bodyPartType, colliderType, 0f);
			this.ShotReactions(damageInfo, bodyPartType);
			this.ReceiveDamage(damageInfo.Damage, bodyPartType, damageInfo.DamageType, num, uE.Material);
			return uE;
		}

		// Token: 0x06008E2F RID: 36399 RVA: 0x002E0474 File Offset: 0x002DE674
		protected virtual void ProceedLocalAbsorbedDamage(ref \uF061 damageInfo, float absorbedDamage)
		{
		}

		// Token: 0x06008E30 RID: 36400 RVA: 0x002E0478 File Offset: 0x002DE678
		public virtual void ApplyDamageInfo(\uF061 damageInfo, EBodyPart bodyPartType, EBodyPartColliderType colliderType, float absorbed)
		{
			if (!this._healthController.IsAlive)
			{
				return;
			}
			EDamageType damageType = damageInfo.DamageType;
			this.LastDamagedBodyPart = bodyPartType;
			\uE703 player = damageInfo.Player;
			Player player2 = (player != null) ? this.GameWorld.GetAlivePlayerByProfileID(player.iPlayer.ProfileId) : null;
			if (this.ActiveHealthController != null)
			{
				this.ActiveHealthController.DoWoundRelapse(damageInfo.Damage, bodyPartType);
				this.LastAggressor = ((player != null) ? player.iPlayer : null);
				this.LastDamageInfo = damageInfo;
				this.LastBodyPart = bodyPartType;
				damageInfo.BleedBlock = this.\uE05C(colliderType);
				float num = this.ActiveHealthController.ApplyDamage(bodyPartType, damageInfo.Damage, damageInfo);
				damageInfo.DidBodyDamage = num;
				this.ActiveHealthController.BluntContusion(bodyPartType, absorbed);
				SideEffectComponent sideEffect;
				if (num.Positive() && this.ActiveHealthController.TryApplySideEffects(damageInfo, bodyPartType, out sideEffect) && player2 != null)
				{
					player2.OnSideEffectApplied(sideEffect);
				}
			}
			else
			{
				damageInfo.DidBodyDamage = 0f;
			}
			if (player2 != null)
			{
				player2.Loyalty.MarkAsAggressor(this);
			}
			this.ManageAggressor(damageInfo, bodyPartType, colliderType);
			this.ApplyHitDebuff(damageInfo.Damage, damageInfo.StaminaBurnRate * damageInfo.Damage, bodyPartType, damageType);
			if (!damageType.IsWeaponInduced())
			{
				this.ReceiveDamage(damageInfo.Damage, bodyPartType, damageType, 0f, MaterialType.None);
			}
			Action<\uF061, EBodyPart, float> beingHitAction = this.BeingHitAction;
			if (beingHitAction != null)
			{
				beingHitAction(damageInfo, bodyPartType, 0f);
			}
			if (Singleton<\uE34D>.Instantiated)
			{
				Singleton<\uE34D>.Instance.BeingHitAction(damageInfo, this);
			}
			if (player != null)
			{
				if (!this.HealthController.IsAlive)
				{
					if (Singleton<\uE34D>.Instantiated)
					{
						Singleton<\uE34D>.Instance.Kill(player.iPlayer, this.GetPlayer);
					}
					return;
				}
			}
		}

		// Token: 0x06008E31 RID: 36401 RVA: 0x002E0644 File Offset: 0x002DE844
		public virtual void AddDetailedHitInfo(EDamageType damageType, int d, int absorbed, int staminaLoss, EBodyPart part, MaterialType special)
		{
		}

		// Token: 0x17001473 RID: 5235
		// (get) Token: 0x06008E32 RID: 36402 RVA: 0x002E0648 File Offset: 0x002DE848
		public int OwnerId
		{
			get
			{
				return this.PlayerId;
			}
		}

		// Token: 0x06008E33 RID: 36403 RVA: 0x002E0650 File Offset: 0x002DE850
		protected virtual bool ShouldVocalizeDeath(EBodyPart bodyPart)
		{
			return bodyPart > EBodyPart.Head;
		}

		// Token: 0x06008E34 RID: 36404 RVA: 0x002E0658 File Offset: 0x002DE858
		protected virtual void OnBeenKilledByAggressor(IPlayer aggressor, \uF061 damageInfo, EBodyPart bodyPart, EDamageType lethalDamageType)
		{
			if (this.AggressorFound)
			{
				return;
			}
			if (this == aggressor)
			{
				return;
			}
			this.AggressorFound = true;
			IAIData aidata = aggressor.AIData;
			if (aidata != null)
			{
				aidata.KillEnemy(this);
			}
			Player alivePlayerByProfileID = this.GameWorld.GetAlivePlayerByProfileID(aggressor.ProfileId);
			if (alivePlayerByProfileID == null)
			{
				return;
			}
			bool isFriendly = false;
			if (alivePlayerByProfileID.AIData != null && !alivePlayerByProfileID.AIData.IsAI && this.AIData != null && this.AIData.BotOwner != null)
			{
				bool flag = this.Profile.Info.Settings.Role == WildSpawnType.exUsec && this.AIData.BotOwner.BotsController.BotTradersServices.LighthouseKeeperServices.IsPlayerExUsecFriendly(alivePlayerByProfileID);
				\uEE2D uEE2D;
				bool flag2 = this.Profile.Info.Settings.Role.IsSectant() && this._inventoryController.HasCultistAmulet(out uEE2D);
				isFriendly = (flag || flag2);
			}
			float distance = Vector3.Distance(aggressor.Position, this.Position);
			alivePlayerByProfileID.StatisticsManager.OnEnemyKill(damageInfo, lethalDamageType, bodyPart, this.Profile.Info.Side, this.Profile.Info.Settings.Role, this.Profile.AccountId, this.Profile.Id, this.Profile.Nickname, this.Profile.Info.GroupId, this.Profile.Info.Level, this.Profile.Info.Settings.Experience, distance, this.CurrentHour, this.Inventory.EquippedInSlotsTemplateIds, this.HealthController.BodyPartEffects, this.TriggerZones, isFriendly, this.IsAI);
		}

		// Token: 0x06008E35 RID: 36405 RVA: 0x002E0838 File Offset: 0x002DEA38
		protected virtual void OnDead(EDamageType damageType)
		{
			\uF181.ReleaseBeginSample(\uF1F8.\uE000(140983), \uF1F8.\uE000(140961));
			if (this.LastAggressor != null)
			{
				this.OnBeenKilledByAggressor(this.LastAggressor, this.LastDamageInfo, this.LastBodyPart, damageType);
			}
			if (\uE2F9.Config.UseSpiritPlayer)
			{
				this.Spirit.Die();
			}
			this.LastDamageType = damageType;
			\uF181.ReleaseBeginSample(\uF1F8.\uE000(140968), \uF1F8.\uE000(140961));
			\uE86E onPlayerDead = this.OnPlayerDead;
			if (onPlayerDead != null)
			{
				onPlayerDead(this, this.LastAggressor, this.LastDamageInfo, this.LastBodyPart);
			}
			Action<Player, IPlayer, \uF061, EBodyPart> onPlayerDeadStatic = Player.OnPlayerDeadStatic;
			if (onPlayerDeadStatic != null)
			{
				onPlayerDeadStatic(this, this.LastAggressor, this.LastDamageInfo, this.LastBodyPart);
			}
			\uE86F onPlayerDeadOrUnspawn = this.OnPlayerDeadOrUnspawn;
			if (onPlayerDeadOrUnspawn != null)
			{
				onPlayerDeadOrUnspawn(this);
			}
			Action<IPlayer> onIPlayerDeadOrUnspawn = this.OnIPlayerDeadOrUnspawn;
			if (onIPlayerDeadOrUnspawn != null)
			{
				onIPlayerDeadOrUnspawn(this);
			}
			\uF181.ReleaseBeginSample(\uF1F8.\uE000(140937), \uF1F8.\uE000(140961));
			if (this.ShouldVocalizeDeath(this.LastDamagedBodyPart))
			{
				EPhraseTrigger trigger = this.LastDamageType.IsWeaponInduced() ? EPhraseTrigger.OnDeath : EPhraseTrigger.OnAgony;
				try
				{
					this.Speaker.Play(trigger, this.HealthStatus, true, null);
					goto IL_150;
				}
				catch (Exception ex)
				{
					Debug.LogError(ex.Message);
					goto IL_150;
				}
			}
			this.Speaker.Shut();
			IL_150:
			this.MovementContext.ReleaseDoorIfInteractingWithOne();
			this.PlayDeathSound();
			this.MovementContext.OnStateChanged -= this.\uE011;
			this.MovementContext.PhysicalConditionChanged -= this.ProceduralWeaponAnimation.PhysicalConditionUpdated;
			this.InventoryController.UnregisterView(this);
			\uF181.ReleaseBeginSample(\uF1F8.\uE000(140641), \uF1F8.\uE000(140961));
			this.ExfilUnsubscribe();
			this.EnabledAnimators = (Player.EAnimatorMask)0;
			\uF181.ReleaseBeginSample(\uF1F8.\uE000(140609), \uF1F8.\uE000(140961));
			this.BodyAnimatorCommon.enabled = false;
			if (\uE2F9.Config.UseBodyFastAnimator)
			{
				this.PlayerBones.PlayableAnimator.Stop();
			}
			this.ArmsAnimatorCommon.enabled = false;
			\uF181.ReleaseBeginSample(\uF1F8.\uE000(140576), \uF1F8.\uE000(140961));
			this._characterController.isEnabled = false;
			SkillManager skills = this.Skills;
			if (skills != null)
			{
				skills.Terminate();
			}
			this.Physical.Unsubscribe();
			if (this.POM != null)
			{
				this.POM.Off();
			}
			try
			{
				if (this.HandsController != null)
				{
					this.HandsController.OnPlayerDead();
				}
			}
			catch (Exception arg)
			{
				Debug.LogError(string.Format(\uF1F8.\uE000(140553), arg));
			}
			this.FastForwardCurrentOperations();
			\uF181.ReleaseBeginSample(\uF1F8.\uE000(140794), \uF1F8.\uE000(140961));
			Action callback = this.MovementContext.InteractionInfo.Callback;
			if (callback != null)
			{
				callback();
			}
			this._healthController.DiedEvent -= this.OnDead;
			if (this._propActive)
			{
				this._propTransforms[0].parent = this.PlayerBones.LeftPalm;
				if (this._compassArrow)
				{
					this._compassArrow.enabled = false;
				}
				this._propActive = false;
			}
			else
			{
				this.HandPosers[0].Lerp2Target(EFTHardSettings.Instance.LEFT_HAND_QTS, 5f, 0.5f);
			}
			bool usedSimplifiedSkeleton = this.UsedSimplifiedSkeleton;
			if (usedSimplifiedSkeleton)
			{
				List<Item> list = Enumerable.ToList<Item>(this._inventoryController.Inventory.Equipment.GetFirstLevelItems());
				int count = list.Count;
				int num = 0;
				foreach (Item item in list)
				{
					\uF190<\uEF18> uF = \uEF02.RemoveWithoutRestrictions(item, this._inventoryController);
					if (uF.Failed)
					{
						Debug.LogError(string.Format(\uF1F8.\uE000(140764), uF.Error));
						num++;
					}
				}
			}
			\uEF02.DestroyOverLimit(this.Equipment, this.InventoryController);
			this.Corpse = this.CreateCorpse();
			this.Corpse.IsZombieCorpse = usedSimplifiedSkeleton;
			this.ApplyCorpseImpulse();
			if (this._triggerColliderSearcher != null)
			{
				this._triggerColliderSearcher.IsEnabled = false;
			}
			\uF181.ReleaseBeginSample(\uF1F8.\uE000(140710), \uF1F8.\uE000(140961));
			if (this.MovementContext.StationaryWeapon != null)
			{
				this.MovementContext.StationaryWeapon.Unlock(this.ProfileId);
			}
			if (this.MovementContext.StationaryWeapon != null)
			{
				if (this.MovementContext.StationaryWeapon.Item == this._handsController.Item)
				{
					this.MovementContext.StationaryWeapon.Show();
					this.ReleaseHand();
					return;
				}
			}
			this.Corpse.SetItemInHandsLootedCallback(new Action(this.ReleaseHand));
			base.StartCoroutine(this.\uE05E());
		}

		// Token: 0x06008E36 RID: 36406 RVA: 0x002E0D78 File Offset: 0x002DEF78
		protected virtual void PlayDeathSound()
		{
			if (base.gameObject.GetComponent<\uE834>() != null && this is ClientPlayer)
			{
				float time = 0f;
				if (this.Speaker != null)
				{
					if (this.Speaker.Speaking)
					{
						time = this.Speaker.TimeLeft;
					}
				}
				StaticManager.Instance.WaitSeconds(time, new Action(Player.<>c.<>9.\uE010));
			}
		}

		// Token: 0x06008E37 RID: 36407 RVA: 0x002E0E04 File Offset: 0x002DF004
		private IEnumerator \uE05E()
		{
			int num;
			for (;;)
			{
				int num2;
				num = num2;
				if (num != 0)
				{
					break;
				}
				yield return null;
			}
			if (num != 1)
			{
				yield break;
			}
			this.DropItemDead(this._handsController.Item, this._handsController.ControllerGameObject);
			if (this.GameWorld != null)
			{
				this.GameWorld.UnregisterPlayer(this);
			}
			yield break;
		}

		// Token: 0x06008E38 RID: 36408 RVA: 0x002E0E14 File Offset: 0x002DF014
		protected virtual Corpse CreateCorpse()
		{
			return this.CreateCorpse<Corpse>(this.Velocity);
		}

		// Token: 0x06008E39 RID: 36409 RVA: 0x002E0E24 File Offset: 0x002DF024
		protected T CreateCorpse<T>(Vector3 velocity) where T : Corpse
		{
			Player.FirearmController firearmController = this.HandsController as Player.FirearmController;
			\uE37D containerCollectionView = null;
			if (firearmController != null)
			{
				containerCollectionView = firearmController.CCV;
			}
			return Corpse.CreateCorpse<T>(base.gameObject, this.ProfileId, this.Equipment, this.Profile.Customization, false, this.GameWorld, this.Side, velocity, this.PlayerBones.Pelvis.Original, this._itemInHands, false, containerCollectionView, this.InventoryController.CurrentId);
		}

		// Token: 0x06008E3A RID: 36410 RVA: 0x002E0EB0 File Offset: 0x002DF0B0
		protected virtual void ApplyCorpseImpulse()
		{
			float num = EFTHardSettings.Instance.HIT_FORCE;
			num *= 0.3f + 0.7f * Mathf.InverseLerp(50f, 20f, this.LastDamageInfo.PenetrationPower);
			this._corpseAppliedForce = num;
			this.Corpse.Ragdoll.ApplyImpulse(this.LastDamageInfo.HitCollider, this.LastDamageInfo.Direction, this.LastDamageInfo.HitPoint, num);
		}

		// Token: 0x06008E3B RID: 36411 RVA: 0x002E0F30 File Offset: 0x002DF130
		public void ExitTriggerStatusChanged(bool status)
		{
			this.ExitTriggerZone = status;
			this.OnExitTriggerVisited.Invoke();
		}

		// Token: 0x1400018C RID: 396
		// (add) Token: 0x06008E3C RID: 36412 RVA: 0x002E0F44 File Offset: 0x002DF144
		// (remove) Token: 0x06008E3D RID: 36413 RVA: 0x002E0F88 File Offset: 0x002DF188
		public event Action<ExfiltrationPoint, bool> OnEpInteraction;

		// Token: 0x06008E3E RID: 36414 RVA: 0x002E0FCC File Offset: 0x002DF1CC
		public virtual void SetExfiltrationPoint(ExfiltrationPoint point, bool entered)
		{
			Action<ExfiltrationPoint, bool> onEpInteraction = this.OnEpInteraction;
			if (onEpInteraction != null)
			{
				onEpInteraction(point, entered);
			}
			this.ExfiltrationPoint = (entered ? point : null);
			Action possibleInteractionsChanged = this.PossibleInteractionsChanged;
			if (possibleInteractionsChanged == null)
			{
				return;
			}
			possibleInteractionsChanged();
		}

		// Token: 0x06008E3F RID: 36415 RVA: 0x002E1004 File Offset: 0x002DF204
		public void SearchForInteractions()
		{
			this._nextCastHasForceEvent = true;
			Action possibleInteractionsChanged = this.PossibleInteractionsChanged;
			if (possibleInteractionsChanged == null)
			{
				return;
			}
			possibleInteractionsChanged();
		}

		// Token: 0x06008E40 RID: 36416 RVA: 0x002E1020 File Offset: 0x002DF220
		public void ForceInteractionsChanged()
		{
			Action possibleInteractionsChanged = this.PossibleInteractionsChanged;
			if (possibleInteractionsChanged == null)
			{
				return;
			}
			possibleInteractionsChanged();
		}

		// Token: 0x06008E41 RID: 36417 RVA: 0x002E1034 File Offset: 0x002DF234
		internal virtual void \uE0A6(EInteraction gesture)
		{
			this.MovementContext.SetInteractInHands(gesture);
		}

		// Token: 0x06008E42 RID: 36418 RVA: 0x002E1044 File Offset: 0x002DF244
		protected virtual void TriggerPhraseCommand(EPhraseTrigger phrase, int netPhraseId)
		{
		}

		// Token: 0x17001474 RID: 5236
		// (get) Token: 0x06008E43 RID: 36419 RVA: 0x002E1048 File Offset: 0x002DF248
		// (set) Token: 0x06008E44 RID: 36420 RVA: 0x002E1050 File Offset: 0x002DF250
		public BotsGroup BotsGroup { get; set; }

		// Token: 0x06008E45 RID: 36421 RVA: 0x002E105C File Offset: 0x002DF25C
		public void AddAlly(IPlayer enemy)
		{
		}

		// Token: 0x06008E46 RID: 36422 RVA: 0x002E1060 File Offset: 0x002DF260
		public void SetGroup(BotsGroup newBotsGroup)
		{
		}

		// Token: 0x06008E47 RID: 36423 RVA: 0x002E1064 File Offset: 0x002DF264
		public virtual void KillMe(EBodyPartColliderType colliderType, float damage)
		{
			Player.\uE017 uE = new Player.\uE017();
			uE.colliderType = colliderType;
			if (!this.HealthController.IsAlive)
			{
				return;
			}
			BodyPartCollider bodyPartCollider = Enumerable.First<BodyPartCollider>(this._hitColliders, new Func<BodyPartCollider, bool>(uE.\uE000));
			\uF061 damageInfo = new \uF061
			{
				DamageType = EDamageType.Sniper,
				Damage = damage,
				Direction = this.Transform.forward,
				HitCollider = bodyPartCollider.Collider
			};
			this.ApplyShot(damageInfo, bodyPartCollider.BodyPartType, uE.colliderType, (EArmorPlateCollider)0, \uF060.EMPTY_SHOT_ID);
		}

		// Token: 0x06008E48 RID: 36424 RVA: 0x002E1110 File Offset: 0x002DF310
		public virtual void DevelopResetDiscardLimits()
		{
			if (!this.Profile.Info.MemberCategory.Is(EMemberCategory.Developer))
			{
				return;
			}
			\uEED1 uEED = this.InventoryController as \uEED1;
			if (uEED != null)
			{
				uEED.ResetDiscardLimits();
			}
		}

		// Token: 0x06008E49 RID: 36425 RVA: 0x002E1154 File Offset: 0x002DF354
		public virtual void DevelopSetEncodedRadioTransmitter(bool value)
		{
		}

		// Token: 0x06008E4A RID: 36426 RVA: 0x002E1158 File Offset: 0x002DF358
		public virtual void DevelopSetActiveLighthouseTraderZoneDebug(bool value)
		{
		}

		// Token: 0x06008E4B RID: 36427 RVA: 0x002E115C File Offset: 0x002DF35C
		public virtual void GetRadioTransmitterStatusFromServer()
		{
		}

		// Token: 0x06008E4C RID: 36428 RVA: 0x002E1160 File Offset: 0x002DF360
		public virtual void KillAIs()
		{
		}

		// Token: 0x06008E4D RID: 36429 RVA: 0x002E1164 File Offset: 0x002DF364
		public virtual void SetEventState(EEventState value)
		{
		}

		// Token: 0x06008E4E RID: 36430 RVA: 0x002E1168 File Offset: 0x002DF368
		public virtual void SpawnAI(int count)
		{
		}

		// Token: 0x06008E4F RID: 36431 RVA: 0x002E116C File Offset: 0x002DF36C
		public virtual void DevelopUnlockDoors(bool openDoors)
		{
		}

		// Token: 0x06008E50 RID: 36432 RVA: 0x002E1170 File Offset: 0x002DF370
		public virtual void Heal(EBodyPart bodyPart, float value)
		{
		}

		// Token: 0x06008E51 RID: 36433 RVA: 0x002E1174 File Offset: 0x002DF374
		public virtual void DebugSnapshotAllPlayers()
		{
		}

		// Token: 0x06008E52 RID: 36434 RVA: 0x002E1178 File Offset: 0x002DF378
		public virtual void DebugSpawnAirdrop(bool spawnNearPlayer, Vector3 playerPosition)
		{
		}

		// Token: 0x06008E53 RID: 36435 RVA: 0x002E117C File Offset: 0x002DF37C
		public void SetCallbackForInteraction(Action<Action> cb)
		{
			this._openAction = cb;
		}

		// Token: 0x06008E54 RID: 36436 RVA: 0x002E1188 File Offset: 0x002DF388
		public virtual void TryInteractionCallback(LootableContainer container)
		{
			Player.\uE018 uE = new Player.\uE018();
			uE.container = container;
			uE.<>4__this = this;
			if (uE.container != null)
			{
				Action<Action> openAction = this._openAction;
				if (openAction != null)
				{
					openAction(new Action(uE.\uE000));
				}
			}
			this._openAction = null;
		}

		// Token: 0x06008E55 RID: 36437 RVA: 0x002E11E4 File Offset: 0x002DF3E4
		private void \uE05F()
		{
			this.Pedometer.Start();
			this.StatisticsManager.BeginStatisticsSession();
		}

		// Token: 0x06008E56 RID: 36438 RVA: 0x002E11FC File Offset: 0x002DF3FC
		public virtual void OnGameSessionEnd(ExitStatus exitStatus, float pastTime, string locationId, string exitName)
		{
			if (this._gameSessionEndWasCalled)
			{
				return;
			}
			try
			{
				this._gameSessionEndWasCalled = true;
				this.Pedometer.Stop();
				this.\uE009 = 0;
				this.ExecuteSkill(new Action(this.\uE092));
				this.ExecuteSkill(new Action(this.\uE093));
				this.Profile.EftStats.LastPlayerState = null;
				this.StatisticsManager.EndStatisticsSession(exitStatus, pastTime);
				foreach (\uF158 uF in this.\uE008)
				{
					uF.CheckExitConditionCounters(exitStatus, pastTime, locationId, exitName, this.HealthController.BodyPartEffects, this.TriggerZones);
				}
				\uF176 uF2 = this.\uE005 as \uF176;
				if (uF2 != null)
				{
					uF2.ManageQuestStatusesForPveOfflineGameEnd();
				}
				if (exitStatus != ExitStatus.Transit)
				{
					\uF15B questController = this._questController;
					if (questController != null)
					{
						questController.ResetCurrentNullableCounters();
					}
				}
				\uF17A achievementsController = this._achievementsController;
				if (achievementsController != null)
				{
					achievementsController.ResetCurrentNullableCounters();
				}
				this.\uE071();
				if (exitStatus != ExitStatus.Killed && exitStatus != ExitStatus.Left)
				{
					this.\uE072();
				}
				this.\uE073();
				if (this.MovementContext.Platform != null)
				{
					this.GetOff(this.MovementContext.Platform);
				}
				this.Skills.OnSkillLevelChanged -= this.OnSkillLevelChanged;
				this.Skills.OnSkillExperienceChanged -= this.OnSkillExperienceChanged;
				this.Skills.WeaponMastered -= this.OnWeaponMastered;
				this.Skills.OnMasteringExperienceChanged -= this.OnMasteringExperienceChanged;
				this.Skills.ImmunityAvoidPoisonChance.OnResult -= this.\uE060;
				this.Skills.ImmunityAvoidMiscEffectsChance.OnResult -= this.\uE060;
				this.StatisticsManager.OnUniqueLoot -= this.\uE069;
				this.MovementContext.OnStateChanged -= this.\uE06F;
				this.HealthController.ApplyDamageEvent -= this.\uE06B;
				this.HealthController.EnergyChangedEvent -= this.\uE06E;
				this.HealthController.HydrationChangedEvent -= this.\uE06A;
				this.HealthController.EffectResidualEvent -= this.\uE06C;
				this.HealthController.StimulatorBuffActivationEvent -= this.\uE063;
				this.HealthController.TemperatureChangedEvent -= this.\uE064;
				this.SearchController.OnItemFound -= this.\uE065;
				this.InventoryController.OnAmmoLoaded -= this.\uE066;
				this.InventoryController.OnAmmoUnloaded -= this.\uE067;
				this.InventoryController.OnMagazineCheck -= this.\uE068;
				this.HealthController.EffectStartedEvent -= this.OnHealthEffectAdded;
				this.HealthController.EffectResidualEvent -= this.OnHealthEffectRemoved;
				this.HealthController.HealthChangedEvent -= this.\uE055;
				this.HealthController.BodyPartDestroyedEvent -= this.\uE053;
				this.HealthController.BodyPartRestoredEvent -= this.\uE052;
				this.Profile.OnTraderStandingChanged -= this.TraderStandingHandler;
				Action unsubscribeOnEndSession = this._unsubscribeOnEndSession;
				if (unsubscribeOnEndSession != null)
				{
					unsubscribeOnEndSession();
				}
				this._unsubscribeOnEndSession = null;
				this.UnsubscribeVisualEvents();
			}
			catch (Exception arg)
			{
				Debug.LogError(string.Format(\uF1F8.\uE000(140553), arg));
			}
		}

		// Token: 0x06008E57 RID: 36439 RVA: 0x002E15F8 File Offset: 0x002DF7F8
		protected virtual void ConnectSkillManager()
		{
			this.Skills.OnSkillLevelChanged += this.OnSkillLevelChanged;
			this.Skills.OnSkillExperienceChanged += this.OnSkillExperienceChanged;
			this.Skills.WeaponMastered += this.OnWeaponMastered;
			this.Skills.OnMasteringExperienceChanged += this.OnMasteringExperienceChanged;
			this.Skills.ImmunityAvoidPoisonChance.OnResult += this.\uE060;
			this.Skills.ImmunityAvoidMiscEffectsChance.OnResult += this.\uE060;
			this.StatisticsManager.OnUniqueLoot += this.\uE069;
			this.MovementContext.OnStateChanged += this.\uE06F;
			this.HealthController.ApplyDamageEvent += this.\uE06B;
			this.HealthController.EnergyChangedEvent += this.\uE06E;
			this.HealthController.HydrationChangedEvent += this.\uE06A;
			this.HealthController.EffectResidualEvent += this.\uE06C;
			this.HealthController.StimulatorBuffActivationEvent += this.\uE063;
			this.HealthController.TemperatureChangedEvent += this.\uE064;
			this.SearchController.OnItemFound += this.\uE065;
			this.InventoryController.OnAmmoLoaded += this.\uE066;
			this.InventoryController.OnAmmoUnloaded += this.\uE067;
			this.InventoryController.OnMagazineCheck += this.\uE068;
			this._unsubscribeOnEndSession = \uEFC6.Instance.SubscribeOnEvent<\uEFD3>(new Action<\uEFD3>(this.\uE094));
		}

		// Token: 0x06008E58 RID: 36440 RVA: 0x002E17D0 File Offset: 0x002DF9D0
		private void \uE060(bool result)
		{
			this.HealthController.AddImmunityNotificationEffect();
		}

		// Token: 0x06008E59 RID: 36441 RVA: 0x002E17E0 File Offset: 0x002DF9E0
		private void \uE061(\uED31 obj)
		{
			if (obj is \uED41)
			{
				this.Skills.Dehydration.Begin();
				return;
			}
			if (obj is \uED42)
			{
				this.Skills.Exhaustion.Begin();
			}
		}

		// Token: 0x06008E5A RID: 36442 RVA: 0x002E181C File Offset: 0x002DFA1C
		private void \uE062(\uED31 obj)
		{
			if (obj is \uED41)
			{
				this.ExecuteSkill(new Action(this.\uE095));
				return;
			}
			if (obj is \uED42)
			{
				this.ExecuteSkill(new Action(this.\uE096));
			}
		}

		// Token: 0x06008E5B RID: 36443 RVA: 0x002E185C File Offset: 0x002DFA5C
		private void \uE063(\uED25 buff)
		{
			if (!buff.Settings.BuffType.IsBuff(buff.Settings.Value))
			{
				this.\uE009 += (buff.Active ? 1 : -1);
			}
			BindableEvent onLevelUp = this.Skills.Endurance.OnLevelUp;
			if (onLevelUp == null)
			{
				return;
			}
			onLevelUp.Invoke();
		}

		// Token: 0x06008E5C RID: 36444 RVA: 0x002E18C4 File Offset: 0x002DFAC4
		private void \uE064(float tempCelsio)
		{
			this.PlayerBody.SetTemperatureForBody(tempCelsio);
		}

		// Token: 0x06008E5D RID: 36445 RVA: 0x002E18D4 File Offset: 0x002DFAD4
		private void \uE065(Item item)
		{
			Player.\uE019 uE = new Player.\uE019();
			uE.<>4__this = this;
			if (item is \uEEBD)
			{
				return;
			}
			IItemOwner owner = item.Parent.GetOwner();
			uE.onCorpse = (owner.RootItem is InventoryEquipment);
			this.ExecuteSkill(new Action(uE.\uE000));
		}

		// Token: 0x06008E5E RID: 36446 RVA: 0x002E1930 File Offset: 0x002DFB30
		private void \uE066(int count)
		{
			Player.\uE01A uE01A = new Player.\uE01A();
			uE01A.<>4__this = this;
			uE01A.count = count;
			this.ExecuteSkill(new Action(uE01A.\uE000));
		}

		// Token: 0x06008E5F RID: 36447 RVA: 0x002E196C File Offset: 0x002DFB6C
		private void \uE067(int count)
		{
			Player.\uE01B uE01B = new Player.\uE01B();
			uE01B.<>4__this = this;
			uE01B.count = count;
			this.ExecuteSkill(new Action(uE01B.\uE000));
		}

		// Token: 0x06008E60 RID: 36448 RVA: 0x002E19A8 File Offset: 0x002DFBA8
		private void \uE068()
		{
			this.ExecuteSkill(new Action(this.\uE097));
		}

		// Token: 0x06008E61 RID: 36449 RVA: 0x002E19BC File Offset: 0x002DFBBC
		private void \uE069()
		{
			this.ExecuteSkill(new Action(this.\uE098));
		}

		// Token: 0x06008E62 RID: 36450 RVA: 0x002E19D0 File Offset: 0x002DFBD0
		private void \uE06A(float diff)
		{
			Player.\uE01C uE01C = new Player.\uE01C();
			uE01C.<>4__this = this;
			uE01C.diff = diff;
			this.ExecuteSkill(new Action(uE01C.\uE000));
		}

		// Token: 0x06008E63 RID: 36451 RVA: 0x002E1A0C File Offset: 0x002DFC0C
		private void \uE06B(EBodyPart bodyPart, float damage, \uF061 damageInfo)
		{
			Player.\uE01D uE01D = new Player.\uE01D();
			uE01D.<>4__this = this;
			uE01D.damage = damage;
			if (!damageInfo.DamageType.IsSelfInflicted())
			{
				this.ExecuteSkill(new Action(uE01D.\uE000));
			}
		}

		// Token: 0x06008E64 RID: 36452 RVA: 0x002E1A54 File Offset: 0x002DFC54
		private void \uE06C(\uED31 healthEffect)
		{
			\uED62 uED = healthEffect as \uED62;
			if (uED == null)
			{
				return;
			}
			foreach (\uF158 uF in this.\uE008)
			{
				uF.CheckUseItemCounter(uED.MedItem.TemplateId, uED.Amount, this.Location, this.TriggerZones);
			}
		}

		// Token: 0x06008E65 RID: 36453 RVA: 0x002E1ACC File Offset: 0x002DFCCC
		private void \uE06D(\uEFD3 flareEvent)
		{
			if (!this.IsYourPlayer)
			{
				return;
			}
			if (flareEvent.PlayerProfileID == this.ProfileId)
			{
				if (flareEvent.ZoneEventType == \uEFD3.EZoneEventType.FiredPlayerAddedInShotList)
				{
					foreach (\uF158 uF in this.\uE008)
					{
						uF.CheckShootFlareCounter(flareEvent.ZoneID);
					}
				}
			}
		}

		// Token: 0x06008E66 RID: 36454 RVA: 0x002E1B4C File Offset: 0x002DFD4C
		private void \uE06E(float diff)
		{
			Player.\uE01E uE01E = new Player.\uE01E();
			uE01E.<>4__this = this;
			uE01E.diff = diff;
			this.ExecuteSkill(new Action(uE01E.\uE000));
		}

		// Token: 0x06008E67 RID: 36455 RVA: 0x002E1B88 File Offset: 0x002DFD88
		public virtual void ExecuteSkill(Action action)
		{
			action();
		}

		// Token: 0x06008E68 RID: 36456 RVA: 0x002E1B90 File Offset: 0x002DFD90
		public virtual void ExecuteSkill(Action<float> action)
		{
			action(1f);
		}

		// Token: 0x06008E69 RID: 36457 RVA: 0x002E1BA0 File Offset: 0x002DFDA0
		public Task ManageGameQuests()
		{
			Player.\uE043 uE;
			uE.<>t__builder = AsyncTaskMethodBuilder.Create();
			uE.<>4__this = this;
			uE.<>1__state = -1;
			uE.<>t__builder.Start<Player.\uE043>(ref uE);
			return uE.<>t__builder.Task;
		}

		// Token: 0x06008E6A RID: 36458 RVA: 0x002E1BF0 File Offset: 0x002DFDF0
		public void InitializeRecodableItemHandlers()
		{
			this.recodableItemsHandler = new RecodableItemsHandler(this);
		}

		// Token: 0x06008E6B RID: 36459 RVA: 0x002E1C00 File Offset: 0x002DFE00
		protected virtual void StartInflictSelfDamageCoroutine()
		{
			if (this._selfDamage == null)
			{
				this._selfDamage = base.StartCoroutine(this.InflictSelfDamage());
			}
		}

		// Token: 0x06008E6C RID: 36460 RVA: 0x002E1C1C File Offset: 0x002DFE1C
		public IEnumerator InflictSelfDamage()
		{
			for (;;)
			{
				int num2;
				int num = num2;
				if (num != 0)
				{
					if (num != 1)
					{
						break;
					}
				}
				if (!this._healthController.IsAlive)
				{
					goto Block_7;
				}
				this._countdownToSprintDamage -= Time.deltaTime;
				if (this._countdownToSprintDamage <= 0f && this.CurrentState.Name == EPlayerState.Sprint)
				{
					this._countdownToSprintDamage = UnityEngine.Random.Range(1f, 1.5f);
					if (this.MovementContext.PhysicalConditionIs(EPhysicalCondition.LeftLegDamaged))
					{
						this.ActiveHealthController.ApplyDamage(EBodyPart.LeftLeg, 2f, \uED29.FallDamage);
					}
					if (this.MovementContext.PhysicalConditionIs(EPhysicalCondition.RightLegDamaged))
					{
						this.ActiveHealthController.ApplyDamage(EBodyPart.RightLeg, 2f, \uED29.FallDamage);
					}
				}
				yield return null;
			}
			yield break;
			Block_7:
			yield break;
		}

		// Token: 0x06008E6D RID: 36461 RVA: 0x002E1C2C File Offset: 0x002DFE2C
		private void \uE06F(EPlayerState previousState, EPlayerState nextState)
		{
			this.Pedometer.CurrentState = nextState;
			switch (nextState)
			{
			case EPlayerState.ProneMove:
				this.MovementContext.CheckGroundedRayDistance = 0.08f;
				this.Pedometer.MakeMark(EPlayerState.ProneMove);
				break;
			case EPlayerState.Run:
				this.MovementContext.CheckGroundedRayDistance = 0.08f;
				this.Pedometer.MakeMark(EPlayerState.Run);
				break;
			case EPlayerState.Sprint:
				this.MovementContext.CheckGroundedRayDistance = 0.15f;
				this.Pedometer.MakeMark(EPlayerState.Sprint);
				if (this.MovementContext.PhysicalConditionIs(EPhysicalCondition.LeftLegDamaged) || this.MovementContext.PhysicalConditionIs(EPhysicalCondition.RightLegDamaged))
				{
					this.StartInflictSelfDamageCoroutine();
				}
				break;
			case EPlayerState.Jump:
			{
				this.MovementContext.CheckGroundedRayDistance = 0.03f;
				ActiveHealthController activeHealthController = this.ActiveHealthController;
				if (activeHealthController != null)
				{
					activeHealthController.DoWoundRelapse(1f, EBodyPart.Common);
				}
				break;
			}
			}
			switch (previousState)
			{
			case EPlayerState.ProneMove:
				if (this.MovementContext.IsGrounded)
				{
					this.ExecuteSkill(new Action(this.\uE099));
					return;
				}
				break;
			case EPlayerState.Run:
				if (this.MovementContext.IsGrounded)
				{
					Player.\uE020 uE = new Player.\uE020();
					uE.<>4__this = this;
					uE.distance = this.Pedometer.GetDistanceFromMark(EPlayerState.Run);
					this.ExecuteSkill(new Action(uE.\uE000));
					return;
				}
				break;
			case EPlayerState.Sprint:
				if (this.MovementContext.IsGrounded)
				{
					Player.\uE01F uE01F = new Player.\uE01F();
					uE01F.<>4__this = this;
					uE01F.distance = this.Pedometer.GetDistanceFromMark(EPlayerState.Sprint);
					this.ExecuteSkill(new Action(uE01F.\uE000));
					ActiveHealthController activeHealthController2 = this.ActiveHealthController;
					if (activeHealthController2 == null)
					{
						return;
					}
					activeHealthController2.DoWoundRelapse(uE01F.distance / 10f, EBodyPart.Common);
					return;
				}
				break;
			case EPlayerState.Jump:
			{
				bool flag = false;
				if (this.MovementContext.PhysicalConditionIs(EPhysicalCondition.LeftLegDamaged))
				{
					ActiveHealthController activeHealthController3 = this.ActiveHealthController;
					if (activeHealthController3 != null)
					{
						activeHealthController3.ApplyDamage(EBodyPart.LeftLeg, 3f, \uED29.FallDamage);
					}
					flag = true;
				}
				if (this.MovementContext.PhysicalConditionIs(EPhysicalCondition.RightLegDamaged))
				{
					ActiveHealthController activeHealthController4 = this.ActiveHealthController;
					if (activeHealthController4 != null)
					{
						activeHealthController4.ApplyDamage(EBodyPart.RightLeg, 3f, \uED29.FallDamage);
					}
					flag = true;
				}
				if (flag)
				{
					if (!this.MovementContext.PhysicalConditionIs(EPhysicalCondition.OnPainkillers))
					{
						if (!this.IsAI)
						{
							this.Say(EPhraseTrigger.OnBeingHurt, true, 0f, (ETagStatus)0, 100, false);
						}
					}
				}
				break;
			}
			default:
				return;
			}
		}

		// Token: 0x06008E6E RID: 36462 RVA: 0x002E1E94 File Offset: 0x002E0094
		public virtual void SendHandsInteractionStateChanged(bool value, int animationId)
		{
			if (value)
			{
				this.MovementContext.SetBlindFire(0);
			}
		}

		// Token: 0x06008E6F RID: 36463 RVA: 0x002E1EA8 File Offset: 0x002E00A8
		public virtual void SetCompassState(bool value)
		{
		}

		// Token: 0x06008E70 RID: 36464 RVA: 0x002E1EAC File Offset: 0x002E00AC
		public virtual void SetLauncherState(bool value)
		{
		}

		// Token: 0x06008E71 RID: 36465 RVA: 0x002E1EB0 File Offset: 0x002E00B0
		public virtual void SetAnimatorLayerWeight(int layer, int weight)
		{
		}

		// Token: 0x06008E72 RID: 36466 RVA: 0x002E1EB4 File Offset: 0x002E00B4
		protected virtual void OnSkillLevelChanged(\uE8F6 skill)
		{
		}

		// Token: 0x06008E73 RID: 36467 RVA: 0x002E1EB8 File Offset: 0x002E00B8
		protected virtual void OnSkillExperienceChanged(\uE8F6 skill)
		{
		}

		// Token: 0x06008E74 RID: 36468 RVA: 0x002E1EBC File Offset: 0x002E00BC
		protected virtual void OnWeaponMastered(\uE8F8 masterSkill)
		{
		}

		// Token: 0x06008E75 RID: 36469 RVA: 0x002E1EC0 File Offset: 0x002E00C0
		protected virtual void OnMasteringExperienceChanged(\uE8F8 masterSkill)
		{
		}

		// Token: 0x06008E76 RID: 36470 RVA: 0x002E1EC4 File Offset: 0x002E00C4
		public void SpecialPlaceVisited(string id, int experience)
		{
			Action<string, int> onSpecialPlaceVisited = this.OnSpecialPlaceVisited;
			if (onSpecialPlaceVisited == null)
			{
				return;
			}
			onSpecialPlaceVisited(id, experience);
		}

		// Token: 0x17001475 RID: 5237
		// (get) Token: 0x06008E77 RID: 36471 RVA: 0x002E1ED8 File Offset: 0x002E00D8
		// (set) Token: 0x06008E78 RID: 36472 RVA: 0x002E1EE0 File Offset: 0x002E00E0
		public bool IsYourPlayer { get; protected set; }

		// Token: 0x06008E79 RID: 36473 RVA: 0x002E1EEC File Offset: 0x002E00EC
		private IEnumerator \uE070()
		{
			int num;
			for (;;)
			{
				int num2;
				num = num2;
				if (num != 0)
				{
					break;
				}
				yield return new WaitForSeconds(2f);
			}
			if (num != 1)
			{
				yield break;
			}
			this._renderers = Enumerable.ToArray<Renderer>(Enumerable.Where<Renderer>(base.GetComponentsInChildren<Renderer>(true), new Func<Renderer, bool>(Player.<>c.<>9.\uE011)));
			yield break;
		}

		// Token: 0x06008E7A RID: 36474 RVA: 0x002E1EFC File Offset: 0x002E00FC
		public void SwitchRenderer(bool @switch)
		{
			Renderer[] renderers = this._renderers;
			for (int i = 0; i < renderers.Length; i++)
			{
				renderers[i].enabled = @switch;
			}
		}

		// Token: 0x17001476 RID: 5238
		// (get) Token: 0x06008E7B RID: 36475 RVA: 0x002E1F30 File Offset: 0x002E0130
		[Obsolete("Use Player.Transform instead!", true)]
		public new Transform transform
		{
			get
			{
				return base.transform;
			}
		}

		// Token: 0x06008E7C RID: 36476 RVA: 0x002E1F38 File Offset: 0x002E0138
		public virtual void Teleport(Vector3 position, bool onServerToo = false)
		{
			this.MovementContext.TransformPosition = position;
			this.\uE00E();
			this._dampVelocity = 0f;
			this.MovementContext.ResetFlying();
			if (EnvironmentManager.Instance)
			{
				EnvironmentManager.Instance.UpdateEnvironmentForPlayer(this);
			}
		}

		// Token: 0x06008E7D RID: 36477 RVA: 0x002E1F94 File Offset: 0x002E0194
		public void IncreaseAwareness(float aware = 5f)
		{
			this.Awareness = Mathf.Max(this.Awareness, Time.time + aware);
		}

		// Token: 0x06008E7E RID: 36478 RVA: 0x002E1FB0 File Offset: 0x002E01B0
		public virtual void Sleep(bool value)
		{
		}

		// Token: 0x06008E7F RID: 36479 RVA: 0x002E1FB4 File Offset: 0x002E01B4
		public bool HasBodyPartCollider(Collider collider)
		{
			return this.PlayerBones.BodyPartCollidersHashSet.Contains(collider);
		}

		// Token: 0x06008E80 RID: 36480 RVA: 0x002E1FC8 File Offset: 0x002E01C8
		public virtual void OnVaulting()
		{
		}

		// Token: 0x06008E81 RID: 36481 RVA: 0x002E1FCC File Offset: 0x002E01CC
		public virtual void OnAnimatedInteraction(EInteraction interaction)
		{
		}

		// Token: 0x06008E82 RID: 36482 RVA: 0x002E1FD0 File Offset: 0x002E01D0
		public virtual void OnInventoryInteraction(bool inventory, bool isOperation = false)
		{
		}

		// Token: 0x06008E83 RID: 36483 RVA: 0x002E1FD4 File Offset: 0x002E01D4
		public virtual void OnMounting(\uE842.EMountingCommand command)
		{
		}

		// Token: 0x06008E84 RID: 36484 RVA: 0x002E1FD8 File Offset: 0x002E01D8
		public virtual void Dispose()
		{
			if (EnvironmentManager.Instance != null)
			{
				EnvironmentManager.Instance.OnPlayerEnvironmentChanged -= this.SetEnvironment;
			}
			Action soundUnsubscribeOnDestroy = this._soundUnsubscribeOnDestroy;
			if (soundUnsubscribeOnDestroy != null)
			{
				soundUnsubscribeOnDestroy();
			}
			this._soundUnsubscribeOnDestroy = null;
			if (\uE3A0.Controller != null)
			{
				\uE3A0.Controller.StatusChangedEvent -= this.\uE01F;
			}
			\uEACC tripwireInteractionSoundController = this._tripwireInteractionSoundController;
			if (tripwireInteractionSoundController != null)
			{
				tripwireInteractionSoundController.Dispose();
			}
			if (this.MovementContext != null)
			{
				PlayerMountingPointData playerMountingPointData = this.MovementContext.PlayerMountingPointData;
				playerMountingPointData.OnEnterMountedState = (Action<float>)Delegate.Remove(playerMountingPointData.OnEnterMountedState, new Action<float>(this.\uE04B));
				PlayerMountingPointData playerMountingPointData2 = this.MovementContext.PlayerMountingPointData;
				playerMountingPointData2.OnExitMountedState = (Action<float>)Delegate.Remove(playerMountingPointData2.OnExitMountedState, new Action<float>(this.\uE04C));
			}
			if (this._dropBackPackEvents != null)
			{
				this._dropBackPackEvents.OnBackpackDropEvent -= this.\uE04D;
			}
			foreach (\uF158 uF in this.\uE008)
			{
				if (uF != null)
				{
					uF.Dispose();
				}
			}
			this._questController = null;
			this._achievementsController = null;
			this._prestigeController = null;
			if (this.GameWorld != null)
			{
				this.GameWorld.UnregisterPlayer(this);
				if (this.GameWorld.SpeakerManager != null)
				{
					this.GameWorld.SpeakerManager.RemoveFromGroup(this);
				}
			}
			Action voipSourceBinding = this._voipSourceBinding;
			if (voipSourceBinding != null)
			{
				voipSourceBinding();
			}
			this._voipSourceBinding = null;
			if (this._playerBody != null && this.Corpse == null)
			{
				this._playerBody.Dispose();
				this._playerBody = null;
			}
			this._compassInstantiated = false;
			if (this._vaultingComponent != null)
			{
				this.UpdateEvent -= this._vaultingComponent.DoVaultingTick;
			}
			if (this._weaponMountingComponent != null)
			{
				this.HandsChangingEvent -= this._weaponMountingComponent.CancelFindingPoint;
				this._weaponMountingComponent.Dispose();
			}
			\uE383 physical = this.Physical;
			if (physical != null)
			{
				physical.Unsubscribe();
			}
			if (this.HandsController != null)
			{
				UnityEngine.Object handsController = this.HandsController;
				this.\uE071();
				UnityEngine.Object.Destroy(handsController);
			}
			MovementContext movementContext = this.MovementContext;
			if (movementContext != null)
			{
				movementContext.Dispose();
			}
			if (this.ExfiltrationPoint != null)
			{
				this.ExfiltrationPoint.Entered.Remove(this);
			}
			if (this.MovementContext != null && this.MovementContext.Platform != null)
			{
				this.GetOff(this.MovementContext.Platform);
			}
			\uE86F onPlayerDeadOrUnspawn = this.OnPlayerDeadOrUnspawn;
			if (onPlayerDeadOrUnspawn != null)
			{
				onPlayerDeadOrUnspawn(this);
			}
			Action<IPlayer> onIPlayerDeadOrUnspawn = this.OnIPlayerDeadOrUnspawn;
			if (onIPlayerDeadOrUnspawn != null)
			{
				onIPlayerDeadOrUnspawn(this);
			}
			this.CompositeDisposable.Dispose();
		}

		// Token: 0x06008E85 RID: 36485 RVA: 0x002E22E4 File Offset: 0x002E04E4
		private void \uE071()
		{
			if (this._handsController == null)
			{
				return;
			}
			this._handsController.Destroy();
			this._handsController = null;
		}

		// Token: 0x06008E86 RID: 36486 RVA: 0x002E2308 File Offset: 0x002E0508
		private void \uE072()
		{
			foreach (Item item in Enumerable.ToList<Item>(Enumerable.Where<Item>(Enumerable.SelectMany<Slot, Item>(Enumerable.Where<Slot>(this._inventoryController.Inventory.Equipment.ContainerSlots, new Func<Slot, bool>(Player.<>c.<>9.\uE012)), new Func<Slot, IEnumerable<Item>>(Player.<>c.<>9.\uE013)), new Func<Item, bool>(Player.<>c.<>9.\uE014))))
			{
				\uF190<\uEF18> uF = \uEF02.RemoveWithoutRestrictions(item, this._inventoryController);
				if (uF.Failed)
				{
					Debug.LogError(string.Format(\uF1F8.\uE000(140672), uF.Error));
				}
			}
		}

		// Token: 0x06008E87 RID: 36487 RVA: 0x002E240C File Offset: 0x002E060C
		private void \uE073()
		{
			Slot slot = this._inventoryController.Inventory.Equipment.GetSlot(EquipmentSlot.SecuredContainer);
			if (slot.ContainedItem != null)
			{
				foreach (Item item in Enumerable.ToList<Item>(Enumerable.Where<Item>(slot.ContainedItem.GetAllItems(), new Func<Item, bool>(Player.<>c.<>9.\uE015))))
				{
					\uF190<\uEF18> uF = \uEF02.RemoveWithoutRestrictions(item, this._inventoryController);
					if (uF.Failed)
					{
						Debug.LogError(string.Format(\uF1F8.\uE000(140376), uF.Error));
					}
				}
			}
		}

		// Token: 0x06008E88 RID: 36488 RVA: 0x002E24E8 File Offset: 0x002E06E8
		public void Board(MovingPlatform platform)
		{
			if (this.MovementContext.Platform != null && this.MovementContext.Platform != platform)
			{
				this.GetOff(this.MovementContext.Platform);
			}
			if (!platform.Passengers.Contains(this))
			{
				platform.Passengers.Add(this);
			}
			this.MovementContext.Platform = platform;
		}

		// Token: 0x06008E89 RID: 36489 RVA: 0x002E2560 File Offset: 0x002E0760
		public void GetOff(MovingPlatform platform)
		{
			if (this.MovementContext.Platform != platform)
			{
				return;
			}
			platform.Passengers.Remove(this);
			this.MovementContext.Platform = null;
		}

		// Token: 0x06008E8A RID: 36490 RVA: 0x002E2590 File Offset: 0x002E0790
		public void HandleFlareSuccessEvent(Vector3 position, AmmoTemplate ammoTemplate)
		{
			Singleton<\uE34D>.Instance.SuccessFlare(this, position, ammoTemplate);
		}

		// Token: 0x06008E8B RID: 36491 RVA: 0x002E25A0 File Offset: 0x002E07A0
		public bool AddDiscoveredSecretExit(SecretExfiltrationPoint secretExfiltrationPoint)
		{
			bool flag = !this.FoundSecretExits.Contains(secretExfiltrationPoint);
			if (flag)
			{
				this.FoundSecretExits.Add(secretExfiltrationPoint);
			}
			return flag;
		}

		// Token: 0x17001477 RID: 5239
		// (get) Token: 0x06008E8C RID: 36492 RVA: 0x002E25C0 File Offset: 0x002E07C0
		string IDissonancePlayer.PlayerId
		{
			get
			{
				return this.ProfileId;
			}
		}

		// Token: 0x17001478 RID: 5240
		// (get) Token: 0x06008E8D RID: 36493 RVA: 0x002E25C8 File Offset: 0x002E07C8
		Vector3 IDissonancePlayer.Position
		{
			get
			{
				return this.Transform.Original.position;
			}
		}

		// Token: 0x17001479 RID: 5241
		// (get) Token: 0x06008E8E RID: 36494 RVA: 0x002E25DC File Offset: 0x002E07DC
		Quaternion IDissonancePlayer.Rotation
		{
			get
			{
				return this.Transform.Original.rotation;
			}
		}

		// Token: 0x1700147A RID: 5242
		// (get) Token: 0x06008E8F RID: 36495 RVA: 0x002E25F0 File Offset: 0x002E07F0
		// (set) Token: 0x06008E90 RID: 36496 RVA: 0x002E25F8 File Offset: 0x002E07F8
		public IPlayerVoipController VoipController { get; protected set; }

		// Token: 0x1700147B RID: 5243
		// (get) Token: 0x06008E91 RID: 36497 RVA: 0x002E2604 File Offset: 0x002E0804
		NetworkPlayerType IDissonancePlayer.Type
		{
			get
			{
				if (!(this is ClientPlayer))
				{
					return NetworkPlayerType.Remote;
				}
				return NetworkPlayerType.Local;
			}
		}

		// Token: 0x1700147C RID: 5244
		// (get) Token: 0x06008E92 RID: 36498 RVA: 0x002E2614 File Offset: 0x002E0814
		public bool IsTracking
		{
			get
			{
				return !this.Destroyed;
			}
		}

		// Token: 0x1700147D RID: 5245
		// (get) Token: 0x06008E93 RID: 36499 RVA: 0x002E2620 File Offset: 0x002E0820
		// (set) Token: 0x06008E94 RID: 36500 RVA: 0x002E2628 File Offset: 0x002E0828
		private protected DissonanceComms DissonanceComms { protected get; private set; }

		// Token: 0x1700147E RID: 5246
		// (get) Token: 0x06008E95 RID: 36501 RVA: 0x002E2634 File Offset: 0x002E0834
		// (set) Token: 0x06008E96 RID: 36502 RVA: 0x002E263C File Offset: 0x002E083C
		protected DateTime HearingDateTime { get; set; }

		// Token: 0x1700147F RID: 5247
		// (get) Token: 0x06008E97 RID: 36503 RVA: 0x002E2648 File Offset: 0x002E0848
		// (set) Token: 0x06008E98 RID: 36504 RVA: 0x002E2650 File Offset: 0x002E0850
		protected Player.EVoipState VoipState { get; set; }

		// Token: 0x06008E99 RID: 36505 RVA: 0x002E265C File Offset: 0x002E085C
		protected virtual void InitVoip(Player.EVoipState voipState)
		{
			this.VoipState = voipState;
			if (voipState != Player.EVoipState.NotAvailable)
			{
				if (voipState != Player.EVoipState.MicrophoneFail)
				{
					this.DissonanceComms = DissonanceComms.Instance;
					return;
				}
			}
		}

		// Token: 0x06008E9A RID: 36506 RVA: 0x002E2680 File Offset: 0x002E0880
		private void \uE074()
		{
			Player.\uE021 uE = new Player.\uE021();
			uE.broadcastTrigger = base.gameObject.AddComponent<VoiceBroadcastTrigger>();
			uE.broadcastTrigger.ChannelType = CommTriggerTarget.Self;
			\uE9A6 settings = Singleton<\uE9A4>.Instance.Sound.Settings;
			this.CompositeDisposable.BindState<int>(settings.VoipDeviceSensitivity, new Action<int>(uE.\uE000));
		}

		// Token: 0x06008E9B RID: 36507 RVA: 0x002E26E4 File Offset: 0x002E08E4
		protected void TrackPlayerPosition()
		{
			DissonanceComms dissonanceComms = this.DissonanceComms;
			if (dissonanceComms == null)
			{
				return;
			}
			dissonanceComms.TrackPlayerPosition(this);
		}

		// Token: 0x06008E9C RID: 36508 RVA: 0x002E26F8 File Offset: 0x002E08F8
		public ValueTuple<bool, bool> IsHeard(in Vector3 voicePos, float sqrDistance)
		{
			if (this.DissonanceComms == null)
			{
				return new ValueTuple<bool, bool>(false, false);
			}
			bool flag = this.\uE075(voicePos, sqrDistance);
			bool item = flag && (this.VoipState == Player.EVoipState.Available || this.VoipState == Player.EVoipState.MicrophoneFail);
			return new ValueTuple<bool, bool>(flag, item);
		}

		// Token: 0x06008E9D RID: 36509 RVA: 0x002E2748 File Offset: 0x002E0948
		private bool \uE075(in Vector3 voicePos, float sqrDistance)
		{
			return (this.Position - voicePos).sqrMagnitude <= sqrDistance;
		}

		// Token: 0x17001480 RID: 5248
		// (get) Token: 0x06008E9E RID: 36510 RVA: 0x002E2774 File Offset: 0x002E0974
		// (set) Token: 0x06008E9F RID: 36511 RVA: 0x002E277C File Offset: 0x002E097C
		public bool IgnoreCameraCollider { get; private set; }

		// Token: 0x17001481 RID: 5249
		// (get) Token: 0x06008EA0 RID: 36512 RVA: 0x002E2788 File Offset: 0x002E0988
		// (set) Token: 0x06008EA1 RID: 36513 RVA: 0x002E2790 File Offset: 0x002E0990
		public BTRSide BtrInteractionSide { get; set; }

		// Token: 0x17001482 RID: 5250
		// (get) Token: 0x06008EA2 RID: 36514 RVA: 0x002E279C File Offset: 0x002E099C
		// (set) Token: 0x06008EA3 RID: 36515 RVA: 0x002E27A4 File Offset: 0x002E09A4
		public TripwireInteractionTrigger TripwireInteractionTrigger { get; set; }

		// Token: 0x17001483 RID: 5251
		// (get) Token: 0x06008EA4 RID: 36516 RVA: 0x002E27B0 File Offset: 0x002E09B0
		// (set) Token: 0x06008EA5 RID: 36517 RVA: 0x002E27B8 File Offset: 0x002E09B8
		public EventObjectInteractive EventObjectInteractive { get; set; }

		// Token: 0x17001484 RID: 5252
		// (get) Token: 0x06008EA6 RID: 36518 RVA: 0x002E27C4 File Offset: 0x002E09C4
		// (set) Token: 0x06008EA7 RID: 36519 RVA: 0x002E27CC File Offset: 0x002E09CC
		public EPlayerBtrState BtrState
		{
			get
			{
				return this._btrState;
			}
			set
			{
				if (this._btrState == value)
				{
					return;
				}
				this.IgnoreCameraCollider = (value >= EPlayerBtrState.Approach);
				switch (value)
				{
				case EPlayerBtrState.Outside:
					this.BtrInteractionSide = null;
					this._customHandRotator = new \uE872();
					break;
				case EPlayerBtrState.Approach:
					break;
				case EPlayerBtrState.GoIn:
					this._customHandRotator = new \uE873(this, null);
					break;
				case EPlayerBtrState.Inside:
					this._customHandRotator = (this._customHandRotator.IsValid ? new \uE874(this, new Quaternion?(this._customHandRotator.GetRotation()), null) : new \uE874(this, null, null));
					break;
				case EPlayerBtrState.GoOut:
					this._customHandRotator = new \uE874(this, null, null);
					break;
				default:
					throw new ArgumentOutOfRangeException();
				}
				this._btrState = value;
				Action<EPlayerBtrState> onBtrStateChanged = this.OnBtrStateChanged;
				if (onBtrStateChanged == null)
				{
					return;
				}
				onBtrStateChanged(this._btrState);
			}
		}

		// Token: 0x1400018D RID: 397
		// (add) Token: 0x06008EA8 RID: 36520 RVA: 0x002E28E0 File Offset: 0x002E0AE0
		// (remove) Token: 0x06008EA9 RID: 36521 RVA: 0x002E2924 File Offset: 0x002E0B24
		public event Action<EPlayerBtrState> OnBtrStateChanged;

		// Token: 0x06008EAA RID: 36522 RVA: 0x002E2968 File Offset: 0x002E0B68
		public virtual void ExternalInteraction()
		{
			RaycastHit raycastHit;
			GameObject interactive = GameWorld.FindInteractable(this.InteractionRay, out raycastHit);
			if (this._playerLookRaycastTransform == null || !this.HealthController.IsAlive)
			{
				return;
			}
			if (!this.CurrentState.CanInteract || !this.HandsController || !this.HandsController.CanInteract())
			{
				return;
			}
			if (\uEFC1.Instance != null && \uEFC1.Instance.BtrView != null && \uEFC1.Instance.BtrView.IsMyPlayerInRange)
			{
				if (this._btrState != EPlayerBtrState.Outside)
				{
					if (this._lastBtrStateInteractionCheck != this._btrState)
					{
						Action possibleInteractionsChanged = this.PossibleInteractionsChanged;
						if (possibleInteractionsChanged != null)
						{
							possibleInteractionsChanged();
						}
						this._lastBtrStateInteractionCheck = this._btrState;
					}
					if (this._lastBtrStateCheck != this.BtrInteractionSide.BtrView.BtrState)
					{
						Action possibleInteractionsChanged2 = this.PossibleInteractionsChanged;
						if (possibleInteractionsChanged2 != null)
						{
							possibleInteractionsChanged2();
						}
						this._lastBtrStateCheck = this.BtrInteractionSide.BtrView.BtrState;
					}
					return;
				}
				this.\uE076(interactive);
			}
			this.\uE077(interactive);
			this.\uE078(interactive);
		}

		// Token: 0x06008EAB RID: 36523 RVA: 0x002E2AB4 File Offset: 0x002E0CB4
		private void \uE076(GameObject interactive)
		{
			if (interactive == null)
			{
				this.\uE09A();
				return;
			}
			BTRSide componentInParent = interactive.GetComponentInParent<BTRSide>();
			if (!(componentInParent == null))
			{
				if (componentInParent.DistanceCheck(this.Position))
				{
					if (!this._lastBtrCastResult)
					{
						this.BtrInteractionSide = componentInParent;
						Action possibleInteractionsChanged = this.PossibleInteractionsChanged;
						if (possibleInteractionsChanged != null)
						{
							possibleInteractionsChanged();
						}
					}
					this._lastBtrCastResult = true;
					return;
				}
			}
			this.\uE09A();
		}

		// Token: 0x06008EAC RID: 36524 RVA: 0x002E2B34 File Offset: 0x002E0D34
		private void \uE077(GameObject interactive)
		{
			if (interactive == null)
			{
				this.\uE09B();
				return;
			}
			TripwireInteractionTrigger component = interactive.GetComponent<TripwireInteractionTrigger>();
			if (!(component == null))
			{
				if (component.DistanceCheck(this.Position))
				{
					if (!this._lastTripwireCastResult)
					{
						this.TripwireInteractionTrigger = component;
						Action possibleInteractionsChanged = this.PossibleInteractionsChanged;
						if (possibleInteractionsChanged != null)
						{
							possibleInteractionsChanged();
						}
					}
					this._lastTripwireCastResult = true;
					return;
				}
			}
			this.\uE09B();
		}

		// Token: 0x06008EAD RID: 36525 RVA: 0x002E2BB4 File Offset: 0x002E0DB4
		private void \uE078(GameObject interactive)
		{
			if (interactive == null)
			{
				this.\uE09C();
				return;
			}
			EventObjectInteractive component = interactive.GetComponent<EventObjectInteractive>();
			if (!(component == null))
			{
				if (component.DistanceCheck(this.Position))
				{
					if (!this._lastEventObjectCastResult)
					{
						this.EventObjectInteractive = component;
						Action possibleInteractionsChanged = this.PossibleInteractionsChanged;
						if (possibleInteractionsChanged != null)
						{
							possibleInteractionsChanged();
						}
					}
					this._lastEventObjectCastResult = true;
					return;
				}
			}
			this.\uE09C();
		}

		// Token: 0x17001485 RID: 5253
		// (get) Token: 0x06008EAE RID: 36526 RVA: 0x002E2C34 File Offset: 0x002E0E34
		public virtual bool CanBeSnapped
		{
			get
			{
				return true;
			}
		}

		// Token: 0x17001486 RID: 5254
		// (get) Token: 0x06008EAF RID: 36527 RVA: 0x002E2C38 File Offset: 0x002E0E38
		// (set) Token: 0x06008EB0 RID: 36528 RVA: 0x002E2C40 File Offset: 0x002E0E40
		public Player.EProcessStatus ProcessStatus
		{
			get
			{
				return this._processStatus;
			}
			private set
			{
				this._processStatus = value;
				this.InventoryController.UpdateLockedStatus();
			}
		}

		// Token: 0x17001487 RID: 5255
		// (get) Token: 0x06008EB1 RID: 36529 RVA: 0x002E2C54 File Offset: 0x002E0E54
		// (set) Token: 0x06008EB2 RID: 36530 RVA: 0x002E2C5C File Offset: 0x002E0E5C
		private Player.AbstractProcess \uE00A { get; set; }

		// Token: 0x17001488 RID: 5256
		// (get) Token: 0x06008EB3 RID: 36531 RVA: 0x002E2C68 File Offset: 0x002E0E68
		// (set) Token: 0x06008EB4 RID: 36532 RVA: 0x002E2C70 File Offset: 0x002E0E70
		public Slot ActiveSlot { get; private set; }

		// Token: 0x1400018E RID: 398
		// (add) Token: 0x06008EB5 RID: 36533 RVA: 0x002E2C7C File Offset: 0x002E0E7C
		// (remove) Token: 0x06008EB6 RID: 36534 RVA: 0x002E2CC0 File Offset: 0x002E0EC0
		public event Action HandsChangingEvent;

		// Token: 0x1400018F RID: 399
		// (add) Token: 0x06008EB7 RID: 36535 RVA: 0x002E2D04 File Offset: 0x002E0F04
		// (remove) Token: 0x06008EB8 RID: 36536 RVA: 0x002E2D48 File Offset: 0x002E0F48
		public event Action<\uE827> HandsChangedEvent;

		// Token: 0x06008EB9 RID: 36537 RVA: 0x002E2D8C File Offset: 0x002E0F8C
		internal void \uE079()
		{
			Action handsChangingEvent = this.HandsChangingEvent;
			if (handsChangingEvent == null)
			{
				return;
			}
			handsChangingEvent();
		}

		// Token: 0x17001489 RID: 5257
		// (get) Token: 0x06008EBA RID: 36538 RVA: 0x002E2DA0 File Offset: 0x002E0FA0
		public bool StateIsSuitableForHandInput
		{
			get
			{
				return Array.IndexOf<EPlayerState>(EFTHardSettings.Instance.UnsuitableStates, this.CurrentState.Name) < 0;
			}
		}

		// Token: 0x1700148A RID: 5258
		// (get) Token: 0x06008EBB RID: 36539 RVA: 0x002E2DC0 File Offset: 0x002E0FC0
		// (set) Token: 0x06008EBC RID: 36540 RVA: 0x002E2DC8 File Offset: 0x002E0FC8
		public Item LastEquippedWeaponOrKnifeItem
		{
			get
			{
				return this._lastEquippedWeaponOrKnifeItem;
			}
			private set
			{
				if (!(value is Weapon))
				{
					if (!(value is \uEE5B))
					{
						return;
					}
				}
				this._lastEquippedWeaponOrKnifeItem = value;
			}
		}

		// Token: 0x06008EBD RID: 36541 RVA: 0x002E2DEC File Offset: 0x002E0FEC
		private void \uE07A(\uE827 controller)
		{
			Action<\uE827> handsChangedEvent = this.HandsChangedEvent;
			if (handsChangedEvent == null)
			{
				return;
			}
			handsChangedEvent(controller);
		}

		// Token: 0x06008EBE RID: 36542 RVA: 0x002E2E00 File Offset: 0x002E1000
		protected virtual Task SpawnController(Player.AbstractHandsController controller, Action callback = null)
		{
			Player.\uE022 uE = new Player.\uE022();
			uE.<>4__this = this;
			uE.controller = controller;
			uE.callback = callback;
			uE.onControllerAppeared = new TaskCompletionSource();
			this.HandsController = uE.controller;
			uE.controller.Spawn(1f, new Action(uE.\uE000));
			return uE.onControllerAppeared.Task;
		}

		// Token: 0x06008EBF RID: 36543 RVA: 0x002E2E74 File Offset: 0x002E1074
		public void FastForwardCurrentOperations()
		{
			if (this.HandsController == null)
			{
				return;
			}
			UnityEngine.Object handsController;
			do
			{
				handsController = this.HandsController;
				this.HandsController.FastForwardCurrentState();
			}
			while (!(handsController == this.HandsController));
		}

		// Token: 0x06008EC0 RID: 36544 RVA: 0x002E2EA4 File Offset: 0x002E10A4
		protected void DestroyController()
		{
			Item item = this.HandsController.Item;
			this.FastForwardCurrentOperations();
			this.HandsController.Destroy();
			foreach (\uEEE0 activeEvent in Enumerable.ToArray<\uEEE0>(this.InventoryController.SelectEvents<\uEEE0>(item)))
			{
				this.InventoryController.RemoveActiveEvent(activeEvent);
			}
			UnityEngine.Object.Destroy(this.HandsController);
			this.HandsController = null;
		}

		// Token: 0x06008EC1 RID: 36545 RVA: 0x002E2F24 File Offset: 0x002E1124
		protected virtual void DropCurrentController(Action callback, bool fastDrop, Item nextControllerItem = null)
		{
			this.HandsController.Drop(1f, callback, fastDrop, nextControllerItem);
		}

		// Token: 0x06008EC2 RID: 36546 RVA: 0x002E2F3C File Offset: 0x002E113C
		public void TrySaveLastItemInHands()
		{
			Item item = this.TryGetItemInHands<Item>();
			if (item != null)
			{
				this.LastEquippedWeaponOrKnifeItem = item;
			}
		}

		// Token: 0x06008EC3 RID: 36547 RVA: 0x002E2F64 File Offset: 0x002E1164
		public void SetEmptyHands(Callback<\uE829> callback)
		{
			callback = (Callback<\uE829>)Delegate.Combine(callback, new Callback<\uE829>(this.\uE09D));
			this.Proceed(true, callback, true);
		}

		// Token: 0x06008EC4 RID: 36548 RVA: 0x002E2F8C File Offset: 0x002E118C
		public void SetStationaryWeapon(Weapon weapon)
		{
			this.Proceed(weapon, new Callback<IFirearmHandsController>(Player.<>c.<>9.\uE016), false);
		}

		// Token: 0x06008EC5 RID: 36549 RVA: 0x002E2FB8 File Offset: 0x002E11B8
		public void SetInHands(Weapon weapon, Callback<IFirearmHandsController> callback)
		{
			this.Proceed(weapon, callback, true);
		}

		// Token: 0x06008EC6 RID: 36550 RVA: 0x002E2FC4 File Offset: 0x002E11C4
		public void SetInHands(\uEEC9 throwWeap, Callback<\uE82C> callback)
		{
			this.Proceed(throwWeap, callback, true);
		}

		// Token: 0x06008EC7 RID: 36551 RVA: 0x002E2FD0 File Offset: 0x002E11D0
		public void SetInHands(\uEE75 meds, \uECFD<EBodyPart> bodyParts, int animationVariant, Callback<\uE82E> callback)
		{
			this.\uE07B(true);
			this.Proceed(meds, bodyParts, callback, animationVariant, true);
		}

		// Token: 0x06008EC8 RID: 36552 RVA: 0x002E2FE8 File Offset: 0x002E11E8
		public void SetInHands(\uEE75 meds, EBodyPart bodyPart, int animationVariant, Callback<\uE82E> callback)
		{
			this.\uE07B(true);
			this.Proceed(meds, new \uECFD<EBodyPart>(bodyPart), callback, animationVariant, true);
		}

		// Token: 0x06008EC9 RID: 36553 RVA: 0x002E3004 File Offset: 0x002E1204
		public void SetInHands(\uEE3D foodDrink, float amount, int animationVariant, Callback<\uE82E> callback)
		{
			this.\uE07B(true);
			this.Proceed(foodDrink, amount, callback, animationVariant, true);
		}

		// Token: 0x06008ECA RID: 36554 RVA: 0x002E301C File Offset: 0x002E121C
		public void SetInHands(KnifeComponent knife, Callback<IKnifeController> callback)
		{
			this.Proceed(knife, callback, true);
		}

		// Token: 0x06008ECB RID: 36555 RVA: 0x002E3028 File Offset: 0x002E1228
		public void SetInHandsUsableItem(Item item, Callback<\uE82D> callback)
		{
			if (item is \uEE91)
			{
				this.Proceed<PortableRangeFinderController>(item, callback, true);
			}
			if (item is \uEE96)
			{
				this.Proceed<RadioTransmitterController>(item, callback, true);
			}
		}

		// Token: 0x06008ECC RID: 36556 RVA: 0x002E3054 File Offset: 0x002E1254
		public void SetInHandsForQuickUse(Item quickUseItem, Callback<\uE833> callback)
		{
			this.Proceed(quickUseItem, callback, true);
		}

		// Token: 0x06008ECD RID: 36557 RVA: 0x002E3060 File Offset: 0x002E1260
		public void SetInHandsForQuickUse(\uEEC9 throwWeap, Callback<\uE831> callback)
		{
			this.Proceed(throwWeap, callback, true);
		}

		// Token: 0x06008ECE RID: 36558 RVA: 0x002E306C File Offset: 0x002E126C
		public void SetInHandsForQuickUse(KnifeComponent knife, Callback<\uE832> callback)
		{
			this.Proceed(knife, callback, true);
		}

		// Token: 0x06008ECF RID: 36559 RVA: 0x002E3078 File Offset: 0x002E1278
		private void \uE07B(bool enable)
		{
			this.MovementContext.PlayerAnimator.SetItemUse(enable);
		}

		// Token: 0x06008ED0 RID: 36560 RVA: 0x002E308C File Offset: 0x002E128C
		public void TrySetLastEquippedWeapon(bool equipFirstAvaliableOnFail = true)
		{
			if (this.\uE07C(this.LastEquippedWeaponOrKnifeItem))
			{
				this.TryProceed(this.LastEquippedWeaponOrKnifeItem, new Callback<\uE827>(Player.<>c.<>9.\uE017), true);
				return;
			}
			if (equipFirstAvaliableOnFail)
			{
				this.SetFirstAvailableItem(new Callback<\uE827>(Player.<>c.<>9.\uE018));
			}
		}

		// Token: 0x06008ED1 RID: 36561 RVA: 0x002E3104 File Offset: 0x002E1304
		public void SetFirstAvailableItem(Callback<\uE827> completeCallback)
		{
			Player.\uE023 uE = new Player.\uE023();
			uE.<>4__this = this;
			uE.completeCallback = completeCallback;
			Item item = Enumerable.FirstOrDefault<Item>(Enumerable.Select<EquipmentSlot, Item>(this._slotPriority, new Func<EquipmentSlot, Item>(uE.\uE000)), new Func<Item, bool>(uE.\uE001));
			if (item != null)
			{
				this.SetInHands(item, uE.completeCallback);
				return;
			}
			this.SetEmptyHands(new Callback<\uE829>(uE.\uE002));
		}

		// Token: 0x06008ED2 RID: 36562 RVA: 0x002E3180 File Offset: 0x002E1380
		private bool \uE07C(Item itemToCheck)
		{
			return itemToCheck != null && this.InventoryController.IsAtReachablePlace(itemToCheck) && (itemToCheck.CurrentAddress == null || itemToCheck.CheckAction(null).Succeeded);
		}

		// Token: 0x06008ED3 RID: 36563 RVA: 0x002E31C8 File Offset: 0x002E13C8
		public void SetInHands(Item item, Callback<\uE827> callback)
		{
			Player.\uE024 uE = new Player.\uE024();
			uE.callback = callback;
			if (item.CurrentAddress != null)
			{
				if (!item.CheckAction(null).Succeeded)
				{
					this.SetEmptyHands(new Callback<\uE829>(uE.\uE000));
					return;
				}
			}
			this.TryProceed(item, uE.callback, true);
		}

		// Token: 0x06008ED4 RID: 36564 RVA: 0x002E322C File Offset: 0x002E142C
		public void SetQuickSlotItem(EBoundItem quickSlot, Callback<\uE827> callback)
		{
			Item boundItem = this.InventoryController.Inventory.FastAccess.GetBoundItem(quickSlot);
			if (boundItem == null || (this.HealthController.IsItemForHealing(boundItem) && !this.HealthController.CanApplyItem(boundItem, EBodyPart.Common)))
			{
				callback(null);
				return;
			}
			if (boundItem.CheckAction(null).Succeeded && !this.InventoryController.IsChangingWeapon)
			{
				if (this.IsInBufferZone)
				{
					if (!this.CanManipulateWithHandsInBufferZone)
					{
						if (!this.IsInBufferZone)
						{
							goto IL_B6;
						}
						if (!this.HealthController.IsItemForHealing(boundItem))
						{
							goto IL_B6;
						}
					}
				}
				this.TryProceed(boundItem, callback, true);
				return;
			}
			IL_B6:
			callback(null);
		}

		// Token: 0x06008ED5 RID: 36565 RVA: 0x002E32FC File Offset: 0x002E14FC
		public void SetSlotItem(EquipmentSlot equipmentSlot, Callback<\uE827> callback)
		{
			Item containedItem = this.InventoryController.Inventory.Equipment.GetSlot(equipmentSlot).ContainedItem;
			if (containedItem != null)
			{
				this.SetItemInHands(containedItem, callback);
			}
		}

		// Token: 0x06008ED6 RID: 36566 RVA: 0x002E3338 File Offset: 0x002E1538
		public void DropBackpack()
		{
			Item containedItem = this.InventoryController.Inventory.Equipment.GetSlot(EquipmentSlot.Backpack).ContainedItem;
			if (containedItem == null)
			{
				return;
			}
			if (this.MovementContext.IsInMountedState)
			{
				this.MovementContext.ExitMountedState();
			}
			Player.ItemHandsController itemHandsController = this.HandsController as Player.ItemHandsController;
			if (itemHandsController != null && itemHandsController.CurrentCompassState)
			{
				itemHandsController.SetCompassState(false);
				return;
			}
			if (this.MovementContext.StationaryWeapon != null)
			{
				return;
			}
			if (this.InventoryController.CanThrow(containedItem) && !this.HandsController.IsPlacingBeacon())
			{
				if (!this.HandsController.IsInInteractionStrictCheck())
				{
					if (this.CurrentStateName != EPlayerState.BreachDoor)
					{
						if (!this.IsSprintEnabled)
						{
							if (this.MovementContext.PlayerAnimator.AnimatedInteractions.CanInteract)
							{
								this.InventoryController.TryThrowItem(containedItem, null, false);
								return;
							}
						}
					}
				}
			}
		}

		// Token: 0x06008ED7 RID: 36567 RVA: 0x002E3444 File Offset: 0x002E1644
		public void SetItemInHands(Item item, Callback<\uE827> callback)
		{
			if (item != null && item.CheckAction(null).Succeeded && !this.InventoryController.IsChangingWeapon)
			{
				if (this.IsInBufferZone)
				{
					if (!this.CanManipulateWithHandsInBufferZone)
					{
						goto IL_4E;
					}
				}
				this.TryProceed(item, callback, true);
				return;
			}
			IL_4E:
			Debug.LogError(\uF1F8.\uE000(140291));
			callback(null);
		}

		// Token: 0x06008ED8 RID: 36568 RVA: 0x002E34C0 File Offset: 0x002E16C0
		internal bool \uE07D(EquipmentSlot slot)
		{
			return this.InventoryController.Inventory.Equipment.GetSlot(slot).ContainedItem != null;
		}

		// Token: 0x06008ED9 RID: 36569 RVA: 0x002E34E0 File Offset: 0x002E16E0
		internal bool \uE07E(EBoundItem slot)
		{
			return this.InventoryController.Inventory.FastAccess.GetBoundItem(slot) != null;
		}

		// Token: 0x06008EDA RID: 36570 RVA: 0x002E34FC File Offset: 0x002E16FC
		public virtual void Interact(IItemOwner loot, Callback callback)
		{
			callback.Succeed();
		}

		// Token: 0x06008EDB RID: 36571 RVA: 0x002E3504 File Offset: 0x002E1704
		protected virtual void Proceed(bool withNetwork, Callback<\uE829> callback, bool scheduled = true)
		{
			Func<Player.EmptyHandsController> controllerFactory = new Func<Player.EmptyHandsController>(this.\uE09E);
			new Player.Process<Player.EmptyHandsController, \uE829>(this, controllerFactory, null, false, Player.AbstractProcess.Completion.Sync, Player.AbstractProcess.Confirmation.Succeed, true).\uE000(null, callback, scheduled);
		}

		// Token: 0x06008EDC RID: 36572 RVA: 0x002E3534 File Offset: 0x002E1734
		protected virtual void Proceed(Weapon weapon, Callback<IFirearmHandsController> callback, bool scheduled = true)
		{
			Player.\uE025 uE = new Player.\uE025();
			uE.<>4__this = this;
			uE.weapon = weapon;
			Func<Player.FirearmController> controllerFactory;
			if (this.IsAI)
			{
				controllerFactory = new Func<AIFirearmController>(uE.\uE000);
			}
			else
			{
				controllerFactory = new Func<Player.FirearmController>(uE.\uE001);
			}
			bool fastHide = false;
			Player.FirearmController firearmController = this._handsController as Player.FirearmController;
			if (firearmController != null)
			{
				fastHide = firearmController.CheckForFastWeaponSwitch(uE.weapon);
			}
			new Player.Process<Player.FirearmController, IFirearmHandsController>(this, controllerFactory, uE.weapon, fastHide, Player.AbstractProcess.Completion.Sync, Player.AbstractProcess.Confirmation.Succeed, true).\uE000(null, callback, scheduled);
		}

		// Token: 0x06008EDD RID: 36573 RVA: 0x002E35C4 File Offset: 0x002E17C4
		protected virtual void Proceed(\uEEC9 throwWeap, Callback<\uE82C> callback, bool scheduled = true)
		{
			Player.\uE026 uE = new Player.\uE026();
			uE.<>4__this = this;
			uE.throwWeap = throwWeap;
			Func<Player.GrenadeHandsController> controllerFactory = new Func<Player.GrenadeHandsController>(uE.\uE000);
			new Player.Process<Player.GrenadeHandsController, \uE82C>(this, controllerFactory, uE.throwWeap, false, Player.AbstractProcess.Completion.Sync, Player.AbstractProcess.Confirmation.Succeed, true).\uE000(null, callback, scheduled);
		}

		// Token: 0x06008EDE RID: 36574 RVA: 0x002E3614 File Offset: 0x002E1814
		protected virtual void Proceed(\uEE75 meds, \uECFD<EBodyPart> bodyParts, Callback<\uE82E> callback, int animationVariant, bool scheduled = true)
		{
			Player.\uE027 uE = new Player.\uE027();
			uE.<>4__this = this;
			uE.meds = meds;
			uE.bodyParts = bodyParts;
			uE.animationVariant = animationVariant;
			Func<Player.MedsController> controllerFactory = new Func<Player.MedsController>(uE.\uE000);
			new Player.Process<Player.MedsController, \uE82E>(this, controllerFactory, uE.meds, false, Player.AbstractProcess.Completion.Sync, Player.AbstractProcess.Confirmation.Succeed, true).\uE000(null, callback, scheduled);
		}

		// Token: 0x06008EDF RID: 36575 RVA: 0x002E3678 File Offset: 0x002E1878
		protected virtual void Proceed(\uEE3D foodDrink, float amount, Callback<\uE82E> callback, int animationVariant, bool scheduled = true)
		{
			Player.\uE028 uE = new Player.\uE028();
			uE.<>4__this = this;
			uE.foodDrink = foodDrink;
			uE.amount = amount;
			uE.animationVariant = animationVariant;
			uE.bodyParts = default(\uECFD<EBodyPart>);
			uE.bodyParts.Add(EBodyPart.Head);
			Func<Player.MedsController> controllerFactory = new Func<Player.MedsController>(uE.\uE000);
			new Player.Process<Player.MedsController, \uE82E>(this, controllerFactory, uE.foodDrink, false, Player.AbstractProcess.Completion.Sync, Player.AbstractProcess.Confirmation.Succeed, true).\uE000(null, callback, scheduled);
		}

		// Token: 0x06008EE0 RID: 36576 RVA: 0x002E36FC File Offset: 0x002E18FC
		protected virtual void Proceed(KnifeComponent knife, Callback<IKnifeController> callback, bool scheduled = true)
		{
			Player.\uE029 uE = new Player.\uE029();
			uE.<>4__this = this;
			uE.knife = knife;
			Func<Player.KnifeController> controllerFactory = new Func<Player.KnifeController>(uE.\uE000);
			new Player.Process<Player.KnifeController, IKnifeController>(this, controllerFactory, uE.knife.Item, true, Player.AbstractProcess.Completion.Sync, Player.AbstractProcess.Confirmation.Succeed, true).\uE000(null, callback, scheduled);
		}

		// Token: 0x06008EE1 RID: 36577 RVA: 0x002E3750 File Offset: 0x002E1950
		internal virtual void Proceed<T>(Item item, Callback<\uE82D> callback, bool scheduled = true) where T : Player.UsableItemController
		{
			Player.\uE02A<T> uE02A = new Player.\uE02A<T>();
			uE02A.<>4__this = this;
			uE02A.item = item;
			Func<T> controllerFactory = new Func<T>(uE02A.\uE000);
			new Player.Process<T, \uE82D>(this, controllerFactory, uE02A.item, true, Player.AbstractProcess.Completion.Sync, Player.AbstractProcess.Confirmation.Succeed, true).\uE000(null, callback, scheduled);
		}

		// Token: 0x06008EE2 RID: 36578 RVA: 0x002E37A0 File Offset: 0x002E19A0
		protected virtual void Proceed(Item item, Callback<\uE833> callback, bool scheduled = true)
		{
			Player.\uE02B uE02B = new Player.\uE02B();
			uE02B.<>4__this = this;
			uE02B.item = item;
			Func<Player.QuickUseItemController> controllerFactory = new Func<Player.QuickUseItemController>(uE02B.\uE000);
			new Player.Process<Player.QuickUseItemController, \uE833>(this, controllerFactory, uE02B.item, true, Player.AbstractProcess.Completion.Sync, Player.AbstractProcess.Confirmation.Succeed, false).\uE000(null, callback, scheduled);
		}

		// Token: 0x06008EE3 RID: 36579 RVA: 0x002E37F0 File Offset: 0x002E19F0
		protected virtual void Proceed(\uEEC9 throwWeap, Callback<\uE831> callback, bool scheduled = true)
		{
			Player.\uE02C uE02C = new Player.\uE02C();
			uE02C.<>4__this = this;
			uE02C.throwWeap = throwWeap;
			Func<Player.QuickGrenadeThrowHandsController> controllerFactory = new Func<Player.QuickGrenadeThrowHandsController>(uE02C.\uE000);
			new Player.Process<Player.QuickGrenadeThrowHandsController, \uE831>(this, controllerFactory, uE02C.throwWeap, true, Player.AbstractProcess.Completion.Sync, Player.AbstractProcess.Confirmation.Succeed, false).\uE000(null, callback, scheduled);
		}

		// Token: 0x06008EE4 RID: 36580 RVA: 0x002E3840 File Offset: 0x002E1A40
		protected virtual void Proceed(KnifeComponent knife, Callback<\uE832> callback, bool scheduled = true)
		{
			Player.\uE02D uE02D = new Player.\uE02D();
			uE02D.<>4__this = this;
			uE02D.knife = knife;
			Func<Player.QuickKnifeKickController> controllerFactory = new Func<Player.QuickKnifeKickController>(uE02D.\uE000);
			new Player.Process<Player.QuickKnifeKickController, \uE832>(this, controllerFactory, uE02D.knife.Item, true, Player.AbstractProcess.Completion.Sync, Player.AbstractProcess.Confirmation.Succeed, false).\uE000(null, callback, scheduled);
		}

		// Token: 0x06008EE5 RID: 36581 RVA: 0x002E3894 File Offset: 0x002E1A94
		protected void TryProceed(Item item, Callback<\uE827> completeCallback, bool scheduled = true)
		{
			Player.\uE02E uE02E = new Player.\uE02E();
			uE02E.completeCallback = completeCallback;
			uE02E.<>4__this = this;
			this.StopBlindFire();
			Player.ItemHandsController itemHandsController = this._handsController as Player.ItemHandsController;
			if (itemHandsController != null && item is \uEE28)
			{
				itemHandsController.ToggleCompassState();
				return;
			}
			this.\uE079();
			if (item == null)
			{
				uE02E.\uE000();
				return;
			}
			if (!this.InventoryController.IsAtReachablePlace(item))
			{
				this.SetFirstAvailableItem(uE02E.completeCallback);
				return;
			}
			Player.MedsController medsController = this.HandsController as Player.MedsController;
			if (medsController != null)
			{
				medsController.SetOnUsedCallback(new Callback<\uE833>(Player.<>c.<>9.\uE019));
			}
			Player.\uE02F uE02F = new Player.\uE02F();
			uE02F.CS$<>8__locals2 = uE02E;
			uE02F.<weapon>5__2 = (item as Weapon);
			if (uE02F.<weapon>5__2 != null)
			{
				this.Proceed(uE02F.<weapon>5__2, new Callback<IFirearmHandsController>(uE02F.\uE000), scheduled);
				return;
			}
			\uEEC9 uEEC = item as \uEEC9;
			if (uEEC != null)
			{
				this.Proceed(uEEC, new Callback<\uE82C>(uE02F.CS$<>8__locals2.\uE001), scheduled);
				return;
			}
			\uEE75 uEE = item as \uEE75;
			if (uEE != null)
			{
				this.Proceed(uEE, this.\uE07F(item), new Callback<\uE82E>(uE02F.CS$<>8__locals2.\uE002), item.GetRandomAnimationVariant(), scheduled);
				return;
			}
			\uEE3D uEE3D = item as \uEE3D;
			if (uEE3D != null)
			{
				this.Proceed(uEE3D, 1f, new Callback<\uE82E>(uE02F.CS$<>8__locals2.\uE003), item.GetRandomAnimationVariant(), scheduled);
				return;
			}
			KnifeComponent itemComponent = item.GetItemComponent<KnifeComponent>();
			if (itemComponent != null)
			{
				this.Proceed(itemComponent, new Callback<IKnifeController>(uE02F.CS$<>8__locals2.\uE004), scheduled);
				return;
			}
			if (item is \uEE91)
			{
				this.\uE080(item as \uEE91, uE02F.CS$<>8__locals2.completeCallback, scheduled);
				return;
			}
			if (item is \uEE96)
			{
				this.\uE081(item as \uEE96, uE02F.CS$<>8__locals2.completeCallback, scheduled);
				return;
			}
			if (item.UsePrefab != null)
			{
				this.Proceed(item, new Callback<\uE833>(uE02F.CS$<>8__locals2.\uE005), scheduled);
				return;
			}
			uE02F.CS$<>8__locals2.\uE000();
		}

		// Token: 0x06008EE6 RID: 36582 RVA: 0x002E3ACC File Offset: 0x002E1CCC
		private \uECFD<EBodyPart> \uE07F(Item item)
		{
			if (Singleton<\uE9A4>.Instance.Game.Settings.ContinuousHealMode == \uE9B5.EContinuousHealMode.Disabled)
			{
				return new \uECFD<EBodyPart>(EBodyPart.Common);
			}
			return this.HealthController.BodyPartsPriority(item);
		}

		// Token: 0x06008EE7 RID: 36583 RVA: 0x002E3AFC File Offset: 0x002E1CFC
		private void \uE080(\uEE91 item, Callback<\uE827> completeCallback, bool scheduled = true)
		{
			Player.\uE030 uE = new Player.\uE030();
			uE.completeCallback = completeCallback;
			if (this is ClientPlayer)
			{
				this.Proceed<ClientPortableRangeFinderController>(item, new Callback<\uE82D>(uE.\uE000), scheduled);
				return;
			}
			this.Proceed<PortableRangeFinderController>(item, new Callback<\uE82D>(uE.\uE001), scheduled);
		}

		// Token: 0x06008EE8 RID: 36584 RVA: 0x002E3B50 File Offset: 0x002E1D50
		private void \uE081(\uEE96 item, Callback<\uE827> completeCallback, bool scheduled = true)
		{
			Player.\uE031 uE = new Player.\uE031();
			uE.completeCallback = completeCallback;
			if (this is ClientPlayer)
			{
				this.Proceed<ClientRadioTransmitterController>(item, new Callback<\uE82D>(uE.\uE000), scheduled);
				return;
			}
			this.Proceed<RadioTransmitterController>(item, new Callback<\uE82D>(uE.\uE001), scheduled);
		}

		// Token: 0x06008EE9 RID: 36585 RVA: 0x002E3BA4 File Offset: 0x002E1DA4
		private static void \uE082<\uE084>(Result<\uE084> result, Callback<\uE827> callback) where \uE084 : \uE827
		{
			if (callback != null)
			{
				callback(new Result<\uE827>(result.Value, result.Error));
			}
		}

		// Token: 0x06008EEA RID: 36586 RVA: 0x002E3BC8 File Offset: 0x002E1DC8
		private void \uE083(Item item)
		{
			if (item == null)
			{
				return;
			}
			EquipmentSlot[] array = new EquipmentSlot[]
			{
				EquipmentSlot.FirstPrimaryWeapon,
				EquipmentSlot.SecondPrimaryWeapon,
				EquipmentSlot.Holster,
				EquipmentSlot.Scabbard
			};
			InventoryEquipment equipment = this.InventoryController.Inventory.Equipment;
			foreach (EquipmentSlot slotName in array)
			{
				if (item == equipment.GetSlot(slotName).ContainedItem)
				{
					this.ActiveSlot = equipment.GetSlot(slotName);
					return;
				}
			}
		}

		// Token: 0x06008EEB RID: 36587 RVA: 0x002E3C3C File Offset: 0x002E1E3C
		protected bool CanPerformAnimatedOperation(Item item, \uEF67 operation)
		{
			if (!this.HealthController.IsAlive)
			{
				return true;
			}
			if (this.HandsController.CanExecute(operation))
			{
				return true;
			}
			if (this.HandsController.Item != item)
			{
				return true;
			}
			if (this.HandsController is Player.BaseGrenadeHandsController)
			{
				if (!this.HandsController.CanRemove())
				{
					return false;
				}
			}
			return true;
		}

		// Token: 0x06008EEC RID: 36588 RVA: 0x002E3CA8 File Offset: 0x002E1EA8
		protected void TryRemoveFromHands(Item item, \uEF5F abstractOperation, Callback callback)
		{
			Player.\uE032 uE = new Player.\uE032();
			uE.<>4__this = this;
			uE.callback = callback;
			if (this.HandsController == null)
			{
				Debug.LogFormat(\uF1F8.\uE000(140536), new object[]
				{
					item
				});
				uE.callback.Succeed();
				return;
			}
			if (!this.HealthController.IsAlive)
			{
				uE.callback.Succeed();
				return;
			}
			if (this.HandsController.Item == item)
			{
				if (this.HandsController is Player.BaseGrenadeHandsController)
				{
					if (!this.HandsController.CanRemove())
					{
						uE.callback.Fail(\uF1F8.\uE000(140451));
						return;
					}
				}
				this.SetControllerInsteadRemovedOne(item, uE.callback);
				return;
			}
			if (this.HandsController.CanExecute(abstractOperation))
			{
				this._removeFromHandsCallback = uE.callback;
				this.InventoryController.RaiseInOutProcessEvents(new \uEEE8(this.HandsController.Item, CommandStatus.Begin, this.InventoryController));
				this.HandsController.Execute(abstractOperation, new Callback(uE.\uE000));
				return;
			}
			uE.callback.Fail(\uF1F8.\uE000(140427));
		}

		// Token: 0x06008EED RID: 36589 RVA: 0x002E3DF0 File Offset: 0x002E1FF0
		protected virtual void SetControllerInsteadRemovedOne(Item removingItem, Callback callback)
		{
			Player.\uE033 uE = new Player.\uE033();
			uE.<>4__this = this;
			uE.callback = callback;
			this._removeFromHandsCallback = uE.callback;
			Item containedItem = this.InventoryController.Inventory.Equipment.GetSlot(EquipmentSlot.Scabbard).ContainedItem;
			KnifeComponent knifeComponent = (containedItem != null) ? containedItem.GetItemComponent<KnifeComponent>() : null;
			bool flag = containedItem is \uEE91;
			bool flag2 = containedItem is \uEE96;
			if (knifeComponent != null && removingItem != knifeComponent.Item)
			{
				this.Proceed(knifeComponent, new Callback<IKnifeController>(uE.\uE000), false);
				return;
			}
			if (flag)
			{
				if (removingItem != containedItem)
				{
					this.Proceed<PortableRangeFinderController>(containedItem, new Callback<\uE82D>(uE.\uE001), false);
					return;
				}
			}
			if (flag2)
			{
				if (removingItem != containedItem)
				{
					this.Proceed<RadioTransmitterController>(containedItem, new Callback<\uE82D>(uE.\uE002), false);
					return;
				}
			}
			this.Proceed(false, new Callback<\uE829>(uE.\uE003), false);
		}

		// Token: 0x06008EEE RID: 36590 RVA: 0x002E3EF0 File Offset: 0x002E20F0
		protected void TrySetInHands(Item item, ItemAddress to, \uEF5F operation, Callback originalCallback)
		{
			Player.\uE034 uE = new Player.\uE034();
			uE.<>4__this = this;
			uE.callback = originalCallback;
			if (!this.HealthController.IsAlive || (this.IsInBufferZone && !this.CanManipulateWithHandsInBufferZone))
			{
				uE.callback.Succeed();
				return;
			}
			if (!(operation is \uEF8C) && this.ActiveSlot == to.Container)
			{
				this._setInHandsCallback = uE.callback;
				this.TryProceed(item, new Callback<\uE827>(uE.\uE000), false);
				return;
			}
			if ((item.Parent != to || operation is \uEF8C) && this.HandsController.CanExecute(operation))
			{
				this._setInHandsCallback = uE.callback;
				this.InventoryController.RaiseInOutProcessEvents(new \uEEE8(this.HandsController.Item, CommandStatus.Begin, this.InventoryController));
				this.HandsController.Execute(operation, new Callback(uE.\uE001));
				return;
			}
			if (operation is \uEF8C)
			{
				if (!this.HandsController.CanExecute(operation))
				{
					uE.callback.Fail(\uF1F8.\uE000(140117));
					return;
				}
			}
			uE.callback.Succeed();
		}

		// Token: 0x06008EEF RID: 36591 RVA: 0x002E4038 File Offset: 0x002E2238
		public IEnumerator FakeCallbackCoroutine()
		{
			for (;;)
			{
				int num2;
				int num = num2;
				if (num != 0)
				{
					if (num != 1)
					{
						break;
					}
				}
				if (!this.HealthController.IsAlive)
				{
					goto Block_2;
				}
				yield return null;
			}
			yield break;
			Block_2:
			if (this._removeFromHandsCallback != null)
			{
				this._removeFromHandsCallback.Succeed();
				this._removeFromHandsCallback = null;
			}
			if (this._setInHandsCallback != null)
			{
				this._setInHandsCallback.Succeed();
				this._setInHandsCallback = null;
			}
			yield break;
		}

		// Token: 0x06008EF0 RID: 36592 RVA: 0x002E4048 File Offset: 0x002E2248
		public virtual void FaceshieldMarkOperation(FaceShieldComponent armor, bool hasServerOrigin)
		{
			if (Time.time > this._lastFaceshieldOperationTime + Time.fixedDeltaTime)
			{
				this._lastFaceshieldOperationTime = Time.time;
				this._faceshieldNumOperations = 0;
			}
			if (this._faceshieldNumOperations <= 3)
			{
				this.InventoryController.ExecuteFaceshieldMarkOperation(armor);
				this._faceshieldNumOperations++;
			}
		}

		// Token: 0x06008EF1 RID: 36593 RVA: 0x002E40AC File Offset: 0x002E22AC
		private Player.\uE013 \uE084(Item item)
		{
			if (item != null)
			{
				Player.\uE013 uE = new Player.\uE013(this, item);
				uE.Execute();
				return uE;
			}
			Debug.LogWarning(\uF1F8.\uE000(140109));
			return null;
		}

		// Token: 0x06008EF2 RID: 36594 RVA: 0x002E40D8 File Offset: 0x002E22D8
		private Player.\uE014 \uE085(Item item)
		{
			if (item != null)
			{
				Player.\uE014 uE = new Player.\uE014(this, item);
				uE.Execute();
				return uE;
			}
			Debug.LogWarning(\uF1F8.\uE000(140043));
			return null;
		}

		// Token: 0x06008EF3 RID: 36595 RVA: 0x002E4104 File Offset: 0x002E2304
		private \uF190<Player.\uE011> \uE086(\uEEC9 grenade, bool lowThrow, bool simulate)
		{
			if (!grenade.IsChildOf(this.InventoryController.Inventory.Equipment))
			{
				return new \uF189(\uF1F8.\uE000(140234) + grenade.Id);
			}
			\uF190<\uEF16> uF = \uEF02.Discard(this.HandsController.Item, this.InventoryController, simulate);
			if (uF.Failed)
			{
				return uF.Error;
			}
			if (!simulate)
			{
				this.Physical.OnThrow(lowThrow);
			}
			return new Player.\uE011(uF.Value, grenade);
		}

		// Token: 0x06008EF6 RID: 36598 RVA: 0x002E4504 File Offset: 0x002E2704
		[CompilerGenerated]
		private IEnumerator \uE087()
		{
			for (;;)
			{
				 obj;
				switch (obj)
				{
				case 0:
					yield return new WaitForSeconds(0.8f);
					continue;
				case 1:
				{
					this.PlayTacticalSound();
					foreach (TacticalComboVisualController tacticalComboVisualController in this._helmetLightControllers)
					{
						tacticalComboVisualController.UpdateBeams(false);
					}
					IAIData aidata = this.AIData;
					if (aidata != null)
					{
						aidata.TacticalModeChange(Enumerable.Any<TacticalComboVisualController>(this._helmetLightControllers, new Func<TacticalComboVisualController, bool>(Player.<>c.<>9.\uE002)));
					}
					yield return new WaitForSeconds(0.6f);
					continue;
				}
				case 2:
					goto IL_E5;
				}
				break;
			}
			yield break;
			IL_E5:
			this.IsHeadLightsAnimationActive = false;
			yield break;
		}

		// Token: 0x06008EF7 RID: 36599 RVA: 0x002E4514 File Offset: 0x002E2714
		[CompilerGenerated]
		private void \uE088(int i)
		{
			this.ProceduralWeaponAnimation.Pose = i;
		}

		// Token: 0x06008EF8 RID: 36600 RVA: 0x002E4524 File Offset: 0x002E2724
		[CompilerGenerated]
		private void \uE089(bool enable)
		{
			if (this._voipAudioSource != null)
			{
				this._voipAudioSource.mute = !enable;
			}
		}

		// Token: 0x06008EF9 RID: 36601 RVA: 0x002E4544 File Offset: 0x002E2744
		[CompilerGenerated]
		private void \uE08A()
		{
			this._interactionSource.Stop(0f);
			this._interactionSource.Release();
			this._interactionSource = null;
		}

		// Token: 0x06008EFA RID: 36602 RVA: 0x002E4570 File Offset: 0x002E2770
		[CompilerGenerated]
		private void \uE08B()
		{
			this.NestedStepSoundSource.Release();
			this.NestedStepSoundSource = null;
		}

		// Token: 0x06008EFB RID: 36603 RVA: 0x002E4584 File Offset: 0x002E2784
		[CompilerGenerated]
		private bool \uE08C()
		{
			return this.MovementContext.AutoVaultingSettingEnabled;
		}

		// Token: 0x06008EFC RID: 36604 RVA: 0x002E4594 File Offset: 0x002E2794
		[CompilerGenerated]
		private bool \uE08D()
		{
			return this.Physical.CanVault;
		}

		// Token: 0x06008EFD RID: 36605 RVA: 0x002E45A4 File Offset: 0x002E27A4
		[CompilerGenerated]
		private bool \uE08E()
		{
			return this.Physical.CanClimb;
		}

		// Token: 0x06008EFE RID: 36606 RVA: 0x002E45B4 File Offset: 0x002E27B4
		[CompilerGenerated]
		private void \uE08F()
		{
			this.Skills.LowHPDuration.Complete(1f);
		}

		// Token: 0x06008EFF RID: 36607 RVA: 0x002E45CC File Offset: 0x002E27CC
		[CompilerGenerated]
		private void \uE090()
		{
			this.Skills.StimulatorNegativeBuff.Begin();
		}

		// Token: 0x06008F00 RID: 36608 RVA: 0x002E45E0 File Offset: 0x002E27E0
		[CompilerGenerated]
		private void \uE091()
		{
			this.Skills.StimulatorNegativeBuff.Complete(1f);
		}

		// Token: 0x06008F01 RID: 36609 RVA: 0x002E45F8 File Offset: 0x002E27F8
		[CompilerGenerated]
		private void \uE092()
		{
			this.Skills.LowHPDuration.Complete(1f);
		}

		// Token: 0x06008F02 RID: 36610 RVA: 0x002E4610 File Offset: 0x002E2810
		[CompilerGenerated]
		private void \uE093()
		{
			this.Skills.OnlineAction.Complete((float)this.StatisticsManager.CurrentSessionLength.TotalHours);
		}

		// Token: 0x06008F03 RID: 36611 RVA: 0x002E4644 File Offset: 0x002E2844
		[CompilerGenerated]
		private void \uE094(\uEFD3 invokedEvent)
		{
			this.\uE06D(invokedEvent);
		}

		// Token: 0x06008F04 RID: 36612 RVA: 0x002E4650 File Offset: 0x002E2850
		[CompilerGenerated]
		private void \uE095()
		{
			this.Skills.Dehydration.Complete(1f);
		}

		// Token: 0x06008F05 RID: 36613 RVA: 0x002E4668 File Offset: 0x002E2868
		[CompilerGenerated]
		private void \uE096()
		{
			this.Skills.Exhaustion.Complete(1f);
		}

		// Token: 0x06008F06 RID: 36614 RVA: 0x002E4680 File Offset: 0x002E2880
		[CompilerGenerated]
		private void \uE097()
		{
			this.Skills.MagazineCheckAction.Complete(1f);
		}

		// Token: 0x06008F07 RID: 36615 RVA: 0x002E4698 File Offset: 0x002E2898
		[CompilerGenerated]
		private void \uE098()
		{
			this.Skills.UniqueLoot.Complete(1f);
		}

		// Token: 0x06008F08 RID: 36616 RVA: 0x002E46B0 File Offset: 0x002E28B0
		[CompilerGenerated]
		private void \uE099()
		{
			this.Skills.ProneAction.Complete(this.Pedometer.GetDistanceFromMark(EPlayerState.ProneMove));
		}

		// Token: 0x06008F09 RID: 36617 RVA: 0x002E46D0 File Offset: 0x002E28D0
		[CompilerGenerated]
		private void \uE09A()
		{
			if (this._lastBtrCastResult)
			{
				this.BtrInteractionSide = null;
				Action possibleInteractionsChanged = this.PossibleInteractionsChanged;
				if (possibleInteractionsChanged != null)
				{
					possibleInteractionsChanged();
				}
			}
			this._lastBtrCastResult = false;
		}

		// Token: 0x06008F0A RID: 36618 RVA: 0x002E4700 File Offset: 0x002E2900
		[CompilerGenerated]
		private void \uE09B()
		{
			if (this._lastTripwireCastResult)
			{
				this.TripwireInteractionTrigger = null;
				Action possibleInteractionsChanged = this.PossibleInteractionsChanged;
				if (possibleInteractionsChanged != null)
				{
					possibleInteractionsChanged();
				}
			}
			this._lastTripwireCastResult = false;
		}

		// Token: 0x06008F0B RID: 36619 RVA: 0x002E4730 File Offset: 0x002E2930
		[CompilerGenerated]
		private void \uE09C()
		{
			if (this._lastEventObjectCastResult)
			{
				this.EventObjectInteractive = null;
				Action possibleInteractionsChanged = this.PossibleInteractionsChanged;
				if (possibleInteractionsChanged != null)
				{
					possibleInteractionsChanged();
				}
			}
			this._lastEventObjectCastResult = false;
		}

		// Token: 0x06008F0C RID: 36620 RVA: 0x002E4760 File Offset: 0x002E2960
		[CompilerGenerated]
		private void \uE09D(Result<\uE829> result)
		{
			this.\uE07B(false);
		}

		// Token: 0x06008F0D RID: 36621 RVA: 0x002E476C File Offset: 0x002E296C
		[CompilerGenerated]
		private Player.EmptyHandsController \uE09E()
		{
			return Player.EmptyHandsController.\uE000<Player.EmptyHandsController>(this);
		}

		// Token: 0x04008355 RID: 33621
		public ICharacterController _characterController;

		// Token: 0x04008356 RID: 33622
		protected TriggerColliderSearcher _triggerColliderSearcher;

		// Token: 0x04008357 RID: 33623
		private bool _doorKick;

		// Token: 0x04008358 RID: 33624
		private WorldInteractiveObject _currentInteractor;

		// Token: 0x0400835A RID: 33626
		private float _horizontal;

		// Token: 0x0400835B RID: 33627
		private float _vertical;

		// Token: 0x0400835C RID: 33628
		private bool _resetLook;

		// Token: 0x0400835D RID: 33629
		private bool _mouseLookControl;

		// Token: 0x0400835E RID: 33630
		private bool _isResettingLook;

		// Token: 0x0400835F RID: 33631
		private bool _setResetedLookNextFrame;

		// Token: 0x04008360 RID: 33632
		private bool _isLooking;

		// Token: 0x04008361 RID: 33633
		public \uE836 Pedometer;

		// Token: 0x04008362 RID: 33634
		public Vector3 HeadRotation;

		// Token: 0x04008363 RID: 33635
		protected float _mouseSensitivityModifier;

		// Token: 0x04008364 RID: 33636
		protected readonly Dictionary<Player.EMouseSensitivityModifier, float> _mouseSensitivityModifiers = \uE3F6<Player.EMouseSensitivityModifier>.GetDictWith<float>();

		// Token: 0x04008365 RID: 33637
		private Vector2 _rotationPitchLimit = Player.\uE003.STAND_POSE_ROTATION_PITCH_RANGE;

		// Token: 0x04008366 RID: 33638
		private Vector2 _targetRotationPitch = Player.\uE003.STAND_POSE_ROTATION_PITCH_RANGE;

		// Token: 0x04008368 RID: 33640
		public float TrunkRotationLimit;

		// Token: 0x04008369 RID: 33641
		public float PoseMemo = 1f;

		// Token: 0x0400836A RID: 33642
		private float _speedMemo = 0.5f;

		// Token: 0x0400836B RID: 33643
		private bool _lastSlowLean;

		// Token: 0x0400836C RID: 33644
		public Player.LeanType CurrentLeanType;

		// Token: 0x0400836D RID: 33645
		private float _lastMovement;

		// Token: 0x0400836E RID: 33646
		private bool _cachedMouseLookControl;

		// Token: 0x0400836F RID: 33647
		private bool _isVaultingPressed;

		// Token: 0x04008370 RID: 33648
		private float _vaultingTiming;

		// Token: 0x04008371 RID: 33649
		protected float _prevHeight;

		// Token: 0x04008372 RID: 33650
		public float HeightSmoothTime = 0.066f;

		// Token: 0x04008373 RID: 33651
		private float _dampVelocity;

		// Token: 0x04008374 RID: 33652
		private float _currentSmoothSpeed;

		// Token: 0x04008375 RID: 33653
		private float _previousY;

		// Token: 0x04008376 RID: 33654
		private const float ClampDeltaHeight = 0.2f;

		// Token: 0x04008377 RID: 33655
		public const int GRIP_CULL_DISTANCE = 40;

		// Token: 0x04008378 RID: 33656
		public const int IK_CULL_DISTANCE = 70;

		// Token: 0x04008379 RID: 33657
		public const int MAX_IK_CULL_DISTANCE = 300;

		// Token: 0x0400837A RID: 33658
		private const string COMPASS_RESOURCE_PATH = "assets/content/weapons/additional_hands/item_compass.bundle";

		// Token: 0x0400837B RID: 33659
		private const string PLANT_TRIPWIRE_TEMPLATE_PATH = "Prefabs/tripwire_planner";

		// Token: 0x0400837D RID: 33661
		public GripPose LeftHandInteractionTarget;

		// Token: 0x0400837E RID: 33662
		public GrounderFBBIK Grounder;

		// Token: 0x0400837F RID: 33663
		public HitReaction HitReaction;

		// Token: 0x04008380 RID: 33664
		public float RibcageScaleCurrent = 1f;

		// Token: 0x04008381 RID: 33665
		public float RibcageScaleCurrentTarget = 1f;

		// Token: 0x04008382 RID: 33666
		public Transform[] _elbowBends;

		// Token: 0x04008383 RID: 33667
		public HandPoser[] HandPosers;

		// Token: 0x04008384 RID: 33668
		public Vector2 UtilityLayerRange = new Vector2(0.5f, 0.2f);

		// Token: 0x04008385 RID: 33669
		public float UtilityLayerLerpSpeed = 3f;

		// Token: 0x04008386 RID: 33670
		public Player.ValueBlender LMarkerRawBlender = new Player.ValueBlender(0)
		{
			Speed = 4f,
			Target = 0f
		};

		// Token: 0x04008387 RID: 33671
		public Player.ValueBlender LayerWeight = new Player.ValueBlender(0)
		{
			Speed = 4f
		};

		// Token: 0x04008388 RID: 33672
		public readonly Player.BetterValueBlender ThirdIkWeight = new Player.BetterValueBlender
		{
			Speed = 3f
		};

		// Token: 0x04008389 RID: 33673
		public bool GripAutoAdjust;

		// Token: 0x0400838A RID: 33674
		public bool CustomAnimationsAreProcessing;

		// Token: 0x0400838B RID: 33675
		protected FullBodyBipedIK _fbbik;

		// Token: 0x0400838C RID: 33676
		protected PlayerBody _playerBody;

		// Token: 0x0400838D RID: 33677
		protected float ThirdPersonWeaponRootAuthority;

		// Token: 0x0400838E RID: 33678
		public const float HAND_ANIMATION_BLEND_THRESHOLD = 0.1f;

		// Token: 0x0400838F RID: 33679
		private float _ribcageScaleCompensated = 1f;

		// Token: 0x04008390 RID: 33680
		private float _shoulderVel;

		// Token: 0x04008391 RID: 33681
		private float _fbbikCooldown = 0.6f;

		// Token: 0x04008392 RID: 33682
		private float _turnOffFbbikAt;

		// Token: 0x04008393 RID: 33683
		private float _firstPersonRightHand;

		// Token: 0x04008394 RID: 33684
		private float _firstPersonLeftHand;

		// Token: 0x04008395 RID: 33685
		private float _utilityLayerWeight;

		// Token: 0x04008396 RID: 33686
		private float _smoothLW;

		// Token: 0x04008397 RID: 33687
		private float _rawWeight;

		// Token: 0x04008398 RID: 33688
		private float _rawDampVelocity;

		// Token: 0x04008399 RID: 33689
		private float _interactionLayerWeight;

		// Token: 0x0400839A RID: 33690
		private bool _stored;

		// Token: 0x0400839B RID: 33691
		private bool _pointOfViewUndecided = true;

		// Token: 0x0400839C RID: 33692
		private bool _hasAnimatorPropBones;

		// Token: 0x0400839D RID: 33693
		private bool _hasProp;

		// Token: 0x0400839E RID: 33694
		private bool _propActive;

		// Token: 0x0400839F RID: 33695
		private bool _compassInstantiated;

		// Token: 0x040083A0 RID: 33696
		private bool _radioTransmitterInstantiated;

		// Token: 0x040083A1 RID: 33697
		private Vector3[] _ribcageChildPositions;

		// Token: 0x040083A2 RID: 33698
		private Vector3 _ikPosition;

		// Token: 0x040083A3 RID: 33699
		private Vector3 _lMarkerRawPosition;

		// Token: 0x040083A4 RID: 33700
		private Vector3 _lElbowRawPosition;

		// Token: 0x040083A5 RID: 33701
		private Vector3 _rElbowRawPosition;

		// Token: 0x040083A6 RID: 33702
		private Vector3 _propRawPosition;

		// Token: 0x040083A7 RID: 33703
		private Quaternion _lMarkerRawRotation;

		// Token: 0x040083A8 RID: 33704
		private Quaternion _propRawRotation;

		// Token: 0x040083A9 RID: 33705
		private Quaternion _ikRotation;

		// Token: 0x040083AA RID: 33706
		private Quaternion[] _ribcageChildRotations;

		// Token: 0x040083AB RID: 33707
		private readonly Transform[] _markers = new Transform[2];

		// Token: 0x040083AC RID: 33708
		private readonly Transform[] _gripReferences = new Transform[2];

		// Token: 0x040083AD RID: 33709
		private Transform[] _ikTargets = new Transform[2];

		// Token: 0x040083AE RID: 33710
		private Transform _vestMarker;

		// Token: 0x040083AF RID: 33711
		private Transform _shoulderEffector;

		// Token: 0x040083B0 RID: 33712
		private Transform _propBone;

		// Token: 0x040083B1 RID: 33713
		private TwistRelax[] _twistBones;

		// Token: 0x040083B2 RID: 33714
		private LimbIK[] _limbs;

		// Token: 0x040083B3 RID: 33715
		private GameObject _beaconDummy;

		// Token: 0x040083B4 RID: 33716
		private Action _createBeaconAction;

		// Token: 0x040083B5 RID: 33717
		private PreviewMaterialSetter _beaconMaterialSetter;

		// Token: 0x040083B6 RID: 33718
		private BeaconPlacer _beaconPlacer;

		// Token: 0x040083B7 RID: 33719
		private FirearmsEffects _thirdWeaponEffects;

		// Token: 0x040083B8 RID: 33720
		private FirearmsEffects _firstWeaponEffects;

		// Token: 0x040083B9 RID: 33721
		private CompassArrow _compassArrow;

		// Token: 0x040083BA RID: 33722
		private RadioTransmitterView _radioTransmitterView;

		// Token: 0x040083BB RID: 33723
		private Transform[] _animatorPropTransforms = new Transform[3];

		// Token: 0x040083BC RID: 33724
		private Transform[] _propTransforms = new Transform[3];

		// Token: 0x040083BD RID: 33725
		private readonly List<\uE42F> _preAllocatedRenderersList = new List<\uE42F>(10);

		// Token: 0x040083C2 RID: 33730
		public readonly Player.ValueBlender AuthorityBlender = new Player.ValueBlender(0)
		{
			Speed = 4f,
			Target = 0f
		};

		// Token: 0x040083C3 RID: 33731
		public readonly Player.ValueBlender GrounderBlender = new Player.ValueBlender(0)
		{
			Speed = 4f,
			Target = 0f
		};

		// Token: 0x040083C4 RID: 33732
		private float _ergonomicsPenalty;

		// Token: 0x040083C5 RID: 33733
		private float _shotTime;

		// Token: 0x040083C6 RID: 33734
		protected bool _isDeadAlready;

		// Token: 0x040083C7 RID: 33735
		private bool _isGrenadeOrKnife;

		// Token: 0x040083C8 RID: 33736
		private ObjectInHandsAnimator _handsAnimator;

		// Token: 0x040083C9 RID: 33737
		private GameObject _spawnedKey;

		// Token: 0x040083CA RID: 33738
		private Action _cacheBonesDelegate;

		// Token: 0x040083D6 RID: 33750
		protected bool IsHeadLightsAnimationActive;

		// Token: 0x040083D7 RID: 33751
		private bool _isInteractionPlayeingLastFrame;

		// Token: 0x040083D8 RID: 33752
		private Quaternion _currentHandsRotation;

		// Token: 0x040083D9 RID: 33753
		private Player.\uE005 _garbage;

		// Token: 0x040083DA RID: 33754
		public BaseBallistic.ESurfaceSound CurrentSurface;

		// Token: 0x040083DB RID: 33755
		private LayerMask _stepLayerMask;

		// Token: 0x040083DC RID: 33756
		private const float TIME_BETWEEN_PRONE_SWEEPS = 0.5f;

		// Token: 0x040083DD RID: 33757
		public const float DEFAULT_ROLL_OFF = 60f;

		// Token: 0x040083DE RID: 33758
		private const float MIN_ALLOWED_MOVEMENT_SPEED = 0f;

		// Token: 0x040083DF RID: 33759
		private const float MAX_STEP_SOUND_SPEED_FACTOR = 1f;

		// Token: 0x040083E0 RID: 33760
		private const float SURFACE_CHECK_RAYCAST_OFFSET = 0.5f;

		// Token: 0x040083E1 RID: 33761
		private const int USUAL_AUDIO_SOURCE_PRIORITY = 64;

		// Token: 0x040083E2 RID: 33762
		private const int LOW_AUDIO_SOURCE_PRIORITY = 200;

		// Token: 0x040083E3 RID: 33763
		private const float LANDING_VOLUME_MULT = 2.5f;

		// Token: 0x040083E4 RID: 33764
		private const float FP_GEAR_VOLUME = 0.85f;

		// Token: 0x040083E5 RID: 33765
		private const float LOCAL_AI_GEAR_VOLUME = 1f;

		// Token: 0x040083E6 RID: 33766
		private float CHECK_RANGE_BUFF = 1f;

		// Token: 0x040083E7 RID: 33767
		private const float FIRST_PERSON_REVERB_FACTOR = 3f;

		// Token: 0x040083E9 RID: 33769
		public bool HeavyBreath;

		// Token: 0x040083EA RID: 33770
		public bool Muffled;

		// Token: 0x040083EB RID: 33771
		protected BetterSource NestedStepSoundSource;

		// Token: 0x040083EC RID: 33772
		protected BetterSource _speechSource;

		// Token: 0x040083ED RID: 33773
		protected bool OcclusionDirty;

		// Token: 0x040083EE RID: 33774
		protected bool DistanceDirty;

		// Token: 0x040083EF RID: 33775
		protected AudioClip FractureSound;

		// Token: 0x040083F0 RID: 33776
		public BaseSoundPlayer.SoundElement PropIn;

		// Token: 0x040083F1 RID: 33777
		public BaseSoundPlayer.SoundElement PropOut;

		// Token: 0x040083F2 RID: 33778
		protected bool PreviousFaceShield;

		// Token: 0x040083F3 RID: 33779
		protected bool PreviousNightVision;

		// Token: 0x040083F4 RID: 33780
		protected bool PreviousThermalVision;

		// Token: 0x040083F5 RID: 33781
		protected readonly Vector3 SpeechLocalPosition = new Vector3(0f, 1.2f, 0f);

		// Token: 0x040083F6 RID: 33782
		private readonly Vector3 _speechLocalPosition = new Vector3(0f, 0f, 0.3f);

		// Token: 0x040083F7 RID: 33783
		protected AudioClip FaceshieldOn;

		// Token: 0x040083F8 RID: 33784
		protected AudioClip FaceshieldOff;

		// Token: 0x040083F9 RID: 33785
		protected AudioClip NightVisionOn;

		// Token: 0x040083FA RID: 33786
		protected AudioClip SwitchHeadlights;

		// Token: 0x040083FB RID: 33787
		protected AudioClip NightVisionOff;

		// Token: 0x040083FC RID: 33788
		protected AudioClip ThermalVisionOn;

		// Token: 0x040083FD RID: 33789
		protected AudioClip ThermalVisionOff;

		// Token: 0x040083FE RID: 33790
		private AudioClip _tinnitus;

		// Token: 0x040083FF RID: 33791
		private Dictionary<BaseBallistic.ESurfaceSound, SurfaceSet> _soundBySurface;

		// Token: 0x04008400 RID: 33792
		private SurfaceSet _currentSet;

		// Token: 0x04008401 RID: 33793
		private SoundBank _gearSoundBank;

		// Token: 0x04008402 RID: 33794
		private SoundBank _gearMediumSoundBank;

		// Token: 0x04008403 RID: 33795
		private SoundBank _gearFastSoundBank;

		// Token: 0x04008404 RID: 33796
		private SoundBank _backpackDropBank;

		// Token: 0x04008405 RID: 33797
		private Sounds _playerSounds;

		// Token: 0x04008406 RID: 33798
		private FirstPersonPlayerHearingSettings _hearingSettings;

		// Token: 0x04008407 RID: 33799
		private Coroutine _idleCoroutine;

		// Token: 0x04008408 RID: 33800
		private Coroutine _runCoroutine;

		// Token: 0x04008409 RID: 33801
		private Coroutine _sprintCoroutine;

		// Token: 0x0400840A RID: 33802
		private Coroutine _gearDelay;

		// Token: 0x0400840B RID: 33803
		private Coroutine _outOfRangeSpeakingCoroutine;

		// Token: 0x0400840C RID: 33804
		private Coroutine _currentSourceCoroutine;

		// Token: 0x0400840D RID: 33805
		private bool _playedAtLeastOneStep;

		// Token: 0x0400840E RID: 33806
		private float _nextJumpAfter;

		// Token: 0x0400840F RID: 33807
		private BetterSource _searchSource;

		// Token: 0x04008410 RID: 33808
		private float _searchCount;

		// Token: 0x04008411 RID: 33809
		private AudioClip _lastClip;

		// Token: 0x04008412 RID: 33810
		private const int SEARCH_SOUND_ROLLOFF = 14;

		// Token: 0x04008413 RID: 33811
		private readonly List<BetterPropagationVolume> _soundPropagationVolumes = new List<BetterPropagationVolume>();

		// Token: 0x04008414 RID: 33812
		private readonly List<BetterPropagationVolume> _volumesBuffer = new List<BetterPropagationVolume>();

		// Token: 0x04008415 RID: 33813
		private BetterPropagationVolume _mutuallyExclusive;

		// Token: 0x04008416 RID: 33814
		private bool _exhaustionIsAudible;

		// Token: 0x04008417 RID: 33815
		private Action _exhaustionAudibilityUnsub;

		// Token: 0x04008418 RID: 33816
		private float _sprintSurfaceCheck = 60f;

		// Token: 0x04008419 RID: 33817
		private float _runSurfaceCheck = 40f;

		// Token: 0x0400841A RID: 33818
		private float _landSurfaceCheck = 40f;

		// Token: 0x0400841B RID: 33819
		private float _proneSurfaceCheck = 30f;

		// Token: 0x0400841C RID: 33820
		private float _sign;

		// Token: 0x0400841D RID: 33821
		private float _lastStepTime;

		// Token: 0x0400841E RID: 33822
		private float _lastTimeTurnSound;

		// Token: 0x0400841F RID: 33823
		private float maxLengthTurnSound = 0.6f;

		// Token: 0x04008420 RID: 33824
		private float _nextSurfaceCheck;

		// Token: 0x04008421 RID: 33825
		private float _distance;

		// Token: 0x04008422 RID: 33826
		private bool _enqueuedForRelease;

		// Token: 0x04008423 RID: 33827
		private float _maxAllowedMovementSpeed;

		// Token: 0x04008424 RID: 33828
		private \uEB57 _vaultAudioController;

		// Token: 0x04008425 RID: 33829
		private \uEB57 _sprintVaultAudioController;

		// Token: 0x04008426 RID: 33830
		private \uEB57 _climbAudioController;

		// Token: 0x04008427 RID: 33831
		private AudioSource _voipAudioSource;

		// Token: 0x04008428 RID: 33832
		private \uE541 _specificStepAudioController = new \uE540();

		// Token: 0x04008429 RID: 33833
		private Action _voipSourceBinding;

		// Token: 0x0400842A RID: 33834
		private BetterSource _gearSource;

		// Token: 0x0400842B RID: 33835
		private \uEACC _tripwireInteractionSoundController;

		// Token: 0x0400842C RID: 33836
		private \uE40C _sourcePrewarmer;

		// Token: 0x0400842D RID: 33837
		private IDropBackPackEvents _dropBackPackEvents;

		// Token: 0x0400842E RID: 33838
		private \uE53A _priorityCalculator;

		// Token: 0x0400842F RID: 33839
		private readonly WaitForSeconds _gearWalkDelaySec = new WaitForSeconds(EFTHardSettings.Instance.GEAR_SOUND_DELAY);

		// Token: 0x04008430 RID: 33840
		private int _animatorFootstepCurveHash;

		// Token: 0x04008431 RID: 33841
		private readonly Dictionary<EAudioMovementState, float> _cachedMovementRolloff = new Dictionary<EAudioMovementState, float>();

		// Token: 0x04008432 RID: 33842
		private \uE714.\uE016.\uE004 _playerAudioSettings = new \uE714.\uE016.\uE004();

		// Token: 0x04008433 RID: 33843
		private BetterSource _interactionSource;

		// Token: 0x04008434 RID: 33844
		private bool _useSimpleUnderRoofCheck;

		// Token: 0x04008435 RID: 33845
		private Action _soundUnsubscribeOnDestroy;

		// Token: 0x04008436 RID: 33846
		public const Player.EAnimatorMask EnabledAnimatorsPlayerDefault = Player.EAnimatorMask.Thirdperson | Player.EAnimatorMask.Arms | Player.EAnimatorMask.Procedural | Player.EAnimatorMask.FBBIK | Player.EAnimatorMask.IK;

		// Token: 0x04008437 RID: 33847
		private const Player.EAnimatorMask FastAnimatorMask = Player.EAnimatorMask.Thirdperson | Player.EAnimatorMask.Arms | Player.EAnimatorMask.FBBIK | Player.EAnimatorMask.IK;

		// Token: 0x04008438 RID: 33848
		public const Player.EAnimatorMask EnabledAnimatorsSpiritDefault = Player.EAnimatorMask.Thirdperson | Player.EAnimatorMask.Arms;

		// Token: 0x04008439 RID: 33849
		private const int SPRINT_DAMAGE = 2;

		// Token: 0x0400843A RID: 33850
		private const int JUMP_DAMAGE = 3;

		// Token: 0x0400843B RID: 33851
		public const string LAYER_NAME_PLAYER = "Player";

		// Token: 0x0400843C RID: 33852
		public PlayerOverlapManager POM;

		// Token: 0x0400843D RID: 33853
		public readonly List<string> TriggerZones = new List<string>();

		// Token: 0x0400843E RID: 33854
		[NonSerialized]
		public BindableEvent OnExitTriggerVisited = new BindableEvent();

		// Token: 0x0400843F RID: 33855
		public \uF1AE<bool> InteractingWithExfiltrationPoint = new \uF1AE<bool>();

		// Token: 0x04008441 RID: 33857
		public EDamageType LastDamageType;

		// Token: 0x04008442 RID: 33858
		public EBodyPart LastDamagedBodyPart;

		// Token: 0x04008443 RID: 33859
		public bool Destroyed;

		// Token: 0x04008444 RID: 33860
		public bool QuickdrawWeaponFast;

		// Token: 0x04008445 RID: 33861
		public bool FastSlotSelection;

		// Token: 0x04008446 RID: 33862
		public bool PreviousWeaponAimState;

		// Token: 0x04008447 RID: 33863
		public float QuickdrawTime;

		// Token: 0x04008449 RID: 33865
		public bool CanManipulateWithHandsInBufferZone;

		// Token: 0x0400844A RID: 33866
		public IAnimator[] _animators;

		// Token: 0x0400844B RID: 33867
		public IAnimator _underbarrelFastAnimator;

		// Token: 0x0400844C RID: 33868
		public \uE91A Speaker;

		// Token: 0x04008450 RID: 33872
		public PlayerSpirit Spirit;

		// Token: 0x04008451 RID: 33873
		[\uE3C5(typeof(Player.EAnimatorMask))]
		public Player.EAnimatorMask EnabledAnimators = Player.EAnimatorMask.Thirdperson | Player.EAnimatorMask.Arms | Player.EAnimatorMask.Procedural | Player.EAnimatorMask.FBBIK | Player.EAnimatorMask.IK;

		// Token: 0x04008452 RID: 33874
		protected Player.\uE00E Logger;

		// Token: 0x04008453 RID: 33875
		protected Corpse Corpse;

		// Token: 0x04008454 RID: 33876
		protected IPlayer LastAggressor;

		// Token: 0x04008455 RID: 33877
		protected \uF061 LastDamageInfo;

		// Token: 0x04008456 RID: 33878
		protected EBodyPart LastBodyPart;

		// Token: 0x04008457 RID: 33879
		protected float _corpseAppliedForce;

		// Token: 0x04008458 RID: 33880
		protected Func<float> GetSensitivity;

		// Token: 0x04008459 RID: 33881
		protected Func<float> GetAimingSensitivity;

		// Token: 0x0400845A RID: 33882
		protected Action<Action> _openAction;

		// Token: 0x0400845B RID: 33883
		protected RecodableItemsHandler recodableItemsHandler;

		// Token: 0x0400845C RID: 33884
		private float _countdownToSprintDamage = 1f;

		// Token: 0x0400845D RID: 33885
		private float _lastHitTime;

		// Token: 0x0400845E RID: 33886
		private int _lastHitDebuffFrame;

		// Token: 0x0400845F RID: 33887
		private float _accumulatedDebuffDamage;

		// Token: 0x04008460 RID: 33888
		private int _negativeBuffsCount;

		// Token: 0x04008461 RID: 33889
		private bool _sense;

		// Token: 0x04008462 RID: 33890
		private bool _isInventoryOpened;

		// Token: 0x04008463 RID: 33891
		private bool _displaySense;

		// Token: 0x04008464 RID: 33892
		private \uED31 Fatigue;

		// Token: 0x04008465 RID: 33893
		private Renderer[] _renderers = Array.Empty<Renderer>();

		// Token: 0x04008466 RID: 33894
		private Camera _camera;

		// Token: 0x04008467 RID: 33895
		private Coroutine _selfDamage;

		// Token: 0x04008468 RID: 33896
		private readonly \uF1AE<Item> _itemInHands = new \uF1AE<Item>();

		// Token: 0x04008469 RID: 33897
		protected readonly \uE3F4 CompositeDisposable = new \uE3F4();

		// Token: 0x0400846A RID: 33898
		private \uF057 _heavyVestsDeflectRandoms;

		// Token: 0x0400846B RID: 33899
		private Action _unsubscribeOnEndSession;

		// Token: 0x0400846C RID: 33900
		protected IEnumerable<TacticalComboVisualController> _helmetLightControllers = new List<TacticalComboVisualController>();

		// Token: 0x0400846D RID: 33901
		private Animator _createdAnimator;

		// Token: 0x0400846E RID: 33902
		private RuntimeAnimatorController _createdRuntimeAnimatorController;

		// Token: 0x0400846F RID: 33903
		private IVaultingComponent _vaultingComponent;

		// Token: 0x04008470 RID: 33904
		private IVaultingComponentDebug _vaultingComponentDebug;

		// Token: 0x04008471 RID: 33905
		private IVaultingParameters _vaultingParameters;

		// Token: 0x04008472 RID: 33906
		private IVaultingGameplayRestrictions _vaultingGameplayRestrictions;

		// Token: 0x04008473 RID: 33907
		private IWeaponMountingComponent _weaponMountingComponent;

		// Token: 0x0400848E RID: 33934
		public \uE383 Physical;

		// Token: 0x04008490 RID: 33936
		[SerializeField]
		private EUpdateQueue _updateQueue;

		// Token: 0x04008491 RID: 33937
		[SerializeField]
		protected EUpdateQueue _armsUpdateQueue;

		// Token: 0x04008494 RID: 33940
		[SerializeField]
		protected Player.EUpdateMode _armsUpdateMode;

		// Token: 0x04008495 RID: 33941
		[SerializeField]
		protected Player.EUpdateMode _bodyUpdateMode;

		// Token: 0x0400849A RID: 33946
		protected IHealthController _healthController;

		// Token: 0x0400849B RID: 33947
		protected BodyPartCollider[] _hitColliders;

		// Token: 0x0400849C RID: 33948
		protected ArmorPlateCollider[] _armorPlateColliders;

		// Token: 0x0400849D RID: 33949
		protected Player.PlayerInventoryController _inventoryController;

		// Token: 0x0400849E RID: 33950
		protected Player.AbstractHandsController _handsController;

		// Token: 0x0400849F RID: 33951
		protected \uF15B _questController;

		// Token: 0x040084A0 RID: 33952
		protected \uF17A _achievementsController;

		// Token: 0x040084A1 RID: 33953
		protected \uEB3A _prestigeController;

		// Token: 0x040084A3 RID: 33955
		public const string ARTA_MAN_PROFILE_ID = "66f3fad50ec64d74847d049d";

		// Token: 0x040084A4 RID: 33956
		public const string ARTA_MAN_NAME = "UI/Artillery/ArtaManName";

		// Token: 0x040084A5 RID: 33957
		private string _fullIdInfo;

		// Token: 0x040084A6 RID: 33958
		public Transform Tracking;

		// Token: 0x040084A7 RID: 33959
		private float _awareness;

		// Token: 0x040084A8 RID: 33960
		protected bool _armsupdated;

		// Token: 0x040084A9 RID: 33961
		protected float _armsTime;

		// Token: 0x040084AA RID: 33962
		protected bool _bodyupdated;

		// Token: 0x040084AB RID: 33963
		protected float _bodyTime;

		// Token: 0x040084AC RID: 33964
		protected int _nFixedFrames;

		// Token: 0x040084AD RID: 33965
		protected float _fixedTime;

		// Token: 0x040084AE RID: 33966
		private static readonly Player.\uE010 _defaultDeltaTimeDelegate = new Player.\uE010(Player.<>c.<>9.\uE01A);

		// Token: 0x040084AF RID: 33967
		private Player.\uE010 _deltaTimeDelegate = Player._defaultDeltaTimeDelegate;

		// Token: 0x040084B0 RID: 33968
		private WaitForFixedUpdate _waitForFixedUpdate = new WaitForFixedUpdate();

		// Token: 0x040084B3 RID: 33971
		protected float LastDeltaTime;

		// Token: 0x040084B4 RID: 33972
		protected Transform _playerLookRaycastTransform;

		// Token: 0x040084B5 RID: 33973
		private EDoorState _lastInteractionState;

		// Token: 0x040084B8 RID: 33976
		private bool _nextCastHasForceEvent;

		// Token: 0x040084B9 RID: 33977
		private float _lastStateUpdateTime;

		// Token: 0x040084BB RID: 33979
		private Coroutine _waitInventoryCoroutine;

		// Token: 0x040084BC RID: 33980
		protected readonly List<ArmorComponent> _preAllocatedArmorComponents = new List<ArmorComponent>(20);

		// Token: 0x040084BD RID: 33981
		protected EquipmentPenaltyComponent _preAllocatedBackpackPenaltyComponent;

		// Token: 0x040084C0 RID: 33984
		private bool _gameSessionEndWasCalled;

		// Token: 0x040084C1 RID: 33985
		protected Action ExfilUnsubscribe;

		// Token: 0x040084C2 RID: 33986
		protected List<Action> SessionEndUnsubscribe;

		// Token: 0x040084C3 RID: 33987
		protected bool AggressorFound;

		// Token: 0x040084C5 RID: 33989
		[SerializeField]
		public float MyHandsToBodyAngle;

		// Token: 0x040084C6 RID: 33990
		public byte MovementIteration;

		// Token: 0x040084C7 RID: 33991
		public List<SecretExfiltrationPoint> FoundSecretExits = new List<SecretExfiltrationPoint>();

		// Token: 0x040084CA RID: 33994
		protected static readonly TimeSpan HearingDetectionTime = TimeSpan.FromSeconds(2.0);

		// Token: 0x040084CD RID: 33997
		private \uE871 _customHandRotator;

		// Token: 0x040084D3 RID: 34003
		private EPlayerBtrState _btrState;

		// Token: 0x040084D4 RID: 34004
		private EPlayerBtrState _lastBtrStateInteractionCheck;

		// Token: 0x040084D5 RID: 34005
		private EBtrState _lastBtrStateCheck;

		// Token: 0x040084D6 RID: 34006
		private bool _lastBtrCastResult;

		// Token: 0x040084D7 RID: 34007
		private bool _lastTripwireCastResult;

		// Token: 0x040084D8 RID: 34008
		private bool _lastEventObjectCastResult;

		// Token: 0x040084D9 RID: 34009
		private Player.EProcessStatus _processStatus;

		// Token: 0x040084DE RID: 34014
		private Item _lastEquippedWeaponOrKnifeItem;

		// Token: 0x040084DF RID: 34015
		private readonly EquipmentSlot[] _slotPriority = new EquipmentSlot[]
		{
			EquipmentSlot.FirstPrimaryWeapon,
			EquipmentSlot.SecondPrimaryWeapon,
			EquipmentSlot.Holster,
			EquipmentSlot.Scabbard
		};

		// Token: 0x040084E0 RID: 34016
		protected Callback _removeFromHandsCallback;

		// Token: 0x040084E1 RID: 34017
		private Callback _setInHandsCallback;

		// Token: 0x040084E2 RID: 34018
		private float _lastFaceshieldOperationTime;

		// Token: 0x040084E3 RID: 34019
		private int _faceshieldNumOperations;

		// Token: 0x040084E4 RID: 34020
		private const int MAX_FACESHIELD_OPERATIONS_PER_FRAME = 3;

		// Token: 0x02001675 RID: 5749
		public sealed class \uE000 : Error
		{
			// Token: 0x06008F0E RID: 36622 RVA: 0x002E4774 File Offset: 0x002E2974
			public \uE000(Item item, Type componentType)
			{
				this.\uE003 = item;
				this.\uE004 = componentType;
			}

			// Token: 0x06008F0F RID: 36623 RVA: 0x002E4790 File Offset: 0x002E2990
			public override string ToString()
			{
				Item uE = this.\uE003;
				return ((uE != null) ? uE.ToString() : null) + \uF1F8.\uE000(140202) + this.\uE004.Name;
			}

			// Token: 0x040084E5 RID: 34021
			private readonly Item \uE003;

			// Token: 0x040084E6 RID: 34022
			private readonly Type \uE004;
		}

		// Token: 0x02001676 RID: 5750
		public sealed class \uE001 : Error
		{
			// Token: 0x06008F10 RID: 36624 RVA: 0x002E47C0 File Offset: 0x002E29C0
			public \uE001(Item item, ItemAddress itemAddress)
			{
				this.\uE003 = item;
				this.\uE005 = itemAddress;
			}

			// Token: 0x06008F11 RID: 36625 RVA: 0x002E47DC File Offset: 0x002E29DC
			public override string ToString()
			{
				string[] array = new string[5];
				int num = 0;
				Item uE = this.\uE003;
				array[num] = ((uE != null) ? uE.ToString() : null);
				array[1] = \uF1F8.\uE000(140168);
				int num2 = 2;
				ItemAddress uE2 = this.\uE005;
				array[num2] = ((uE2 != null) ? uE2.ToString() : null);
				array[3] = \uF1F8.\uE000(139900);
				int num3 = 4;
				ItemAddress parent = this.\uE003.Parent;
				array[num3] = ((parent != null) ? parent.ToString() : null);
				return string.Concat(array);
			}

			// Token: 0x040084E7 RID: 34023
			private readonly Item \uE003;

			// Token: 0x040084E8 RID: 34024
			private readonly ItemAddress \uE005;
		}

		// Token: 0x02001677 RID: 5751
		public sealed class \uE002 : Error
		{
			// Token: 0x06008F12 RID: 36626 RVA: 0x002E4854 File Offset: 0x002E2A54
			public \uE002(\uEEF7 component, bool value)
			{
				this.\uE006 = component;
				this.\uE007 = value;
			}

			// Token: 0x06008F13 RID: 36627 RVA: 0x002E4870 File Offset: 0x002E2A70
			public override string ToString()
			{
				string[] array = new string[5];
				array[0] = this.\uE006.GetType().Name;
				array[1] = \uF1F8.\uE000(388);
				int num = 2;
				Item item = this.\uE006.Item;
				array[num] = ((item != null) ? item.ToString() : null);
				array[3] = \uF1F8.\uE000(139883);
				array[4] = this.\uE007.ToString();
				return string.Concat(array);
			}

			// Token: 0x040084E9 RID: 34025
			private readonly \uEEF7 \uE006;

			// Token: 0x040084EA RID: 34026
			private readonly bool \uE007;
		}

		// Token: 0x02001678 RID: 5752
		protected internal abstract class PlayerInventoryController : InventoryController, \uEED1
		{
			// Token: 0x1700148B RID: 5259
			// (get) Token: 0x06008F14 RID: 36628 RVA: 0x002E48E0 File Offset: 0x002E2AE0
			// (set) Token: 0x06008F15 RID: 36629 RVA: 0x002E48E8 File Offset: 0x002E2AE8
			private protected Dictionary<MongoID, int> DiscardLimits { protected get; private set; }

			// Token: 0x1700148C RID: 5260
			// (get) Token: 0x06008F16 RID: 36630 RVA: 0x002E48F4 File Offset: 0x002E2AF4
			protected virtual bool HasDiscardLimits
			{
				get
				{
					return this.Profile.Side != EPlayerSide.Savage;
				}
			}

			// Token: 0x1700148D RID: 5261
			// (get) Token: 0x06008F17 RID: 36631 RVA: 0x002E4908 File Offset: 0x002E2B08
			public new Profile Profile { get; }

			// Token: 0x1700148E RID: 5262
			// (get) Token: 0x06008F18 RID: 36632 RVA: 0x002E4910 File Offset: 0x002E2B10
			public override Item ItemInHands
			{
				get
				{
					if (!(this.\uE000.HandsController != null))
					{
						return null;
					}
					return this.\uE000.HandsController.Item;
				}
			}

			// Token: 0x1700148F RID: 5263
			// (get) Token: 0x06008F19 RID: 36633
			public abstract IPlayerSearchController PlayerSearchController { get; }

			// Token: 0x17001490 RID: 5264
			// (get) Token: 0x06008F1A RID: 36634 RVA: 0x002E4938 File Offset: 0x002E2B38
			public override ISearchController SearchController
			{
				get
				{
					return this.PlayerSearchController;
				}
			}

			// Token: 0x17001491 RID: 5265
			// (get) Token: 0x06008F1B RID: 36635 RVA: 0x002E4940 File Offset: 0x002E2B40
			// (set) Token: 0x06008F1C RID: 36636 RVA: 0x002E4950 File Offset: 0x002E2B50
			public override bool Locked
			{
				get
				{
					return this.\uE000.ProcessStatus > Player.EProcessStatus.None;
				}
				set
				{
					this.\uE000.ProcessStatus = (value ? Player.EProcessStatus.Internal : Player.EProcessStatus.None);
					base.UpdateLockedStatus();
				}
			}

			// Token: 0x06008F1D RID: 36637 RVA: 0x002E496C File Offset: 0x002E2B6C
			protected PlayerInventoryController(Player player, Profile profile, bool examined) : base(profile, examined)
			{
				this.\uE000 = player;
				this.Profile = profile;
				this.DiscardLimits = this.Profile.Inventory.DiscardLimits;
				base.RootItem.CurrentAddress = base.CreateItemAddress();
				if (base.QuestStashItem != null)
				{
					base.QuestStashItem.CurrentAddress = base.CreateItemAddress();
				}
				if (base.QuestRaidItem != null)
				{
					base.QuestRaidItem.CurrentAddress = base.CreateItemAddress();
				}
				if (base.Inventory.Stash != null)
				{
					base.Inventory.Stash.CurrentAddress = base.CreateItemAddress();
				}
			}

			// Token: 0x06008F1E RID: 36638
			internal abstract SearchContentOperation \uE019(\uEEA4 item);

			// Token: 0x06008F1F RID: 36639 RVA: 0x002E4A48 File Offset: 0x002E2C48
			public override Task<IResult> TryRunNetworkTransaction(\uF18F operationResult, Callback callback = null)
			{
				if (this.\uE000.HealthController.IsAlive)
				{
					return base.TryRunNetworkTransaction(operationResult, callback);
				}
				TaskCompletionSource<IResult> taskCompletionSource = new TaskCompletionSource<IResult>();
				taskCompletionSource.Fail(\uF1F8.\uE000(139869), 0);
				return taskCompletionSource.Task;
			}

			// Token: 0x06008F20 RID: 36640 RVA: 0x002E4A80 File Offset: 0x002E2C80
			public virtual bool HasDiscardLimit(Item item, out int limit)
			{
				if (this.HasDiscardLimits && item.LimitedDiscard)
				{
					limit = this.DiscardLimits[item.TemplateId];
					return true;
				}
				limit = 0;
				return false;
			}

			// Token: 0x06008F21 RID: 36641 RVA: 0x002E4AB8 File Offset: 0x002E2CB8
			public virtual void ResetDiscardLimits()
			{
				if (this.HasDiscardLimits)
				{
					this.DiscardLimits = Singleton<\uE79C>.Instance.GetDiscardLimits();
				}
			}

			// Token: 0x06008F22 RID: 36642 RVA: 0x002E4AD4 File Offset: 0x002E2CD4
			public virtual IEnumerable<\uEED0> GetItemsOverDiscardLimit(Item item)
			{
				Player.PlayerInventoryController.\uE00A uE00A = new Player.PlayerInventoryController.\uE00A(-2);
				uE00A.<>4__this = this;
				uE00A.<>3__item = item;
				return uE00A;
			}

			// Token: 0x06008F23 RID: 36643 RVA: 0x002E4AEC File Offset: 0x002E2CEC
			private bool \uE000(Item item, out \uEED0 overLimit)
			{
				overLimit = default(\uEED0);
				if (!item.LimitedDiscard)
				{
					return false;
				}
				MongoID templateId = item.TemplateId;
				int stackObjectsCount = item.StackObjectsCount;
				int num;
				if (!this.\uE004.TryGetValue(templateId, out num))
				{
					this.Logger.LogError(string.Format(\uF1F8.\uE000(139852), item), Array.Empty<object>());
					return false;
				}
				int num2 = num - stackObjectsCount;
				if (num2 >= 0)
				{
					this.\uE004[templateId] = num2;
					return false;
				}
				this.\uE004[templateId] = 0;
				this.\uE005.Add(item);
				int num3 = Math.Min(-num2, stackObjectsCount);
				overLimit = new \uEED0(item, num3, stackObjectsCount - num3);
				return true;
			}

			// Token: 0x06008F24 RID: 36644 RVA: 0x002E4BB8 File Offset: 0x002E2DB8
			private new bool \uE001(Item item, bool ignoreRestrictions)
			{
				if (!ignoreRestrictions)
				{
					ItemAddress currentAddress = item.CurrentAddress;
					Slot slot = ((currentAddress != null) ? currentAddress.Container : null) as Slot;
					if (slot != null && slot.ParentItem is InventoryEquipment)
					{
						UnlootableComponent unlootableComponent;
						if (item.TryGetItemComponent<UnlootableComponent>(out unlootableComponent))
						{
							if (unlootableComponent.IsUnlootableFrom(slot))
							{
								return true;
							}
						}
						CantRemoveFromSlotsDuringRaidComponent cantRemoveFromSlotsDuringRaidComponent;
						return item is \uEDBE && item.TryGetItemComponent<CantRemoveFromSlotsDuringRaidComponent>(out cantRemoveFromSlotsDuringRaidComponent) && !cantRemoveFromSlotsDuringRaidComponent.CanRemoveFromSlotDuringRaid(slot.ID);
					}
				}
				return false;
			}

			// Token: 0x06008F25 RID: 36645 RVA: 0x002E4C48 File Offset: 0x002E2E48
			public virtual void SubtractFromDiscardLimits(Item rootItem, IEnumerable<\uEED0> destroyedItems)
			{
				Player.PlayerInventoryController.\uE004 uE = new Player.PlayerInventoryController.\uE004();
				uE.<>4__this = this;
				uE.destroyedItems = destroyedItems;
				if (!this.HasDiscardLimits)
				{
					return;
				}
				foreach (Item itemToSubtract in rootItem.GetAllItems(new Predicate<\uEDBE>(uE.\uE002)))
				{
					uE.\uE000(itemToSubtract);
				}
			}

			// Token: 0x06008F26 RID: 36646 RVA: 0x002E4CCC File Offset: 0x002E2ECC
			protected virtual void LogDiscardLimitsChange(ItemTemplate template, int delta)
			{
			}

			// Token: 0x06008F27 RID: 36647 RVA: 0x002E4CD0 File Offset: 0x002E2ED0
			public virtual void AddDiscardLimits(Item rootItem, IEnumerable<\uEED0> destroyedItems)
			{
				Player.PlayerInventoryController.\uE005 uE = new Player.PlayerInventoryController.\uE005();
				uE.destroyedItems = destroyedItems;
				uE.<>4__this = this;
				if (!this.HasDiscardLimits)
				{
					return;
				}
				foreach (Item itemToAdd in rootItem.GetAllItems(new Predicate<\uEDBE>(uE.\uE001)))
				{
					uE.\uE000(itemToAdd);
				}
			}

			// Token: 0x06008F28 RID: 36648 RVA: 0x002E4D54 File Offset: 0x002E2F54
			public override \uF192<Item> FindItemById(MongoID itemId, bool checkDistance = true, bool checkOwnership = true)
			{
				return this.\uE000.FindItemById(itemId, checkDistance, checkOwnership);
			}

			// Token: 0x06008F29 RID: 36649 RVA: 0x002E4D64 File Offset: 0x002E2F64
			protected override void OutProcess(\uEEFC executor, Item item, ItemAddress from, ItemAddress to, \uEF5F operation, Callback callback)
			{
				Error error;
				if (!executor.CheckTransferOwners(item, to, out error))
				{
					callback.Fail(error.ToString());
					return;
				}
				this.\uE006(item, from, to, operation, callback);
			}

			// Token: 0x06008F2A RID: 36650 RVA: 0x002E4D9C File Offset: 0x002E2F9C
			protected override void InProcess(\uEEFC executor, Item item, ItemAddress to, bool succeed, \uEF5F operation, Callback callback)
			{
				if (!succeed)
				{
					callback.Succeed();
					return;
				}
				Error error;
				if (!executor.CheckTransferOwners(item, to, out error))
				{
					callback.Fail(error.ToString());
					return;
				}
				this.\uE005(item, to, operation, callback);
				this.\uE000.StatisticsManager.OnGrabLoot(item);
			}

			// Token: 0x06008F2B RID: 36651 RVA: 0x002E4DF4 File Offset: 0x002E2FF4
			public void SetNextProcessLocked(bool status)
			{
				this.\uE003 = status;
			}

			// Token: 0x06008F2C RID: 36652 RVA: 0x002E4E00 File Offset: 0x002E3000
			public override void InventoryCheckMagazine(\uEE67 magazine, bool notify)
			{
				Player.PlayerInventoryController.\uE006 uE = new Player.PlayerInventoryController.\uE006();
				uE.magazine = magazine;
				uE.<>4__this = this;
				uE.notify = notify;
				this.StopProcesses();
				float num = 100f - this.Profile.Skills.MagDrillsInventoryCheckSpeed + uE.magazine.CheckTimeModifier;
				uE.speed = Singleton<\uE714>.Instance.BaseCheckTime * num / 100f;
				Debug.Log(\uF1F8.\uE000(139796) + uE.speed.ToString() + \uF1F8.\uE000(140031));
				uE.magazine.Parent.GetOwner().RaiseInventoryCheckMagazine(uE.magazine, uE.speed, true);
				this.\uE002 = new Player.PlayerInventoryController.\uE000(uE.magazine, uE.speed, new Callback(uE.\uE000));
			}

			// Token: 0x06008F2D RID: 36653 RVA: 0x002E4EFC File Offset: 0x002E30FC
			public override Task<IResult> LoadMultiBarrelWeapon(Weapon weapon, \uEDED ammo, int ammoCount)
			{
				Player.PlayerInventoryController.\uE00C uE00C;
				uE00C.<>t__builder = AsyncTaskMethodBuilder<IResult>.Create();
				uE00C.<>4__this = this;
				uE00C.weapon = weapon;
				uE00C.ammo = ammo;
				uE00C.ammoCount = ammoCount;
				uE00C.<>1__state = -1;
				uE00C.<>t__builder.Start<Player.PlayerInventoryController.\uE00C>(ref uE00C);
				return uE00C.<>t__builder.Task;
			}

			// Token: 0x06008F2E RID: 36654 RVA: 0x002E4F6C File Offset: 0x002E316C
			public override Task<IResult> LoadWeaponWithAmmo(Weapon weapon, \uEDED ammo, int ammoCount)
			{
				Player.PlayerInventoryController.\uE00D uE00D;
				uE00D.<>t__builder = AsyncTaskMethodBuilder<IResult>.Create();
				uE00D.<>4__this = this;
				uE00D.weapon = weapon;
				uE00D.ammo = ammo;
				uE00D.ammoCount = ammoCount;
				uE00D.<>1__state = -1;
				uE00D.<>t__builder.Start<Player.PlayerInventoryController.\uE00D>(ref uE00D);
				return uE00D.<>t__builder.Task;
			}

			// Token: 0x06008F2F RID: 36655 RVA: 0x002E4FDC File Offset: 0x002E31DC
			public override void StrictCheckMagazine(\uEE67 magazine, bool status, int skill = 0, bool notify = false, bool useOperation = true)
			{
				if (status)
				{
					if (magazine.Count > 0)
					{
						if (magazine.Count < magazine.MaxCount)
						{
							goto IL_22;
						}
					}
					skill = 2;
					IL_22:
					if (notify)
					{
						if (!this.Profile.CheckedMagazines.ContainsKey(magazine.Id))
						{
							this.NotifyMagazineChecked(magazine.ShortName);
						}
					}
				}
				base.SetMagazineCheckedStatus(magazine, status, skill, useOperation, true);
			}

			// Token: 0x06008F30 RID: 36656 RVA: 0x002E505C File Offset: 0x002E325C
			protected override Task<IResult> LoadMagazine(\uEDED sourceAmmo, \uEE67 magazine, int loadCount, bool ignoreRestrictions)
			{
				Player.PlayerInventoryController.\uE00B uE00B;
				uE00B.<>t__builder = AsyncTaskMethodBuilder<IResult>.Create();
				uE00B.<>4__this = this;
				uE00B.sourceAmmo = sourceAmmo;
				uE00B.magazine = magazine;
				uE00B.loadCount = loadCount;
				uE00B.ignoreRestrictions = ignoreRestrictions;
				uE00B.<>1__state = -1;
				uE00B.<>t__builder.Start<Player.PlayerInventoryController.\uE00B>(ref uE00B);
				return uE00B.<>t__builder.Task;
			}

			// Token: 0x06008F31 RID: 36657 RVA: 0x002E50D4 File Offset: 0x002E32D4
			public override Task<IResult> UnloadMagazine(\uEE67 magazine)
			{
				Player.PlayerInventoryController.\uE00E uE00E;
				uE00E.<>t__builder = AsyncTaskMethodBuilder<IResult>.Create();
				uE00E.<>4__this = this;
				uE00E.magazine = magazine;
				uE00E.<>1__state = -1;
				uE00E.<>t__builder.Start<Player.PlayerInventoryController.\uE00E>(ref uE00E);
				return uE00E.<>t__builder.Task;
			}

			// Token: 0x06008F32 RID: 36658 RVA: 0x002E512C File Offset: 0x002E332C
			private Task<IResult> \uE002()
			{
				Player.PlayerInventoryController.\uE00F uE00F;
				uE00F.<>t__builder = AsyncTaskMethodBuilder<IResult>.Create();
				uE00F.<>4__this = this;
				uE00F.<>1__state = -1;
				uE00F.<>t__builder.Start<Player.PlayerInventoryController.\uE00F>(ref uE00F);
				return uE00F.<>t__builder.Task;
			}

			// Token: 0x06008F33 RID: 36659 RVA: 0x002E517C File Offset: 0x002E337C
			public override void StopProcesses()
			{
				\uEF42 uE = this.\uE001;
				if (uE != null)
				{
					uE.Proceed(true);
				}
				Player.PlayerInventoryController.\uE000 uE2 = this.\uE002;
				if (uE2 == null)
				{
					return;
				}
				uE2.Proceed();
			}

			// Token: 0x06008F34 RID: 36660 RVA: 0x002E51A0 File Offset: 0x002E33A0
			private void \uE003(Item magazineOrAmmo)
			{
				\uEF42 uE = this.\uE001;
				if (uE == null)
				{
					return;
				}
				uE.TryProceedForItem(magazineOrAmmo);
			}

			// Token: 0x06008F35 RID: 36661 RVA: 0x002E51B4 File Offset: 0x002E33B4
			private void \uE004(\uEE67 magazine)
			{
				Player.PlayerInventoryController.\uE000 uE = this.\uE002;
				if (uE == null)
				{
					return;
				}
				uE.TryProceedForItem(magazine);
			}

			// Token: 0x06008F36 RID: 36662 RVA: 0x002E51C8 File Offset: 0x002E33C8
			public override void ThrowItem(Item item, bool downDirection = false, Callback callback = null)
			{
				Weapon weapon = item as Weapon;
				if (weapon != null)
				{
					this.CheckChamber(weapon, false);
					\uEE67 currentMagazine = weapon.GetCurrentMagazine();
					if (currentMagazine != null)
					{
						this.StrictCheckMagazine(currentMagazine, false, 0, false, true);
						this.\uE004(currentMagazine);
						this.\uE003(currentMagazine);
					}
				}
				\uEDBE uEDBE = item as \uEDBE;
				if (uEDBE != null)
				{
					foreach (Item item2 in uEDBE.GetAllItemsFromCollection())
					{
						\uEE67 uEE = item2 as \uEE67;
						if (uEE == null)
						{
							\uEDED uEDED = item2 as \uEDED;
							if (uEDED != null)
							{
								this.\uE003(uEDED);
							}
						}
						else
						{
							this.\uE004(uEE);
							this.\uE003(uEE);
						}
					}
				}
				\uF190<\uEF14> uF = \uEF02.Throw(item, this, true);
				if (uF.Failed)
				{
					if (callback != null)
					{
						callback(uF.ToResult());
					}
					return;
				}
				this.\uE029(new \uEFA4(base.\uE00C(), this, uF.Value, uF.Value.ItemsToDestroy, this.\uE000, downDirection), callback);
			}

			// Token: 0x06008F37 RID: 36663 RVA: 0x002E5308 File Offset: 0x002E3508
			protected override \uEFA5 ToggleItem(\uEF32 toggleResult)
			{
				if (this.\uE000.HealthController.FindActiveEffect<\uED62>(EBodyPart.Common) == null)
				{
					return new \uEFA6(base.\uE00C(), this, toggleResult, this.\uE000);
				}
				return base.ToggleItem(toggleResult);
			}

			// Token: 0x06008F38 RID: 36664 RVA: 0x002E533C File Offset: 0x002E353C
			public override void SetupItem(Item item, string zone, Vector3 position, Quaternion rotation, float setupTime, Callback callback = null)
			{
				\uF190<\uEF16> uF = \uEF02.Discard(item, this, true);
				if (!uF.Failed)
				{
					this.\uE029(new \uEF9F(base.\uE00C(), this, uF.Value, zone, position, rotation, this.\uE000, setupTime), callback);
					return;
				}
				if (callback != null)
				{
					callback(uF.ToResult());
					return;
				}
				this.Logger.LogError(uF.Error.ToString(), Array.Empty<object>());
			}

			// Token: 0x06008F39 RID: 36665 RVA: 0x002E53C0 File Offset: 0x002E35C0
			public override void PlantTripwire(\uEEC9 grenade, \uEE8B plantingKit, Vector3 fromPosition, Vector3 toPosition, Callback callback = null)
			{
				\uF190<\uEF15> uF = \uEF02.SimulatePlantTripwire(this, grenade, plantingKit);
				if (!uF.Failed)
				{
					this.\uE029(new \uEF92(base.\uE00C(), this, uF.Value, fromPosition, toPosition, this.\uE000), callback);
					return;
				}
				if (callback != null)
				{
					callback(uF.ToResult());
					return;
				}
				this.Logger.LogError(uF.Error.ToString(), Array.Empty<object>());
			}

			// Token: 0x06008F3A RID: 36666 RVA: 0x002E5440 File Offset: 0x002E3640
			public override void CheckMagazineAmmoDepend(\uEE67 magazine, Action callback, bool useOperation, bool allowUncheck = false)
			{
				if (magazine.Count > 0)
				{
					if (magazine.Count < magazine.MaxCount)
					{
						if (!allowUncheck)
						{
							goto IL_93;
						}
						if (this.\uE000.Profile.CheckedMagazines.ContainsKey(magazine.Id))
						{
							this.StrictCheckMagazine(magazine, false, 0, false, useOperation);
							goto IL_93;
						}
						goto IL_93;
					}
				}
				if (!this.\uE000.Profile.CheckedMagazines.ContainsKey(magazine.Id))
				{
					this.StrictCheckMagazine(magazine, true, 2, false, useOperation);
				}
				IL_93:
				callback();
			}

			// Token: 0x06008F3B RID: 36667 RVA: 0x002E54E8 File Offset: 0x002E36E8
			public override \uF191 CheckItemAction(Item item, ItemAddress location)
			{
				if (this.IsInventoryBlocked())
				{
					return new \uEDE1();
				}
				return base.CheckItemAction(item, location);
			}

			// Token: 0x06008F3C RID: 36668 RVA: 0x002E5508 File Offset: 0x002E3708
			private void \uE005(Item item, ItemAddress to, \uEF5F operation, Callback callback)
			{
				Player.PlayerInventoryController.\uE009 uE = new Player.PlayerInventoryController.\uE009();
				uE.callback = callback;
				this.\uE000.TrySetInHands(item, to, operation, new Callback(uE.\uE000));
			}

			// Token: 0x06008F3D RID: 36669 RVA: 0x002E5540 File Offset: 0x002E3740
			private void \uE006(Item item, ItemAddress from, ItemAddress to, \uEF5F abstractOperation, Callback callback)
			{
				Item item2 = this.\uE007(item, from, to);
				if (item2 != null)
				{
					this.\uE000.TryRemoveFromHands(item2, abstractOperation, callback);
					return;
				}
				callback.Succeed();
			}

			// Token: 0x06008F3E RID: 36670 RVA: 0x002E557C File Offset: 0x002E377C
			internal override bool \uE01C(\uEF67 operation)
			{
				return this.\uE000.HandsController.CanExecute(operation);
			}

			// Token: 0x06008F3F RID: 36671 RVA: 0x002E5590 File Offset: 0x002E3790
			private Item \uE007(Item item, ItemAddress from, ItemAddress to)
			{
				List<Item> list = new List<Item>
				{
					item
				};
				\uEDBE uEDBE = item as \uEDBE;
				if (uEDBE != null)
				{
					list.AddRange(Enumerable.SelectMany<IContainer, Item>(uEDBE.Containers, new Func<IContainer, IEnumerable<Item>>(Player.PlayerInventoryController.<>c.<>9.\uE003)));
				}
				Item item2 = Enumerable.FirstOrDefault<Item>(list, new Func<Item, bool>(this.\uE00C));
				if (item2 == null)
				{
					Weapon weapon = this.ItemInHands as Weapon;
					if (weapon != null)
					{
						if (from.IsChildOf(weapon, false))
						{
							item2 = item;
						}
						if (to.IsChildOf(weapon, false))
						{
							item2 = item;
						}
					}
				}
				if (item2 != null)
				{
					return item2;
				}
				if (to == null)
				{
					if (this.\uE000.InventoryController.IsAnimatedSlot(from))
					{
						return item;
					}
				}
				return null;
			}

			// Token: 0x06008F40 RID: 36672 RVA: 0x002E5668 File Offset: 0x002E3868
			[CompilerGenerated]
			internal static bool \uE008(IContainer container)
			{
				Slot slot = container as Slot;
				return slot == null || !slot.IsSpecial;
			}

			// Token: 0x06008F41 RID: 36673 RVA: 0x002E5694 File Offset: 0x002E3894
			[CompilerGenerated]
			[DebuggerHidden]
			private Task<IResult> \uE009(Weapon weapon, \uEDED ammo, int ammoCount)
			{
				return base.LoadMultiBarrelWeapon(weapon, ammo, ammoCount);
			}

			// Token: 0x06008F42 RID: 36674 RVA: 0x002E56A0 File Offset: 0x002E38A0
			[CompilerGenerated]
			[DebuggerHidden]
			private Task<IResult> \uE00A(Weapon weapon, \uEDED ammo, int ammoCount)
			{
				return base.LoadWeaponWithAmmo(weapon, ammo, ammoCount);
			}

			// Token: 0x06008F43 RID: 36675 RVA: 0x002E56AC File Offset: 0x002E38AC
			[CompilerGenerated]
			private bool \uE00B()
			{
				return this.\uE001 == null;
			}

			// Token: 0x06008F44 RID: 36676 RVA: 0x002E56B8 File Offset: 0x002E38B8
			[CompilerGenerated]
			private bool \uE00C(Item x)
			{
				return this.ItemInHands == x;
			}

			// Token: 0x040084EB RID: 34027
			internal readonly Player \uE000;

			// Token: 0x040084EC RID: 34028
			private new \uEF42 \uE001;

			// Token: 0x040084ED RID: 34029
			private Player.PlayerInventoryController.\uE000 \uE002;

			// Token: 0x040084EE RID: 34030
			private bool \uE003 = true;

			// Token: 0x040084EF RID: 34031
			private readonly Dictionary<MongoID, int> \uE004 = new Dictionary<MongoID, int>();

			// Token: 0x040084F0 RID: 34032
			private readonly List<Item> \uE005 = new List<Item>();

			// Token: 0x040084F1 RID: 34033
			[CompilerGenerated]
			private Dictionary<MongoID, int> \uE006;

			// Token: 0x040084F2 RID: 34034
			[CompilerGenerated]
			private readonly Profile \uE007;

			// Token: 0x02001679 RID: 5753
			private sealed class \uE000
			{
				// Token: 0x06008F45 RID: 36677 RVA: 0x002E56C4 File Offset: 0x002E38C4
				public \uE000(\uEE67 magazine, float duration, Callback callback)
				{
					this.\uE000 = magazine;
					this.\uE001 = duration;
					this.\uE002 = callback;
					if (this.\uE004 != null)
					{
						StaticManager.KillCoroutine(this.\uE004);
					}
					this.\uE004 = StaticManager.BeginCoroutine(this.\uE000());
				}

				// Token: 0x06008F46 RID: 36678 RVA: 0x002E5724 File Offset: 0x002E3924
				public void Proceed()
				{
					if (this.\uE004 != null)
					{
						if (this.\uE003)
						{
							this.\uE002.Succeed();
						}
						else
						{
							this.\uE002.Fail(\uF1F8.\uE000(140005));
						}
						StaticManager.KillCoroutine(this.\uE004);
						this.\uE004 = null;
					}
				}

				// Token: 0x06008F47 RID: 36679 RVA: 0x002E5784 File Offset: 0x002E3984
				public void TryProceedForItem(\uEE67 magazine)
				{
					if (this.\uE000 == magazine)
					{
						this.Proceed();
					}
				}

				// Token: 0x06008F48 RID: 36680 RVA: 0x002E5798 File Offset: 0x002E3998
				private IEnumerator \uE000()
				{
					int num;
					for (;;)
					{
						int num2;
						num = num2;
						if (num != 0)
						{
							break;
						}
						this.\uE003 = false;
						yield return new WaitForSeconds(this.\uE001);
					}
					if (num != 1)
					{
						yield break;
					}
					this.\uE003 = true;
					this.Proceed();
					yield break;
				}

				// Token: 0x040084F3 RID: 34035
				private readonly \uEE67 \uE000;

				// Token: 0x040084F4 RID: 34036
				private readonly float \uE001;

				// Token: 0x040084F5 RID: 34037
				private readonly Callback \uE002;

				// Token: 0x040084F6 RID: 34038
				private bool \uE003;

				// Token: 0x040084F7 RID: 34039
				private Coroutine \uE004;
			}

			// Token: 0x0200167B RID: 5755
			private new sealed class \uE001 : \uEF42
			{
				// Token: 0x17001494 RID: 5268
				// (get) Token: 0x06008F4F RID: 36687 RVA: 0x002E5848 File Offset: 0x002E3A48
				private bool \uE00A
				{
					get
					{
						CancellationTokenSource uE = this.\uE008;
						return uE == null || uE.IsCancellationRequested;
					}
				}

				// Token: 0x06008F50 RID: 36688 RVA: 0x002E585C File Offset: 0x002E3A5C
				public \uE001(InventoryController inventoryController, \uEE67 magazine, \uEDED sourceAmmo, int count, bool elite, float loadOneAmmoSpeed)
				{
					this.\uE000 = inventoryController;
					this.\uE001 = magazine;
					this.\uE002 = sourceAmmo;
					this.\uE003 = count;
					this.\uE004 = elite;
					this.\uE005 = loadOneAmmoSpeed;
					this.\uE009 = loadOneAmmoSpeed;
					this.\uE006 = this.\uE001.Parent.GetOwner();
					this.\uE007 = this.\uE002.Parent.GetOwner();
				}

				// Token: 0x06008F51 RID: 36689 RVA: 0x002E58E4 File Offset: 0x002E3AE4
				public Task<IResult> Start()
				{
					Player.PlayerInventoryController.\uE001.\uE003 uE;
					uE.<>t__builder = AsyncTaskMethodBuilder<IResult>.Create();
					uE.<>4__this = this;
					uE.<>1__state = -1;
					uE.<>t__builder.Start<Player.PlayerInventoryController.\uE001.\uE003>(ref uE);
					return uE.<>t__builder.Task;
				}

				// Token: 0x06008F52 RID: 36690 RVA: 0x002E5934 File Offset: 0x002E3B34
				public void Proceed(bool success = true)
				{
					CancellationTokenSource uE = this.\uE008;
					if (uE == null || uE.IsCancellationRequested)
					{
						return;
					}
					this.\uE000();
					this.\uE001(success ? CommandStatus.Succeed : CommandStatus.Failed);
					this.\uE003(false);
				}

				// Token: 0x06008F53 RID: 36691 RVA: 0x002E596C File Offset: 0x002E3B6C
				private void \uE000()
				{
					if (this.\uE008 == null)
					{
						return;
					}
					this.\uE008.Cancel(false);
					this.\uE008.Dispose();
					this.\uE008 = null;
				}

				// Token: 0x06008F54 RID: 36692 RVA: 0x002E599C File Offset: 0x002E3B9C
				public void TryProceedForItem(Item item)
				{
					if (this.\uE001 != item)
					{
						if (this.\uE002 != item)
						{
							return;
						}
					}
					this.Proceed(true);
				}

				// Token: 0x06008F55 RID: 36693 RVA: 0x002E59C0 File Offset: 0x002E3BC0
				private void \uE001(CommandStatus status)
				{
					\uEEDD args = new \uEEDD(this.\uE002, this.\uE001, this.\uE003, this.\uE005, status, this.\uE000);
					this.\uE006.RaiseLoadMagazineEvent(args);
					if (this.\uE006 != this.\uE000)
					{
						this.\uE000.RaiseLoadMagazineEvent(args);
					}
					if (this.\uE007 != this.\uE006)
					{
						this.\uE007.RaiseLoadMagazineEvent(args);
					}
				}

				// Token: 0x06008F56 RID: 36694 RVA: 0x002E5A40 File Offset: 0x002E3C40
				private Task<IResult> \uE002()
				{
					Player.PlayerInventoryController.\uE001.\uE002 uE;
					uE.<>t__builder = AsyncTaskMethodBuilder<IResult>.Create();
					uE.<>4__this = this;
					uE.<>1__state = -1;
					uE.<>t__builder.Start<Player.PlayerInventoryController.\uE001.\uE002>(ref uE);
					return uE.<>t__builder.Task;
				}

				// Token: 0x06008F57 RID: 36695 RVA: 0x002E5A90 File Offset: 0x002E3C90
				private void \uE003(bool refreshIcon = false)
				{
					if (this.\uE002.CurrentAddress != null)
					{
						this.\uE002.RaiseRefreshEvent(refreshIcon, true);
					}
					this.\uE001.RaiseRefreshEvent(refreshIcon, true);
				}

				// Token: 0x06008F58 RID: 36696 RVA: 0x002E5AC0 File Offset: 0x002E3CC0
				private void \uE004()
				{
					if (!Singleton<GUISounds>.Instantiated)
					{
						return;
					}
					Singleton<GUISounds>.Instance.PlayUILoadSound();
				}

				// Token: 0x06008F59 RID: 36697 RVA: 0x002E5AD4 File Offset: 0x002E3CD4
				[CompilerGenerated]
				private Task \uE005()
				{
					return Task.Delay(Mathf.CeilToInt(this.\uE009 * 1000f));
				}

				// Token: 0x040084FB RID: 34043
				private readonly InventoryController \uE000;

				// Token: 0x040084FC RID: 34044
				private readonly \uEE67 \uE001;

				// Token: 0x040084FD RID: 34045
				private readonly \uEDED \uE002;

				// Token: 0x040084FE RID: 34046
				private readonly int \uE003;

				// Token: 0x040084FF RID: 34047
				private readonly bool \uE004;

				// Token: 0x04008500 RID: 34048
				private readonly float \uE005;

				// Token: 0x04008501 RID: 34049
				private readonly IItemOwner \uE006;

				// Token: 0x04008502 RID: 34050
				private readonly IItemOwner \uE007;

				// Token: 0x04008503 RID: 34051
				private CancellationTokenSource \uE008;

				// Token: 0x04008504 RID: 34052
				private float \uE009;

				// Token: 0x0200167C RID: 5756
				[CompilerGenerated]
				private sealed class \uE000
				{
					// Token: 0x06008F5B RID: 36699 RVA: 0x002E5AF4 File Offset: 0x002E3CF4
					internal void \uE000()
					{
						this.cancellationHandlerSource.Succeed();
					}

					// Token: 0x04008505 RID: 34053
					public TaskCompletionSource<IResult> cancellationHandlerSource;
				}

				// Token: 0x0200167D RID: 5757
				[CompilerGenerated]
				private sealed class \uE001
				{
					// Token: 0x06008F5D RID: 36701 RVA: 0x002E5B0C File Offset: 0x002E3D0C
					internal void \uE000(IResult res)
					{
						this.executionSource.SetResult(res);
					}

					// Token: 0x04008506 RID: 34054
					public TaskCompletionSource<IResult> executionSource;
				}
			}

			// Token: 0x02001680 RID: 5760
			private sealed class \uE002 : \uEF42
			{
				// Token: 0x17001495 RID: 5269
				// (get) Token: 0x06008F62 RID: 36706 RVA: 0x002E5F4C File Offset: 0x002E414C
				private bool \uE00A
				{
					get
					{
						CancellationTokenSource uE = this.\uE007;
						return uE == null || uE.IsCancellationRequested;
					}
				}

				// Token: 0x06008F63 RID: 36707 RVA: 0x002E5F60 File Offset: 0x002E4160
				public \uE002(InventoryController inventoryController, \uEE67 magazine, float loadOneAmmoSpeed, bool elite)
				{
					this.\uE000 = inventoryController;
					this.\uE001 = magazine;
					this.\uE003 = loadOneAmmoSpeed;
					this.\uE002 = elite;
					this.\uE005 = loadOneAmmoSpeed;
					this.\uE004 = Enumerable.Sum<Item>(this.\uE001.Cartridges.Items, new Func<Item, int>(Player.PlayerInventoryController.\uE002.<>c.<>9.\uE000));
					this.\uE006 = this.\uE004;
				}

				// Token: 0x06008F64 RID: 36708 RVA: 0x002E5FF4 File Offset: 0x002E41F4
				public Task<IResult> Start()
				{
					Player.PlayerInventoryController.\uE002.\uE002 uE;
					uE.<>t__builder = AsyncTaskMethodBuilder<IResult>.Create();
					uE.<>4__this = this;
					uE.<>1__state = -1;
					uE.<>t__builder.Start<Player.PlayerInventoryController.\uE002.\uE002>(ref uE);
					return uE.<>t__builder.Task;
				}

				// Token: 0x06008F65 RID: 36709 RVA: 0x002E6044 File Offset: 0x002E4244
				private void \uE000()
				{
					if (this.\uE007 == null)
					{
						return;
					}
					this.\uE007.Cancel(false);
					this.\uE007.Dispose();
					this.\uE007 = null;
				}

				// Token: 0x06008F66 RID: 36710 RVA: 0x002E6074 File Offset: 0x002E4274
				public void Proceed(bool success)
				{
					CancellationTokenSource uE = this.\uE007;
					if (uE == null || uE.IsCancellationRequested)
					{
						return;
					}
					this.\uE000();
					this.\uE003(success ? CommandStatus.Succeed : CommandStatus.Failed);
				}

				// Token: 0x06008F67 RID: 36711 RVA: 0x002E60A4 File Offset: 0x002E42A4
				public void TryProceedForItem(Item item)
				{
					if (this.\uE001 != item && this.\uE008 != item)
					{
						if (this.\uE009 != item)
						{
							return;
						}
					}
					this.Proceed(true);
				}

				// Token: 0x06008F68 RID: 36712 RVA: 0x002E60D0 File Offset: 0x002E42D0
				private void \uE001()
				{
					if (!Singleton<GUISounds>.Instantiated)
					{
						return;
					}
					Singleton<GUISounds>.Instance.PlayUIUnloadSound();
				}

				// Token: 0x06008F69 RID: 36713 RVA: 0x002E60E4 File Offset: 0x002E42E4
				private Task<IResult> \uE002()
				{
					Player.PlayerInventoryController.\uE002.\uE003 uE;
					uE.<>t__builder = AsyncTaskMethodBuilder<IResult>.Create();
					uE.<>4__this = this;
					uE.<>1__state = -1;
					uE.<>t__builder.Start<Player.PlayerInventoryController.\uE002.\uE003>(ref uE);
					return uE.<>t__builder.Task;
				}

				// Token: 0x06008F6A RID: 36714 RVA: 0x002E6134 File Offset: 0x002E4334
				private void \uE003(CommandStatus status)
				{
					IItemOwner owner = this.\uE001.Parent.GetOwner();
					\uEEDE args = new \uEEDE(this.\uE008, this.\uE009, this.\uE001, this.\uE004 - this.\uE006, this.\uE006, this.\uE003, status, this.\uE000);
					owner.RaiseUnloadMagazineEvent(args);
					if (owner != this.\uE000)
					{
						this.\uE000.RaiseUnloadMagazineEvent(args);
					}
				}

				// Token: 0x06008F6B RID: 36715 RVA: 0x002E61A4 File Offset: 0x002E43A4
				[CompilerGenerated]
				private Task \uE004()
				{
					return Task.Delay(Mathf.CeilToInt(this.\uE005 * 1000f));
				}

				// Token: 0x04008513 RID: 34067
				private readonly InventoryController \uE000;

				// Token: 0x04008514 RID: 34068
				private readonly \uEE67 \uE001;

				// Token: 0x04008515 RID: 34069
				private readonly bool \uE002;

				// Token: 0x04008516 RID: 34070
				private readonly float \uE003;

				// Token: 0x04008517 RID: 34071
				private readonly int \uE004;

				// Token: 0x04008518 RID: 34072
				private float \uE005;

				// Token: 0x04008519 RID: 34073
				private int \uE006;

				// Token: 0x0400851A RID: 34074
				private CancellationTokenSource \uE007;

				// Token: 0x0400851B RID: 34075
				private Item \uE008;

				// Token: 0x0400851C RID: 34076
				private Item \uE009;

				// Token: 0x02001682 RID: 5762
				[CompilerGenerated]
				private sealed class \uE000
				{
					// Token: 0x06008F70 RID: 36720 RVA: 0x002E61E0 File Offset: 0x002E43E0
					internal void \uE000()
					{
						this.cancellationHandlerSource.Succeed();
					}

					// Token: 0x0400851F RID: 34079
					public TaskCompletionSource<IResult> cancellationHandlerSource;
				}

				// Token: 0x02001683 RID: 5763
				[CompilerGenerated]
				private sealed class \uE001
				{
					// Token: 0x06008F72 RID: 36722 RVA: 0x002E61F8 File Offset: 0x002E43F8
					internal void \uE000(IResult executeResult)
					{
						this.executionSource.SetResult(executeResult);
					}

					// Token: 0x04008520 RID: 34080
					public TaskCompletionSource<IResult> executionSource;
				}
			}

			// Token: 0x02001687 RID: 5767
			[CompilerGenerated]
			private sealed class \uE003
			{
				// Token: 0x06008F7E RID: 36734 RVA: 0x002E67D0 File Offset: 0x002E49D0
				internal bool \uE000(\uEDBE localItem)
				{
					return !this.<>4__this.\uE005.Contains(localItem) && (!this.<>4__this.\uE001(localItem, this.ignoreRestrictions) || localItem.NotShownInSlot);
				}

				// Token: 0x04008532 RID: 34098
				public Player.PlayerInventoryController <>4__this;

				// Token: 0x04008533 RID: 34099
				public bool ignoreRestrictions;
			}

			// Token: 0x02001688 RID: 5768
			[CompilerGenerated]
			private sealed class \uE004
			{
				// Token: 0x06008F80 RID: 36736 RVA: 0x002E6814 File Offset: 0x002E4A14
				internal void \uE000(Item itemToSubtract)
				{
					if (!itemToSubtract.LimitedDiscard)
					{
						return;
					}
					MongoID templateId = itemToSubtract.TemplateId;
					int num = this.<>4__this.DiscardLimits[templateId];
					int num3;
					int num2 = this.\uE001(itemToSubtract, out num3) ? num3 : itemToSubtract.StackObjectsCount;
					if (num2 == 0)
					{
						return;
					}
					Dictionary<MongoID, int> discardLimits = this.<>4__this.DiscardLimits;
					MongoID key = templateId;
					discardLimits[key] -= num2;
					this.<>4__this.LogDiscardLimitsChange(itemToSubtract.Template, -num2);
				}

				// Token: 0x06008F81 RID: 36737 RVA: 0x002E68A4 File Offset: 0x002E4AA4
				internal bool \uE001(Item localItem, out int preservedNumber)
				{
					foreach (\uEED0 uEED in this.destroyedItems)
					{
						Item item;
						int num;
						int num2;
						uEED.Deconstruct(out item, out num, out num2);
						Item item2 = item;
						int num3 = num2;
						if (localItem == item2)
						{
							preservedNumber = num3;
							return true;
						}
					}
					preservedNumber = 0;
					return false;
				}

				// Token: 0x06008F82 RID: 36738 RVA: 0x002E6924 File Offset: 0x002E4B24
				internal bool \uE002(Item localItem)
				{
					foreach (\uEED0 uEED in this.destroyedItems)
					{
						Item item;
						int num;
						int num2;
						uEED.Deconstruct(out item, out num, out num2);
						Item item2 = item;
						int num3 = num2;
						if (localItem == item2)
						{
							return num3 > 0;
						}
					}
					return true;
				}

				// Token: 0x04008534 RID: 34100
				public Player.PlayerInventoryController <>4__this;

				// Token: 0x04008535 RID: 34101
				public IEnumerable<\uEED0> destroyedItems;
			}

			// Token: 0x02001689 RID: 5769
			[CompilerGenerated]
			private sealed class \uE005
			{
				// Token: 0x06008F84 RID: 36740 RVA: 0x002E69A4 File Offset: 0x002E4BA4
				internal void \uE000(Item itemToAdd)
				{
					if (!itemToAdd.LimitedDiscard)
					{
						return;
					}
					int num = itemToAdd.StackObjectsCount;
					foreach (\uEED0 uEED in this.destroyedItems)
					{
						Item item;
						int num2;
						int num3;
						uEED.Deconstruct(out item, out num2, out num3);
						Item item2 = item;
						int num4 = num3;
						if (item2 == itemToAdd)
						{
							num = num4;
							break;
						}
					}
					if (num == 0)
					{
						return;
					}
					Dictionary<MongoID, int> discardLimits = this.<>4__this.DiscardLimits;
					MongoID templateId = itemToAdd.TemplateId;
					discardLimits[templateId] += num;
					this.<>4__this.LogDiscardLimitsChange(itemToAdd.Template, num);
				}

				// Token: 0x06008F85 RID: 36741 RVA: 0x002E6A64 File Offset: 0x002E4C64
				internal bool \uE001(Item localItem)
				{
					foreach (\uEED0 uEED in this.destroyedItems)
					{
						Item item;
						int num;
						int num2;
						uEED.Deconstruct(out item, out num, out num2);
						Item item2 = item;
						int num3 = num2;
						if (localItem == item2)
						{
							return num3 > 0;
						}
					}
					return true;
				}

				// Token: 0x04008536 RID: 34102
				public IEnumerable<\uEED0> destroyedItems;

				// Token: 0x04008537 RID: 34103
				public Player.PlayerInventoryController <>4__this;
			}

			// Token: 0x0200168A RID: 5770
			[CompilerGenerated]
			private sealed class \uE006
			{
				// Token: 0x06008F87 RID: 36743 RVA: 0x002E6AE4 File Offset: 0x002E4CE4
				internal void \uE000(IResult result)
				{
					ItemAddress currentAddress = this.magazine.CurrentAddress;
					IItemOwner itemOwner = (currentAddress != null) ? currentAddress.GetOwnerOrNull() : null;
					if (itemOwner == null)
					{
						return;
					}
					if (result.Succeed)
					{
						this.<>4__this.StrictCheckMagazine(this.magazine, true, this.<>4__this.Profile.MagDrillsMastering, this.notify, true);
						if (Singleton<GUISounds>.Instantiated)
						{
							Singleton<GUISounds>.Instance.PlayItemSound(this.magazine.ItemSound, EInventorySoundType.drop, false);
						}
					}
					else
					{
						Debug.Log(\uF1F8.\uE000(139987));
					}
					itemOwner.RaiseInventoryCheckMagazine(this.magazine, this.speed, false);
				}

				// Token: 0x04008538 RID: 34104
				public \uEE67 magazine;

				// Token: 0x04008539 RID: 34105
				public Player.PlayerInventoryController <>4__this;

				// Token: 0x0400853A RID: 34106
				public bool notify;

				// Token: 0x0400853B RID: 34107
				public float speed;
			}

			// Token: 0x0200168B RID: 5771
			[CompilerGenerated]
			private sealed class \uE007
			{
				// Token: 0x06008F89 RID: 36745 RVA: 0x002E6BA4 File Offset: 0x002E4DA4
				internal \uEF00 \uE000(\uEDC3 grid)
				{
					return grid.FindLocationForItem(this.containedAmmo);
				}

				// Token: 0x06008F8A RID: 36746 RVA: 0x002E6BB4 File Offset: 0x002E4DB4
				internal void \uE001(IResult result)
				{
					this.taskSource.SetResult(result);
				}

				// Token: 0x0400853C RID: 34108
				public \uEDED containedAmmo;

				// Token: 0x0400853D RID: 34109
				public TaskCompletionSource<IResult> taskSource;
			}

			// Token: 0x0200168C RID: 5772
			[CompilerGenerated]
			private sealed class \uE008
			{
				// Token: 0x06008F8C RID: 36748 RVA: 0x002E6BCC File Offset: 0x002E4DCC
				internal void \uE000(IResult result)
				{
					this.taskSource.SetResult(result);
				}

				// Token: 0x06008F8D RID: 36749 RVA: 0x002E6BDC File Offset: 0x002E4DDC
				internal void \uE001(IResult result)
				{
					this.taskSource.SetResult(result);
				}

				// Token: 0x0400853E RID: 34110
				public TaskCompletionSource<IResult> taskSource;
			}

			// Token: 0x0200168D RID: 5773
			[CompilerGenerated]
			private sealed class \uE009
			{
				// Token: 0x06008F8F RID: 36751 RVA: 0x002E6BF4 File Offset: 0x002E4DF4
				internal void \uE000(IResult result)
				{
					if (result.Failed)
					{
						Debug.LogError(result.Error);
					}
					this.callback(result);
				}

				// Token: 0x0400853F RID: 34111
				public Callback callback;
			}
		}

		// Token: 0x02001694 RID: 5780
		public static class \uE003
		{
			// Token: 0x04008569 RID: 34153
			public const float SPEED_MIN = 0f;

			// Token: 0x0400856A RID: 34154
			public const float SPEED_MAX = 0.7f;

			// Token: 0x0400856B RID: 34155
			public const float MAX_SPRINTING_SPEED = 2f;

			// Token: 0x0400856C RID: 34156
			public const float SPEED_MAX_DELTA = 0.3f;

			// Token: 0x0400856D RID: 34157
			public static readonly int FIRST_PERSON_ACTION = Animator.StringToHash(\uF1F8.\uE000(168820));

			// Token: 0x0400856E RID: 34158
			public static readonly Vector2 STAND_POSE_ROTATION_PITCH_RANGE = new Vector2(-90f, 90f);

			// Token: 0x0400856F RID: 34159
			public static readonly Vector2 PRONE_POSE_ROTATION_PITCH_RANGE = new Vector2(-16f, 25f);

			// Token: 0x04008570 RID: 34160
			public static readonly Vector2 ROLL_POSE_ROTATION_PITCH_RANGE = new Vector2(-16f, 2f);

			// Token: 0x04008571 RID: 34161
			public static readonly Vector2 FULL_YAW_RANGE = new Vector2(-360f, 360f);

			// Token: 0x04008572 RID: 34162
			public const float POSE_RANGE_MIN = 0f;

			// Token: 0x04008573 RID: 34163
			public const float POSE_RANGE_MAX = 1f;

			// Token: 0x04008574 RID: 34164
			public const float POSE_THRESHOLD = 0.5f;

			// Token: 0x04008575 RID: 34165
			public const float TILT_RANGE_MIN = -5f;

			// Token: 0x04008576 RID: 34166
			public const float TILT_RANGE_MAX = 5f;

			// Token: 0x04008577 RID: 34167
			public const int STEP_RANGE_MIN = -1;

			// Token: 0x04008578 RID: 34168
			public const int STEP_RANGE_MAX = 1;

			// Token: 0x04008579 RID: 34169
			public const float LEAN_SPEED = 5f;

			// Token: 0x0400857A RID: 34170
			public const float SLOW_LEEN_SPEED = 0.1f;
		}

		// Token: 0x02001695 RID: 5781
		public enum EMouseSensitivityModifier
		{
			// Token: 0x0400857C RID: 34172
			Armor
		}

		// Token: 0x02001696 RID: 5782
		public enum LeanType
		{
			// Token: 0x0400857E RID: 34174
			NormalLean,
			// Token: 0x0400857F RID: 34175
			SlowLean
		}

		// Token: 0x02001697 RID: 5783
		public enum ESpeedLimit
		{
			// Token: 0x04008581 RID: 34177
			BarbedWire,
			// Token: 0x04008582 RID: 34178
			HealthCondition,
			// Token: 0x04008583 RID: 34179
			Aiming,
			// Token: 0x04008584 RID: 34180
			Weight,
			// Token: 0x04008585 RID: 34181
			SurfaceNormal,
			// Token: 0x04008586 RID: 34182
			Swamp,
			// Token: 0x04008587 RID: 34183
			Shot,
			// Token: 0x04008588 RID: 34184
			Armor,
			// Token: 0x04008589 RID: 34185
			Fall
		}

		// Token: 0x02001698 RID: 5784
		[Serializable]
		public class ValueBlender
		{
			// Token: 0x06008FA4 RID: 36772 RVA: 0x002E7A18 File Offset: 0x002E5C18
			public ValueBlender(int defaultValue = 0)
			{
				this._target = (float)defaultValue;
				this._startValue = (float)defaultValue;
			}

			// Token: 0x17001498 RID: 5272
			// (get) Token: 0x06008FA5 RID: 36773 RVA: 0x002E7A44 File Offset: 0x002E5C44
			// (set) Token: 0x06008FA6 RID: 36774 RVA: 0x002E7A4C File Offset: 0x002E5C4C
			public virtual float Target
			{
				get
				{
					return this._target;
				}
				set
				{
					if (this.Target == value)
					{
						return;
					}
					this._startValue = this.Value;
					this._startTime = Time.time;
					this._target = value;
				}
			}

			// Token: 0x17001499 RID: 5273
			// (get) Token: 0x06008FA7 RID: 36775 RVA: 0x002E7A7C File Offset: 0x002E5C7C
			// (set) Token: 0x06008FA8 RID: 36776 RVA: 0x002E7AB0 File Offset: 0x002E5CB0
			public virtual float Value
			{
				get
				{
					return Mathf.Clamp01(this._startValue + (Time.time - this._startTime) * this.Speed * Mathf.Sign(this._target - 0.5f));
				}
				set
				{
					this._startTime = Time.time;
					this._startValue = value;
				}
			}

			// Token: 0x0400858A RID: 34186
			protected float _target;

			// Token: 0x0400858B RID: 34187
			protected float _startTime;

			// Token: 0x0400858C RID: 34188
			protected float _startValue;

			// Token: 0x0400858D RID: 34189
			public float Speed = 1f;
		}

		// Token: 0x02001699 RID: 5785
		[Serializable]
		public class BetterValueBlender : Player.ValueBlender
		{
			// Token: 0x1700149A RID: 5274
			// (get) Token: 0x06008FA9 RID: 36777 RVA: 0x002E7AC4 File Offset: 0x002E5CC4
			// (set) Token: 0x06008FAA RID: 36778 RVA: 0x002E7B68 File Offset: 0x002E5D68
			public override float Value
			{
				get
				{
					float num = Mathf.Max(0f, Time.time - this._startTime);
					if (this._startValue <= this.Target)
					{
						return Mathf.Clamp(this._startValue + num * this.Speed * Mathf.Sign(this.Target - this._startValue), this._startValue, this.Target);
					}
					return Mathf.Clamp(this._startValue + num * this.Speed * Mathf.Sign(this.Target - this._startValue), this.Target, this._startValue);
				}
				set
				{
					this._startValue = value;
					this._target = value;
					this._startTime = Time.time;
				}
			}

			// Token: 0x06008FAB RID: 36779 RVA: 0x002E7B8C File Offset: 0x002E5D8C
			public void ChangeValue(float value, float delay)
			{
				this._startTime = Time.time + delay;
				this._startValue = value;
			}

			// Token: 0x06008FAC RID: 36780 RVA: 0x002E7BA4 File Offset: 0x002E5DA4
			public BetterValueBlender() : base(0)
			{
			}
		}

		// Token: 0x0200169A RID: 5786
		[Serializable]
		public class ValueBlenderDelay : Player.ValueBlender
		{
			// Token: 0x1700149B RID: 5275
			// (get) Token: 0x06008FAD RID: 36781 RVA: 0x002E7BB0 File Offset: 0x002E5DB0
			// (set) Token: 0x06008FAE RID: 36782 RVA: 0x002E7BB8 File Offset: 0x002E5DB8
			public override float Target
			{
				get
				{
					return this._target;
				}
				set
				{
					if (this.Target == value)
					{
						return;
					}
					this._startValue = this.Value;
					this._startTime = Time.time + this.Delay;
					this._target = value;
				}
			}

			// Token: 0x06008FAF RID: 36783 RVA: 0x002E7BF0 File Offset: 0x002E5DF0
			public ValueBlenderDelay() : base(0)
			{
			}

			// Token: 0x0400858E RID: 34190
			public float Delay;
		}

		// Token: 0x0200169B RID: 5787
		// (Invoke) Token: 0x06008FB1 RID: 36785
		public delegate void \uE004(float damage, EBodyPart part, EDamageType type, float absorbed, MaterialType special);

		// Token: 0x0200169C RID: 5788
		public class \uE005
		{
			// Token: 0x06008FB4 RID: 36788 RVA: 0x002E7BFC File Offset: 0x002E5DFC
			public void RemovePhysics()
			{
				if (this.Transportee)
				{
					UnityEngine.Object.Destroy(this.Transportee);
				}
			}

			// Token: 0x06008FB5 RID: 36789 RVA: 0x002E7C18 File Offset: 0x002E5E18
			public void RestoreShift()
			{
				foreach (object obj in this.Transform)
				{
					((Transform)obj).localPosition += this.Shift;
				}
			}

			// Token: 0x06008FB6 RID: 36790 RVA: 0x002E7C80 File Offset: 0x002E5E80
			public void Destroy()
			{
				this.RemovePhysics();
				this.RestoreShift();
				this.Transform = null;
				this.Transportee = null;
			}

			// Token: 0x0400858F RID: 34191
			public Vector3 Shift;

			// Token: 0x04008590 RID: 34192
			public Transform Transform;

			// Token: 0x04008591 RID: 34193
			public CommonTransportee Transportee;
		}

		// Token: 0x0200169D RID: 5789
		internal class EmptyHandsController : Player.ItemHandsController, \uE829, \uE827, \uE828
		{
			// Token: 0x1700149C RID: 5276
			// (get) Token: 0x06008FB8 RID: 36792 RVA: 0x002E7CAC File Offset: 0x002E5EAC
			protected new Player.EmptyHandsController.\uE001 \uE003
			{
				get
				{
					return base.CurrentHandsOperation as Player.EmptyHandsController.\uE001;
				}
			}

			// Token: 0x1700149D RID: 5277
			// (get) Token: 0x06008FB9 RID: 36793 RVA: 0x002E7CBC File Offset: 0x002E5EBC
			protected virtual bool \uE004
			{
				get
				{
					return true;
				}
			}

			// Token: 0x1700149E RID: 5278
			// (get) Token: 0x06008FBA RID: 36794 RVA: 0x002E7CC0 File Offset: 0x002E5EC0
			public override FirearmsAnimator FirearmsAnimator
			{
				get
				{
					return this.\uE001;
				}
			}

			// Token: 0x1700149F RID: 5279
			// (get) Token: 0x06008FBB RID: 36795 RVA: 0x002E7CC8 File Offset: 0x002E5EC8
			public override string LoggerDistinctId
			{
				get
				{
					return string.Format(\uF1F8.\uE000(139683), this._player.ProfileId, this._player.Profile.Info.Nickname, this);
				}
			}

			// Token: 0x170014A0 RID: 5280
			// (get) Token: 0x06008FBC RID: 36796 RVA: 0x002E7CFC File Offset: 0x002E5EFC
			public new \uEEF2 Item
			{
				get
				{
					return base.Item as \uEEF2;
				}
			}

			// Token: 0x06008FBD RID: 36797 RVA: 0x002E7D0C File Offset: 0x002E5F0C
			public override float GetAnimatorFloatParam(int hash)
			{
				return this.\uE001.GetAnimatorParameter(hash);
			}

			// Token: 0x06008FBE RID: 36798 RVA: 0x002E7D1C File Offset: 0x002E5F1C
			public override bool SupportPickup()
			{
				return true;
			}

			// Token: 0x06008FBF RID: 36799 RVA: 0x002E7D20 File Offset: 0x002E5F20
			public override void Pickup(bool p)
			{
				this.\uE001.SetPickup(p);
			}

			// Token: 0x06008FC0 RID: 36800 RVA: 0x002E7D30 File Offset: 0x002E5F30
			public override void Interact(bool isInteracting, int actionIndex)
			{
				this._player.SendHandsInteractionStateChanged(isInteracting, actionIndex);
				this.\uE001.SetInteract(isInteracting, actionIndex);
			}

			// Token: 0x06008FC1 RID: 36801 RVA: 0x002E7D4C File Offset: 0x002E5F4C
			public override void SetInventoryOpened(bool opened)
			{
				if (opened)
				{
					this.SetCompassState(false);
				}
				this.\uE003.SetInventoryOpened(opened);
				MovementState currentManagedState = this._player.CurrentManagedState;
				if (currentManagedState == null)
				{
					return;
				}
				currentManagedState.OnInventory(opened);
			}

			// Token: 0x06008FC2 RID: 36802 RVA: 0x002E7D80 File Offset: 0x002E5F80
			public override void Loot(bool p)
			{
				this.\uE001.SetLooting(p);
			}

			// Token: 0x06008FC3 RID: 36803 RVA: 0x002E7D90 File Offset: 0x002E5F90
			public override bool IsInInteraction()
			{
				return this.\uE001.IsInInteraction;
			}

			// Token: 0x06008FC4 RID: 36804 RVA: 0x002E7DA0 File Offset: 0x002E5FA0
			public override bool IsInInteractionStrictCheck()
			{
				if (!this.IsInInteraction())
				{
					if (this.\uE001.GetLayerWeight(this.\uE001.LACTIONS_LAYER_INDEX) < 1E-45f)
					{
						return this.\uE001.Animator.IsInTransition(this.\uE001.LACTIONS_LAYER_INDEX);
					}
				}
				return true;
			}

			// Token: 0x06008FC5 RID: 36805 RVA: 0x002E7DF8 File Offset: 0x002E5FF8
			public override void Destroy()
			{
				base.SetPropVisibility(false);
				this._player.ProceduralWeaponAnimation.ClearPreviousWeapon();
				base.Destroy();
				this.\uE001 = null;
				AssetPoolObject.ReturnToPool(this._controllerObject.gameObject, true);
			}

			// Token: 0x06008FC6 RID: 36806 RVA: 0x002E7E48 File Offset: 0x002E6048
			public override bool CanExecute(\uEF5F operation)
			{
				return this.\uE003.CanExecute(operation);
			}

			// Token: 0x06008FC7 RID: 36807 RVA: 0x002E7E58 File Offset: 0x002E6058
			public override void Execute(\uEF5F operation, Callback callback)
			{
				this.\uE003.Execute(operation, callback);
			}

			// Token: 0x06008FC8 RID: 36808 RVA: 0x002E7E68 File Offset: 0x002E6068
			public virtual void ExamineWeapon()
			{
				this.\uE003.ExamineWeapon();
			}

			// Token: 0x06008FC9 RID: 36809 RVA: 0x002E7E78 File Offset: 0x002E6078
			public override void SetCompassState(bool active)
			{
				if (this.CanChangeCompassState(active))
				{
					this.\uE003.SetEmptyHandsCompassState(active);
				}
			}

			// Token: 0x06008FCA RID: 36810 RVA: 0x002E7E90 File Offset: 0x002E6090
			public override bool CanRemove()
			{
				return true;
			}

			// Token: 0x06008FCB RID: 36811 RVA: 0x002E7E94 File Offset: 0x002E6094
			public override void ShowGesture(EInteraction gesture)
			{
				if (gesture != EInteraction.None)
				{
					this.\uE001.Gesture(gesture);
				}
			}

			// Token: 0x06008FCC RID: 36812 RVA: 0x002E7EA8 File Offset: 0x002E60A8
			internal new static \uE084 \uE000<\uE084>(Player player) where \uE084 : Player.EmptyHandsController
			{
				\uEEF2 item = new \uEEF2(MongoID.Generate(true), new \uEEF1());
				\uE084 uE = Player.ItemHandsController.\uE000<\uE084>(player, item);
				Player.EmptyHandsController.\uE002<\uE084>(uE, player);
				return uE;
			}

			// Token: 0x06008FCD RID: 36813 RVA: 0x002E7EDC File Offset: 0x002E60DC
			internal new static Task<\uE084> \uE001<\uE084>(Player player) where \uE084 : Player.EmptyHandsController
			{
				Player.EmptyHandsController.\uE00A<\uE084> uE00A;
				uE00A.<>t__builder = AsyncTaskMethodBuilder<\uE084>.Create();
				uE00A.player = player;
				uE00A.<>1__state = -1;
				uE00A.<>t__builder.Start<Player.EmptyHandsController.\uE00A<\uE084>>(ref uE00A);
				return uE00A.<>t__builder.Task;
			}

			// Token: 0x06008FCE RID: 36814 RVA: 0x002E7F2C File Offset: 0x002E612C
			private static void \uE002<\uE084>(\uE084 controller, Player player) where \uE084 : Player.EmptyHandsController
			{
				Player.EmptyHandsController.\uE006<\uE084> uE = new Player.EmptyHandsController.\uE006<\uE084>();
				uE.controller = controller;
				WeaponPrefab componentInChildren = uE.controller._controllerObject.GetComponentInChildren<WeaponPrefab>();
				uE.controller.\uE000 = componentInChildren.ObjectInHands;
				uE.controller._controllerObject.transform.SetParent(player.PlayerBones.WeaponRoot.Original.parent);
				player.ProceduralWeaponAnimation.ClearPreviousWeapon();
				player.ProceduralWeaponAnimation.InitTransforms(uE.controller.HandsHierarchy, null);
				uE.controller.\uE000.AfterGetFromPoolInit(uE.controller._player.ProceduralWeaponAnimation, null, player.IsYourPlayer);
				uE.controller.\uE001 = componentInChildren.FirearmsAnimator;
				uE.controller.\uE001.AddEventsConsumer(uE.controller);
				uE.controller.CompositeDisposable.AddDisposable(new Action(uE.\uE000));
				uE.controller._player.HandsAnimator = uE.controller.\uE001;
			}

			// Token: 0x06008FCF RID: 36815 RVA: 0x002E809C File Offset: 0x002E629C
			protected override void IEventsConsumerOnWeapIn()
			{
				this.\uE004();
			}

			// Token: 0x06008FD0 RID: 36816 RVA: 0x002E80A4 File Offset: 0x002E62A4
			protected override void IEventsConsumerOnWeapOut()
			{
				this.\uE003();
			}

			// Token: 0x06008FD1 RID: 36817 RVA: 0x002E80AC File Offset: 0x002E62AC
			protected override void IEventsConsumerOnThirdAction(int intParam)
			{
				base.TranslateAnimatorParameter(intParam);
			}

			// Token: 0x06008FD2 RID: 36818 RVA: 0x002E80B8 File Offset: 0x002E62B8
			protected override void IEventsOnBackpackDrop()
			{
				this.\uE005();
			}

			// Token: 0x06008FD3 RID: 36819 RVA: 0x002E80C0 File Offset: 0x002E62C0
			protected override void IEventsConsumerOnOnUseProp(bool boolParam)
			{
				base.SetPropVisibility(boolParam);
			}

			// Token: 0x06008FD4 RID: 36820 RVA: 0x002E80CC File Offset: 0x002E62CC
			public override bool IsInventoryOpen()
			{
				return this._objectInHandsAnimator.IsInInventory;
			}

			// Token: 0x06008FD5 RID: 36821 RVA: 0x002E80DC File Offset: 0x002E62DC
			public override void FastForwardCurrentState()
			{
				this.\uE003.FastForward();
			}

			// Token: 0x06008FD6 RID: 36822 RVA: 0x002E80EC File Offset: 0x002E62EC
			private void \uE003()
			{
				this.\uE003.HideWeaponComplete();
			}

			// Token: 0x06008FD7 RID: 36823 RVA: 0x002E80FC File Offset: 0x002E62FC
			private void \uE004()
			{
				this.\uE003.WeaponAppeared();
			}

			// Token: 0x06008FD8 RID: 36824 RVA: 0x002E810C File Offset: 0x002E630C
			private void \uE005()
			{
				this.\uE003.OnBackpackDrop();
			}

			// Token: 0x06008FD9 RID: 36825 RVA: 0x002E811C File Offset: 0x002E631C
			public override void Spawn(float animationSpeed, Action callback)
			{
				Player.EmptyHandsController.\uE007 uE = new Player.EmptyHandsController.\uE007();
				uE.<>4__this = this;
				uE.callback = callback;
				this.\uE001.SetAnimationSpeed(animationSpeed);
				Action callback2 = new Action(uE.\uE000);
				base.InitiateOperation<Player.EmptyHandsController.\uE005>().Start(callback2);
			}

			// Token: 0x06008FDA RID: 36826 RVA: 0x002E8160 File Offset: 0x002E6360
			public override void ManualUpdate(float deltaTime)
			{
				base.ManualUpdate(deltaTime);
				FirearmsAnimator uE = this.\uE001;
				if (uE == null)
				{
					return;
				}
				uE.SetAimAngle(this._player.Pitch);
			}

			// Token: 0x06008FDB RID: 36827 RVA: 0x002E8184 File Offset: 0x002E6384
			public override void Drop(float animationSpeed, Action callback, bool fastDrop, Item nextControllerItem = null)
			{
				Player.EmptyHandsController.\uE008 uE = new Player.EmptyHandsController.\uE008();
				uE.callback = callback;
				if (base.Destroyed)
				{
					this.\uE003.HideWeapon(uE.callback);
					return;
				}
				base.Destroyed = true;
				Action onHidden = new Action(uE.\uE000);
				this.\uE003.HideWeapon(onHidden);
			}

			// Token: 0x06008FDC RID: 36828 RVA: 0x002E81E0 File Offset: 0x002E63E0
			private IEnumerator \uE006(Action callback)
			{
				for (;;)
				{
					int num2;
					int num = num2;
					if (num != 0)
					{
						if (num != 1)
						{
							break;
						}
					}
					if (this.\uE004)
					{
						goto Block_3;
					}
					yield return null;
				}
				yield break;
				Block_3:
				callback();
				yield break;
			}

			// Token: 0x06008FDD RID: 36829 RVA: 0x002E81F8 File Offset: 0x002E63F8
			protected override Dictionary<Type, Player.ItemHandsController.OperationFactoryDelegate> GetOperationFactoryDelegates()
			{
				return new Dictionary<Type, Player.ItemHandsController.OperationFactoryDelegate>
				{
					{
						typeof(Player.EmptyHandsController.\uE005),
						new Player.ItemHandsController.OperationFactoryDelegate(this.\uE007)
					},
					{
						typeof(Player.EmptyHandsController.\uE002),
						new Player.ItemHandsController.OperationFactoryDelegate(this.\uE008)
					},
					{
						typeof(Player.EmptyHandsController.\uE003),
						new Player.ItemHandsController.OperationFactoryDelegate(this.\uE009)
					},
					{
						typeof(Player.EmptyHandsController.\uE000),
						new Player.ItemHandsController.OperationFactoryDelegate(this.\uE00A)
					}
				};
			}

			// Token: 0x06008FDF RID: 36831 RVA: 0x002E8284 File Offset: 0x002E6484
			[CompilerGenerated]
			private Player.\uE00C \uE007()
			{
				return new Player.EmptyHandsController.\uE005(this);
			}

			// Token: 0x06008FE0 RID: 36832 RVA: 0x002E828C File Offset: 0x002E648C
			[CompilerGenerated]
			private Player.\uE00C \uE008()
			{
				return new Player.EmptyHandsController.\uE002(this);
			}

			// Token: 0x06008FE1 RID: 36833 RVA: 0x002E8294 File Offset: 0x002E6494
			[CompilerGenerated]
			private Player.\uE00C \uE009()
			{
				return new Player.EmptyHandsController.\uE003(this);
			}

			// Token: 0x06008FE2 RID: 36834 RVA: 0x002E829C File Offset: 0x002E649C
			[CompilerGenerated]
			private Player.\uE00C \uE00A()
			{
				return new Player.EmptyHandsController.\uE000(this);
			}

			// Token: 0x04008592 RID: 34194
			private new \uE868 \uE000;

			// Token: 0x04008593 RID: 34195
			private new FirearmsAnimator \uE001;

			// Token: 0x04008594 RID: 34196
			private new bool \uE002;

			// Token: 0x0200169E RID: 5790
			public new class \uE000 : Player.EmptyHandsController.\uE001
			{
				// Token: 0x06008FE3 RID: 36835 RVA: 0x002E82A4 File Offset: 0x002E64A4
				public \uE000(Player.EmptyHandsController controller) : base(controller)
				{
				}

				// Token: 0x06008FE4 RID: 36836 RVA: 0x002E82B0 File Offset: 0x002E64B0
				public virtual void Start(Item item, Callback callback)
				{
					this.\uE000 = callback;
					base.Start();
					this.\uE002.SetInventoryOpened(false);
					this.\uE002._player.SendHandsInteractionStateChanged(true, 300);
					this.\uE001.MovementContext.SetInteractInHands(EInteraction.DropBackpack);
				}

				// Token: 0x06008FE5 RID: 36837 RVA: 0x002E830C File Offset: 0x002E650C
				public override void Reset()
				{
					this.\uE000 = null;
					base.Reset();
				}

				// Token: 0x06008FE6 RID: 36838 RVA: 0x002E831C File Offset: 0x002E651C
				public override void OnBackpackDrop()
				{
					this.State = Player.EOperationState.Finished;
					this.\uE002._player.SendHandsInteractionStateChanged(false, 300);
					this.\uE001.MovementContext.SetInteractInHands(EInteraction.DropBackpack);
					this.\uE002.\uE001.SetInventory(this.\uE002.\uE002);
					\uE370.ResetTriggerHandReady(this.\uE002.\uE001.Animator);
					this.\uE002.InitiateOperation<Player.EmptyHandsController.\uE002>().Start();
					this.\uE000.Succeed();
				}

				// Token: 0x06008FE7 RID: 36839 RVA: 0x002E83B8 File Offset: 0x002E65B8
				public override void SetInventoryOpened(bool opened)
				{
					this.\uE002.\uE002 = opened;
				}

				// Token: 0x04008595 RID: 34197
				private new Callback \uE000;
			}

			// Token: 0x0200169F RID: 5791
			public new abstract class \uE001 : Player.\uE00C
			{
				// Token: 0x06008FE8 RID: 36840 RVA: 0x002E83C8 File Offset: 0x002E65C8
				protected \uE001(Player.EmptyHandsController controller) : base(controller)
				{
					this.\uE002 = controller;
					this.\uE001 = this.\uE002._player;
				}

				// Token: 0x06008FE9 RID: 36841 RVA: 0x002E83F0 File Offset: 0x002E65F0
				public new void Start()
				{
					base.Start();
				}

				// Token: 0x06008FEA RID: 36842 RVA: 0x002E83F8 File Offset: 0x002E65F8
				public virtual void HideWeaponComplete()
				{
					base.\uE000();
				}

				// Token: 0x06008FEB RID: 36843 RVA: 0x002E8400 File Offset: 0x002E6600
				public virtual void WeaponAppeared()
				{
					base.\uE000();
				}

				// Token: 0x06008FEC RID: 36844 RVA: 0x002E8408 File Offset: 0x002E6608
				public virtual void OnBackpackDrop()
				{
					base.\uE000();
				}

				// Token: 0x06008FED RID: 36845 RVA: 0x002E8410 File Offset: 0x002E6610
				public virtual void HideWeapon(Action onHidden)
				{
					base.\uE000();
				}

				// Token: 0x06008FEE RID: 36846 RVA: 0x002E8418 File Offset: 0x002E6618
				public virtual void ExamineWeapon()
				{
					base.\uE000();
				}

				// Token: 0x06008FEF RID: 36847 RVA: 0x002E8420 File Offset: 0x002E6620
				public virtual void SetEmptyHandsCompassState(bool active)
				{
					base.\uE000();
				}

				// Token: 0x06008FF0 RID: 36848 RVA: 0x002E8428 File Offset: 0x002E6628
				public virtual void FastForward()
				{
				}

				// Token: 0x06008FF1 RID: 36849 RVA: 0x002E842C File Offset: 0x002E662C
				public virtual void SetInventoryOpened(bool opened)
				{
					this.\uE002.\uE002 = opened;
					this.\uE002.\uE001.SetInventory(opened);
				}

				// Token: 0x06008FF2 RID: 36850 RVA: 0x002E844C File Offset: 0x002E664C
				public virtual bool CanExecute(\uEF5F operation)
				{
					\uEF6A uEF6A = operation as \uEF6A;
					return uEF6A == null || !this.\uE002._player.InventoryController.IsAnimatedSlot(uEF6A.From1);
				}

				// Token: 0x06008FF3 RID: 36851 RVA: 0x002E8490 File Offset: 0x002E6690
				public virtual void Execute(\uEF5F operation, Callback callback)
				{
					base.\uE000();
					\uEF6A uEF6A = operation as \uEF6A;
					if (uEF6A == null)
					{
						callback.Succeed();
						return;
					}
					if (this.\uE002._player.InventoryController.IsAnimatedSlot(uEF6A.From1))
					{
						if (callback != null)
						{
							callback.Fail(string.Format(\uF1F8.\uE000(139695), base.GetType()));
						}
						return;
					}
					callback.Succeed();
				}

				// Token: 0x04008596 RID: 34198
				protected new readonly Player \uE001;

				// Token: 0x04008597 RID: 34199
				protected readonly Player.EmptyHandsController \uE002;
			}

			// Token: 0x020016A0 RID: 5792
			public new class \uE002 : Player.EmptyHandsController.\uE001
			{
				// Token: 0x06008FF4 RID: 36852 RVA: 0x002E8508 File Offset: 0x002E6708
				public \uE002(Player.EmptyHandsController controller) : base(controller)
				{
				}

				// Token: 0x06008FF5 RID: 36853 RVA: 0x002E8514 File Offset: 0x002E6714
				public new void Start()
				{
					base.Start();
					this.\uE004 = 0f;
				}

				// Token: 0x06008FF6 RID: 36854 RVA: 0x002E8528 File Offset: 0x002E6728
				public override void Reset()
				{
					this.\uE004 = 0f;
					base.Reset();
				}

				// Token: 0x06008FF7 RID: 36855 RVA: 0x002E853C File Offset: 0x002E673C
				public override void HideWeapon(Action onHidden)
				{
					this.State = Player.EOperationState.Finished;
					this.\uE002.InitiateOperation<Player.EmptyHandsController.\uE003>().Start(onHidden);
				}

				// Token: 0x06008FF8 RID: 36856 RVA: 0x002E8558 File Offset: 0x002E6758
				public override void OnEnd()
				{
					this.\uE002.SetCompassState(false);
				}

				// Token: 0x06008FF9 RID: 36857 RVA: 0x002E8568 File Offset: 0x002E6768
				public override bool CanExecute(\uEF5F operation)
				{
					return true;
				}

				// Token: 0x06008FFA RID: 36858 RVA: 0x002E856C File Offset: 0x002E676C
				public override void Execute(\uEF5F operation, Callback callback)
				{
					\uEF6A uEF6A = operation as \uEF6A;
					if (uEF6A != null && this.\uE002._player.InventoryController.IsAnimatedSlot(uEF6A.From1))
					{
						if (!uEF6A.From1.Equals(uEF6A.To1))
						{
							this.State = Player.EOperationState.Finished;
							this.\uE002.InitiateOperation<Player.EmptyHandsController.\uE000>().Start(uEF6A.Item1, callback);
							return;
						}
					}
					callback.Succeed();
				}

				// Token: 0x06008FFB RID: 36859 RVA: 0x002E85E8 File Offset: 0x002E67E8
				public override void Update(float deltaTime)
				{
					this.\uE004 += deltaTime;
					if (this.\uE004 > 300f)
					{
						this.\uE002.\uE001.Idle();
						this.\uE004 = 0f;
					}
				}

				// Token: 0x06008FFC RID: 36860 RVA: 0x002E8628 File Offset: 0x002E6828
				public override void ExamineWeapon()
				{
					this.\uE002.\uE001.LookTrigger();
				}

				// Token: 0x06008FFD RID: 36861 RVA: 0x002E863C File Offset: 0x002E683C
				public override void SetEmptyHandsCompassState(bool active)
				{
					this.\uE002.CompassState.Value = active;
				}

				// Token: 0x04008598 RID: 34200
				private const float \uE003 = 300f;

				// Token: 0x04008599 RID: 34201
				private float \uE004;
			}

			// Token: 0x020016A1 RID: 5793
			private new sealed class \uE003 : Player.EmptyHandsController.\uE001
			{
				// Token: 0x06008FFE RID: 36862 RVA: 0x002E8650 File Offset: 0x002E6850
				public \uE003(Player.EmptyHandsController controller) : base(controller)
				{
				}

				// Token: 0x06008FFF RID: 36863 RVA: 0x002E865C File Offset: 0x002E685C
				public void Start(Action onHidden)
				{
					this.\uE005 = onHidden;
					base.Start();
					this.\uE002._player.BodyAnimatorCommon.SetFloat(PlayerAnimator.RELOAD_FLOAT_PARAM_HASH, 1f);
					this.HideWeaponComplete();
				}

				// Token: 0x06009000 RID: 36864 RVA: 0x002E8698 File Offset: 0x002E6898
				public override void Reset()
				{
					this.\uE005 = null;
					base.Reset();
				}

				// Token: 0x06009001 RID: 36865 RVA: 0x002E86A8 File Offset: 0x002E68A8
				public override bool CanExecute(\uEF5F operation)
				{
					return true;
				}

				// Token: 0x06009002 RID: 36866 RVA: 0x002E86AC File Offset: 0x002E68AC
				public override void Execute(\uEF5F operation, Callback callback)
				{
					\uEF6A uEF6A = operation as \uEF6A;
					if (uEF6A != null && this.\uE002._player.InventoryController.IsAnimatedSlot(uEF6A.From1))
					{
						if (!uEF6A.From1.Equals(uEF6A.To1))
						{
							this.State = Player.EOperationState.Finished;
							this.\uE002.InitiateOperation<Player.EmptyHandsController.\uE000>().Start(uEF6A.Item1, callback);
							return;
						}
					}
					callback.Succeed();
				}

				// Token: 0x06009003 RID: 36867 RVA: 0x002E8728 File Offset: 0x002E6928
				public override void HideWeaponComplete()
				{
					this.State = Player.EOperationState.Finished;
					this.\uE005();
				}

				// Token: 0x06009004 RID: 36868 RVA: 0x002E873C File Offset: 0x002E693C
				public override void HideWeapon(Action onHidden)
				{
					this.\uE005 = (Action)Delegate.Combine(this.\uE005, onHidden);
				}

				// Token: 0x06009005 RID: 36869 RVA: 0x002E8758 File Offset: 0x002E6958
				public override void FastForward()
				{
					if (this.State != Player.EOperationState.Finished)
					{
						this.HideWeaponComplete();
					}
				}

				// Token: 0x0400859A RID: 34202
				private Action \uE005;
			}

			// Token: 0x020016A2 RID: 5794
			public sealed class \uE004 : Player.EmptyHandsController.\uE000
			{
				// Token: 0x06009006 RID: 36870 RVA: 0x002E876C File Offset: 0x002E696C
				public \uE004(Player.EmptyHandsController controller) : base(controller)
				{
				}

				// Token: 0x06009007 RID: 36871 RVA: 0x002E8778 File Offset: 0x002E6978
				public override void Start(Item item, Callback callback)
				{
					this.\uE007 = 0f;
					this.\uE008 = false;
					base.Start(item, callback);
				}

				// Token: 0x06009008 RID: 36872 RVA: 0x002E879C File Offset: 0x002E699C
				public override void FastForward()
				{
					if (!this.\uE008)
					{
						this.\uE008 = true;
						this.OnBackpackDrop();
					}
				}

				// Token: 0x06009009 RID: 36873 RVA: 0x002E87BC File Offset: 0x002E69BC
				public override void Update(float deltaTime)
				{
					base.Update(deltaTime);
					if (!this.\uE008 && this.\uE007 > 0.01f)
					{
						this.\uE008 = true;
						this.OnBackpackDrop();
					}
					this.\uE007 += deltaTime;
				}

				// Token: 0x0400859B RID: 34203
				private const float \uE006 = 0.01f;

				// Token: 0x0400859C RID: 34204
				private float \uE007;

				// Token: 0x0400859D RID: 34205
				private bool \uE008;
			}

			// Token: 0x020016A3 RID: 5795
			public sealed class \uE005 : Player.EmptyHandsController.\uE001
			{
				// Token: 0x0600900A RID: 36874 RVA: 0x002E880C File Offset: 0x002E6A0C
				public \uE005(Player.EmptyHandsController controller) : base(controller)
				{
				}

				// Token: 0x0600900B RID: 36875 RVA: 0x002E8818 File Offset: 0x002E6A18
				public void Start(Action callback)
				{
					this.\uE00B = callback;
					this.\uE00A = false;
					this.\uE001.BodyAnimatorCommon.SetFloat(PlayerAnimator.WEAPON_SIZE_MODIFIER_PARAM_HASH, 1f);
					this.\uE002._player.BodyAnimatorCommon.SetFloat(PlayerAnimator.RELOAD_FLOAT_PARAM_HASH, 1f);
					base.Start();
					this.\uE002.\uE001.SetActiveParam(true, true);
				}

				// Token: 0x0600900C RID: 36876 RVA: 0x002E8890 File Offset: 0x002E6A90
				public override void Reset()
				{
					base.Reset();
					this.\uE00B = null;
					this.\uE009 = null;
					this.\uE00A = false;
				}

				// Token: 0x0600900D RID: 36877 RVA: 0x002E88B4 File Offset: 0x002E6AB4
				public override void WeaponAppeared()
				{
					this.\uE002.SetupProp();
					this.State = Player.EOperationState.Finished;
					this.\uE002._player.BodyAnimatorCommon.SetFloat(PlayerAnimator.RELOAD_FLOAT_PARAM_HASH, 0f);
					if (!this.\uE00A)
					{
						this.\uE002.InitiateOperation<Player.EmptyHandsController.\uE002>().Start();
					}
					else
					{
						this.\uE002.InitiateOperation<Player.EmptyHandsController.\uE003>().Start(this.\uE009);
					}
					Action uE00B = this.\uE00B;
					this.\uE00B = null;
					if (uE00B == null)
					{
						return;
					}
					uE00B();
				}

				// Token: 0x0600900E RID: 36878 RVA: 0x002E8948 File Offset: 0x002E6B48
				public override void HideWeapon(Action onHidden)
				{
					this.\uE009 = onHidden;
					this.\uE00A = true;
					this.WeaponAppeared();
				}

				// Token: 0x0600900F RID: 36879 RVA: 0x002E8964 File Offset: 0x002E6B64
				public override void FastForward()
				{
					if (this.State != Player.EOperationState.Finished)
					{
						this.WeaponAppeared();
					}
				}

				// Token: 0x06009010 RID: 36880 RVA: 0x002E8978 File Offset: 0x002E6B78
				protected override void SetLeftStanceAnimOnStartOperation()
				{
					this.\uE001.MovementContext.LeftStanceController.DisableLeftStanceAnimFromHandsAction();
				}

				// Token: 0x0400859E RID: 34206
				private Action \uE009;

				// Token: 0x0400859F RID: 34207
				private bool \uE00A;

				// Token: 0x040085A0 RID: 34208
				private Action \uE00B;
			}

			// Token: 0x020016A4 RID: 5796
			[CompilerGenerated]
			private sealed class \uE006<\uE084> where \uE084 : Player.EmptyHandsController
			{
				// Token: 0x06009012 RID: 36882 RVA: 0x002E8998 File Offset: 0x002E6B98
				internal void \uE000()
				{
					this.controller.\uE001.RemoveEventsConsumer(this.controller);
				}

				// Token: 0x040085A1 RID: 34209
				public \uE084 controller;
			}

			// Token: 0x020016A5 RID: 5797
			[CompilerGenerated]
			private sealed class \uE007
			{
				// Token: 0x06009014 RID: 36884 RVA: 0x002E89C4 File Offset: 0x002E6BC4
				internal void \uE000()
				{
					this.<>4__this._player.StartCoroutine(this.<>4__this.\uE006(this.callback));
				}

				// Token: 0x040085A2 RID: 34210
				public Player.EmptyHandsController <>4__this;

				// Token: 0x040085A3 RID: 34211
				public Action callback;
			}

			// Token: 0x020016A6 RID: 5798
			[CompilerGenerated]
			private sealed class \uE008
			{
				// Token: 0x06009016 RID: 36886 RVA: 0x002E89F0 File Offset: 0x002E6BF0
				internal void \uE000()
				{
					this.callback();
				}

				// Token: 0x040085A4 RID: 34212
				public Action callback;
			}
		}

		// Token: 0x020016A9 RID: 5801
		public class FirearmController : Player.ItemHandsController, IFirearmHandsController, \uE82A, \uE827, \uE828, \uE82B
		{
			// Token: 0x14000190 RID: 400
			// (add) Token: 0x0600901F RID: 36895 RVA: 0x002E8BA0 File Offset: 0x002E6DA0
			// (remove) Token: 0x06009020 RID: 36896 RVA: 0x002E8BE4 File Offset: 0x002E6DE4
			public event Action OnShot
			{
				[CompilerGenerated]
				add
				{
					Action action = this.\uE006;
					Action action2;
					do
					{
						action2 = action;
						Action value2 = (Action)Delegate.Combine(action2, value);
						action = Interlocked.CompareExchange<Action>(ref this.\uE006, value2, action2);
					}
					while (action != action2);
				}
				[CompilerGenerated]
				remove
				{
					Action action = this.\uE006;
					Action action2;
					do
					{
						action2 = action;
						Action value2 = (Action)Delegate.Remove(action2, value);
						action = Interlocked.CompareExchange<Action>(ref this.\uE006, value2, action2);
					}
					while (action != action2);
				}
			}

			// Token: 0x14000191 RID: 401
			// (add) Token: 0x06009021 RID: 36897 RVA: 0x002E8C28 File Offset: 0x002E6E28
			// (remove) Token: 0x06009022 RID: 36898 RVA: 0x002E8C6C File Offset: 0x002E6E6C
			public event Action<Player.FirearmController> OnReadyToOperate
			{
				[CompilerGenerated]
				add
				{
					Action<Player.FirearmController> action = this.\uE007;
					Action<Player.FirearmController> action2;
					do
					{
						action2 = action;
						Action<Player.FirearmController> value2 = (Action<Player.FirearmController>)Delegate.Combine(action2, value);
						action = Interlocked.CompareExchange<Action<Player.FirearmController>>(ref this.\uE007, value2, action2);
					}
					while (action != action2);
				}
				[CompilerGenerated]
				remove
				{
					Action<Player.FirearmController> action = this.\uE007;
					Action<Player.FirearmController> action2;
					do
					{
						action2 = action;
						Action<Player.FirearmController> value2 = (Action<Player.FirearmController>)Delegate.Remove(action2, value);
						action = Interlocked.CompareExchange<Action<Player.FirearmController>>(ref this.\uE007, value2, action2);
					}
					while (action != action2);
				}
			}

			// Token: 0x14000192 RID: 402
			// (add) Token: 0x06009023 RID: 36899 RVA: 0x002E8CB0 File Offset: 0x002E6EB0
			// (remove) Token: 0x06009024 RID: 36900 RVA: 0x002E8CF4 File Offset: 0x002E6EF4
			public event Action BreakLoop
			{
				[CompilerGenerated]
				add
				{
					Action action = this.\uE008;
					Action action2;
					do
					{
						action2 = action;
						Action value2 = (Action)Delegate.Combine(action2, value);
						action = Interlocked.CompareExchange<Action>(ref this.\uE008, value2, action2);
					}
					while (action != action2);
				}
				[CompilerGenerated]
				remove
				{
					Action action = this.\uE008;
					Action action2;
					do
					{
						action2 = action;
						Action value2 = (Action)Delegate.Remove(action2, value);
						action = Interlocked.CompareExchange<Action>(ref this.\uE008, value2, action2);
					}
					while (action != action2);
				}
			}

			// Token: 0x170014A3 RID: 5283
			// (get) Token: 0x06009025 RID: 36901 RVA: 0x002E8D38 File Offset: 0x002E6F38
			public new Weapon Item
			{
				get
				{
					return base.Item as Weapon;
				}
			}

			// Token: 0x170014A4 RID: 5284
			// (get) Token: 0x06009026 RID: 36902 RVA: 0x002E8D48 File Offset: 0x002E6F48
			public override FirearmsAnimator FirearmsAnimator
			{
				get
				{
					return this.\uE001;
				}
			}

			// Token: 0x170014A5 RID: 5285
			// (get) Token: 0x06009027 RID: 36903 RVA: 0x002E8D50 File Offset: 0x002E6F50
			public override string LoggerDistinctId
			{
				get
				{
					return string.Format(\uF1F8.\uE000(139683), this._player.ProfileId, this._player.Profile.Info.Nickname, this);
				}
			}

			// Token: 0x170014A6 RID: 5286
			// (get) Token: 0x06009028 RID: 36904 RVA: 0x002E8D84 File Offset: 0x002E6F84
			public SkillManager.\uE000 BuffInfo
			{
				get
				{
					return this.\uE016;
				}
			}

			// Token: 0x170014A7 RID: 5287
			// (get) Token: 0x06009029 RID: 36905 RVA: 0x002E8D8C File Offset: 0x002E6F8C
			public bool IsOverlap
			{
				get
				{
					return this.\uE013 > 0f;
				}
			}

			// Token: 0x170014A8 RID: 5288
			// (get) Token: 0x0600902A RID: 36906 RVA: 0x002E8D9C File Offset: 0x002E6F9C
			public float OverlapValue
			{
				get
				{
					return this.\uE013;
				}
			}

			// Token: 0x170014A9 RID: 5289
			// (get) Token: 0x0600902B RID: 36907 RVA: 0x002E8DA4 File Offset: 0x002E6FA4
			// (set) Token: 0x0600902C RID: 36908 RVA: 0x002E8DAC File Offset: 0x002E6FAC
			public bool IsSilenced { get; private set; }

			// Token: 0x170014AA RID: 5290
			// (get) Token: 0x0600902D RID: 36909 RVA: 0x002E8DB8 File Offset: 0x002E6FB8
			public int CurrentMasteringLevel
			{
				get
				{
					\uE8F8 mastering = this._player.Skills.GetMastering(this.Item.TemplateId);
					if (mastering == null)
					{
						return 0;
					}
					return mastering.Level;
				}
			}

			// Token: 0x170014AB RID: 5291
			// (get) Token: 0x0600902E RID: 36910 RVA: 0x002E8DE8 File Offset: 0x002E6FE8
			public float TotalErgonomics
			{
				get
				{
					return this.\uE01C.Value;
				}
			}

			// Token: 0x170014AC RID: 5292
			// (get) Token: 0x0600902F RID: 36911 RVA: 0x002E8DF8 File Offset: 0x002E6FF8
			public float ErgonomicWeight
			{
				get
				{
					return this.\uE01B.Value;
				}
			}

			// Token: 0x170014AD RID: 5293
			// (get) Token: 0x06009030 RID: 36912 RVA: 0x002E8E08 File Offset: 0x002E7008
			public BifacialTransform CurrentFireport
			{
				get
				{
					if (!this.Item.IsMultiBarrel)
					{
						return this.Fireport;
					}
					return this.MultiBarrelsFireports[this.CurrentChamberIndex];
				}
			}

			// Token: 0x170014AE RID: 5294
			// (get) Token: 0x06009031 RID: 36913 RVA: 0x002E8E2C File Offset: 0x002E702C
			public override float AimingSensitivity
			{
				get
				{
					if (!this.IsAiming)
					{
						return this._player.GetAimingSensitivity();
					}
					return this._aimingSens;
				}
			}

			// Token: 0x170014AF RID: 5295
			// (get) Token: 0x06009032 RID: 36914 RVA: 0x002E8E50 File Offset: 0x002E7050
			public virtual Vector3 WeaponDirection
			{
				get
				{
					return this.CurrentFireport.Original.TransformDirection(this._player.LocalShotDirection);
				}
			}

			// Token: 0x170014B0 RID: 5296
			// (get) Token: 0x06009033 RID: 36915 RVA: 0x002E8E70 File Offset: 0x002E7070
			public Weapon Weapon
			{
				get
				{
					return this.Item;
				}
			}

			// Token: 0x170014B1 RID: 5297
			// (get) Token: 0x06009034 RID: 36916 RVA: 0x002E8E78 File Offset: 0x002E7078
			public Vector3 FireportPosition
			{
				get
				{
					return this.CurrentFireport.position;
				}
			}

			// Token: 0x170014B2 RID: 5298
			// (get) Token: 0x06009035 RID: 36917 RVA: 0x002E8E88 File Offset: 0x002E7088
			public bool MouseLookControl
			{
				get
				{
					return this._player.MouseLookControl;
				}
			}

			// Token: 0x170014B3 RID: 5299
			// (get) Token: 0x06009036 RID: 36918 RVA: 0x002E8E98 File Offset: 0x002E7098
			public WeaponSoundPlayer WeaponSoundPlayer
			{
				get
				{
					return this.\uE022;
				}
			}

			// Token: 0x170014B4 RID: 5300
			// (get) Token: 0x06009037 RID: 36919 RVA: 0x002E8EA0 File Offset: 0x002E70A0
			// (set) Token: 0x06009038 RID: 36920 RVA: 0x002E8EA8 File Offset: 0x002E70A8
			public bool IsBirstOf2Start { get; set; }

			// Token: 0x170014B5 RID: 5301
			// (get) Token: 0x06009039 RID: 36921 RVA: 0x002E8EB4 File Offset: 0x002E70B4
			public bool HasBipod
			{
				get
				{
					return this.Bipod != null;
				}
			}

			// Token: 0x170014B6 RID: 5302
			// (get) Token: 0x0600903A RID: 36922 RVA: 0x002E8EC0 File Offset: 0x002E70C0
			protected bool IsStationaryWeapon
			{
				get
				{
					return this._player.MovementContext.StationaryWeapon != null;
				}
			}

			// Token: 0x170014B7 RID: 5303
			// (get) Token: 0x0600903B RID: 36923 RVA: 0x002E8ED8 File Offset: 0x002E70D8
			protected Player.FirearmController.\uE00A CurrentOperation
			{
				get
				{
					return base.CurrentHandsOperation as Player.FirearmController.\uE00A;
				}
			}

			// Token: 0x170014B8 RID: 5304
			// (get) Token: 0x0600903C RID: 36924 RVA: 0x002E8EE8 File Offset: 0x002E70E8
			// (set) Token: 0x0600903D RID: 36925 RVA: 0x002E8EF0 File Offset: 0x002E70F0
			protected internal virtual bool IsTriggerPressed
			{
				get
				{
					return this.\uE017;
				}
				set
				{
					if (!value)
					{
						Action uE = this.\uE008;
						if (uE != null)
						{
							uE();
						}
					}
					this.\uE017 = value;
				}
			}

			// Token: 0x170014B9 RID: 5305
			// (get) Token: 0x0600903E RID: 36926 RVA: 0x002E8F10 File Offset: 0x002E7110
			// (set) Token: 0x0600903F RID: 36927 RVA: 0x002E8F18 File Offset: 0x002E7118
			public override bool IsAiming
			{
				get
				{
					return this._isAiming;
				}
				protected set
				{
					if (!value)
					{
						this._player.Physical.HoldBreath(false);
					}
					if (this._isAiming == value)
					{
						this.\uE042();
						return;
					}
					this._isAiming = value;
					this._player.Skills.FastAimTimer.Target = (value ? 0f : 2f);
					this._player.MovementContext.SetAimingSlowdown(this.IsAiming, 0.33f + this.\uE016.AimMovementSpeed);
					this._player.Physical.Aim((this._isAiming && this._player.MovementContext.StationaryWeapon == null) ? this.ErgonomicWeight : 0f);
					if (this.\uE01F)
					{
						this.\uE042();
					}
					else
					{
						this.\uE041(this._isAiming);
					}
					this.\uE00D.SetAiming(this._isAiming);
					this.UpdateSensitivity();
					this.AimingChanged(value);
				}
			}

			// Token: 0x170014BA RID: 5306
			// (get) Token: 0x06009040 RID: 36928 RVA: 0x002E903C File Offset: 0x002E723C
			// (set) Token: 0x06009041 RID: 36929 RVA: 0x002E9044 File Offset: 0x002E7244
			public bool Malfunction
			{
				get
				{
					return this.\uE012;
				}
				set
				{
					if (value)
					{
						Action uE = this.\uE008;
						if (uE != null)
						{
							uE();
						}
					}
					this.\uE012 = value;
				}
			}

			// Token: 0x170014BB RID: 5307
			// (get) Token: 0x06009042 RID: 36930 RVA: 0x002E9064 File Offset: 0x002E7264
			// (set) Token: 0x06009043 RID: 36931 RVA: 0x002E906C File Offset: 0x002E726C
			public bool InventoryOpened
			{
				get
				{
					return this.\uE002;
				}
				set
				{
					this.\uE002 = value;
					if (this.\uE002)
					{
						this.SetCompassState(false);
						this.BlindFire(0);
					}
				}
			}

			// Token: 0x170014BC RID: 5308
			// (get) Token: 0x06009044 RID: 36932 RVA: 0x002E9094 File Offset: 0x002E7294
			// (set) Token: 0x06009045 RID: 36933 RVA: 0x002E909C File Offset: 0x002E729C
			public bool Blindfire
			{
				get
				{
					return this._blindfire;
				}
				set
				{
					this._blindfire = value;
					if (this._blindfire)
					{
						this.SetCompassState(false);
					}
				}
			}

			// Token: 0x170014BD RID: 5309
			// (get) Token: 0x06009046 RID: 36934 RVA: 0x002E90BC File Offset: 0x002E72BC
			// (set) Token: 0x06009047 RID: 36935 RVA: 0x002E90C4 File Offset: 0x002E72C4
			public bool BipodState
			{
				get
				{
					return this.\uE020;
				}
				set
				{
					this.\uE020 = value;
				}
			}

			// Token: 0x06009048 RID: 36936 RVA: 0x002E90D0 File Offset: 0x002E72D0
			internal new static \uE084 \uE000<\uE084>(Player player, Weapon weapon) where \uE084 : Player.FirearmController
			{
				\uE084 uE = Player.ItemHandsController.\uE000<\uE084>(player, weapon);
				Player.FirearmController.\uE002<\uE084>(uE, player, weapon, false).HandleExceptions();
				return uE;
			}

			// Token: 0x06009049 RID: 36937 RVA: 0x002E90E8 File Offset: 0x002E72E8
			internal new static Task<\uE084> \uE001<\uE084>(Player player, Weapon weapon) where \uE084 : Player.FirearmController
			{
				Player.FirearmController.\uE03A<\uE084> uE03A;
				uE03A.<>t__builder = AsyncTaskMethodBuilder<\uE084>.Create();
				uE03A.player = player;
				uE03A.weapon = weapon;
				uE03A.<>1__state = -1;
				uE03A.<>t__builder.Start<Player.FirearmController.\uE03A<\uE084>>(ref uE03A);
				return uE03A.<>t__builder.Task;
			}

			// Token: 0x0600904A RID: 36938 RVA: 0x002E9140 File Offset: 0x002E7340
			private static Task \uE002<\uE084>(\uE084 controller, Player player, Weapon weapon, bool async = true) where \uE084 : Player.FirearmController
			{
				Player.FirearmController.\uE03B<\uE084> uE03B;
				uE03B.<>t__builder = AsyncTaskMethodBuilder.Create();
				uE03B.controller = controller;
				uE03B.player = player;
				uE03B.weapon = weapon;
				uE03B.async = async;
				uE03B.<>1__state = -1;
				uE03B.<>t__builder.Start<Player.FirearmController.\uE03B<\uE084>>(ref uE03B);
				return uE03B.<>t__builder.Task;
			}

			// Token: 0x0600904B RID: 36939 RVA: 0x002E91B0 File Offset: 0x002E73B0
			public void ValidateCurrentScopeIndex()
			{
				if (this.Item.AimIndex.Value >= this._player.ProceduralWeaponAnimation.ScopeAimTransforms.Count)
				{
					this.ChangeAimingMode();
				}
			}

			// Token: 0x0600904C RID: 36940 RVA: 0x002E91E0 File Offset: 0x002E73E0
			private void \uE003(float sensitivity)
			{
				this.AimingSmoothSensitivity = sensitivity;
				this.UpdateSensitivity();
			}

			// Token: 0x0600904D RID: 36941 RVA: 0x002E91F0 File Offset: 0x002E73F0
			private void \uE004(ESmoothScopeState scopeState)
			{
				this._player.RaiseSmoothSightChangeEvent(this._player.ProceduralWeaponAnimation.CurrentAimingMod, scopeState);
			}

			// Token: 0x0600904E RID: 36942 RVA: 0x002E9210 File Offset: 0x002E7410
			private void \uE005(\uE8F6 obj)
			{
				if (obj.Id != ESkillId.BotReload && !(obj is \uE8F8))
				{
					if (((\uE8F9)obj).Class != ESkillClass.Combat)
					{
						return;
					}
				}
				this.SyncWithCharacterSkills();
			}

			// Token: 0x0600904F RID: 36943 RVA: 0x002E9240 File Offset: 0x002E7440
			private void \uE006(EPhysicalCondition condition, EPhysicalCondition full)
			{
				if (condition != EPhysicalCondition.LeftArmDamaged)
				{
					if (condition != EPhysicalCondition.RightArmDamaged)
					{
						return;
					}
				}
				this.SetAnimatorAndProceduralValues();
				this.RecalculateErgonomic();
				this._player.ProceduralWeaponAnimation.UpdateWeaponVariables();
			}

			// Token: 0x06009050 RID: 36944 RVA: 0x002E9274 File Offset: 0x002E7474
			public void OnCurrentWeaponBeingMastered(\uE8F8 m)
			{
				if (Enumerable.Contains<string>(m.MasteringGroup.Templates, this.Item.StringTemplateId))
				{
					this.SyncWithCharacterSkills();
				}
			}

			// Token: 0x06009051 RID: 36945 RVA: 0x002E929C File Offset: 0x002E749C
			public float GetWeaponDrawSpeedMultiplier(Weapon weapon, bool useFastDropAnimationSpeed)
			{
				\uE714 instance = Singleton<\uE714>.Instance;
				float num;
				float num2;
				if (weapon.WeapClass.Equals(\uF1F8.\uE000(44568)))
				{
					num = instance.WeaponFastDrawGlobalSettings.WeaponPistolFastSwitchMaxSpeedMult;
					num2 = instance.WeaponFastDrawGlobalSettings.WeaponPistolFastSwitchMinSpeedMult;
				}
				else
				{
					num = instance.WeaponFastDrawGlobalSettings.WeaponFastSwitchMaxSpeedMult;
					num2 = instance.WeaponFastDrawGlobalSettings.WeaponFastSwitchMinSpeedMult;
				}
				\uE8FB uE8FB;
				this._player.Skills.WeaponSkills.TryGetValue(this.Item.GetType(), out uE8FB);
				int num3 = (uE8FB != null) ? uE8FB.Level : 0;
				float num4 = num2 + (float)(num3 / 50) * (num - num2);
				if (useFastDropAnimationSpeed)
				{
					num4 /= 1.5f;
				}
				return num4;
			}

			// Token: 0x06009052 RID: 36946 RVA: 0x002E9378 File Offset: 0x002E7578
			public bool CheckForFastWeaponSwitch(Item nextControllerItem)
			{
				if (nextControllerItem is Weapon && nextControllerItem.Parent.Container == this._player.Equipment.GetSlot(EquipmentSlot.Holster))
				{
					if (this._player.FastSlotSelection)
					{
						return !this._player.MovementContext.IsInPronePose;
					}
				}
				return false;
			}

			// Token: 0x06009053 RID: 36947 RVA: 0x002E93DC File Offset: 0x002E75DC
			public void SetAnimatorAndProceduralValues()
			{
				float num = \uE780.PastTime - this._player.QuickdrawTime;
				if (this._player.Inventory.Equipment.GetSlot(EquipmentSlot.Holster).Equals(this.Item.Parent.Container) && this._player.QuickdrawWeaponFast && num < 1f)
				{
					float fastWeaponSwitchStaminaLack = this._player.Physical.FastWeaponSwitchStaminaLack;
					\uE8FB uE8FB;
					this._player.Skills.WeaponSkills.TryGetValue(this.Item.GetType(), out uE8FB);
					this._player.Physical.OnWeaponSwitchFast((uE8FB != null) ? uE8FB.Level : 0);
					float lackOfStamina = fastWeaponSwitchStaminaLack + this._player.Physical.FastWeaponSwitchStaminaLack;
					float fullStaminaCost = Singleton<\uE714>.Instance.Stamina.WeaponFastSwitchConsumption * 2f;
					if (this._player.Physical.HandsStamina.Current <= 0f)
					{
						this._player.ProceduralWeaponAnimation.StartHandShake(lackOfStamina, fullStaminaCost);
					}
					this.\uE001.SetSpeedParameters(1f, this.GetWeaponDrawSpeedMultiplier(this.Item, false));
					this._player.QuickdrawWeaponFast = false;
					return;
				}
				this._player.QuickdrawWeaponFast = false;
				if (this._player.MovementContext.PhysicalConditionIs(EPhysicalCondition.LeftArmDamaged) || this._player.MovementContext.PhysicalConditionIs(EPhysicalCondition.RightArmDamaged))
				{
					this.\uE001.SetSpeedParameters(1f, 1f);
					this._player.MovementContext.PlayerAnimator.\uE000(1f, 1f);
					return;
				}
				this.\uE001.SetSpeedParameters(this.\uE016.ReloadSpeed, this.\uE016.SwapSpeed);
				this._player.MovementContext.PlayerAnimator.\uE000(this.\uE016.ReloadSpeed, this.\uE016.SwapSpeed);
			}

			// Token: 0x06009054 RID: 36948 RVA: 0x002E95F0 File Offset: 0x002E77F0
			public void SyncWithCharacterSkills()
			{
				this.\uE001.SetWeaponLevel((float)this.CurrentMasteringLevel);
				SkillManager.\uE000 weaponInfo = this._player.Skills.GetWeaponInfo(this.Item);
				this.\uE016.AimMovementSpeed = weaponInfo.AimMovementSpeed;
				this.\uE016.SwapSpeed = weaponInfo.SwapSpeed;
				this.\uE016.DeltaErgonomics = weaponInfo.DeltaErgonomics;
				this.\uE016.FixSpeed = weaponInfo.FixSpeed;
				this.\uE016.RecoilSupression = weaponInfo.RecoilSupression;
				this.\uE016.ReloadSpeed = weaponInfo.ReloadSpeed;
				this.\uE016.Maxed = weaponInfo.Maxed;
				this.\uE016.DoubleActionRecoilReduce = weaponInfo.DoubleActionRecoilReduce;
				this.SetAnimatorAndProceduralValues();
			}

			// Token: 0x06009055 RID: 36949 RVA: 0x002E96D4 File Offset: 0x002E78D4
			private void \uE007()
			{
				this.\uE022 = this._controllerObject.GetComponent<WeaponSoundPlayer>();
				this.\uE022.Init(this, this.CurrentFireport, this._player);
				this.\uE022.IsSilenced = this.IsSilenced;
			}

			// Token: 0x06009056 RID: 36950 RVA: 0x002E9724 File Offset: 0x002E7924
			public void InitModsAudioControllers(Player.FirearmController firearmController)
			{
				foreach (\uE37D.\uE000 uE in this.CCV.ContainerBones.Values)
				{
					this.SetupModAudioController(uE.ItemView, firearmController);
				}
			}

			// Token: 0x06009057 RID: 36951 RVA: 0x002E9790 File Offset: 0x002E7990
			public void SetupModAudioController(Transform modObjectTransform, Player.FirearmController firearmController)
			{
				Player.FirearmController.\uE037 uE = new Player.FirearmController.\uE037();
				uE.firearmController = firearmController;
				uE.<>4__this = this;
				if (modObjectTransform != null)
				{
					if (modObjectTransform.TryGetComponent<\uE4F5>(out uE.modAudioController))
					{
						uE.modAudioController.Clear();
						this._player.OnHandsControllerChanged += uE.\uE000;
						uE.modAudioController.Init(this._player.ProfileId, this.\uE001);
					}
				}
			}

			// Token: 0x06009058 RID: 36952 RVA: 0x002E9814 File Offset: 0x002E7A14
			public void ClearModAudioController(Slot slot)
			{
				\uE37D.\uE000 viewForSlot = this.CCV.GetViewForSlot(slot);
				if (viewForSlot != null)
				{
					if (viewForSlot.ItemView != null)
					{
						\uE4F5 uE4F;
						if (viewForSlot.ItemView.TryGetComponent<\uE4F5>(out uE4F))
						{
							uE4F.Clear();
						}
					}
				}
			}

			// Token: 0x06009059 RID: 36953 RVA: 0x002E9864 File Offset: 0x002E7A64
			public void UpdateSensitivity()
			{
				if (!this._isAiming)
				{
					return;
				}
				float num = this.Item.Template.AimSensitivity;
				SightComponent currentAimingMod = this._player.ProceduralWeaponAnimation.CurrentAimingMod;
				if (currentAimingMod != null)
				{
					if (currentAimingMod.AdjustableOpticData.IsAdjustableOptic)
					{
						if (this._player.ProceduralWeaponAnimation.CurrentScope.IsOptic)
						{
							num *= this.AimingSmoothSensitivity;
							goto IL_7D;
						}
					}
					num = currentAimingMod.GetCurrentSensitivity;
				}
				IL_7D:
				this._aimingSens = num * this._player.GetAimingSensitivity();
			}

			// Token: 0x0600905A RID: 36954 RVA: 0x002E9908 File Offset: 0x002E7B08
			private void \uE008()
			{
				\uEE5D underbarrelWeapon = this.Item.GetUnderbarrelWeapon();
				if (underbarrelWeapon != null)
				{
					this.UnderbarrelWeapon = underbarrelWeapon;
					this.\uE024 = new Player.FirearmController.\uE033();
					this.\uE024.Init(this._player, this, this.UnderbarrelWeapon);
					return;
				}
				this.UnderbarrelWeapon = null;
				this.\uE024 = null;
			}

			// Token: 0x0600905B RID: 36955 RVA: 0x002E996C File Offset: 0x002E7B6C
			private void \uE009(\uEE5D underbarrelWeapon, GameObject _weaponPrefab)
			{
				if (underbarrelWeapon != null)
				{
					this.UnderbarrelWeapon = underbarrelWeapon;
					this.\uE024 = new Player.FirearmController.\uE033();
					this.\uE024.Init(this._player, this, this.UnderbarrelWeapon, _weaponPrefab);
					return;
				}
				this.UnderbarrelWeapon = null;
				this.\uE024 = null;
			}

			// Token: 0x0600905C RID: 36956 RVA: 0x002E99BC File Offset: 0x002E7BBC
			private void \uE00A()
			{
				base.ClearPreWarmOperationsDict();
				this.UnderbarrelWeapon = null;
				Player.FirearmController.\uE033 uE = this.\uE024;
				if (uE != null)
				{
					uE.Clear();
				}
				this.\uE024 = null;
			}

			// Token: 0x0600905D RID: 36957 RVA: 0x002E99EC File Offset: 0x002E7BEC
			private void \uE00B()
			{
				Player.FirearmController.\uE033 uE = this.\uE024;
				if (uE == null)
				{
					return;
				}
				uE.InitWeaponSoundPlayer();
			}

			// Token: 0x0600905E RID: 36958 RVA: 0x002E9A00 File Offset: 0x002E7C00
			private void \uE00C()
			{
				this.\uE013 = 0f;
				this.WeaponLn = 0f;
				if (this._player.MovementContext.StationaryWeapon != null && this._player.MovementContext.StationaryWeapon.Item == this.Item)
				{
					return;
				}
				if (base.WeaponRoot == null || this.CurrentFireport.Original == null)
				{
					Debug.LogError(\uF1F8.\uE000(139389));
					return;
				}
				this.WeaponLn = Vector3.Distance(this.GunBaseTransform.position, this.CurrentFireport.Original.position);
				foreach (GameObject gameObject in this.\uE00D.MuzzleTransforms())
				{
					this.WeaponLn = Mathf.Max(this.WeaponLn, Vector3.Distance(this.GunBaseTransform.position, gameObject.transform.position));
				}
				if (this.CurrentFireport.Original.lossyScale.y < 1f)
				{
					this.WeaponLn /= this.CurrentFireport.Original.lossyScale.y;
				}
				this.\uE01A = LayerMask.NameToLayer(\uF1F8.\uE000(27509));
			}

			// Token: 0x0600905F RID: 36959 RVA: 0x002E9B78 File Offset: 0x002E7D78
			private float \uE00D(Vector3 origin, float ln, ref bool overlapsWithPlayer, Vector3? weaponUp = null)
			{
				Vector3 a = weaponUp ?? base.WeaponRoot.up;
				Vector3 end = origin - a * ln;
				RaycastHit raycastHit;
				if (\uE36B.Linecast(origin, end, out raycastHit, EFTHardSettings.Instance.WEAPON_OCCLUSION_LAYERS, false, Player.FirearmController.\uE00A, this.\uE01D))
				{
					overlapsWithPlayer = (raycastHit.collider.gameObject.layer == this.\uE01A);
					return ln - raycastHit.distance;
				}
				Vector3 lhs = origin - this._player.Position;
				Vector3 up = Vector3.up;
				float d = Vector3.Dot(lhs, up);
				if (\uE36B.Linecast(this._player.Position + d * up, origin, out raycastHit, EFTHardSettings.Instance.WEAPON_OCCLUSION_LAYERS, false, Player.FirearmController.\uE00A, this.\uE01D))
				{
					overlapsWithPlayer = (raycastHit.collider.gameObject.layer == this.\uE01A);
					return ln;
				}
				return 0f;
			}

			// Token: 0x06009060 RID: 36960 RVA: 0x002E9C9C File Offset: 0x002E7E9C
			private float \uE00E()
			{
				if (this._player.MovementContext.PhysicalConditionContainsAny(EPhysicalCondition.LeftArmDamaged | EPhysicalCondition.RightArmDamaged))
				{
					return 0f;
				}
				float num = this.\uE016.DeltaErgonomics;
				if (this._player.MovementContext.IsInMountedState)
				{
					num += ((this._player.MovementContext.PlayerMountingPointData.MountPointData.MountSideDirection == EMountSideDirection.Forward && this.BipodState) ? this.\uE016.BipodBonusErgo : this.\uE016.MountingBonusErgo);
				}
				return Mathf.Max(0f, this.Item.ErgonomicsTotal * (1f + num + this._player.ErgonomicsPenalty));
			}

			// Token: 0x06009061 RID: 36961 RVA: 0x002E9D5C File Offset: 0x002E7F5C
			private float \uE00F()
			{
				return this.Item.TotalWeight * (1f - Mathf.Sqrt(this.TotalErgonomics) / 25f);
			}

			// Token: 0x06009062 RID: 36962 RVA: 0x002E9D84 File Offset: 0x002E7F84
			public void ReloadMagNotFound()
			{
				Action<EPhraseTrigger, int> phraseSituation = this._player.PhraseSituation;
				if (phraseSituation == null)
				{
					return;
				}
				phraseSituation(EPhraseTrigger.NeedAmmo, 5);
			}

			// Token: 0x06009063 RID: 36963 RVA: 0x002E9DA0 File Offset: 0x002E7FA0
			private void \uE010()
			{
				this.IsSilenced = Enumerable.Any<SilencerComponent>(this.Item.GetItemComponentsInChildren(true));
			}

			// Token: 0x06009064 RID: 36964 RVA: 0x002E9DBC File Offset: 0x002E7FBC
			public void UpdateHipInaccuracy()
			{
				bool flag;
				if (this.AimingDevices.Length != 0)
				{
					flag = Enumerable.Any<\uEEC5>(this.AimingDevices, new Func<\uEEC5, bool>(Player.FirearmController.<>c.<>9.\uE000));
				}
				else
				{
					flag = false;
				}
				this.HipInaccuracy = (flag ? (0.3f - this.\uE01C.Value / 400f) : (1f - Mathf.Clamp01(this.\uE01C.Value / 250f - 0.15f)));
				this._player.ProceduralWeaponAnimation.Breath.HipPenalty = this.HipInaccuracy;
			}

			// Token: 0x06009065 RID: 36965 RVA: 0x002E9E68 File Offset: 0x002E8068
			public void SetUnderbarrelWeapon()
			{
				this.\uE008();
			}

			// Token: 0x06009066 RID: 36966 RVA: 0x002E9E70 File Offset: 0x002E8070
			public void WeaponModified()
			{
				this.\uE00C();
				this.\uE014 = this.Item.GetTotalCenterOfImpact(false);
				this.\uE010();
				this.RecalculateErgonomic();
				this.SetMaxUniqueAnimationModId();
				this.Bipod = Enumerable.FirstOrDefault<\uEE1D>(Enumerable.Select<Slot, \uEE1D>(Enumerable.Where<Slot>(this.Item.AllSlots, new Func<Slot, bool>(Player.FirearmController.<>c.<>9.\uE001)), new Func<Slot, \uEE1D>(Player.FirearmController.<>c.<>9.\uE002)));
				this.BipodState = (this.BipodState && this.HasBipod);
				this.\uE010.InitHotObjects(this.Item);
				this._controllerObject.GetComponent<WeaponSoundPlayer>().IsSilenced = this.IsSilenced;
				this._player.ProceduralWeaponAnimation.UpdateWeaponVariables();
				this.AimingDevices = Enumerable.ToArray<\uEEC5>(Enumerable.Select<Slot, \uEEC5>(Enumerable.Where<Slot>(this.Item.AllSlots, new Func<Slot, bool>(Player.FirearmController.<>c.<>9.\uE003)), new Func<Slot, \uEEC5>(Player.FirearmController.<>c.<>9.\uE004)));
				this.UpdateHipInaccuracy();
				this._player.ProceduralWeaponAnimation.IsBipodUsed = this.BipodState;
				this.\uE015 = this.Item.TotalShotgunDispersion;
			}

			// Token: 0x06009067 RID: 36967 RVA: 0x002EA004 File Offset: 0x002E8204
			public void RecalculateErgonomic()
			{
				this.\uE01C.SetDirty();
				this.\uE01B.SetDirty();
				this._player.Physical.Aim((this._isAiming && this._player.MovementContext.StationaryWeapon == null) ? this.ErgonomicWeight : 0f);
			}

			// Token: 0x06009068 RID: 36968 RVA: 0x002EA06C File Offset: 0x002E826C
			public void SetMaxUniqueAnimationModId()
			{
				Mod[] array = Enumerable.ToArray<Mod>(Enumerable.Select<Slot, Mod>(Enumerable.Where<Slot>(this.Item.AllSlots, new Func<Slot, bool>(Player.FirearmController.<>c.<>9.\uE005)), new Func<Slot, Mod>(Player.FirearmController.<>c.<>9.\uE006)));
				if (array.Length == 0)
				{
					this.\uE01F = false;
					return;
				}
				int num = Enumerable.Max<Mod>(array, new Func<Mod, int>(Player.FirearmController.<>c.<>9.\uE007));
				this.\uE01F = (num > 0);
				this.FirearmsAnimator.SetUniqueAnimationModId(num);
			}

			// Token: 0x06009069 RID: 36969 RVA: 0x002EA128 File Offset: 0x002E8328
			public override float GetAnimatorFloatParam(int hash)
			{
				return this.\uE001.GetAnimatorParameter(hash);
			}

			// Token: 0x0600906A RID: 36970 RVA: 0x002EA138 File Offset: 0x002E8338
			private bool \uE011(RaycastHit overlapHit)
			{
				GameObject gameObject = overlapHit.collider.gameObject;
				return gameObject.layer == this.\uE01A && gameObject == this._player.gameObject;
			}

			// Token: 0x170014BE RID: 5310
			// (get) Token: 0x0600906B RID: 36971 RVA: 0x002EA17C File Offset: 0x002E837C
			public bool DisableLeftStanceByOverlap
			{
				get
				{
					return this.\uE027;
				}
			}

			// Token: 0x0600906C RID: 36972 RVA: 0x002EA184 File Offset: 0x002E8384
			public virtual void WeaponOverlapping()
			{
				if (this.WeaponLn <= 0f)
				{
					return;
				}
				try
				{
					float num = 1f;
					if (this._player.IsVisible && !(this.CurrentOperation is Player.FirearmController.\uE02A))
					{
						if (this.\uE028 && !this._player._isInventoryOpened)
						{
							this.\uE02A = -1f;
						}
						this.\uE028 = this._player._isInventoryOpened;
						if (this.\uE02A <= 1f)
						{
							this.\uE02A += Time.deltaTime / this.\uE029;
						}
						float weaponOverlapDistanceCulling = Singleton<\uE6FE>.Instance.WeaponOverlapDistanceCulling;
						if (weaponOverlapDistanceCulling <= 0f || this._player.IsVisibleByCullingObject(weaponOverlapDistanceCulling))
						{
							Vector3 vector = this._player.ProceduralWeaponAnimation.HandsContainer.HandsPosition.Get();
							if (this._player.ProceduralWeaponAnimation.BlindfireBlender.Value != 0f)
							{
								Vector3 vector2 = (this._player.ProceduralWeaponAnimation.BlindFireEndPosition + this._player.ProceduralWeaponAnimation.PositionZeroSum) * 1.9f;
								vector2 = this._player.ProceduralWeaponAnimation.HandsContainer.WeaponRootAnim.parent.TransformPoint(vector2);
								num = this.\uE00D(vector2, this.WeaponLn, ref this._player.ProceduralWeaponAnimation.TurnAway.OverlapsWithPlayer, null);
							}
							if (num >= 0.02f)
							{
								if (this._player.MovementContext.LeftStanceEnabled)
								{
									vector = this._player.ProceduralWeaponAnimation.HandsContainer.WeaponRootAnim.TransformPoint(vector);
								}
								else
								{
									vector = this._player.ProceduralWeaponAnimation.HandsContainer.WeaponRootAnim.parent.TransformPoint(vector);
								}
								num = this.\uE00D(vector, this.WeaponLn, ref this._player.ProceduralWeaponAnimation.TurnAway.OverlapsWithPlayer, null);
								if (num > 0f && this._player.MovementContext.LeftStanceController.LeftStance && !this._player.MovementContext.IsInPronePose && !this._player._isInventoryOpened && this.\uE02A > 1f && this._player.\uE019(PlayerAnimator.LEFT_STANCE_CURVE) >= 1f)
								{
									this._player.MovementContext.LeftStanceController.DisableLeftStanceAnimFromHandsAction();
									this.\uE027 = true;
									this.\uE02A = 0f;
								}
								if (!this._player.MovementContext.LeftStanceController.LastAnimValue && this._player.MovementContext.LeftStanceController.LeftStance && num <= 0f && this.\uE027 && !this._player.MovementContext.IsInPronePose && !this._player._isInventoryOpened && this.\uE02A > 1f && this._player.\uE019(PlayerAnimator.LEFT_STANCE_CURVE) <= 0f)
								{
									vector += -base.WeaponRoot.right * 0.2f;
									if (this.\uE00D(vector, this.WeaponLn + 0.2f, ref this._player.ProceduralWeaponAnimation.TurnAway.OverlapsWithPlayer, null) <= 0f)
									{
										this._player.MovementContext.LeftStanceController.SetAnimatorLeftStanceToCacheFromHandsAction();
										this.\uE027 = false;
										this.\uE02A = 0f;
									}
								}
							}
							this.SetWeaponOverlapValue(num);
							this.WeaponOverlapView();
						}
					}
				}
				finally
				{
				}
			}

			// Token: 0x0600906D RID: 36973 RVA: 0x002EA57C File Offset: 0x002E877C
			private void \uE012(bool value)
			{
				if (this.IsAiming && value)
				{
					this.\uE020();
				}
				if (this.IsBipodsOperation)
				{
					this.CurrentOperation.FastForward();
				}
				if (this.FirearmsAnimator != null)
				{
					this.FirearmsAnimator.SetSprint(value);
				}
				if (value)
				{
					this.SetTriggerPressed(false);
				}
			}

			// Token: 0x0600906E RID: 36974 RVA: 0x002EA5E0 File Offset: 0x002E87E0
			private void \uE013(EPlayerState previousstate, EPlayerState nextstate)
			{
				if (!EFTHardSettings.Instance.CanAimInState(nextstate))
				{
					this.\uE020();
				}
			}

			// Token: 0x0600906F RID: 36975 RVA: 0x002EA5F8 File Offset: 0x002E87F8
			public bool AudioDelegate()
			{
				return this.IsTriggerPressed && !this.Malfunction;
			}

			// Token: 0x06009070 RID: 36976 RVA: 0x002EA610 File Offset: 0x002E8810
			protected virtual void InitBallisticCalculator()
			{
				this.BallisticsCalculator = Singleton<\uE71B>.Instance.CreateBallisticCalculator(0);
			}

			// Token: 0x06009071 RID: 36977 RVA: 0x002EA624 File Offset: 0x002E8824
			public virtual void SetWeaponOverlapValue(float overlap)
			{
				this.\uE013 = overlap;
			}

			// Token: 0x06009072 RID: 36978 RVA: 0x002EA630 File Offset: 0x002E8830
			public void WeaponOverlapView()
			{
				if (this._player.MovementContext.IsInMountedState && this._player.MovementContext.PlayerMountingPointData.TransitionMounting)
				{
					this.\uE013 = 0f;
				}
				Vector3 vector = this._player.ProceduralWeaponAnimation.HandsContainer.HandsPosition.Get();
				if (this.\uE013 < 0.02f)
				{
					this._player.ProceduralWeaponAnimation.TurnAway.OverlapDepth = this.\uE013;
					this._player.ProceduralWeaponAnimation.OverlappingAllowsBlindfire = true;
				}
				else
				{
					this._player.ProceduralWeaponAnimation.OverlappingAllowsBlindfire = false;
					this._player.ProceduralWeaponAnimation.TurnAway.OriginZShift = vector.y;
					this._player.ProceduralWeaponAnimation.TurnAway.OverlapDepth = this.\uE013;
				}
				if (this.\uE013 > EFTHardSettings.Instance.STOP_AIMING_AT && this.IsAiming)
				{
					this.ToggleAim();
					this.AimingInterruptedByOverlap = true;
					return;
				}
				if (this.\uE013 < EFTHardSettings.Instance.STOP_AIMING_AT && this._player.ProceduralWeaponAnimation.TurnAway.OverlapValue < 0.2f)
				{
					if (this.AimingInterruptedByOverlap)
					{
						if (!this.IsAiming)
						{
							this.ToggleAim();
							this.AimingInterruptedByOverlap = false;
						}
					}
				}
			}

			// Token: 0x06009073 RID: 36979 RVA: 0x002EA7B0 File Offset: 0x002E89B0
			private void \uE014()
			{
				if (this.Item.WeapFireType.Length > 1)
				{
					this.\uE001.SetFireMode(this.Item.SelectedFireMode, true);
				}
				if (this.Item.HasChambers)
				{
					this.\uE001.SetAmmoInChamber((float)this.Item.ChamberAmmoCount);
				}
				\uEE67 currentMagazine = this.Item.GetCurrentMagazine();
				this.\uE001.SetMagInWeapon(currentMagazine != null);
				this.\uE001.SetAmmoOnMag((currentMagazine != null) ? currentMagazine.Count : 0);
				this.\uE001.SetMagTypeCurrent((currentMagazine != null) ? currentMagazine.magAnimationIndex : -1);
				this.\uE001.Fold(this.Item.Folded);
				if (this.UnderbarrelWeapon != null)
				{
					this.\uE001.SetLauncher(false);
				}
			}

			// Token: 0x06009074 RID: 36980 RVA: 0x002EA8A0 File Offset: 0x002E8AA0
			protected override void IEventsConsumerOnWeapIn()
			{
				this.\uE022();
			}

			// Token: 0x06009075 RID: 36981 RVA: 0x002EA8A8 File Offset: 0x002E8AA8
			protected override void IEventsConsumerOnWeapOut()
			{
				this.\uE021();
			}

			// Token: 0x06009076 RID: 36982 RVA: 0x002EA8B0 File Offset: 0x002E8AB0
			protected override void IEventsConsumerOnThirdAction(int intParam)
			{
				base.TranslateAnimatorParameter(intParam);
			}

			// Token: 0x06009077 RID: 36983 RVA: 0x002EA8BC File Offset: 0x002E8ABC
			protected override void IEventsConsumerOnAddAmmoInChamber()
			{
				this.\uE024();
			}

			// Token: 0x06009078 RID: 36984 RVA: 0x002EA8C4 File Offset: 0x002E8AC4
			protected override void IEventsConsumerOnRemoveShell()
			{
				this.\uE025();
			}

			// Token: 0x06009079 RID: 36985 RVA: 0x002EA8CC File Offset: 0x002E8ACC
			protected override void IEventsConsumerOnShellEject()
			{
				this.\uE026();
			}

			// Token: 0x0600907A RID: 36986 RVA: 0x002EA8D4 File Offset: 0x002E8AD4
			protected override void IEventsConsumerOnAddAmmoInMag()
			{
				this.\uE028();
			}

			// Token: 0x0600907B RID: 36987 RVA: 0x002EA8DC File Offset: 0x002E8ADC
			protected override void IEventsConsumerOnDelAmmoFromMag()
			{
				this.\uE027();
			}

			// Token: 0x0600907C RID: 36988 RVA: 0x002EA8E4 File Offset: 0x002E8AE4
			protected override void IEventsConsumerOnShowAmmo(bool boolParam)
			{
				this.\uE029(boolParam);
			}

			// Token: 0x0600907D RID: 36989 RVA: 0x002EA8F0 File Offset: 0x002E8AF0
			protected override void IEventsConsumerOnDelAmmoChamber()
			{
				this.\uE023();
			}

			// Token: 0x0600907E RID: 36990 RVA: 0x002EA8F8 File Offset: 0x002E8AF8
			protected override void IEventsConsumerOnMagIn()
			{
				this.\uE034();
			}

			// Token: 0x0600907F RID: 36991 RVA: 0x002EA900 File Offset: 0x002E8B00
			protected override void IEventsConsumerOnMagOut()
			{
				this.\uE031();
			}

			// Token: 0x06009080 RID: 36992 RVA: 0x002EA908 File Offset: 0x002E8B08
			protected override void IEventsConsumerOnMagShow()
			{
				this.\uE033();
			}

			// Token: 0x06009081 RID: 36993 RVA: 0x002EA910 File Offset: 0x002E8B10
			protected override void IEventsConsumerOnMagHide()
			{
				this.\uE032();
			}

			// Token: 0x06009082 RID: 36994 RVA: 0x002EA918 File Offset: 0x002E8B18
			protected override void IEventsConsumerOnOffBoltCatch()
			{
				this.\uE02A(false);
			}

			// Token: 0x06009083 RID: 36995 RVA: 0x002EA924 File Offset: 0x002E8B24
			protected override void IEventsConsumerOnOnBoltCatch()
			{
				this.\uE02A(true);
			}

			// Token: 0x06009084 RID: 36996 RVA: 0x002EA930 File Offset: 0x002E8B30
			protected override void IEventsConsumerOnMalfunctionOff()
			{
				this.\uE02B();
			}

			// Token: 0x06009085 RID: 36997 RVA: 0x002EA938 File Offset: 0x002E8B38
			protected override void IEventsConsumerOnFiringBullet()
			{
				this.\uE02C();
			}

			// Token: 0x06009086 RID: 36998 RVA: 0x002EA940 File Offset: 0x002E8B40
			protected override void IEventsConsumerOnFireEnd()
			{
				this.\uE02D();
			}

			// Token: 0x06009087 RID: 36999 RVA: 0x002EA948 File Offset: 0x002E8B48
			protected override void IEventsConsumerOnIdleStart()
			{
				this.\uE02F();
			}

			// Token: 0x06009088 RID: 37000 RVA: 0x002EA950 File Offset: 0x002E8B50
			protected override void IEventsConsumerOnUseSecondMagForReload()
			{
				this.\uE01A();
			}

			// Token: 0x06009089 RID: 37001 RVA: 0x002EA958 File Offset: 0x002E8B58
			protected override void IEventsConsumerOnReplaceSecondMag()
			{
				this.\uE01B();
			}

			// Token: 0x0600908A RID: 37002 RVA: 0x002EA960 File Offset: 0x002E8B60
			protected override void IEventsConsumerOnPutMagToRig()
			{
				this.\uE01C();
			}

			// Token: 0x0600908B RID: 37003 RVA: 0x002EA968 File Offset: 0x002E8B68
			protected override void IEventsConsumerOnModChanged()
			{
				this.\uE030();
			}

			// Token: 0x0600908C RID: 37004 RVA: 0x002EA970 File Offset: 0x002E8B70
			protected override void IEventsConsumerOnLauncherAppeared()
			{
				this.\uE019();
			}

			// Token: 0x0600908D RID: 37005 RVA: 0x002EA978 File Offset: 0x002E8B78
			protected override void IEventsConsumerOnLauncherDisappeared()
			{
				this.\uE018();
			}

			// Token: 0x0600908E RID: 37006 RVA: 0x002EA980 File Offset: 0x002E8B80
			protected override void IEventsConsumerOnArm()
			{
				this.\uE035(true);
			}

			// Token: 0x0600908F RID: 37007 RVA: 0x002EA98C File Offset: 0x002E8B8C
			protected override void IEventsConsumerOnDisarm()
			{
				this.\uE035(false);
			}

			// Token: 0x06009090 RID: 37008 RVA: 0x002EA998 File Offset: 0x002E8B98
			protected override void IEventsConsumerOnFoldOn()
			{
				this.\uE015(true);
			}

			// Token: 0x06009091 RID: 37009 RVA: 0x002EA9A4 File Offset: 0x002E8BA4
			protected override void IEventsConsumerOnFoldOff()
			{
				this.\uE015(false);
			}

			// Token: 0x06009092 RID: 37010 RVA: 0x002EA9B0 File Offset: 0x002E8BB0
			protected override void IEventsOnBackpackDrop()
			{
				this.\uE02E();
			}

			// Token: 0x06009093 RID: 37011 RVA: 0x002EA9B8 File Offset: 0x002E8BB8
			protected override void IEventsConsumerOnStartUtilityOperation()
			{
				Player.FirearmController.\uE00A currentOperation = this.CurrentOperation;
				if (currentOperation == null)
				{
					return;
				}
				currentOperation.OnUtilityOperationStartEvent();
			}

			// Token: 0x06009094 RID: 37012 RVA: 0x002EA9CC File Offset: 0x002E8BCC
			protected override void IEventsConsumerOnOnUseProp(bool boolParam)
			{
				base.SetPropVisibility(boolParam);
			}

			// Token: 0x06009095 RID: 37013 RVA: 0x002EA9D8 File Offset: 0x002E8BD8
			protected override void IEventsOnBipodToggle()
			{
				this.\uE036();
			}

			// Token: 0x06009096 RID: 37014 RVA: 0x002EA9E0 File Offset: 0x002E8BE0
			private void \uE015(bool b)
			{
				this.SetCompassState(false);
				Player.FirearmController.\uE00A currentOperation = this.CurrentOperation;
				if (currentOperation == null)
				{
					return;
				}
				currentOperation.OnFold(b);
			}

			// Token: 0x06009097 RID: 37015 RVA: 0x002EA9FC File Offset: 0x002E8BFC
			public override bool CanExecute(\uEF5F operation)
			{
				if (this.\uE016(operation))
				{
					return true;
				}
				if (!(this.CurrentOperation is Player.FirearmController.\uE010))
				{
					if (!(this.CurrentOperation is Player.FirearmController.\uE014))
					{
						return false;
					}
				}
				if (!(this.CurrentOperation is Player.FirearmController.\uE034))
				{
					return !(this.CurrentOperation is Player.FirearmController.\uE016);
				}
				return false;
			}

			// Token: 0x06009098 RID: 37016 RVA: 0x002EAA60 File Offset: 0x002E8C60
			private bool \uE016(\uEF5F operation)
			{
				\uEF6A uEF6A = operation as \uEF6A;
				if (uEF6A == null)
				{
					return true;
				}
				if (!this.\uE017(operation))
				{
					if (!this._player.InventoryController.IsAnimatedSlot(uEF6A.From1))
					{
						return true;
					}
				}
				return false;
			}

			// Token: 0x06009099 RID: 37017 RVA: 0x002EAAB0 File Offset: 0x002E8CB0
			public override void Execute(\uEF5F operation, Callback callback)
			{
				this.CurrentOperation.Execute(operation, callback);
			}

			// Token: 0x0600909A RID: 37018 RVA: 0x002EAAC0 File Offset: 0x002E8CC0
			private bool \uE017(\uEF5F operation)
			{
				\uEF6A uEF6A = operation as \uEF6A;
				if (uEF6A == null)
				{
					return false;
				}
				if (uEF6A.Item1 == this.Item)
				{
					return true;
				}
				if (uEF6A.Item1.IsChildOf(this.Item))
				{
					return true;
				}
				if ((uEF6A.From1 != null && uEF6A.From1.IsChildOf(this.Item, false)) || (uEF6A.From1 == null && uEF6A.Item1 == this.Item) || (uEF6A.To1 != null && uEF6A.To1.IsChildOf(this.Item, false)) || (uEF6A.To1 == null && uEF6A.Item1 == this.Item))
				{
					return true;
				}
				\uEF6B uEF6B = operation as \uEF6B;
				if (uEF6B == null)
				{
					return false;
				}
				if (uEF6B.Item2 != null && uEF6B.Item2.IsChildOf(this.Item))
				{
					return true;
				}
				if (uEF6B.From2 != null)
				{
					if (uEF6B.From2.IsChildOf(this.Item, false))
					{
						return true;
					}
				}
				if (uEF6B.To2 != null)
				{
					if (uEF6B.To2.IsChildOf(this.Item, false))
					{
						return true;
					}
				}
				return false;
			}

			// Token: 0x0600909B RID: 37019 RVA: 0x002EABFC File Offset: 0x002E8DFC
			private void \uE018()
			{
				this.CurrentOperation.LauncherDisappeared();
			}

			// Token: 0x0600909C RID: 37020 RVA: 0x002EAC0C File Offset: 0x002E8E0C
			private void \uE019()
			{
				this.CurrentOperation.LauncherAppeared();
			}

			// Token: 0x0600909D RID: 37021 RVA: 0x002EAC1C File Offset: 0x002E8E1C
			private void \uE01A()
			{
				this.CurrentOperation.UseSecondMagForReload();
			}

			// Token: 0x0600909E RID: 37022 RVA: 0x002EAC2C File Offset: 0x002E8E2C
			private void \uE01B()
			{
				this.CurrentOperation.ReplaceSecondMag();
			}

			// Token: 0x0600909F RID: 37023 RVA: 0x002EAC3C File Offset: 0x002E8E3C
			private void \uE01C()
			{
				this.CurrentOperation.PutMagToRig();
			}

			// Token: 0x060090A0 RID: 37024 RVA: 0x002EAC4C File Offset: 0x002E8E4C
			private void \uE01D()
			{
				this.CurrentOperation.OnJumpOrFall();
			}

			// Token: 0x060090A1 RID: 37025 RVA: 0x002EAC5C File Offset: 0x002E8E5C
			private void \uE01E()
			{
				this.CurrentOperation.OnSprintFinished();
			}

			// Token: 0x060090A2 RID: 37026 RVA: 0x002EAC6C File Offset: 0x002E8E6C
			private void \uE01F()
			{
				this.CurrentOperation.OnSprintStart();
			}

			// Token: 0x060090A3 RID: 37027 RVA: 0x002EAC7C File Offset: 0x002E8E7C
			private void \uE020()
			{
				this.CurrentOperation.OnAimingDisabled();
			}

			// Token: 0x060090A4 RID: 37028 RVA: 0x002EAC8C File Offset: 0x002E8E8C
			private void \uE021()
			{
				this.CurrentOperation.HideWeaponComplete();
			}

			// Token: 0x060090A5 RID: 37029 RVA: 0x002EAC9C File Offset: 0x002E8E9C
			private void \uE022()
			{
				this.CurrentOperation.WeaponAppeared();
			}

			// Token: 0x060090A6 RID: 37030 RVA: 0x002EACAC File Offset: 0x002E8EAC
			private void \uE023()
			{
				this.CurrentOperation.RemoveAmmoFromChamber();
			}

			// Token: 0x060090A7 RID: 37031 RVA: 0x002EACBC File Offset: 0x002E8EBC
			private void \uE024()
			{
				this.CurrentOperation.OnAddAmmoInChamber();
			}

			// Token: 0x060090A8 RID: 37032 RVA: 0x002EACCC File Offset: 0x002E8ECC
			private void \uE025()
			{
				this.CurrentOperation.OnRemoveShellEvent();
			}

			// Token: 0x060090A9 RID: 37033 RVA: 0x002EACDC File Offset: 0x002E8EDC
			private void \uE026()
			{
				this.CurrentOperation.OnShellEjectEvent();
			}

			// Token: 0x060090AA RID: 37034 RVA: 0x002EACEC File Offset: 0x002E8EEC
			private void \uE027()
			{
				Debug.LogError(\uF1F8.\uE000(139340));
			}

			// Token: 0x060090AB RID: 37035 RVA: 0x002EAD00 File Offset: 0x002E8F00
			private void \uE028()
			{
				this.CurrentOperation.AddAmmoToMag();
			}

			// Token: 0x060090AC RID: 37036 RVA: 0x002EAD10 File Offset: 0x002E8F10
			private void \uE029(bool b)
			{
				this.CurrentOperation.OnShowAmmo(b);
			}

			// Token: 0x060090AD RID: 37037 RVA: 0x002EAD20 File Offset: 0x002E8F20
			private void \uE02A(bool isCatched)
			{
				this.CurrentOperation.OnOnOffBoltCatchEvent(isCatched);
			}

			// Token: 0x060090AE RID: 37038 RVA: 0x002EAD30 File Offset: 0x002E8F30
			private void \uE02B()
			{
				this.CurrentOperation.OnMalfunctionOffEvent();
			}

			// Token: 0x060090AF RID: 37039 RVA: 0x002EAD40 File Offset: 0x002E8F40
			private void \uE02C()
			{
				this.CurrentOperation.OnFireEvent();
			}

			// Token: 0x060090B0 RID: 37040 RVA: 0x002EAD50 File Offset: 0x002E8F50
			private void \uE02D()
			{
				this.CurrentOperation.OnFireEndEvent();
			}

			// Token: 0x060090B1 RID: 37041 RVA: 0x002EAD60 File Offset: 0x002E8F60
			private void \uE02E()
			{
				this.CurrentOperation.OnBackpackDropEvent();
			}

			// Token: 0x060090B2 RID: 37042 RVA: 0x002EAD70 File Offset: 0x002E8F70
			private void \uE02F()
			{
				this.CurrentOperation.OnIdleStartEvent();
			}

			// Token: 0x060090B3 RID: 37043 RVA: 0x002EAD80 File Offset: 0x002E8F80
			private void \uE030()
			{
				this.CurrentOperation.OnModChanged();
			}

			// Token: 0x060090B4 RID: 37044 RVA: 0x002EAD90 File Offset: 0x002E8F90
			private void \uE031()
			{
				this.CurrentOperation.OnMagPulledOutFromWeapon();
			}

			// Token: 0x060090B5 RID: 37045 RVA: 0x002EADA0 File Offset: 0x002E8FA0
			private void \uE032()
			{
				this.CurrentOperation.OnMagPuttedToRig();
			}

			// Token: 0x060090B6 RID: 37046 RVA: 0x002EADB0 File Offset: 0x002E8FB0
			private void \uE033()
			{
				this.CurrentOperation.OnMagAppeared();
			}

			// Token: 0x060090B7 RID: 37047 RVA: 0x002EADC0 File Offset: 0x002E8FC0
			private void \uE034()
			{
				this.CurrentOperation.OnMagInsertedToWeapon();
			}

			// Token: 0x060090B8 RID: 37048 RVA: 0x002EADD0 File Offset: 0x002E8FD0
			private void \uE035(bool armed)
			{
				this.\uE001.SetHammerArmed(armed);
				this.Item.Armed = armed;
			}

			// Token: 0x060090B9 RID: 37049 RVA: 0x002EADEC File Offset: 0x002E8FEC
			private void \uE036()
			{
				this.CurrentOperation.OnBipodToggleEvent();
			}

			// Token: 0x060090BA RID: 37050 RVA: 0x002EADFC File Offset: 0x002E8FFC
			public override void Spawn(float animationSpeed, Action callback)
			{
				Player.FirearmController.\uE038 uE = new Player.FirearmController.\uE038();
				uE.callback = callback;
				uE.<>4__this = this;
				this.\uE001.SetAnimationSpeed(animationSpeed);
				base.InitiateOperation<Player.FirearmController.\uE02F>().Start(new Action(uE.\uE000));
			}

			// Token: 0x060090BB RID: 37051 RVA: 0x002EAE48 File Offset: 0x002E9048
			public override void Drop(float animationSpeed, Action callback, bool fastDrop, Item nextControllerItem = null)
			{
				Player.FirearmController.\uE039 uE = new Player.FirearmController.\uE039();
				uE.callback = callback;
				if (base.Destroyed)
				{
					this.CurrentOperation.HideWeapon(uE.callback, fastDrop, nextControllerItem);
					return;
				}
				base.Destroyed = true;
				this._player.MovementContext.OnStateChanged -= this.\uE013;
				this._player.Physical.OnSprintStateChangedEvent -= this.\uE012;
				this.RemoveBallisticCalculator();
				uE.inventoryOperation = this._player.\uE085(this.Item);
				this.\uE001.SetAnimationSpeed(animationSpeed);
				Action onHidden = new Action(uE.\uE000);
				this.CurrentOperation.HideWeapon(onHidden, fastDrop, nextControllerItem);
			}

			// Token: 0x060090BC RID: 37052 RVA: 0x002EAF20 File Offset: 0x002E9120
			protected virtual void RemoveBallisticCalculator()
			{
				Singleton<\uE71B>.Instance.RemoveBallisticCalculator(this.Item);
			}

			// Token: 0x060090BD RID: 37053 RVA: 0x002EAF34 File Offset: 0x002E9134
			public override void Destroy()
			{
				Action uE = this.\uE008;
				if (uE != null)
				{
					uE();
				}
				this.\uE008 = null;
				this.\uE010 = null;
				\uE37D ccv = this.CCV;
				if (ccv != null)
				{
					ccv.Dispose();
				}
				this.CCV = null;
				this._player.ProceduralWeaponAnimation.ClearPreviousWeapon();
				this.\uE00D.OnSmoothSensetivityChange -= this.\uE003;
				this.\uE00D.OnSmoothScopeStateChanged -= this.\uE004;
				Player.FirearmController.\uE033 uE2 = this.\uE024;
				if (uE2 != null)
				{
					uE2.Clear();
				}
				if (this.\uE001 != null)
				{
					this.\uE001.SetBoltCatch(false);
				}
				base.Destroy();
				this.\uE001 = null;
				this.BallisticsCalculator = null;
				this.\uE00D.ValidateScopeSmoothZoomUpdate(false);
				AssetPoolObject.ReturnToPool(this._controllerObject.gameObject, true);
			}

			// Token: 0x060090BE RID: 37054 RVA: 0x002EB02C File Offset: 0x002E922C
			public override bool SupportPickup()
			{
				return true;
			}

			// Token: 0x060090BF RID: 37055 RVA: 0x002EB030 File Offset: 0x002E9230
			public override void Pickup(bool p)
			{
				this.CurrentOperation.Pickup(p);
			}

			// Token: 0x060090C0 RID: 37056 RVA: 0x002EB040 File Offset: 0x002E9240
			public override void Interact(bool isInteracting, int actionIndex)
			{
				this.CurrentOperation.Interact(isInteracting, actionIndex);
			}

			// Token: 0x060090C1 RID: 37057 RVA: 0x002EB050 File Offset: 0x002E9250
			public override bool CanInteract()
			{
				if (!(this.CurrentOperation is Player.FirearmController.\uE010))
				{
					if (!(this.CurrentOperation is Player.FirearmController.\uE014))
					{
						return this.CurrentOperation is Player.FirearmController.\uE00D;
					}
				}
				return true;
			}

			// Token: 0x060090C2 RID: 37058 RVA: 0x002EB084 File Offset: 0x002E9284
			public override bool InCanNotBeInterruptedOperation()
			{
				return this.CurrentOperation.CanNotBeInterrupted();
			}

			// Token: 0x060090C3 RID: 37059 RVA: 0x002EB094 File Offset: 0x002E9294
			public override void Loot(bool p)
			{
				this.CurrentOperation.Loot(p);
			}

			// Token: 0x060090C4 RID: 37060 RVA: 0x002EB0A4 File Offset: 0x002E92A4
			public override bool IsInInteraction()
			{
				return this.\uE001.IsInInteraction;
			}

			// Token: 0x060090C5 RID: 37061 RVA: 0x002EB0B4 File Offset: 0x002E92B4
			public override bool IsInInteractionStrictCheck()
			{
				if (!this.IsInInteraction())
				{
					if (this.\uE001.GetLayerWeight(this.\uE001.LACTIONS_LAYER_INDEX) < 1E-45f)
					{
						return this.\uE001.Animator.IsInTransition(this.\uE001.LACTIONS_LAYER_INDEX);
					}
				}
				return true;
			}

			// Token: 0x060090C6 RID: 37062 RVA: 0x002EB10C File Offset: 0x002E930C
			public virtual void UnderbarrelSightingRangeDown()
			{
				this.CurrentOperation.UnderbarrelSightingRangeDown();
			}

			// Token: 0x060090C7 RID: 37063 RVA: 0x002EB11C File Offset: 0x002E931C
			public virtual void UnderbarrelSightingRangeUp()
			{
				this.CurrentOperation.UnderbarrelSightingRangeUp();
			}

			// Token: 0x060090C8 RID: 37064 RVA: 0x002EB12C File Offset: 0x002E932C
			public virtual bool IsInLauncherMode()
			{
				if (!(this.CurrentOperation is Player.FirearmController.\uE014))
				{
					if (!(this.CurrentOperation is Player.FirearmController.\uE013))
					{
						return this.CurrentOperation is Player.FirearmController.\uE015;
					}
				}
				return true;
			}

			// Token: 0x060090C9 RID: 37065 RVA: 0x002EB160 File Offset: 0x002E9360
			public virtual bool ToggleLauncher(Action callback = null)
			{
				return this.CurrentOperation.ToggleLauncher(callback);
			}

			// Token: 0x060090CA RID: 37066 RVA: 0x002EB170 File Offset: 0x002E9370
			public virtual void ChangeLeftStance()
			{
				if (this.Blindfire)
				{
					return;
				}
				if (this._player.MovementContext.IsInMountedState)
				{
					return;
				}
				this.CurrentOperation.ToggleLeftStance();
			}

			// Token: 0x060090CB RID: 37067 RVA: 0x002EB19C File Offset: 0x002E939C
			public virtual bool ToggleBipod()
			{
				return this.HasBipod && !this._player.MovementContext.PlayerAnimator.AnimatedInteractions.IsScheduleDenied && !this._player.MovementContext.IsInMountedState && !this.IsOverlap && !this._player.IsSprintEnabled && this._player.MovementContext.PlayerAnimator.AnimatedInteractions.CanInteract && this._player.HandsController.FirearmsAnimator.IsIdling() && this.CurrentOperation.ToggleBipod();
			}

			// Token: 0x060090CC RID: 37068 RVA: 0x002EB264 File Offset: 0x002E9464
			public virtual void SetTriggerPressed(bool pressed)
			{
				this.CurrentOperation.SetTriggerPressed(pressed && this.\uE037());
			}

			// Token: 0x060090CD RID: 37069 RVA: 0x002EB280 File Offset: 0x002E9480
			private bool \uE037()
			{
				bool flag = this._player.MovementContext.PlayerAnimatorGetIsVaulting();
				\uE714.VaultingGlobalSettings vaultingSettings = Singleton<\uE714>.Instance.VaultingSettings;
				IVaultingParameters vaultingParameters = this._player.VaultingParameters;
				EVaultingStrategy evaultingStrategy = flag ? (this._player.MovementContext.PlayerAnimator.GetDoVault() ? EVaultingStrategy.Vault : EVaultingStrategy.Climb) : EVaultingStrategy.None;
				if (evaultingStrategy == EVaultingStrategy.Vault && flag)
				{
					if (vaultingParameters.VaultingHeight > vaultingSettings.MovesSettings.VaultSettings.MaxWithoutHandHeight)
					{
						return false;
					}
				}
				if (evaultingStrategy == EVaultingStrategy.Climb && flag)
				{
					if (vaultingParameters.VaultingHeight > vaultingSettings.MovesSettings.ClimbSettings.MaxWithoutHandHeight)
					{
						return false;
					}
				}
				return true;
			}

			// Token: 0x060090CE RID: 37070 RVA: 0x002EB340 File Offset: 0x002E9540
			public virtual bool CanPressTrigger()
			{
				return true;
			}

			// Token: 0x060090CF RID: 37071 RVA: 0x002EB344 File Offset: 0x002E9544
			public virtual void ToggleAim()
			{
				if (this.Blindfire)
				{
					return;
				}
				this.SetCompassState(false);
				this.SetAim(!this.IsAiming);
			}

			// Token: 0x060090D0 RID: 37072 RVA: 0x002EB368 File Offset: 0x002E9568
			public virtual void SetAim(int scopeIndex)
			{
				this.Item.AimIndex.Value = Mathf.Max(0, scopeIndex);
				this.SetAim(scopeIndex >= 0);
			}

			// Token: 0x060090D1 RID: 37073 RVA: 0x002EB390 File Offset: 0x002E9590
			public virtual void SetAim(bool value)
			{
				if (this.Blindfire)
				{
					return;
				}
				if (this._player.UsedSimplifiedSkeleton)
				{
					this._player.MovementContext.PlayerAnimator.SetAiming(value);
				}
				if (this._player.MovementContext.IsInMountedState && Mathf.Abs(this.\uE00D.ProceduralWeaponAnimation.CurrentScope.Rotation) >= EFTHardSettings.Instance.SCOPE_ROTATION_THRESHOLD)
				{
					value = false;
				}
				bool flag = this.Item is \uEEA2;
				if (this.Item.IsOneOff && !flag)
				{
					value = false;
				}
				this.AimingInterruptedByOverlap = false;
				bool isAiming = this.IsAiming;
				this.CurrentOperation.SetAiming(value);
				this._player.ProceduralWeaponAnimation.CheckShouldMoveWeaponCloser();
				this._player.\uE004 &= !value;
				if (isAiming == this.IsAiming)
				{
					return;
				}
				this._player.ProceduralWeaponAnimation.Shootingg.CurrentRecoilEffect.WeaponRecoilEffect.SetAiming(value);
				this._player.\uE03A(0.2f, false);
				if (value)
				{
					this.\uE03E();
				}
			}

			// Token: 0x060090D2 RID: 37074 RVA: 0x002EB4D8 File Offset: 0x002E96D8
			public override void SetInventoryOpened(bool opened)
			{
				if (opened)
				{
					this._player.MovementContext.LeftStanceController.DisableLeftStanceAnimFromOpenInventory();
				}
				else
				{
					this._player.MovementContext.LeftStanceController.SetAnimatorLeftStanceToCacheFromCloseInventory();
				}
				this.CurrentOperation.SetInventoryOpened(opened);
				MovementState currentManagedState = this._player.CurrentManagedState;
				if (currentManagedState != null)
				{
					currentManagedState.OnInventory(opened);
				}
				this._player.InventoryOpenRaiseAction(opened);
			}

			// Token: 0x060090D3 RID: 37075 RVA: 0x002EB550 File Offset: 0x002E9750
			public override bool IsInventoryOpen()
			{
				return this.InventoryOpened;
			}

			// Token: 0x060090D4 RID: 37076 RVA: 0x002EB558 File Offset: 0x002E9758
			public virtual void ChangeAimingMode()
			{
				if (this.Blindfire)
				{
					return;
				}
				int num = this.Item.AimIndex.Value + 1;
				if (num >= this.\uE00D.ProceduralWeaponAnimation.ScopeAimTransforms.Count)
				{
					num = 0;
				}
				if (this._player.MovementContext.IsInMountedState)
				{
					while (num != this.Item.AimIndex.Value && Mathf.Abs(this.\uE00D.ProceduralWeaponAnimation.ScopeAimTransforms[num].Rotation) >= EFTHardSettings.Instance.SCOPE_ROTATION_THRESHOLD)
					{
						num++;
						if (num >= this.\uE00D.ProceduralWeaponAnimation.ScopeAimTransforms.Count)
						{
							num = 0;
						}
					}
					if (num != this.Item.AimIndex.Value)
					{
						if (Mathf.Abs(this.\uE00D.ProceduralWeaponAnimation.ScopeAimTransforms[num].Rotation) < EFTHardSettings.Instance.SCOPE_ROTATION_THRESHOLD)
						{
							goto IL_FF;
						}
					}
					return;
				}
				IL_FF:
				this.Item.AimIndex.Value = num;
				this.UpdateSensitivity();
				this._player.RaiseSightChangedEvent(this._player.ProceduralWeaponAnimation.CurrentAimingMod);
			}

			// Token: 0x060090D5 RID: 37077 RVA: 0x002EB6AC File Offset: 0x002E98AC
			public virtual void ChangeAimingMode(int modeIndex)
			{
				if (this.Blindfire)
				{
					return;
				}
				this.Item.AimIndex.Value = modeIndex;
				this.UpdateSensitivity();
				this._player.RaiseSightChangedEvent(this._player.ProceduralWeaponAnimation.CurrentAimingMod);
			}

			// Token: 0x060090D6 RID: 37078 RVA: 0x002EB6FC File Offset: 0x002E98FC
			public virtual bool ChangeFireMode(Weapon.EFireMode fireMode)
			{
				return !this.Blindfire && this.CurrentOperation.ChangeFireMode(fireMode);
			}

			// Token: 0x060090D7 RID: 37079 RVA: 0x002EB714 File Offset: 0x002E9914
			public virtual bool CheckFireMode()
			{
				if (this.Blindfire)
				{
					return false;
				}
				if (this._player.MovementContext.IsInMountedState)
				{
					this._player.MovementContext.StartExitingMountedState();
				}
				return this.CurrentOperation.CheckFireMode();
			}

			// Token: 0x060090D8 RID: 37080 RVA: 0x002EB754 File Offset: 0x002E9954
			public virtual bool ExamineWeapon()
			{
				if (this.Blindfire)
				{
					return false;
				}
				if (!(this.CurrentOperation is Player.FirearmController.\uE010))
				{
					if (!(this.CurrentOperation is Player.FirearmController.\uE014))
					{
						return false;
					}
				}
				if (!this._player.InventoryController.HasAnyHandsAction())
				{
					if (!this.CurrentOperation.ExamineWeapon())
					{
						return false;
					}
					if (this._player.MovementContext.IsInMountedState)
					{
						this._player.MovementContext.StartExitingMountedState();
					}
					if (this.Item.MalfState.State == Weapon.EMalfunctionState.Jam || this.Item.MalfState.State == Weapon.EMalfunctionState.Feed)
					{
						if (!this.Item.MalfState.IsKnownMalfunction(this._player.ProfileId))
						{
							this.\uE001.MisfireSlideUnknown(false);
							this._player.InventoryController.ExamineMalfunction(this.Item, false);
						}
					}
					return true;
				}
				return false;
			}

			// Token: 0x060090D9 RID: 37081 RVA: 0x002EB860 File Offset: 0x002E9A60
			public virtual void RollCylinder(bool rollToZeroCamora)
			{
				if (this.Blindfire)
				{
					return;
				}
				this.CurrentOperation.RollCylinder(null, rollToZeroCamora);
			}

			// Token: 0x060090DA RID: 37082 RVA: 0x002EB878 File Offset: 0x002E9A78
			public virtual bool CheckAmmo()
			{
				if (this.Blindfire)
				{
					return false;
				}
				this._player.MovementContext.PlayerAnimator.AnimatedInteractions.ForceStopInteractions();
				if (this._player.MovementContext.PlayerAnimator.AnimatedInteractions.IsInteractionPlaying)
				{
					return false;
				}
				if (this._player.MovementContext.IsInMountedState)
				{
					this._player.MovementContext.StartExitingMountedState();
				}
				return this.CurrentOperation.CheckAmmo();
			}

			// Token: 0x060090DB RID: 37083 RVA: 0x002EB904 File Offset: 0x002E9B04
			public virtual bool CheckChamber()
			{
				if (this.Blindfire)
				{
					return false;
				}
				if (this._player.MovementContext.IsInMountedState)
				{
					this._player.MovementContext.StartExitingMountedState();
				}
				return this.CurrentOperation.CheckChamber();
			}

			// Token: 0x060090DC RID: 37084 RVA: 0x002EB944 File Offset: 0x002E9B44
			public virtual void ReloadMag(\uEE67 magazine, ItemAddress itemAddress, Callback callback)
			{
				using (\uF181.BeginSampleWithToken(\uF1F8.\uE000(139308), \uF1F8.\uE000(139277)))
				{
					if (!this.Blindfire)
					{
						this._player.MovementContext.PlayerAnimator.AnimatedInteractions.ForceStopInteractions();
						if (!this._player.MovementContext.PlayerAnimator.AnimatedInteractions.IsInteractionPlaying)
						{
							if (this.CanStartReload())
							{
								this.CurrentOperation.ReloadMag(magazine, itemAddress, callback, null);
							}
							else if (callback != null)
							{
								callback.Fail(\uF1F8.\uE000(139515));
							}
						}
					}
				}
			}

			// Token: 0x060090DD RID: 37085 RVA: 0x002EBA00 File Offset: 0x002E9C00
			public virtual void QuickReloadMag(\uEE67 magazine, Callback callback)
			{
				using (\uF181.BeginSampleWithToken(\uF1F8.\uE000(139496), \uF1F8.\uE000(139442)))
				{
					if (!this.Blindfire)
					{
						if (this.CanStartReload())
						{
							this.CurrentOperation.QuickReloadMag(magazine, callback, null);
						}
						else if (callback != null)
						{
							callback.Fail(\uF1F8.\uE000(139515));
						}
					}
				}
			}

			// Token: 0x060090DE RID: 37086 RVA: 0x002EBA80 File Offset: 0x002E9C80
			public virtual void ReloadGrenadeLauncher(\uEDA2 foundItem, Callback callback)
			{
				if (this.Blindfire)
				{
					return;
				}
				if (this.CanStartReload())
				{
					this.CurrentOperation.ReloadGrenadeLauncher(foundItem, callback);
					return;
				}
				if (callback != null)
				{
					callback.Fail(\uF1F8.\uE000(139515));
				}
			}

			// Token: 0x060090DF RID: 37087 RVA: 0x002EBABC File Offset: 0x002E9CBC
			public virtual void ReloadCylinderMagazine(\uEDA2 ammoPack, Callback callback, bool quickReload = false)
			{
				if (this.Blindfire)
				{
					return;
				}
				if (this.Item.GetCurrentMagazine() == null)
				{
					return;
				}
				if (this.CanStartReload())
				{
					this.CurrentOperation.ReloadCylinderMagazine(ammoPack, callback, null, quickReload);
					return;
				}
				if (callback != null)
				{
					callback.Fail(\uF1F8.\uE000(139515));
				}
			}

			// Token: 0x060090E0 RID: 37088 RVA: 0x002EBB14 File Offset: 0x002E9D14
			public virtual void ReloadWithAmmo(\uEDA2 ammoPack, Callback callback)
			{
				if (this.Item.GetCurrentMagazine() == null)
				{
					return;
				}
				if (this.Blindfire)
				{
					return;
				}
				if (!this.CanStartReload())
				{
					if (callback != null)
					{
						callback.Fail(\uF1F8.\uE000(139515));
					}
					return;
				}
				if (this.Item is \uEEA0)
				{
					this.CurrentOperation.ReloadCylinderMagazine(ammoPack, callback, null, false);
					return;
				}
				this.CurrentOperation.ReloadWithAmmo(ammoPack, callback, null);
			}

			// Token: 0x060090E1 RID: 37089 RVA: 0x002EBB88 File Offset: 0x002E9D88
			public virtual void ReloadBarrels(\uEDA2 ammoPack, ItemAddress placeToPutContainedAmmoMagazine, Callback callback)
			{
				if (this.Blindfire)
				{
					return;
				}
				if (this.CanStartReload() && ammoPack.AmmoCount > 0)
				{
					this.CurrentOperation.ReloadBarrels(ammoPack, placeToPutContainedAmmoMagazine, callback, null);
					return;
				}
				if (callback != null)
				{
					callback.Fail(\uF1F8.\uE000(139515));
				}
			}

			// Token: 0x060090E2 RID: 37090 RVA: 0x002EBBDC File Offset: 0x002E9DDC
			public virtual bool CanStartReload()
			{
				if (this.Blindfire)
				{
					return false;
				}
				\uEE67 currentMagazine = this.Item.GetCurrentMagazine();
				if (currentMagazine != null && !this._player.InventoryController.Examined(currentMagazine))
				{
					\uEA30.DisplaySingletonWarningNotification(\uF1F8.\uE000(139453).Localized(null), ENotificationDurationType.Default);
					return false;
				}
				bool flag = (this.Item.MustBoltBeOpennedForExternalReload || this.Item.MustBoltBeOpennedForInternalReload) && this.Item.MalfState.IsAnyMalfExceptMisfire;
				if (this.Item.MalfState.State == Weapon.EMalfunctionState.Feed || flag)
				{
					this._player.HandsController.FirearmsAnimator.MisfireSlideUnknown(false);
					this._player.InventoryController.ExamineMalfunction(this.Item, false);
					return false;
				}
				return this.CurrentOperation.CanStartReload();
			}

			// Token: 0x060090E3 RID: 37091 RVA: 0x002EBCD4 File Offset: 0x002E9ED4
			public virtual bool ShouldForceQuickReload()
			{
				IHealthController healthController = this._player.HealthController;
				return ((healthController != null) ? healthController.FindActiveEffect<\uED52>(EBodyPart.Head) : null) != null;
			}

			// Token: 0x060090E4 RID: 37092 RVA: 0x002EBCF4 File Offset: 0x002E9EF4
			public override void ManualUpdate(float deltaTime)
			{
				base.ManualUpdate(deltaTime);
				FirearmsAnimator uE = this.\uE001;
				if (uE != null)
				{
					uE.SetAimAngle(this._player.Pitch);
				}
				if (this._player.MovementContext.FreefallTime > 0.5f)
				{
					this.SetAim(false);
				}
				this.\uE018 = true;
			}

			// Token: 0x060090E5 RID: 37093 RVA: 0x002EBD58 File Offset: 0x002E9F58
			public Dictionary<string, LightComponent> GetCurrentLightStatus()
			{
				return Enumerable.ToDictionary<LightComponent, string, LightComponent>(Enumerable.Select<Slot, Item>(this.Item.AllSlots, new Func<Slot, Item>(Player.FirearmController.<>c.<>9.\uE008)).GetComponents<LightComponent>(), new Func<LightComponent, string>(Player.FirearmController.<>c.<>9.\uE009), new Func<LightComponent, LightComponent>(Player.FirearmController.<>c.<>9.\uE00A));
			}

			// Token: 0x060090E6 RID: 37094 RVA: 0x002EBDDC File Offset: 0x002E9FDC
			public Dictionary<string, SightComponent> GetCurrentScopesStatus()
			{
				return Enumerable.ToDictionary<SightComponent, string, SightComponent>(Enumerable.Select<Slot, Item>(this.Item.AllSlots, new Func<Slot, Item>(Player.FirearmController.<>c.<>9.\uE00B)).GetComponents<SightComponent>(), new Func<SightComponent, string>(Player.FirearmController.<>c.<>9.\uE00C), new Func<SightComponent, SightComponent>(Player.FirearmController.<>c.<>9.\uE00D));
			}

			// Token: 0x060090E7 RID: 37095 RVA: 0x002EBE60 File Offset: 0x002EA060
			public virtual bool SetLightsState(\uE825[] lightsStates, bool force = false, bool animated = true)
			{
				if (!force && !this.CurrentOperation.CanChangeLightState(lightsStates))
				{
					return false;
				}
				Dictionary<string, LightComponent> currentLightStatus = this.GetCurrentLightStatus();
				foreach (\uE825 uE in lightsStates)
				{
					if (currentLightStatus.ContainsKey(uE.Id))
					{
						LightComponent lightComponent = currentLightStatus[uE.Id];
						lightComponent.IsActive = uE.IsActive;
						lightComponent.SelectedMode = uE.LightMode;
						if (lightComponent.IsActive && this._player.AIData != null)
						{
							this._player.AIData.TacticalModeChange(true);
						}
					}
					else
					{
						Debug.LogErrorFormat(\uF1F8.\uE000(139392), new object[]
						{
							uE.Id
						});
					}
				}
				IAIData aidata = this._player.AIData;
				if (aidata != null)
				{
					aidata.TacticalModeChange(Enumerable.Any<KeyValuePair<string, LightComponent>>(currentLightStatus, new Func<KeyValuePair<string, LightComponent>, bool>(Player.FirearmController.<>c.<>9.\uE00E)));
				}
				this.CurrentOperation.SetLightsState(lightsStates, force, animated);
				if (\uE2F9.Config.UseSpiritPlayer)
				{
					this._player.Spirit.RecheckSwitch();
				}
				this.UpdateHipInaccuracy();
				return true;
			}

			// Token: 0x060090E8 RID: 37096 RVA: 0x002EBFB4 File Offset: 0x002EA1B4
			public override bool CanRemove()
			{
				return this.CurrentOperation.CanRemove();
			}

			// Token: 0x060090E9 RID: 37097 RVA: 0x002EBFC4 File Offset: 0x002EA1C4
			public virtual void SetScopeMode(\uE826[] scopeStates)
			{
				if (!this.CurrentOperation.CanChangeScopeStates(scopeStates))
				{
					return;
				}
				Dictionary<string, SightComponent> currentScopesStatus = this.GetCurrentScopesStatus();
				foreach (\uE826 uE in scopeStates)
				{
					if (currentScopesStatus.ContainsKey(uE.Id))
					{
						SightComponent sightComponent = currentScopesStatus[uE.Id];
						sightComponent.SetScopeMode(uE.ScopeIndexInsideSight, uE.ScopeMode);
						sightComponent.SetSelectedOpticCalibrationPoint(uE.ScopeIndexInsideSight, uE.ScopeCalibrationIndex);
					}
					else
					{
						Debug.LogError(\uF1F8.\uE000(143209) + uE.Id + \uF1F8.\uE000(143187));
					}
				}
				this._player.RaiseSightChangedEvent(this._player.ProceduralWeaponAnimation.CurrentAimingMod);
				this.UpdateSensitivity();
				this.CurrentOperation.SetScopeMode(scopeStates);
			}

			// Token: 0x060090EA RID: 37098 RVA: 0x002EC0B0 File Offset: 0x002EA2B0
			public override bool IsHandsProcessing()
			{
				return this.\uE001.IsHandsProcessing();
			}

			// Token: 0x060090EB RID: 37099 RVA: 0x002EC0C0 File Offset: 0x002EA2C0
			public override void ShowGesture(EInteraction gesture)
			{
				this.CurrentOperation.ShowGesture(gesture);
				if (Singleton<\uE34D>.Instantiated)
				{
					Singleton<\uE34D>.Instance.ShowGesture(this._player, gesture);
				}
			}

			// Token: 0x060090EC RID: 37100 RVA: 0x002EC0F0 File Offset: 0x002EA2F0
			public override void BlindFire(int b)
			{
				this.CurrentOperation.BlindFire(b);
			}

			// Token: 0x170014BF RID: 5311
			// (get) Token: 0x060090ED RID: 37101 RVA: 0x002EC100 File Offset: 0x002EA300
			public bool CanSetBlindFire
			{
				get
				{
					if (!(this.CurrentOperation is Player.FirearmController.\uE034))
					{
						if (!(this.CurrentOperation is Player.FirearmController.\uE010))
						{
							if (!(this.CurrentOperation is Player.FirearmController.\uE014))
							{
								return false;
							}
						}
						return !this.InventoryOpened;
					}
					return false;
				}
			}

			// Token: 0x170014C0 RID: 5312
			// (get) Token: 0x060090EE RID: 37102 RVA: 0x002EC13C File Offset: 0x002EA33C
			public bool IsBipodsOperation
			{
				get
				{
					return this.CurrentOperation is Player.FirearmController.\uE031;
				}
			}

			// Token: 0x060090EF RID: 37103 RVA: 0x002EC14C File Offset: 0x002EA34C
			private float \uE038(Weapon weapon)
			{
				return weapon.GetBarrelDeviation();
			}

			// Token: 0x060090F0 RID: 37104 RVA: 0x002EC154 File Offset: 0x002EA354
			protected List<LightComponent> GetAllLightMods()
			{
				return Enumerable.ToList<LightComponent>(Enumerable.Select<Slot, Item>(this.Item.AllSlots, new Func<Slot, Item>(Player.FirearmController.<>c.<>9.\uE00F)).GetComponents<LightComponent>());
			}

			// Token: 0x060090F1 RID: 37105 RVA: 0x002EC190 File Offset: 0x002EA390
			private void \uE039(\uEDED flareItem)
			{
				Transform transform = \uE3D9.FindTransformRecursiveContains(base.WeaponRoot.transform, \uF1F8.\uE000(22896), false);
				this.InitiateFlare(flareItem, transform.position, -transform.up);
			}

			// Token: 0x060090F2 RID: 37106 RVA: 0x002EC1D4 File Offset: 0x002EA3D4
			private void \uE03A(\uEDED rocketItem)
			{
				Transform transform = \uE3D9.FindTransformRecursiveContains(base.WeaponRoot.transform, \uF1F8.\uE000(22896), false);
				this.InitiateRocket(rocketItem, transform.position, -transform.up);
			}

			// Token: 0x060090F3 RID: 37107 RVA: 0x002EC218 File Offset: 0x002EA418
			protected void InitiateFlare(\uEDED flareItem, Vector3 shotPosition, Vector3 forward)
			{
				this.CreateFlareShot(flareItem, shotPosition, forward);
				this.\uE03D(this.\uE022, flareItem, shotPosition, forward, false);
				this.\uE00D.PlayShotEffects(this._player.IsVisible, this._player.SqrCameraDistance);
			}

			// Token: 0x060090F4 RID: 37108 RVA: 0x002EC268 File Offset: 0x002EA468
			protected void InitiateRocket(\uEDED rocketItem, Vector3 shotPosition, Vector3 forward)
			{
				this.CreateRocketShot(rocketItem, shotPosition, forward);
				this.\uE03D(this.\uE022, rocketItem, shotPosition, forward, false);
				this.\uE00D.PlayShotEffects(this._player.IsVisible, this._player.SqrCameraDistance);
			}

			// Token: 0x060090F5 RID: 37109 RVA: 0x002EC2B8 File Offset: 0x002EA4B8
			public virtual void AdjustShotVectors(ref Vector3 position, ref Vector3 direction)
			{
				position -= direction * this.WeaponLn / 5f;
				if (this._player.ProceduralWeaponAnimation.ShotNeedsFovAdjustments && this._player.RibcageScaleCurrent < 1f)
				{
					Transform self = this.HandsHierarchy.Self;
					Vector3 position2 = self.InverseTransformPoint(position);
					Vector3 direction2 = self.InverseTransformDirection(direction);
					position2.z *= this._player.RibcageScaleCurrent;
					direction2.z *= this._player.RibcageScaleCurrent;
					position = self.TransformPoint(position2);
					direction = self.TransformDirection(direction2).normalized;
				}
			}

			// Token: 0x060090F6 RID: 37110 RVA: 0x002EC3A4 File Offset: 0x002EA5A4
			private void \uE03B(\uEE5D launcher, \uEDED ammo)
			{
				Vector3 vector = this.\uE00B() ? this._player.LookDirection : this.\uE024.Fireport.Original.TransformDirection(this._player.LocalShotDirection);
				Vector3 vector2 = this.\uE00B() ? this._player.AIData.BotOwner.LookSensor.ShootStartPos : this.\uE024.Fireport.position;
				float ammoFactor = ammo.AmmoFactor;
				float num = 1f;
				this.AdjustShotVectors(ref vector2, ref vector);
				ammo.buckshotDispersion = launcher.TotalShotgunDispersion;
				float barrelDeviation = launcher.GetBarrelDeviation();
				Vector3 shotDirection = vector * 100f + launcher.CenterOfImpact * ammoFactor * num * barrelDeviation * UnityEngine.Random.insideUnitSphere;
				this.InitiateShot(launcher, ammo, vector2, shotDirection.normalized, vector2, 0, 0f);
				float num2 = 1f;
				this.\uE021 = num2 + (float)ammo.ammoRec / 100f;
				this.\uE03D(this.\uE024.WeaponSoundPlayer, ammo, vector2, shotDirection, false);
				if (ammo.AmmoTemplate.IsLightAndSoundShot)
				{
					this.\uE040(vector2, vector);
					this.LightAndSoundShot(vector2, vector, ammo.AmmoTemplate);
				}
			}

			// Token: 0x060090F7 RID: 37111 RVA: 0x002EC518 File Offset: 0x002EA718
			private void \uE03C(Weapon weapon, \uEDED ammo, int chamberIndex, bool multiShot = false)
			{
				Transform original = this.CurrentFireport.Original;
				Vector3 position = this.CurrentFireport.position;
				Vector3 vector = this.\uE00B() ? this._player.LookDirection : this.WeaponDirection;
				Vector3 shotPosition = this.\uE00B() ? this._player.AIData.BotOwner.LookSensor.ShootStartPos : position;
				float ammoFactor = ammo.AmmoFactor;
				float num = 1f;
				\uE714 instance = Singleton<\uE714>.Instance;
				this.AdjustShotVectors(ref shotPosition, ref vector);
				ammo.buckshotDispersion = this.\uE015;
				this.CurrentChamberIndex = chamberIndex;
				weapon.OnShot(ammo.DurabilityBurnModificator, ammo.HeatFactor, this._player.Skills.WeaponDurabilityLosOnShotReduce.Value, instance.Overheat, \uE780.PastTime);
				float overheatProblemsStart = instance.Overheat.OverheatProblemsStart;
				if (weapon.MalfState.LastShotOverheat >= overheatProblemsStart)
				{
					num = Mathf.Lerp(1f, instance.Overheat.MaxCOIIncreaseMult, (weapon.MalfState.LastShotOverheat - overheatProblemsStart) / (instance.Overheat.MaxOverheat - overheatProblemsStart));
				}
				bool flag = multiShot && chamberIndex > 0;
				if (flag)
				{
					float x = UnityEngine.Random.Range(this.\uE010.DupletAccuracyPenaltyX.x, this.\uE010.DupletAccuracyPenaltyX.y);
					float y = UnityEngine.Random.Range(this.\uE010.DupletAccuracyPenaltyY.x, this.\uE010.DupletAccuracyPenaltyY.y);
					Vector3 vector2 = new Vector3(x, y);
					float angle = vector2.y * -1f;
					vector = Quaternion.AngleAxis(vector2.x, original.forward) * vector;
					vector = Quaternion.AngleAxis(angle, original.right) * vector;
				}
				float num2 = weapon.CylinderHammerClosed ? (weapon.DoubleActionAccuracyPenalty * (1f - this.\uE016.DoubleActionRecoilReduce) * weapon.StockDoubleActionAccuracyPenaltyMult) : 0f;
				float num3 = this.\uE038(weapon);
				double num4 = weapon.GetItemComponent<BuffComponent>().WeaponSpread;
				if (num4.ApproxEquals(0.0))
				{
					num4 = 1.0;
				}
				Vector3 shotDirection = this.\uE00C() ? vector : (vector * 100f + (this.\uE014 + num2) * ammoFactor * num * num3 * (float)num4 * UnityEngine.Random.insideUnitSphere);
				this.InitiateShot(weapon, ammo, shotPosition, shotDirection.normalized, position, chamberIndex, weapon.MalfState.LastShotOverheat);
				float num5 = flag ? 1.5f : 1f;
				this.\uE021 = num5 + (float)ammo.ammoRec / 100f;
				this.\uE03D(this.\uE022, ammo, shotPosition, shotDirection, multiShot);
				if (ammo.AmmoTemplate.IsLightAndSoundShot)
				{
					this.\uE040(position, vector);
					this.LightAndSoundShot(position, vector, ammo.AmmoTemplate);
				}
			}

			// Token: 0x060090F8 RID: 37112 RVA: 0x002EC82C File Offset: 0x002EAA2C
			private void \uE03D(WeaponSoundPlayer weaponSoundPlayer, \uEDED ammo, Vector3 shotPosition, Vector3 shotDirection, bool multiShot)
			{
				if (this.Item.FireMode.FireMode == Weapon.EFireMode.burst && this.Item.FireMode.BurstShotsCount == 2)
				{
					if (!this.IsBirstOf2Start)
					{
						if (this.Item.ChamberAmmoCount > 0)
						{
							return;
						}
					}
				}
				float pitchMult = this.\uE03F();
				weaponSoundPlayer.FireBullet(ammo, shotPosition, shotDirection.normalized, pitchMult, this.Malfunction, multiShot, this.IsBirstOf2Start);
			}

			// Token: 0x060090F9 RID: 37113 RVA: 0x002EC8AC File Offset: 0x002EAAAC
			private void \uE03E()
			{
				float volume = this.CalculateAimingSoundVolume();
				this.\uE022.PlayAimingSound(volume);
			}

			// Token: 0x060090FA RID: 37114 RVA: 0x002EC8CC File Offset: 0x002EAACC
			public float CalculateAimingSoundVolume()
			{
				float num = this.TotalErgonomics / 100f - 1f;
				float num2 = Mathf.Clamp(num * num, 0.1f, 0.2f) * (1f - this._player.Skills.DrawSound);
				float num3 = 1f - this._player.Skills.BotSoundCoef;
				return num2 * this._player.MovementContext.CovertEquipmentNoise * num3;
			}

			// Token: 0x060090FB RID: 37115 RVA: 0x002EC948 File Offset: 0x002EAB48
			private float \uE03F()
			{
				float overheatFirerateMult = this.Item.MalfState.OverheatFirerateMult;
				if (this.Item.FireMode.FireMode == Weapon.EFireMode.fullauto)
				{
					if (overheatFirerateMult > 0f)
					{
						float num = 60f / (float)this.Item.FireRate;
						return 60f / ((float)this.Item.FireRate * overheatFirerateMult) / num;
					}
				}
				return 1f + UnityEngine.Random.Range(-0.03f, 0.03f);
			}

			// Token: 0x060090FC RID: 37116 RVA: 0x002EC9E4 File Offset: 0x002EABE4
			protected internal virtual void DryShot(int chamberIndex = 0, bool underbarrelShot = false)
			{
				this.SetCompassState(false);
			}

			// Token: 0x060090FD RID: 37117 RVA: 0x002EC9F0 File Offset: 0x002EABF0
			protected virtual void ShotMisfired(\uEDED ammo, Weapon.EMalfunctionState malfunctionState, float overheat)
			{
			}

			// Token: 0x060090FE RID: 37118 RVA: 0x002EC9F4 File Offset: 0x002EABF4
			protected virtual void RegisterShot(Item weapon, \uF064 shot)
			{
			}

			// Token: 0x060090FF RID: 37119 RVA: 0x002EC9F8 File Offset: 0x002EABF8
			protected virtual void InitiateShot(\uEEFB weapon, \uEDED ammo, Vector3 shotPosition, Vector3 shotDirection, Vector3 fireportPosition, int chamberIndex, float overheat)
			{
				this._player.OnMakingShot(weapon, this._player.PlayerBones.WeaponRoot.position - shotPosition);
				if (ammo.InitialSpeed > 0f)
				{
					if (ammo.ProjectileCount == 1)
					{
						\uF064 shot = this.BallisticsCalculator.Shoot(ammo, shotPosition, shotDirection, this._player.ProfileId, weapon.Item, weapon.SpeedFactor, 0);
						this.RegisterShot(weapon.Item, shot);
					}
					else
					{
						Player.FirearmController.\uE009.Clear();
						this.BallisticsCalculator.ShotMultiProjectileShot(ammo, shotPosition, shotDirection, weapon.SpeedFactor, Player.FirearmController.\uE009, this._player.ProfileId, weapon.Item);
						foreach (\uF064 shot2 in Player.FirearmController.\uE009)
						{
							this.RegisterShot(weapon.Item, shot2);
						}
						Player.FirearmController.\uE009.Clear();
					}
				}
				Action uE = this.\uE006;
				if (uE != null)
				{
					uE();
				}
				this.\uE019 = true;
				if (weapon.IsUnderbarrelWeapon)
				{
					this.\uE024.FirearmsEffects.StartFireEffects(this._player.IsVisible, this._player.SqrCameraDistance);
					return;
				}
				this.\uE00D.PlayShotEffects(this._player.IsVisible, this._player.SqrCameraDistance);
			}

			// Token: 0x06009100 RID: 37120 RVA: 0x002ECB98 File Offset: 0x002EAD98
			protected virtual void SendStartOneShotFire()
			{
			}

			// Token: 0x06009101 RID: 37121 RVA: 0x002ECB9C File Offset: 0x002EAD9C
			protected virtual void CreateFlareShot(\uEDED flareItem, Vector3 shotPosition, Vector3 forward)
			{
				AmmoPoolObject ammoPoolObject = UnityEngine.Object.Instantiate<AmmoPoolObject>(Singleton<\uF1C4>.Instance.GetAsset(flareItem.Template.Prefab));
				ammoPoolObject.transform.position = shotPosition;
				ammoPoolObject.transform.forward = forward;
				ammoPoolObject.gameObject.SetActive(true);
				FlareCartridge flareCartridge = ammoPoolObject.GetComponent<FlareCartridge>();
				if (flareCartridge == null)
				{
					flareCartridge = ammoPoolObject.gameObject.AddComponent<FlareCartridge>();
				}
				FlareCartridgeSettings flareCartridgeSettings = ammoPoolObject.GetComponent<FlareCartridgeSettings>();
				if (flareCartridgeSettings == null)
				{
					flareCartridgeSettings = ammoPoolObject.gameObject.AddComponent<FlareCartridgeSettings>();
				}
				flareCartridge.Init(flareCartridgeSettings, this._player, flareItem, this.Item);
				flareCartridge.Launch();
				Singleton<\uE71B>.Instance.RegisterGrenade(flareCartridge);
				this.\uE019 = true;
			}

			// Token: 0x06009102 RID: 37122 RVA: 0x002ECC68 File Offset: 0x002EAE68
			protected virtual void CreateRocketShot(\uEDED rocketItem, Vector3 shotPosition, Vector3 forward)
			{
				AmmoPoolObject ammoPoolObject = UnityEngine.Object.Instantiate<AmmoPoolObject>(Singleton<\uF1C4>.Instance.GetAsset(rocketItem.Template.Prefab));
				ammoPoolObject.transform.position = shotPosition;
				ammoPoolObject.transform.forward = forward;
				ammoPoolObject.gameObject.SetActive(true);
				Rocket rocket = ammoPoolObject.GetComponent<Rocket>();
				if (rocket == null)
				{
					rocket = ammoPoolObject.gameObject.AddComponent<Rocket>();
				}
				RocketSettings rocketSettings = ammoPoolObject.GetComponent<RocketSettings>();
				if (rocketSettings == null)
				{
					rocketSettings = ammoPoolObject.gameObject.AddComponent<RocketSettings>();
				}
				rocket.Initialize(rocketSettings, this._player, rocketItem, this.Item);
				rocket.Launch();
				Singleton<\uE71B>.Instance.RegisterGrenade(rocket);
				this.\uE019 = true;
			}

			// Token: 0x06009103 RID: 37123 RVA: 0x002ECD34 File Offset: 0x002EAF34
			public override void OnAimReady()
			{
				base.OnAimReady();
				if (this.Weapon is \uEEA2)
				{
					this.FirearmsAnimator.SetAimingFloat(1f);
				}
			}

			// Token: 0x06009104 RID: 37124 RVA: 0x002ECD64 File Offset: 0x002EAF64
			public override void OnIdleReady()
			{
				base.OnIdleReady();
				if (this.Weapon is \uEEA2)
				{
					this.FirearmsAnimator.SetAimingFloat(0f);
				}
			}

			// Token: 0x06009105 RID: 37125 RVA: 0x002ECD94 File Offset: 0x002EAF94
			public override void OnDropWeapon()
			{
				this.CurrentOperation.OnDropWeapon();
			}

			// Token: 0x06009106 RID: 37126 RVA: 0x002ECDA4 File Offset: 0x002EAFA4
			public override void ManualLateUpdate(float deltaTime)
			{
				if (\uE2F9.Config.UseSpiritPlayer && this._player.Spirit.IsActive)
				{
					return;
				}
				if (this.\uE018)
				{
					this.WeaponOverlapping();
					this.\uE018 = false;
				}
				if (!this.\uE019)
				{
					return;
				}
				this.\uE019 = false;
				this._player.ProceduralWeaponAnimation.Shoot(this.\uE021);
			}

			// Token: 0x06009107 RID: 37127 RVA: 0x002ECE18 File Offset: 0x002EB018
			public override void OnPlayerDead()
			{
				\uF181.ReleaseBeginSample(\uF1F8.\uE000(143152), \uF1F8.\uE000(143123));
				Action uE = this.\uE008;
				if (uE != null)
				{
					uE();
				}
				this.CurrentOperation.FastForward();
				this.RemoveBallisticCalculator();
				base.OnPlayerDead();
			}

			// Token: 0x06009108 RID: 37128 RVA: 0x002ECE6C File Offset: 0x002EB06C
			public override void FastForwardCurrentState()
			{
				this.CurrentOperation.FastForward();
				base.FastForwardCurrentState();
			}

			// Token: 0x06009109 RID: 37129 RVA: 0x002ECE80 File Offset: 0x002EB080
			public bool IsInSpawnOperation()
			{
				return this.CurrentOperation == null || this.CurrentOperation is Player.FirearmController.\uE02F;
			}

			// Token: 0x0600910A RID: 37130 RVA: 0x002ECE9C File Offset: 0x002EB09C
			public bool IsInReloadOperation()
			{
				if (!(this.CurrentOperation is Player.FirearmController.\uE003) && !(this.CurrentOperation is Player.FirearmController.\uE011))
				{
					if (!(this.CurrentOperation is Player.FirearmController.\uE019))
					{
						if (!(this.CurrentOperation is Player.FirearmController.\uE01C))
						{
							return this.CurrentOperation is Player.FirearmController.\uE018;
						}
					}
				}
				return true;
			}

			// Token: 0x0600910B RID: 37131 RVA: 0x002ECF00 File Offset: 0x002EB100
			public bool IsInRemoveOperation()
			{
				return this.CurrentOperation == null || this.CurrentOperation is Player.FirearmController.\uE02A;
			}

			// Token: 0x0600910C RID: 37132 RVA: 0x002ECF1C File Offset: 0x002EB11C
			public virtual void OpticCalibrationSwitchUp(\uE826[] scopeStates)
			{
				this.\uE00D.OpticCalibrationSwitchUp();
			}

			// Token: 0x0600910D RID: 37133 RVA: 0x002ECF2C File Offset: 0x002EB12C
			public virtual void OpticCalibrationSwitchDown(\uE826[] scopeStates)
			{
				this.\uE00D.OpticCalibrationSwitchDown();
			}

			// Token: 0x0600910E RID: 37134 RVA: 0x002ECF3C File Offset: 0x002EB13C
			public bool HasScopeAimBone(SightComponent sightComp)
			{
				List<ProceduralWeaponAnimation.SightNBone> scopeAimTransforms = this._player.ProceduralWeaponAnimation.ScopeAimTransforms;
				for (int i = 0; i < scopeAimTransforms.Count; i++)
				{
					if (scopeAimTransforms[i].Mod != null && scopeAimTransforms[i].Mod.Equals(sightComp))
					{
						return true;
					}
				}
				return false;
			}

			// Token: 0x0600910F RID: 37135 RVA: 0x002ECFA0 File Offset: 0x002EB1A0
			public override void SetCompassState(bool active)
			{
				if (this.CanChangeCompassState(active))
				{
					this.CurrentOperation.SetFirearmCompassState(active);
				}
			}

			// Token: 0x06009110 RID: 37136 RVA: 0x002ECFB8 File Offset: 0x002EB1B8
			private void \uE040(Vector3 point, Vector3 direction)
			{
				Singleton<Effects>.Instance.EmitGrenade(\uF1F8.\uE000(143132), point, direction, 1f);
			}

			// Token: 0x06009111 RID: 37137 RVA: 0x002ECFD8 File Offset: 0x002EB1D8
			private void \uE041(bool isAiming)
			{
				this._player.MovementContext.PlayerAnimator.SetAiming(isAiming);
				if (!(this.Weapon is \uEEA2))
				{
					this.FirearmsAnimator.SetAiming(isAiming);
				}
				this.FirearmsAnimator.SetAimingIn(isAiming);
				this.FirearmsAnimator.SetAimingOut(!isAiming);
				this.FirearmsAnimator.SetPrevAimingFloat(!isAiming);
				this.\uE00E = true;
			}

			// Token: 0x06009112 RID: 37138 RVA: 0x002ED058 File Offset: 0x002EB258
			private void \uE042()
			{
				this.FirearmsAnimator.SetAimingIn(false);
				this.FirearmsAnimator.SetAimingOut(false);
				this.FirearmsAnimator.SetPrevAimingFloat(false);
				this.\uE00E = false;
			}

			// Token: 0x06009113 RID: 37139 RVA: 0x002ED08C File Offset: 0x002EB28C
			protected virtual void LightAndSoundShot(Vector3 point, Vector3 direction, AmmoTemplate ammoTemplate)
			{
				ActiveHealthController activeHealthController = this._player.ActiveHealthController;
				if (activeHealthController != null)
				{
					activeHealthController.DoContusion(ammoTemplate.LightAndSoundShotSelfContusionTime, ammoTemplate.LightAndSoundShotSelfContusionStrength);
				}
				Vector3 blindness = ammoTemplate.Blindness;
				float y = blindness.y;
				Collider[] array = Physics.OverlapSphere(point, y, \uE3CA.PlayerMask);
				List<\uE703> list = null;
				Dictionary<\uE703, \uE849> dictionary = null;
				float num = Mathf.Cos(ammoTemplate.LightAndSoundShotAngle * 0.5f * 0.017453292f);
				foreach (Collider col in array)
				{
					\uE703 alivePlayerBridgeByCollider = Singleton<GameWorld>.Instance.GetAlivePlayerBridgeByCollider(col);
					if (alivePlayerBridgeByCollider != null && !(alivePlayerBridgeByCollider.iPlayer.ProfileId == this._player.ProfileId))
					{
						if (list == null)
						{
							list = new List<\uE703>();
							dictionary = new Dictionary<\uE703, \uE849>();
						}
						Vector3 vector = alivePlayerBridgeByCollider.iPlayer.PlayerBones.Head.position - point;
						Vector3 normalized = vector.normalized;
						float magnitude = vector.magnitude;
						bool flag = Vector3.Dot(direction, normalized) >= num;
						list.Add(alivePlayerBridgeByCollider);
						dictionary.Add(alivePlayerBridgeByCollider, new \uE849
						{
							Distance = magnitude,
							DirectionToEmitter = -normalized,
							TryToApplyStun = flag,
							TryToApplyBurnEyes = flag,
							TryToApplyContusion = true
						});
					}
				}
				if (list != null)
				{
					\uE84A.ApplyLightAndSoundHealthEffects(list, dictionary, point, blindness, ammoTemplate.Contusion);
				}
			}

			// Token: 0x06009114 RID: 37140 RVA: 0x002ED224 File Offset: 0x002EB424
			private bool \uE043()
			{
				Slot slot = this._player.Equipment.GetSlot(EquipmentSlot.Holster);
				if (this.Weapon.Parent.Container != slot && this.Weapon.GetCurrentMagazineCount() == 0 && this.Weapon.ChamberAmmoCount == 0)
				{
					Weapon weapon = slot.ContainedItem as Weapon;
					if (weapon != null)
					{
						if (weapon.MalfState.State == Weapon.EMalfunctionState.None)
						{
							return weapon.ChamberAmmoCount != 0;
						}
					}
				}
				return false;
			}

			// Token: 0x06009115 RID: 37141 RVA: 0x002ED2B0 File Offset: 0x002EB4B0
			public float GetTotalMalfunctionChance(\uEDED ammoToFire, float overheat, out double durabilityMalfChance, out float magMalfChance, out float ammoMalfChance, out float overheatMalfChance, out float weaponDurability)
			{
				durabilityMalfChance = 0.0;
				magMalfChance = 0f;
				ammoMalfChance = 0f;
				overheatMalfChance = 0f;
				weaponDurability = 0f;
				if (!this.Item.AllowMalfunction)
				{
					return 0f;
				}
				\uE714 instance = Singleton<\uE714>.Instance;
				\uE714.\uE00A malfunction = instance.Malfunction;
				\uE714.\uE00B overheat2 = instance.Overheat;
				\uE714.\uE037 troubleShooting = instance.SkillsSettings.TroubleShooting;
				float ammoMalfChanceMult = malfunction.AmmoMalfChanceMult;
				float magazineMalfChanceMult = malfunction.MagazineMalfChanceMult;
				\uEE67 currentMagazine = this.Item.GetCurrentMagazine();
				magMalfChance = ((currentMagazine == null) ? 0f : (currentMagazine.MalfunctionChance * magazineMalfChanceMult));
				ammoMalfChance = ((ammoToFire != null) ? ((ammoToFire.MalfMisfireChance + ammoToFire.MalfFeedChance) * ammoMalfChanceMult) : 0f);
				float num = this.Item.Repairable.Durability / (float)this.Item.Repairable.TemplateDurability * 100f;
				weaponDurability = Mathf.Floor(num);
				if (overheat >= overheat2.OverheatProblemsStart)
				{
					overheatMalfChance = Mathf.Lerp(overheat2.MinMalfChance, overheat2.MaxMalfChance, (overheat - overheat2.OverheatProblemsStart) / (overheat2.MaxOverheat - overheat2.OverheatProblemsStart));
				}
				overheatMalfChance *= (float)this.Item.Buff.MalfunctionProtections;
				if (weaponDurability > 59f)
				{
					durabilityMalfChance = (Math.Pow((double)(this.Item.BaseMalfunctionChance + 1f), 3.0 + (double)(100f - weaponDurability) / (20.0 - 10.0 / Math.Pow((double)this.Item.FireRate / 10.0, 0.322))) - 1.0) / 1000.0;
				}
				else
				{
					durabilityMalfChance = (Math.Pow((double)(this.Item.BaseMalfunctionChance + 1f), Math.Log10(Math.Pow((double)(101f - weaponDurability), (50.0 - Math.Pow((double)weaponDurability, 1.286) / 4.8) / (Math.Pow((double)this.Item.FireRate, 0.17) / 2.9815 + 2.1)))) - 1.0) / 1000.0;
				}
				durabilityMalfChance *= (double)((float)this.Item.Buff.MalfunctionProtections);
				if (this.Item.MalfState.HasMalfReduceChance(this._player.ProfileId, Weapon.EMalfunctionSource.Durability))
				{
					durabilityMalfChance *= (double)troubleShooting.EliteDurabilityChanceReduceMult;
				}
				if (this.Item.MalfState.HasMalfReduceChance(this._player.ProfileId, Weapon.EMalfunctionSource.Magazine))
				{
					magMalfChance *= troubleShooting.EliteMagChanceReduceMult;
				}
				if (this.Item.MalfState.HasMalfReduceChance(this._player.ProfileId, Weapon.EMalfunctionSource.Ammo))
				{
					ammoMalfChance *= troubleShooting.EliteAmmoChanceReduceMult;
				}
				if (num >= malfunction.DurRangeToIgnoreMalfs.x && num <= malfunction.DurRangeToIgnoreMalfs.y)
				{
					durabilityMalfChance = 0.0;
					ammoMalfChance = 0f;
					magMalfChance = 0f;
				}
				durabilityMalfChance = (double)Mathf.Clamp01((float)durabilityMalfChance);
				return Mathf.Clamp01((float)Math.Round(durabilityMalfChance + (double)((ammoMalfChance + magMalfChance + overheatMalfChance) / 1000f), 5));
			}

			// Token: 0x06009116 RID: 37142 RVA: 0x002ED628 File Offset: 0x002EB828
			public float GetNextMalfunctionRandom()
			{
				return this.\uE011.GetNextRandom();
			}

			// Token: 0x06009117 RID: 37143 RVA: 0x002ED638 File Offset: 0x002EB838
			public void GetMalfunctionSources(List<\uE3C4<Weapon.EMalfunctionSource>.\uE000<float, Weapon.EMalfunctionSource>> result, double durabilityMalfChance, float magMalfChance, float ammoMalfChance, float overheatMalfChance, bool hasAmmoInMag, bool isMagazineInserted)
			{
				result.Clear();
				result.Add(new \uE3C4<Weapon.EMalfunctionSource>.\uE000<float, Weapon.EMalfunctionSource>((float)durabilityMalfChance, Weapon.EMalfunctionSource.Durability));
				if (ammoMalfChance > 0f)
				{
					result.Add(new \uE3C4<Weapon.EMalfunctionSource>.\uE000<float, Weapon.EMalfunctionSource>(ammoMalfChance / 1000f, Weapon.EMalfunctionSource.Ammo));
				}
				if (magMalfChance > 0f && hasAmmoInMag && isMagazineInserted)
				{
					result.Add(new \uE3C4<Weapon.EMalfunctionSource>.\uE000<float, Weapon.EMalfunctionSource>(magMalfChance / 1000f, Weapon.EMalfunctionSource.Magazine));
				}
				if (overheatMalfChance > 0f)
				{
					result.Add(new \uE3C4<Weapon.EMalfunctionSource>.\uE000<float, Weapon.EMalfunctionSource>(overheatMalfChance / 1000f, Weapon.EMalfunctionSource.Overheat));
				}
			}

			// Token: 0x06009118 RID: 37144 RVA: 0x002ED6C8 File Offset: 0x002EB8C8
			public void GetSpecificMalfunctionVariants(List<\uE3C4<Weapon.EMalfunctionState>.\uE000<float, Weapon.EMalfunctionState>> result, \uEDED ammo, Weapon.EMalfunctionSource malfunctionSource, float weaponDurability, bool hasAmmoInMag, bool isMagazineInserted, bool shouldCheckJam)
			{
				result.Clear();
				\uE714.\uE00A malfunction = Singleton<\uE714>.Instance.Malfunction;
				switch (malfunctionSource)
				{
				case Weapon.EMalfunctionSource.Durability:
					if (hasAmmoInMag && isMagazineInserted && this.Item.AllowFeed)
					{
						result.Add(new \uE3C4<Weapon.EMalfunctionState>.\uE000<float, Weapon.EMalfunctionState>(malfunction.DurFeedWt, Weapon.EMalfunctionState.Feed));
					}
					if (this.Item.AllowMisfire)
					{
						result.Add(new \uE3C4<Weapon.EMalfunctionState>.\uE000<float, Weapon.EMalfunctionState>(malfunction.DurMisfireWt, Weapon.EMalfunctionState.Misfire));
					}
					if (shouldCheckJam && this.Item.AllowJam)
					{
						result.Add(new \uE3C4<Weapon.EMalfunctionState>.\uE000<float, Weapon.EMalfunctionState>(malfunction.DurJamWt, Weapon.EMalfunctionState.Jam));
					}
					if (hasAmmoInMag && this.Item.AllowSlide)
					{
						result.Add(new \uE3C4<Weapon.EMalfunctionState>.\uE000<float, Weapon.EMalfunctionState>(malfunction.DurSoftSlideWt, Weapon.EMalfunctionState.SoftSlide));
					}
					if (weaponDurability <= 5f && hasAmmoInMag && this.Item.AllowSlide)
					{
						float first = Mathf.Lerp(malfunction.DurHardSlideMinWt, malfunction.DurHardSlideMaxWt, 1f - weaponDurability / 5f);
						result.Add(new \uE3C4<Weapon.EMalfunctionState>.\uE000<float, Weapon.EMalfunctionState>(first, Weapon.EMalfunctionState.HardSlide));
						return;
					}
					break;
				case Weapon.EMalfunctionSource.Ammo:
					if (this.Item.AllowMisfire)
					{
						float first2 = malfunction.AmmoMisfireWt / (ammo.MalfMisfireChance + ammo.MalfFeedChance);
						result.Add(new \uE3C4<Weapon.EMalfunctionState>.\uE000<float, Weapon.EMalfunctionState>(first2, Weapon.EMalfunctionState.Misfire));
					}
					if (hasAmmoInMag && isMagazineInserted && this.Item.AllowFeed)
					{
						result.Add(new \uE3C4<Weapon.EMalfunctionState>.\uE000<float, Weapon.EMalfunctionState>(malfunction.AmmoFeedWt, Weapon.EMalfunctionState.Feed));
					}
					if (shouldCheckJam && this.Item.AllowJam)
					{
						result.Add(new \uE3C4<Weapon.EMalfunctionState>.\uE000<float, Weapon.EMalfunctionState>(malfunction.AmmoJamWt, Weapon.EMalfunctionState.Jam));
						return;
					}
					break;
				case Weapon.EMalfunctionSource.Magazine:
					if (hasAmmoInMag && isMagazineInserted)
					{
						if (this.Item.AllowFeed)
						{
							result.Add(new \uE3C4<Weapon.EMalfunctionState>.\uE000<float, Weapon.EMalfunctionState>(1f, Weapon.EMalfunctionState.Feed));
						}
					}
					break;
				case Weapon.EMalfunctionSource.Ammo | Weapon.EMalfunctionSource.Magazine:
					break;
				case Weapon.EMalfunctionSource.Overheat:
					if (hasAmmoInMag && isMagazineInserted && this.Item.AllowFeed)
					{
						result.Add(new \uE3C4<Weapon.EMalfunctionState>.\uE000<float, Weapon.EMalfunctionState>(malfunction.OverheatFeedWt, Weapon.EMalfunctionState.Feed));
					}
					if (shouldCheckJam && this.Item.AllowJam)
					{
						result.Add(new \uE3C4<Weapon.EMalfunctionState>.\uE000<float, Weapon.EMalfunctionState>(malfunction.OverheatJamWt, Weapon.EMalfunctionState.Jam));
					}
					if (hasAmmoInMag && this.Item.AllowSlide)
					{
						result.Add(new \uE3C4<Weapon.EMalfunctionState>.\uE000<float, Weapon.EMalfunctionState>(malfunction.OverheatSoftSlideWt, Weapon.EMalfunctionState.SoftSlide));
					}
					if (weaponDurability <= 5f && hasAmmoInMag && this.Item.AllowSlide)
					{
						float first3 = Mathf.Lerp(malfunction.OverheatHardSlideMinWt, malfunction.OverheatHardSlideMaxWt, 1f - weaponDurability / 5f);
						result.Add(new \uE3C4<Weapon.EMalfunctionState>.\uE000<float, Weapon.EMalfunctionState>(first3, Weapon.EMalfunctionState.HardSlide));
						return;
					}
					break;
				default:
					return;
				}
			}

			// Token: 0x06009119 RID: 37145 RVA: 0x002ED96C File Offset: 0x002EBB6C
			public Weapon.EMalfunctionState GetMalfunctionState(\uEDED ammoToFire, bool hasAmmoInMag, bool doesWeaponHaveBoltCatch, bool isMagazineInserted, float overheat, float fixSlideOverheat, out Weapon.EMalfunctionSource malfunctionSource)
			{
				malfunctionSource = Weapon.EMalfunctionSource.Durability;
				if (!this.Item.AllowMalfunction)
				{
					return Weapon.EMalfunctionState.None;
				}
				if (this.Item.MalfState.SlideOnOverheatReached && overheat > fixSlideOverheat && this.Item.AllowSlide && hasAmmoInMag)
				{
					malfunctionSource = Weapon.EMalfunctionSource.Overheat;
					return Weapon.EMalfunctionState.SoftSlide;
				}
				double durabilityMalfChance;
				float magMalfChance;
				float ammoMalfChance;
				float overheatMalfChance;
				float weaponDurability;
				float totalMalfunctionChance = this.GetTotalMalfunctionChance(ammoToFire, overheat, out durabilityMalfChance, out magMalfChance, out ammoMalfChance, out overheatMalfChance, out weaponDurability);
				float randomFloat = this.\uE011.GetRandomFloat();
				if (randomFloat > totalMalfunctionChance)
				{
					return Weapon.EMalfunctionState.None;
				}
				List<\uE3C4<Weapon.EMalfunctionSource>.\uE000<float, Weapon.EMalfunctionSource>> uE02B = this.\uE02B;
				this.GetMalfunctionSources(uE02B, durabilityMalfChance, magMalfChance, ammoMalfChance, overheatMalfChance, hasAmmoInMag, isMagazineInserted);
				malfunctionSource = \uE3C4<Weapon.EMalfunctionSource>.GenerateDrop(uE02B, randomFloat);
				bool shouldCheckJam = hasAmmoInMag || !doesWeaponHaveBoltCatch || !isMagazineInserted;
				List<\uE3C4<Weapon.EMalfunctionState>.\uE000<float, Weapon.EMalfunctionState>> uE02C = this.\uE02C;
				this.GetSpecificMalfunctionVariants(uE02C, ammoToFire, malfunctionSource, weaponDurability, hasAmmoInMag, isMagazineInserted, shouldCheckJam);
				if (uE02C.Count == 0)
				{
					return Weapon.EMalfunctionState.None;
				}
				return \uE3C4<Weapon.EMalfunctionState>.GenerateDrop(uE02C);
			}

			// Token: 0x0600911A RID: 37146 RVA: 0x002EDA78 File Offset: 0x002EBC78
			protected override Dictionary<Type, Player.ItemHandsController.OperationFactoryDelegate> GetOperationFactoryDelegates()
			{
				return new Dictionary<Type, Player.ItemHandsController.OperationFactoryDelegate>
				{
					{
						typeof(Player.FirearmController.\uE02F),
						new Player.ItemHandsController.OperationFactoryDelegate(this.\uE044)
					},
					{
						typeof(Player.FirearmController.\uE02A),
						new Player.ItemHandsController.OperationFactoryDelegate(this.\uE045)
					},
					{
						typeof(Player.FirearmController.\uE010),
						new Player.ItemHandsController.OperationFactoryDelegate(this.\uE046)
					},
					{
						typeof(Player.FirearmController.\uE01F),
						new Player.ItemHandsController.OperationFactoryDelegate(this.\uE047)
					},
					{
						typeof(Player.FirearmController.\uE021),
						new Player.ItemHandsController.OperationFactoryDelegate(this.\uE048)
					},
					{
						typeof(Player.FirearmController.\uE01E),
						new Player.ItemHandsController.OperationFactoryDelegate(this.\uE049)
					},
					{
						typeof(Player.FirearmController.\uE027),
						new Player.ItemHandsController.OperationFactoryDelegate(this.\uE04A)
					},
					{
						typeof(Player.FirearmController.\uE024),
						new Player.ItemHandsController.OperationFactoryDelegate(this.\uE04B)
					},
					{
						typeof(Player.FirearmController.\uE01C),
						new Player.ItemHandsController.OperationFactoryDelegate(this.\uE04C)
					},
					{
						typeof(Player.FirearmController.\uE011),
						new Player.ItemHandsController.OperationFactoryDelegate(this.\uE04D)
					},
					{
						typeof(Player.FirearmController.\uE019),
						new Player.ItemHandsController.OperationFactoryDelegate(this.\uE04E)
					},
					{
						typeof(Player.FirearmController.\uE018),
						new Player.ItemHandsController.OperationFactoryDelegate(this.\uE04F)
					},
					{
						typeof(Player.FirearmController.\uE005),
						new Player.ItemHandsController.OperationFactoryDelegate(this.\uE050)
					},
					{
						typeof(Player.FirearmController.\uE029),
						new Player.ItemHandsController.OperationFactoryDelegate(this.\uE051)
					},
					{
						typeof(Player.FirearmController.\uE008),
						new Player.ItemHandsController.OperationFactoryDelegate(this.\uE052)
					},
					{
						typeof(Player.FirearmController.\uE001),
						new Player.ItemHandsController.OperationFactoryDelegate(this.\uE053)
					},
					{
						typeof(Player.FirearmController.\uE000),
						new Player.ItemHandsController.OperationFactoryDelegate(this.\uE054)
					},
					{
						typeof(Player.FirearmController.\uE00C),
						new Player.ItemHandsController.OperationFactoryDelegate(this.\uE055)
					},
					{
						typeof(Player.FirearmController.\uE002),
						new Player.ItemHandsController.OperationFactoryDelegate(this.\uE056)
					},
					{
						typeof(Player.FirearmController.\uE030),
						new Player.ItemHandsController.OperationFactoryDelegate(this.\uE057)
					},
					{
						typeof(Player.FirearmController.\uE02C),
						new Player.ItemHandsController.OperationFactoryDelegate(this.\uE058)
					},
					{
						typeof(Player.FirearmController.\uE01D),
						new Player.ItemHandsController.OperationFactoryDelegate(this.\uE059)
					},
					{
						typeof(Player.FirearmController.\uE02D),
						new Player.ItemHandsController.OperationFactoryDelegate(this.\uE05A)
					},
					{
						typeof(Player.FirearmController.\uE032),
						new Player.ItemHandsController.OperationFactoryDelegate(this.\uE05B)
					},
					{
						typeof(Player.FirearmController.\uE014),
						new Player.ItemHandsController.OperationFactoryDelegate(this.\uE05C)
					},
					{
						typeof(Player.FirearmController.\uE013),
						new Player.ItemHandsController.OperationFactoryDelegate(this.\uE05D)
					},
					{
						typeof(Player.FirearmController.\uE015),
						new Player.ItemHandsController.OperationFactoryDelegate(this.\uE05E)
					},
					{
						typeof(Player.FirearmController.\uE007),
						new Player.ItemHandsController.OperationFactoryDelegate(this.\uE05F)
					},
					{
						typeof(Player.FirearmController.\uE017),
						new Player.ItemHandsController.OperationFactoryDelegate(this.\uE060)
					},
					{
						typeof(Player.FirearmController.\uE034),
						new Player.ItemHandsController.OperationFactoryDelegate(this.\uE061)
					},
					{
						typeof(Player.FirearmController.\uE016),
						new Player.ItemHandsController.OperationFactoryDelegate(this.\uE062)
					},
					{
						typeof(Player.FirearmController.\uE00F),
						new Player.ItemHandsController.OperationFactoryDelegate(this.\uE063)
					},
					{
						typeof(Player.FirearmController.\uE009),
						new Player.ItemHandsController.OperationFactoryDelegate(this.\uE064)
					},
					{
						typeof(Player.FirearmController.\uE031),
						new Player.ItemHandsController.OperationFactoryDelegate(this.\uE065)
					}
				};
			}

			// Token: 0x0600911D RID: 37149 RVA: 0x002EDED0 File Offset: 0x002EC0D0
			[CompilerGenerated]
			private Player.\uE00C \uE044()
			{
				return new Player.FirearmController.\uE02F(this);
			}

			// Token: 0x0600911E RID: 37150 RVA: 0x002EDED8 File Offset: 0x002EC0D8
			[CompilerGenerated]
			private Player.\uE00C \uE045()
			{
				return new Player.FirearmController.\uE02A(this);
			}

			// Token: 0x0600911F RID: 37151 RVA: 0x002EDEE0 File Offset: 0x002EC0E0
			[CompilerGenerated]
			private Player.\uE00C \uE046()
			{
				return new Player.FirearmController.\uE010(this);
			}

			// Token: 0x06009120 RID: 37152 RVA: 0x002EDEE8 File Offset: 0x002EC0E8
			[CompilerGenerated]
			private Player.\uE00C \uE047()
			{
				return new Player.FirearmController.\uE01F(this);
			}

			// Token: 0x06009121 RID: 37153 RVA: 0x002EDEF0 File Offset: 0x002EC0F0
			[CompilerGenerated]
			private Player.\uE00C \uE048()
			{
				if (this.Item.MustBoltBeOpennedForInternalReload)
				{
					return new Player.FirearmController.\uE023(this);
				}
				return new Player.FirearmController.\uE022(this);
			}

			// Token: 0x06009122 RID: 37154 RVA: 0x002EDF0C File Offset: 0x002EC10C
			[CompilerGenerated]
			private Player.\uE00C \uE049()
			{
				return new Player.FirearmController.\uE01E(this);
			}

			// Token: 0x06009123 RID: 37155 RVA: 0x002EDF14 File Offset: 0x002EC114
			[CompilerGenerated]
			private Player.\uE00C \uE04A()
			{
				return new Player.FirearmController.\uE027(this);
			}

			// Token: 0x06009124 RID: 37156 RVA: 0x002EDF1C File Offset: 0x002EC11C
			[CompilerGenerated]
			private Player.\uE00C \uE04B()
			{
				return new Player.FirearmController.\uE024(this);
			}

			// Token: 0x06009125 RID: 37157 RVA: 0x002EDF24 File Offset: 0x002EC124
			[CompilerGenerated]
			private Player.\uE00C \uE04C()
			{
				return new Player.FirearmController.\uE01C(this);
			}

			// Token: 0x06009126 RID: 37158 RVA: 0x002EDF2C File Offset: 0x002EC12C
			[CompilerGenerated]
			private Player.\uE00C \uE04D()
			{
				return new Player.FirearmController.\uE011(this);
			}

			// Token: 0x06009127 RID: 37159 RVA: 0x002EDF34 File Offset: 0x002EC134
			[CompilerGenerated]
			private Player.\uE00C \uE04E()
			{
				return new Player.FirearmController.\uE019(this);
			}

			// Token: 0x06009128 RID: 37160 RVA: 0x002EDF3C File Offset: 0x002EC13C
			[CompilerGenerated]
			private Player.\uE00C \uE04F()
			{
				return new Player.FirearmController.\uE018(this);
			}

			// Token: 0x06009129 RID: 37161 RVA: 0x002EDF44 File Offset: 0x002EC144
			[CompilerGenerated]
			private Player.\uE00C \uE050()
			{
				return new Player.FirearmController.\uE005(this);
			}

			// Token: 0x0600912A RID: 37162 RVA: 0x002EDF4C File Offset: 0x002EC14C
			[CompilerGenerated]
			private Player.\uE00C \uE051()
			{
				return new Player.FirearmController.\uE029(this);
			}

			// Token: 0x0600912B RID: 37163 RVA: 0x002EDF54 File Offset: 0x002EC154
			[CompilerGenerated]
			private Player.\uE00C \uE052()
			{
				return new Player.FirearmController.\uE008(this);
			}

			// Token: 0x0600912C RID: 37164 RVA: 0x002EDF5C File Offset: 0x002EC15C
			[CompilerGenerated]
			private Player.\uE00C \uE053()
			{
				return new Player.FirearmController.\uE001(this);
			}

			// Token: 0x0600912D RID: 37165 RVA: 0x002EDF64 File Offset: 0x002EC164
			[CompilerGenerated]
			private Player.\uE00C \uE054()
			{
				return new Player.FirearmController.\uE000(this);
			}

			// Token: 0x0600912E RID: 37166 RVA: 0x002EDF6C File Offset: 0x002EC16C
			[CompilerGenerated]
			private Player.\uE00C \uE055()
			{
				if (this.Item is \uEEA2)
				{
					return new Player.FirearmController.\uE035(this);
				}
				if (this.Item.IsFlareGun)
				{
					return new Player.FirearmController.\uE00E(this);
				}
				if (this.Item.IsOneOff)
				{
					return new Player.FirearmController.\uE01B(this);
				}
				if (this.Item.ReloadMode == Weapon.EReloadMode.OnlyBarrel)
				{
					return new Player.FirearmController.FireOnlyBarrelFireOperation(this);
				}
				if (this.Item is \uEEA0)
				{
					return new Player.FirearmController.\uE00B(this);
				}
				if (!this.Item.BoltAction)
				{
					return new Player.FirearmController.\uE00C(this);
				}
				return new Player.FirearmController.\uE004(this);
			}

			// Token: 0x0600912F RID: 37167 RVA: 0x002EE014 File Offset: 0x002EC214
			[CompilerGenerated]
			private Player.\uE00C \uE056()
			{
				return new Player.FirearmController.\uE002(this);
			}

			// Token: 0x06009130 RID: 37168 RVA: 0x002EE01C File Offset: 0x002EC21C
			[CompilerGenerated]
			private Player.\uE00C \uE057()
			{
				return new Player.FirearmController.\uE030(this);
			}

			// Token: 0x06009131 RID: 37169 RVA: 0x002EE024 File Offset: 0x002EC224
			[CompilerGenerated]
			private Player.\uE00C \uE058()
			{
				return new Player.FirearmController.\uE02C(this);
			}

			// Token: 0x06009132 RID: 37170 RVA: 0x002EE02C File Offset: 0x002EC22C
			[CompilerGenerated]
			private Player.\uE00C \uE059()
			{
				return new Player.FirearmController.\uE01D(this);
			}

			// Token: 0x06009133 RID: 37171 RVA: 0x002EE034 File Offset: 0x002EC234
			[CompilerGenerated]
			private Player.\uE00C \uE05A()
			{
				return new Player.FirearmController.\uE02D(this);
			}

			// Token: 0x06009134 RID: 37172 RVA: 0x002EE03C File Offset: 0x002EC23C
			[CompilerGenerated]
			private Player.\uE00C \uE05B()
			{
				return new Player.FirearmController.\uE032(this);
			}

			// Token: 0x06009135 RID: 37173 RVA: 0x002EE044 File Offset: 0x002EC244
			[CompilerGenerated]
			private Player.\uE00C \uE05C()
			{
				return new Player.FirearmController.\uE014(this);
			}

			// Token: 0x06009136 RID: 37174 RVA: 0x002EE04C File Offset: 0x002EC24C
			[CompilerGenerated]
			private Player.\uE00C \uE05D()
			{
				return new Player.FirearmController.\uE013(this);
			}

			// Token: 0x06009137 RID: 37175 RVA: 0x002EE054 File Offset: 0x002EC254
			[CompilerGenerated]
			private Player.\uE00C \uE05E()
			{
				return new Player.FirearmController.\uE015(this);
			}

			// Token: 0x06009138 RID: 37176 RVA: 0x002EE05C File Offset: 0x002EC25C
			[CompilerGenerated]
			private Player.\uE00C \uE05F()
			{
				if (!this.Item.IsMultiBarrel)
				{
					return new Player.FirearmController.\uE007(this);
				}
				return new Player.FirearmController.\uE006(this);
			}

			// Token: 0x06009139 RID: 37177 RVA: 0x002EE078 File Offset: 0x002EC278
			[CompilerGenerated]
			private Player.\uE00C \uE060()
			{
				return new Player.FirearmController.\uE017(this);
			}

			// Token: 0x0600913A RID: 37178 RVA: 0x002EE080 File Offset: 0x002EC280
			[CompilerGenerated]
			private Player.\uE00C \uE061()
			{
				return new Player.FirearmController.\uE034(this);
			}

			// Token: 0x0600913B RID: 37179 RVA: 0x002EE088 File Offset: 0x002EC288
			[CompilerGenerated]
			private Player.\uE00C \uE062()
			{
				return new Player.FirearmController.\uE016(this);
			}

			// Token: 0x0600913C RID: 37180 RVA: 0x002EE090 File Offset: 0x002EC290
			[CompilerGenerated]
			private Player.\uE00C \uE063()
			{
				return new Player.FirearmController.\uE00F(this);
			}

			// Token: 0x0600913D RID: 37181 RVA: 0x002EE098 File Offset: 0x002EC298
			[CompilerGenerated]
			private Player.\uE00C \uE064()
			{
				return new Player.FirearmController.\uE009(this);
			}

			// Token: 0x0600913E RID: 37182 RVA: 0x002EE0A0 File Offset: 0x002EC2A0
			[CompilerGenerated]
			private Player.\uE00C \uE065()
			{
				return new Player.FirearmController.\uE031(this);
			}

			// Token: 0x040085AD RID: 34221
			public const int CALCULATOR_SEED = 0;

			// Token: 0x040085AE RID: 34222
			private new const string \uE003 = "Cant StartReload";

			// Token: 0x040085AF RID: 34223
			private const float \uE004 = 1.5f;

			// Token: 0x040085B0 RID: 34224
			public const float OFFSET_FOR_OVERLAP_RAY_ON_LEFT_SHOULDER = 0.2f;

			// Token: 0x040085B1 RID: 34225
			public const float ADDITIONAL_LEFTSTANCE_OVERLAP_RAY_LENGTH = 0.2f;

			// Token: 0x040085B2 RID: 34226
			private const float \uE005 = 0.5f;

			// Token: 0x040085B3 RID: 34227
			[CompilerGenerated]
			private Action \uE006;

			// Token: 0x040085B4 RID: 34228
			[CompilerGenerated]
			private Action<Player.FirearmController> \uE007;

			// Token: 0x040085B5 RID: 34229
			[CompilerGenerated]
			private Action \uE008;

			// Token: 0x040085B6 RID: 34230
			protected static readonly List<\uEDED> _preallocatedAmmoList = new List<\uEDED>(10);

			// Token: 0x040085B7 RID: 34231
			private static readonly List<\uF064> \uE009 = new List<\uF064>(10);

			// Token: 0x040085B8 RID: 34232
			private static readonly RaycastHit[] \uE00A = new RaycastHit[8];

			// Token: 0x040085B9 RID: 34233
			public \uE37D CCV;

			// Token: 0x040085BA RID: 34234
			public Transform GunBaseTransform;

			// Token: 0x040085BB RID: 34235
			public BifacialTransform Fireport;

			// Token: 0x040085BC RID: 34236
			public BifacialTransform[] MultiBarrelsFireports;

			// Token: 0x040085BD RID: 34237
			public bool _blindfire;

			// Token: 0x040085BE RID: 34238
			public int CurrentChamberIndex;

			// Token: 0x040085BF RID: 34239
			public float HipInaccuracy;

			// Token: 0x040085C0 RID: 34240
			public \uEEC5[] AimingDevices;

			// Token: 0x040085C1 RID: 34241
			public int AmmoInChamberOnSpawn;

			// Token: 0x040085C2 RID: 34242
			public bool autoFireOn;

			// Token: 0x040085C3 RID: 34243
			public \uEE1D Bipod;

			// Token: 0x040085C4 RID: 34244
			internal Func<bool> \uE00B;

			// Token: 0x040085C5 RID: 34245
			internal Func<bool> \uE00C;

			// Token: 0x040085C6 RID: 34246
			internal \uE865 \uE00D;

			// Token: 0x040085C7 RID: 34247
			internal new FirearmsAnimator \uE001;

			// Token: 0x040085C8 RID: 34248
			protected float WeaponLn;

			// Token: 0x040085C9 RID: 34249
			protected bool AimingInterruptedByOverlap;

			// Token: 0x040085CA RID: 34250
			protected bool _isAiming;

			// Token: 0x040085CB RID: 34251
			private bool \uE00E;

			// Token: 0x040085CC RID: 34252
			private bool \uE00F;

			// Token: 0x040085CD RID: 34253
			protected float _aimingSens = -1f;

			// Token: 0x040085CE RID: 34254
			protected \uF05D BallisticsCalculator;

			// Token: 0x040085CF RID: 34255
			private WeaponPrefab \uE010;

			// Token: 0x040085D0 RID: 34256
			private MalfunctionRandom \uE011;

			// Token: 0x040085D1 RID: 34257
			private new bool \uE002;

			// Token: 0x040085D2 RID: 34258
			private bool \uE012;

			// Token: 0x040085D3 RID: 34259
			private float \uE013;

			// Token: 0x040085D4 RID: 34260
			private float \uE014 = 0.001f;

			// Token: 0x040085D5 RID: 34261
			private float \uE015;

			// Token: 0x040085D6 RID: 34262
			private SkillManager.\uE000 \uE016;

			// Token: 0x040085D7 RID: 34263
			private bool \uE017;

			// Token: 0x040085D8 RID: 34264
			private bool \uE018;

			// Token: 0x040085D9 RID: 34265
			private bool \uE019;

			// Token: 0x040085DA RID: 34266
			private int \uE01A;

			// Token: 0x040085DB RID: 34267
			private \uE3E1<float> \uE01B;

			// Token: 0x040085DC RID: 34268
			private \uE3E1<float> \uE01C;

			// Token: 0x040085DD RID: 34269
			private Func<RaycastHit, bool> \uE01D;

			// Token: 0x040085DE RID: 34270
			private OneOffWeaponSettings \uE01E;

			// Token: 0x040085DF RID: 34271
			private bool \uE01F;

			// Token: 0x040085E0 RID: 34272
			private bool \uE020;

			// Token: 0x040085E1 RID: 34273
			private float \uE021 = 1f;

			// Token: 0x040085E2 RID: 34274
			private WeaponSoundPlayer \uE022;

			// Token: 0x040085E3 RID: 34275
			private int \uE023;

			// Token: 0x040085E4 RID: 34276
			private Player.FirearmController.\uE033 \uE024;

			// Token: 0x040085E5 RID: 34277
			public \uEE5D UnderbarrelWeapon;

			// Token: 0x040085E6 RID: 34278
			[CompilerGenerated]
			private bool \uE025;

			// Token: 0x040085E7 RID: 34279
			[CompilerGenerated]
			private bool \uE026;

			// Token: 0x040085E8 RID: 34280
			private bool \uE027;

			// Token: 0x040085E9 RID: 34281
			private bool \uE028;

			// Token: 0x040085EA RID: 34282
			private float \uE029 = 1f;

			// Token: 0x040085EB RID: 34283
			private float \uE02A;

			// Token: 0x040085EC RID: 34284
			private List<\uE3C4<Weapon.EMalfunctionSource>.\uE000<float, Weapon.EMalfunctionSource>> \uE02B = new List<\uE3C4<Weapon.EMalfunctionSource>.\uE000<float, Weapon.EMalfunctionSource>>(4);

			// Token: 0x040085ED RID: 34285
			private List<\uE3C4<Weapon.EMalfunctionState>.\uE000<float, Weapon.EMalfunctionState>> \uE02C = new List<\uE3C4<Weapon.EMalfunctionState>.\uE000<float, Weapon.EMalfunctionState>>(5);

			// Token: 0x020016AA RID: 5802
			public new class \uE000 : Player.FirearmController.\uE00A
			{
				// Token: 0x0600913F RID: 37183 RVA: 0x002EE0A8 File Offset: 0x002EC2A8
				public \uE000(Player.FirearmController controller) : base(controller)
				{
				}

				// Token: 0x06009140 RID: 37184 RVA: 0x002EE0B8 File Offset: 0x002EC2B8
				public virtual void Start(\uEDED item, int camoraIndex, ItemAddress itemAddress, Callback callback)
				{
					this.\uE00C = item;
					this.\uE000 = callback;
					this.\uE010 = camoraIndex;
					this.\uE00D = itemAddress;
					base.Start();
					this.\uE002.IsAiming = false;
					this.\uE02B.Discharge(true);
					this.\uE02B.SetFire(false);
					this.\uE001.MovementContext.SetBlindFire(0);
					this.\uE001.BodyAnimatorCommon.SetFloat(PlayerAnimator.RELOAD_FLOAT_PARAM_HASH, 1f);
				}

				// Token: 0x06009141 RID: 37185 RVA: 0x002EE14C File Offset: 0x002EC34C
				public override void Reset()
				{
					base.Reset();
					this.\uE00C = null;
					this.\uE000 = null;
					this.\uE00E = false;
					this.\uE00F = false;
					this.\uE010 = -1;
					this.\uE00D = null;
				}

				// Token: 0x06009142 RID: 37186 RVA: 0x002EE19C File Offset: 0x002EC39C
				public override void FastForward()
				{
					if (this.State == Player.EOperationState.Finished)
					{
						return;
					}
					this.OnMagAppeared();
					this.OnMagPuttedToRig();
				}

				// Token: 0x06009143 RID: 37187 RVA: 0x002EE1B4 File Offset: 0x002EC3B4
				public override void RemoveAmmoFromChamber()
				{
					this.\uE002.\uE024.DestroyPatronInWeapon();
				}

				// Token: 0x06009144 RID: 37188 RVA: 0x002EE1C8 File Offset: 0x002EC3C8
				public override void OnMagAppeared()
				{
					if (this.\uE00E)
					{
						return;
					}
					this.\uE00E = true;
					this.\uE02B.Discharge(false);
					this.\uE02B.SetShellsInWeapon(this.\uE002.UnderbarrelWeapon.ShellsInLauncherCount);
					this.\uE02B.SetCanReload(false);
				}

				// Token: 0x06009145 RID: 37189 RVA: 0x002EE220 File Offset: 0x002EC420
				public override void OnMagPuttedToRig()
				{
					if (this.\uE00F)
					{
						return;
					}
					this.\uE00F = true;
					this.\uE000();
				}

				// Token: 0x06009146 RID: 37190 RVA: 0x002EE238 File Offset: 0x002EC438
				private new void \uE000()
				{
					this.\uE02B.SetAmmoInChamber(0f);
					this.State = Player.EOperationState.Finished;
					this.\uE002.InitiateOperation<Player.FirearmController.\uE014>().Start(null);
					this.\uE000.Succeed();
					this.\uE02B.SetAmmoInChamber((float)this.\uE002.UnderbarrelWeapon.ChamberAmmoCount);
					this.\uE02B.SetShellsInWeapon(this.\uE002.UnderbarrelWeapon.ShellsInLauncherCount);
				}

				// Token: 0x06009147 RID: 37191 RVA: 0x002EE2BC File Offset: 0x002EC4BC
				public override void SetInventoryOpened(bool opened)
				{
					this.\uE002.InventoryOpened = opened;
					this.\uE02B.SetInventory(opened);
				}

				// Token: 0x040085EE RID: 34286
				private \uEDED \uE00C;

				// Token: 0x040085EF RID: 34287
				private ItemAddress \uE00D;

				// Token: 0x040085F0 RID: 34288
				private new Callback \uE000;

				// Token: 0x040085F1 RID: 34289
				private bool \uE00E;

				// Token: 0x040085F2 RID: 34290
				private bool \uE00F;

				// Token: 0x040085F3 RID: 34291
				private int \uE010 = -1;
			}

			// Token: 0x020016AB RID: 5803
			private new sealed class \uE001 : Player.FirearmController.\uE00A
			{
				// Token: 0x06009148 RID: 37192 RVA: 0x002EE2D8 File Offset: 0x002EC4D8
				public \uE001(Player.FirearmController controller) : base(controller)
				{
				}

				// Token: 0x06009149 RID: 37193 RVA: 0x002EE2E4 File Offset: 0x002EC4E4
				public void Start(Item item, Slot slot, Callback callback)
				{
					this.\uE011 = item;
					this.\uE012 = slot;
					this.\uE000 = callback;
					base.Start();
					this.\uE02B.SetupMod(true);
					this.\uE02B.SetFire(false);
					this.\uE001.MovementContext.SetBlindFire(0);
					this.\uE002.SetAim(false);
				}

				// Token: 0x0600914A RID: 37194 RVA: 0x002EE354 File Offset: 0x002EC554
				public override void Reset()
				{
					this.\uE011 = null;
					this.\uE012 = null;
					this.\uE000 = null;
					this.\uE013 = false;
					base.Reset();
				}

				// Token: 0x0600914B RID: 37195 RVA: 0x002EE384 File Offset: 0x002EC584
				public override void FastForward()
				{
					if (this.State == Player.EOperationState.Finished)
					{
						return;
					}
					this.OnModChanged();
				}

				// Token: 0x0600914C RID: 37196 RVA: 0x002EE398 File Offset: 0x002EC598
				public override void SetAiming(bool isAiming)
				{
					if (!isAiming)
					{
						this.\uE002.IsAiming = false;
					}
				}

				// Token: 0x0600914D RID: 37197 RVA: 0x002EE3AC File Offset: 0x002EC5AC
				public override void OnModChanged()
				{
					if (this.\uE013)
					{
						return;
					}
					this.\uE013 = true;
					this.\uE02B.SetupMod(false);
					GameObject gameObject = Singleton<\uE90C>.Instance.CreateItem(this.\uE011, true);
					this.\uE02C.SetupMod(this.\uE012, gameObject);
					this.\uE02B.Fold(this.\uE02D.Folded);
					this.State = Player.EOperationState.Finished;
					this.\uE000.Succeed();
					this.\uE001.BodyAnimatorCommon.SetFloat(PlayerAnimator.WEAPON_SIZE_MODIFIER_PARAM_HASH, (float)this.\uE02D.CalculateCellSize().X);
					this.\uE001.UpdateFirstPersonGrip(GripPose.EGripType.Common, this.\uE002.HandsHierarchy);
					this.\uE002.SetupModAudioController(gameObject.transform, this.\uE002);
					Mod mod = this.\uE011 as Mod;
					if (mod != null && mod.HasLightComponent)
					{
						this.\uE001.SendWeaponLightPacket();
					}
					this.\uE002.WeaponModified();
					this.\uE000(gameObject);
					this.\uE002.InitiateOperation<Player.FirearmController.\uE010>().Start(null);
				}

				// Token: 0x0600914E RID: 37198 RVA: 0x002EE4E0 File Offset: 0x002EC6E0
				private void \uE000(GameObject createdItem)
				{
					\uEE5D uEE5D = this.\uE011 as \uEE5D;
					if (uEE5D != null)
					{
						this.\uE002.\uE009(uEE5D, createdItem);
					}
				}

				// Token: 0x0600914F RID: 37199 RVA: 0x002EE514 File Offset: 0x002EC714
				public override void SetInventoryOpened(bool opened)
				{
					this.\uE002.InventoryOpened = opened;
					this.\uE02B.SetInventory(opened);
				}

				// Token: 0x06009150 RID: 37200 RVA: 0x002EE530 File Offset: 0x002EC730
				public override bool CanChangeLightState(\uE825[] lightsStates)
				{
					return false;
				}

				// Token: 0x040085F4 RID: 34292
				private Item \uE011;

				// Token: 0x040085F5 RID: 34293
				private Slot \uE012;

				// Token: 0x040085F6 RID: 34294
				private new Callback \uE000;

				// Token: 0x040085F7 RID: 34295
				private bool \uE013;
			}

			// Token: 0x020016AC RID: 5804
			public new class \uE002 : Player.FirearmController.\uE00D
			{
				// Token: 0x170014C1 RID: 5313
				// (get) Token: 0x06009151 RID: 37201 RVA: 0x002EE534 File Offset: 0x002EC734
				public float ShotsTime
				{
					get
					{
						return this.\uE01B;
					}
				}

				// Token: 0x06009152 RID: 37202 RVA: 0x002EE53C File Offset: 0x002EC73C
				public \uE002(Player.FirearmController controller) : base(controller)
				{
					this.\uE01B = 60f / (float)controller.Item.FireRate;
					FireModeComponent itemComponent = this.\uE02D.GetItemComponent<FireModeComponent>();
					this.\uE01F = ((itemComponent != null) ? itemComponent.BurstShotsCount : 3);
				}

				// Token: 0x06009153 RID: 37203 RVA: 0x002EE58C File Offset: 0x002EC78C
				public new virtual void Start()
				{
					base.Start();
					this.\uE007 = 0.0001f;
					this.\uE01A = 0;
					this.\uE01C = 0f;
					this.\uE01E = false;
					this.\uE002.autoFireOn = true;
					this.\uE002.\uE012 = false;
					this.\uE02B.SetFire(this.\uE002.IsTriggerPressed);
					this.\uE02B.Animator.Play(this.\uE02B.FullFireStateName, 1, 0.2f);
					this.InternalOnFireEvent();
				}

				// Token: 0x06009154 RID: 37204 RVA: 0x002EE630 File Offset: 0x002EC830
				public override void Reset()
				{
					base.Reset();
					this.\uE020 = -1f;
				}

				// Token: 0x06009155 RID: 37205 RVA: 0x002EE644 File Offset: 0x002EC844
				public override void SetTriggerPressed(bool pressed)
				{
					this.\uE002.IsTriggerPressed = pressed;
				}

				// Token: 0x06009156 RID: 37206 RVA: 0x002EE654 File Offset: 0x002EC854
				public override void OnFireEvent()
				{
					this.\uE01E = true;
				}

				// Token: 0x06009157 RID: 37207 RVA: 0x002EE660 File Offset: 0x002EC860
				public override void Update(float deltaTime)
				{
					if (!this.\uE01E && !this.\uE001.IsAI)
					{
						return;
					}
					try
					{
						base.Update(deltaTime);
						float num = this.\uE007 % this.\uE01B / this.\uE01B;
						float num2 = num + deltaTime / this.\uE01B;
						if (num2 <= 1f)
						{
							this.\uE000(num, num2);
						}
						else
						{
							this.\uE000(num, 1f);
							float num3 = num2 - 1f;
							while (num3 > 0f)
							{
								if (num3 <= 1f)
								{
									this.\uE000(0f, num3);
									num3 -= 1f;
								}
								else
								{
									double num4 = Math.Floor((double)num3);
									int num5 = 0;
									while ((double)num5 < num4)
									{
										this.\uE000(0f, 1f);
										num3 -= 1f;
										num5++;
									}
								}
							}
						}
						Weapon item = this.\uE002.Item;
						float overheatFirerateMult = item.MalfState.OverheatFirerateMult;
						this.\uE007 += deltaTime;
						if (overheatFirerateMult > 0f)
						{
							if (Mathf.Abs(overheatFirerateMult - this.\uE01C) > Mathf.Epsilon)
							{
								this.\uE007 = this.\uE01B * (num2 % 1f);
								this.\uE01B = 60f / ((float)item.FireRate * item.MalfState.OverheatFirerateMult);
							}
							this.\uE01C = overheatFirerateMult;
						}
					}
					catch (Exception exception)
					{
						Debug.LogException(exception);
						this.InternalOnFireEndEvent();
					}
				}

				// Token: 0x06009158 RID: 37208 RVA: 0x002EE7E0 File Offset: 0x002EC9E0
				protected void \uE000(float normalizedStartFrameTime, float normalizedEndFrameTime)
				{
					if (this.State != Player.EOperationState.Executing)
					{
						return;
					}
					if (normalizedStartFrameTime <= 0f && 0f < normalizedEndFrameTime)
					{
						this.InternalOnFireEvent();
					}
					if (this.State != Player.EOperationState.Executing)
					{
						return;
					}
					if (normalizedStartFrameTime <= 0.25f && 0.25f < normalizedEndFrameTime)
					{
						this.InternalOnShellEjectEvent();
					}
					if (normalizedStartFrameTime <= 0.75f && 0.75f < normalizedEndFrameTime && this.\uE02D.IsBoltCatch && this.\uE02D.ChamberAmmoCount == 0 && this.\uE02D.GetCurrentMagazine() != null && this.\uE02D.GetCurrentMagazineCount() == 0 && !this.\uE02D.ManualBoltCatch)
					{
						this.\uE02B.SetBoltCatch(true);
					}
					if (normalizedStartFrameTime <= 0.75f && 0.75f < normalizedEndFrameTime)
					{
						this.InternalRemoveAmmoFromChamber();
						this.InternalOnAddAmmoInChamber();
					}
					if (normalizedStartFrameTime <= 0.99f)
					{
						if (0.99f < normalizedEndFrameTime)
						{
							this.InternalOnFireEndEvent();
						}
					}
					this.\uE020 = normalizedEndFrameTime;
				}

				// Token: 0x06009159 RID: 37209 RVA: 0x002EE8F4 File Offset: 0x002ECAF4
				protected virtual void InternalOnFireEvent()
				{
					Weapon.EMalfunctionState emalfunctionState;
					Weapon.EMalfunctionSource malfSource;
					this.\uE01D = base.\uE000(out emalfunctionState, out malfSource);
					this.ShowIncompatibleNotification();
					this.\uE02D.MalfState.State = emalfunctionState;
					if (emalfunctionState != Weapon.EMalfunctionState.None)
					{
						this.\uE02D.MalfState.LastMalfunctionTime = \uE780.PastTime;
						if (this.\uE001.Skills.TroubleFixingDurElite.Value)
						{
							this.\uE02D.MalfState.AddMalfReduceChance(this.\uE001.ProfileId, malfSource);
						}
						this.\uE02B.MisfireSlideUnknown(false);
						if (this.\uE02D.MalfState.State == Weapon.EMalfunctionState.Misfire)
						{
							this.\uE001.InventoryController.ExamineMalfunction(this.\uE02D, true);
						}
					}
					if (emalfunctionState == Weapon.EMalfunctionState.Misfire)
					{
						this.\uE002.\uE012 = true;
						this.\uE003();
					}
					else
					{
						if (emalfunctionState == Weapon.EMalfunctionState.None)
						{
							this.\uE002.\uE012 = false;
							this.\uE02B.SetFire(this.\uE002.IsTriggerPressed);
						}
						else
						{
							this.\uE002.\uE012 = true;
						}
						FireModeComponent fireMode = this.\uE002.Item.FireMode;
						this.\uE002.IsBirstOf2Start = (fireMode.FireMode == Weapon.EFireMode.burst && this.\uE01A == 0 && fireMode.BurstShotsCount == 2);
						this.MakeShot(this.\uE01D.AmmoToFire, 0, false);
						this.\uE01A++;
						this.\uE002.IsBirstOf2Start = false;
						if (this.\uE02D.HasChambers)
						{
							if (this.\uE02D.MalfState.State == Weapon.EMalfunctionState.Feed)
							{
								this.\uE002.\uE00D.SetRoundIntoWeapon(this.\uE01D.FedAmmo, 0);
								this.\uE002.\uE00D.MoveAmmoFromChamberToShellPort(false, 0);
							}
							else
							{
								this.\uE002.\uE00D.MoveAmmoFromChamberToShellPort(this.\uE01D.AmmoToFire.IsUsed, 0);
							}
						}
						if (this.\uE02D.MalfState.State == Weapon.EMalfunctionState.Jam || this.\uE02D.MalfState.State == Weapon.EMalfunctionState.SoftSlide || this.\uE02D.MalfState.State == Weapon.EMalfunctionState.HardSlide || this.\uE02D.MalfState.State == Weapon.EMalfunctionState.Feed)
						{
							if (true)
							{
								this.\uE001.InventoryController.ExamineMalfunction(this.\uE02D, true);
							}
							this.\uE003();
						}
						if (this.\uE002.\uE043())
						{
							this.\uE001.InventoryController.ProcessFastWeaponSwitchAvailability();
						}
					}
					this.\uE002._player.MouseLook(false);
				}

				// Token: 0x0600915A RID: 37210 RVA: 0x002EEB94 File Offset: 0x002ECD94
				public void InternalOnShellEjectEvent()
				{
					if (!this.\uE02D.HasChambers && this.\uE01D.AmmoToFire != null)
					{
						this.\uE002.\uE00D.SetRoundIntoWeapon(this.\uE01D.AmmoToFire, 0);
						this.\uE002.\uE00D.MoveAmmoFromChamberToShellPort(this.\uE01D.AmmoToFire.IsUsed, 0);
					}
					Player.FirearmController.\uE00D.SingleShotData uE01D = this.\uE01D;
					base.\uE003();
				}

				// Token: 0x0600915B RID: 37211 RVA: 0x002EEC14 File Offset: 0x002ECE14
				public override void OnShellEjectEvent()
				{
				}

				// Token: 0x0600915C RID: 37212 RVA: 0x002EEC18 File Offset: 0x002ECE18
				public override void OnAddAmmoInChamber()
				{
				}

				// Token: 0x0600915D RID: 37213 RVA: 0x002EEC1C File Offset: 0x002ECE1C
				public override void RemoveAmmoFromChamber()
				{
				}

				// Token: 0x0600915E RID: 37214 RVA: 0x002EEC20 File Offset: 0x002ECE20
				public override void OnOnOffBoltCatchEvent(bool isCaught)
				{
				}

				// Token: 0x0600915F RID: 37215 RVA: 0x002EEC24 File Offset: 0x002ECE24
				public void InternalRemoveAmmoFromChamber()
				{
					if (this.\uE02D.HasChambers)
					{
						this.\uE02B.SetAmmoInChamber(0f);
					}
					if (this.\uE01D.AmmoWillBeLoadedToChamber != null)
					{
						if (this.\uE02D.MalfState.State == Weapon.EMalfunctionState.None)
						{
							return;
						}
					}
					this.\uE002.\uE012 = true;
				}

				// Token: 0x06009160 RID: 37216 RVA: 0x002EEC8C File Offset: 0x002ECE8C
				public void InternalOnAddAmmoInChamber()
				{
					if (this.\uE02D.HasChambers)
					{
						this.\uE02B.SetAmmoInChamber((float)this.\uE01D.AmmoCountInChamberAfterShot);
					}
					this.\uE02B.SetAmmoOnMag(this.\uE01D.AmmoCountInMagAfterShot);
					if (this.\uE02D.HasChambers)
					{
						if (this.\uE01D.AmmoWillBeLoadedToChamber != null)
						{
							this.\uE002.\uE00D.SetRoundIntoWeapon(this.\uE01D.AmmoWillBeLoadedToChamber, 0);
						}
					}
					this.\uE02B.SetFire(this.\uE002.IsTriggerPressed);
				}

				// Token: 0x06009161 RID: 37217 RVA: 0x002EED38 File Offset: 0x002ECF38
				protected virtual void InternalOnFireEndEvent()
				{
					if (this.\uE02D.HasChambers)
					{
						this.\uE02B.SetAmmoInChamber((float)this.\uE01D.AmmoCountInChamberAfterShot);
					}
					this.\uE02B.SetAmmoOnMag(this.\uE01D.AmmoCountInMagAfterShot);
					if (this.\uE02D.SelectedFireMode == Weapon.EFireMode.burst)
					{
						if (this.\uE01A < this.\uE01F && this.\uE01D.AmmoCountInChamberAfterShot > 0)
						{
							this.\uE002.IsTriggerPressed = true;
							return;
						}
						this.\uE002.IsTriggerPressed = false;
					}
					if (this.\uE038 != null)
					{
						this.\uE002.IsTriggerPressed = false;
						this.\uE02B.SetFire(this.\uE002.IsTriggerPressed);
						this.SetAiming(false);
						this.\uE002();
						return;
					}
					if (!this.\uE002.IsTriggerPressed || this.\uE037)
					{
						this.\uE001();
						return;
					}
					if (!this.\uE02D.HasChambers || this.\uE01D.AmmoCountInChamberAfterShot != 0)
					{
						if (this.\uE02D.HasChambers)
						{
							return;
						}
						if (this.\uE01D.AmmoCountInMagAfterShot != 0)
						{
							return;
						}
					}
					if (this.\uE02D.IsBoltCatch)
					{
						this.\uE001();
						return;
					}
					this.\uE001();
					this.\uE002.SetTriggerPressed(true);
				}

				// Token: 0x06009162 RID: 37218 RVA: 0x002EEE9C File Offset: 0x002ED09C
				public override void FastForward()
				{
					this.\uE001();
				}

				// Token: 0x06009163 RID: 37219 RVA: 0x002EEEA4 File Offset: 0x002ED0A4
				protected new void \uE001()
				{
					this.SetTriggerPressed(false);
					this.\uE02B.SetInventory(this.\uE037);
					this.\uE02B.SetFire(this.\uE002.IsTriggerPressed);
					this.State = Player.EOperationState.Finished;
					this.\uE02B.Animator.Play(this.\uE02B.FullIdleStateName, 1, 0.1f);
					this.\uE002.EmitEvents();
					this.State = Player.EOperationState.Finished;
					this.\uE002.autoFireOn = false;
					this.\uE002.InitiateOperation<Player.FirearmController.\uE010>().Start(null);
				}

				// Token: 0x06009164 RID: 37220 RVA: 0x002EEF50 File Offset: 0x002ED150
				private new void \uE002()
				{
					this.SetTriggerPressed(false);
					this.\uE02B.SetFire(this.\uE002.IsTriggerPressed);
					this.\uE02B.Animator.Play(this.\uE02B.FullIdleStateName, 1, 0.1f);
					this.\uE002.EmitEvents();
					this.SetAiming(false);
					this.\uE002.autoFireOn = false;
					this.State = Player.EOperationState.Finished;
					this.\uE038();
				}

				// Token: 0x06009165 RID: 37221 RVA: 0x002EEFE0 File Offset: 0x002ED1E0
				public override void SetAiming(bool isAiming)
				{
					if (this.\uE02D.HasMagazineWithBelt())
					{
						return;
					}
					this.\uE002.IsAiming = isAiming;
				}

				// Token: 0x06009166 RID: 37222 RVA: 0x002EEFFC File Offset: 0x002ED1FC
				protected new void \uE003()
				{
					this.SetTriggerPressed(false);
					this.\uE02B.SetFire(this.\uE002.IsTriggerPressed);
					this.\uE02B.Malfunction((int)this.\uE02D.MalfState.State);
					this.\uE002.autoFireOn = false;
					this.State = Player.EOperationState.Finished;
					switch (this.\uE02D.MalfState.State)
					{
					case Weapon.EMalfunctionState.Misfire:
						this.\uE02B.Animator.Play(\uF1F8.\uE000(15187), 1, 0f);
						break;
					case Weapon.EMalfunctionState.Jam:
						this.\uE02B.Animator.Play(\uF1F8.\uE000(22235), 1, 0f);
						break;
					case Weapon.EMalfunctionState.HardSlide:
						this.\uE02B.Animator.Play(\uF1F8.\uE000(14563), 1, 0f);
						break;
					case Weapon.EMalfunctionState.SoftSlide:
						this.\uE02B.Animator.Play(\uF1F8.\uE000(19345), 1, 0f);
						break;
					case Weapon.EMalfunctionState.Feed:
						this.\uE02B.Animator.Play(\uF1F8.\uE000(20099), 1, 0f);
						break;
					}
					this.\uE002.EmitEvents();
					this.\uE02D.MalfState.AmmoToFire = this.\uE01D.AmmoToFire;
					this.\uE02D.MalfState.AmmoWillBeLoadedToChamber = this.\uE01D.AmmoWillBeLoadedToChamber;
					this.\uE02D.MalfState.MalfunctionedAmmo = (this.\uE01D.FedAmmo ?? this.\uE01D.AmmoToFire);
					this.\uE002.InitiateOperation<Player.FirearmController.\uE030>().Start();
				}

				// Token: 0x040085F8 RID: 34296
				private const float \uE014 = 0f;

				// Token: 0x040085F9 RID: 34297
				private const float \uE015 = 0.25f;

				// Token: 0x040085FA RID: 34298
				private const float \uE016 = 0.75f;

				// Token: 0x040085FB RID: 34299
				private const float \uE017 = 0.75f;

				// Token: 0x040085FC RID: 34300
				private const float \uE018 = 0.99f;

				// Token: 0x040085FD RID: 34301
				protected const int \uE019 = 3;

				// Token: 0x040085FE RID: 34302
				protected int \uE01A;

				// Token: 0x040085FF RID: 34303
				protected float \uE01B;

				// Token: 0x04008600 RID: 34304
				protected float \uE01C;

				// Token: 0x04008601 RID: 34305
				protected float \uE007;

				// Token: 0x04008602 RID: 34306
				protected Player.FirearmController.\uE00D.SingleShotData \uE01D;

				// Token: 0x04008603 RID: 34307
				private bool \uE01E;

				// Token: 0x04008604 RID: 34308
				private int \uE01F;

				// Token: 0x04008605 RID: 34309
				protected float \uE020;
			}

			// Token: 0x020016AD RID: 5805
			public new abstract class \uE003 : Player.FirearmController.\uE00A
			{
				// Token: 0x170014C2 RID: 5314
				// (get) Token: 0x06009167 RID: 37223 RVA: 0x002EF1D0 File Offset: 0x002ED3D0
				// (set) Token: 0x06009168 RID: 37224 RVA: 0x002EF1D8 File Offset: 0x002ED3D8
				private protected new Slot \uE000 { protected get; private set; }

				// Token: 0x06009169 RID: 37225 RVA: 0x002EF1E4 File Offset: 0x002ED3E4
				protected \uE003(Player.FirearmController controller) : base(controller)
				{
				}

				// Token: 0x0600916A RID: 37226 RVA: 0x002EF1F0 File Offset: 0x002ED3F0
				protected void \uE000(bool isAiming)
				{
					if (this.\uE002.CurrentMasteringLevel < 2)
					{
						return;
					}
					this.\uE001.ProceduralWeaponAnimation.TacticalReload = isAiming;
					if (isAiming && !EFTHardSettings.Instance.CanAimInState(this.\uE001.CurrentState.Name))
					{
						return;
					}
					if (this.\uE002.\uE013 > EFTHardSettings.Instance.STOP_AIMING_AT && isAiming)
					{
						this.\uE002.AimingInterruptedByOverlap = false;
						return;
					}
					this.\uE002.IsAiming = isAiming;
				}

				// Token: 0x0600916B RID: 37227 RVA: 0x002EF27C File Offset: 0x002ED47C
				protected void Start([CanBeNull] Callback callback)
				{
					this.\uE023 = callback;
					this.\uE000 = (this.\uE02D.HasChambers ? this.\uE02D.Chambers[0] : null);
					this.\uE001.ProceduralWeaponAnimation.TacticalReload = true;
					this.\uE001.ExecuteSkill(new Action(this.\uE003));
					this.\uE02B.SetInventory(false);
					this.\uE002.SetCompassState(false);
					this.\uE001.MovementContext.SetBlindFire(0);
					this.\uE001.BodyAnimatorCommon.SetFloat(PlayerAnimator.RELOAD_FLOAT_PARAM_HASH, 1f);
					base.Start();
				}

				// Token: 0x170014C3 RID: 5315
				// (get) Token: 0x0600916C RID: 37228 RVA: 0x002EF33C File Offset: 0x002ED53C
				// (set) Token: 0x0600916D RID: 37229 RVA: 0x002EF344 File Offset: 0x002ED544
				public override Player.EOperationState State
				{
					get
					{
						return base.State;
					}
					protected set
					{
						base.State = value;
						if (value != Player.EOperationState.Finished)
						{
							if (value == Player.EOperationState.Executing)
							{
								MovementState currentManagedState = this.\uE001.CurrentManagedState;
								if (currentManagedState == null)
								{
									return;
								}
								currentManagedState.OnReload(true);
							}
							return;
						}
						MovementState currentManagedState2 = this.\uE001.CurrentManagedState;
						if (currentManagedState2 == null)
						{
							return;
						}
						currentManagedState2.OnReload(false);
					}
				}

				// Token: 0x0600916E RID: 37230 RVA: 0x002EF398 File Offset: 0x002ED598
				public override void HideWeapon(Action onHidden, bool fastDrop, Item nextControllerItem = null)
				{
					this.\uE021 = fastDrop;
					this.\uE022 = onHidden;
				}

				// Token: 0x0600916F RID: 37231 RVA: 0x002EF3A8 File Offset: 0x002ED5A8
				public override void Reset()
				{
					this.\uE022 = null;
					this.\uE021 = false;
					this.\uE023 = null;
					this.\uE000 = null;
					base.Reset();
				}

				// Token: 0x06009170 RID: 37232 RVA: 0x002EF3D8 File Offset: 0x002ED5D8
				protected new void \uE001()
				{
					Callback uE = this.\uE023;
					if (uE == null)
					{
						return;
					}
					uE.Succeed();
				}

				// Token: 0x06009171 RID: 37233 RVA: 0x002EF3EC File Offset: 0x002ED5EC
				public override void SetInventoryOpened(bool opened)
				{
					this.\uE002.InventoryOpened = opened;
				}

				// Token: 0x06009172 RID: 37234 RVA: 0x002EF3FC File Offset: 0x002ED5FC
				protected new void \uE002()
				{
					this.\uE02B.SetInventory(this.\uE002.InventoryOpened);
				}

				// Token: 0x06009173 RID: 37235 RVA: 0x002EF414 File Offset: 0x002ED614
				[CompilerGenerated]
				private void \uE003()
				{
					this.\uE001.Skills.WeaponReloadAction.Complete(this.\uE02D, 1f);
				}

				// Token: 0x04008606 RID: 34310
				protected bool \uE021;

				// Token: 0x04008607 RID: 34311
				protected Action \uE022;

				// Token: 0x04008608 RID: 34312
				private Callback \uE023;

				// Token: 0x04008609 RID: 34313
				[CompilerGenerated]
				private Slot \uE024;
			}

			// Token: 0x020016AE RID: 5806
			public class \uE004 : Player.FirearmController.\uE00C
			{
				// Token: 0x06009174 RID: 37236 RVA: 0x002EF438 File Offset: 0x002ED638
				public \uE004(Player.FirearmController controller) : base(controller)
				{
				}

				// Token: 0x06009175 RID: 37237 RVA: 0x002EF444 File Offset: 0x002ED644
				public override void Start()
				{
					base.Start();
					this.\uE02B.SetBoltActionReload(!this.\uE002.IsTriggerPressed);
					this.\uE001.ProceduralWeaponAnimation.TacticalReload = (this.\uE001.ProceduralWeaponAnimation.IsMountedState && !this.\uE001.ProceduralWeaponAnimation.IsVerticalMounting && this.\uE001.ProceduralWeaponAnimation.IsBipodUsed);
				}

				// Token: 0x06009176 RID: 37238 RVA: 0x002EF4C0 File Offset: 0x002ED6C0
				public override void SetTriggerPressed(bool pressed)
				{
					base.SetTriggerPressed(pressed);
					this.\uE02B.SetBoltActionReload(!this.\uE002.IsTriggerPressed);
				}

				// Token: 0x06009177 RID: 37239 RVA: 0x002EF4E4 File Offset: 0x002ED6E4
				public override void SetInventoryOpened(bool opened)
				{
					base.SetInventoryOpened(opened);
					this.\uE02B.SetBoltActionReload(true);
				}

				// Token: 0x06009178 RID: 37240 RVA: 0x002EF4FC File Offset: 0x002ED6FC
				public override void ReloadMag(\uEE67 magazine, ItemAddress itemAddress, Callback finishCallback, Callback startCallback)
				{
					base.ReloadMag(magazine, itemAddress, finishCallback, startCallback);
					this.\uE02B.SetBoltActionReload(true);
				}

				// Token: 0x06009179 RID: 37241 RVA: 0x002EF518 File Offset: 0x002ED718
				public override void QuickReloadMag(\uEE67 magazine, Callback finishCallback, Callback startCallback)
				{
					base.QuickReloadMag(magazine, finishCallback, startCallback);
					this.\uE02B.SetBoltActionReload(true);
				}

				// Token: 0x0600917A RID: 37242 RVA: 0x002EF530 File Offset: 0x002ED730
				public override void ReloadWithAmmo(\uEDA2 ammoPack, Callback finishCallback, Callback startCallback)
				{
					base.ReloadWithAmmo(ammoPack, finishCallback, startCallback);
					this.\uE02B.SetBoltActionReload(true);
				}

				// Token: 0x0600917B RID: 37243 RVA: 0x002EF548 File Offset: 0x002ED748
				public override void ReloadCylinderMagazine(\uEDA2 ammoPack, Callback finishCallback, Callback startCallback, bool quickReload = false)
				{
					base.ReloadCylinderMagazine(ammoPack, finishCallback, startCallback, quickReload);
					this.\uE02B.SetBoltActionReload(true);
				}

				// Token: 0x0600917C RID: 37244 RVA: 0x002EF564 File Offset: 0x002ED764
				public override void HideWeapon(Action onHidden, bool fastDrop, Item nextControllerItem = null)
				{
					this.SetAiming(false);
					this.SetTriggerPressed(false);
					base.HideWeapon(onHidden, fastDrop, null);
				}

				// Token: 0x0600917D RID: 37245 RVA: 0x002EF584 File Offset: 0x002ED784
				public override void OnAimingDisabled()
				{
					this.SetAiming(false);
					this.SetTriggerPressed(false);
					base.OnAimingDisabled();
				}
			}

			// Token: 0x020016AF RID: 5807
			public class \uE005 : Player.FirearmController.\uE00A
			{
				// Token: 0x0600917E RID: 37246 RVA: 0x002EF5A0 File Offset: 0x002ED7A0
				public \uE005(Player.FirearmController controller) : base(controller)
				{
				}

				// Token: 0x0600917F RID: 37247 RVA: 0x002EF5B0 File Offset: 0x002ED7B0
				public virtual void Start(\uEDED item, int camoraIndex, ItemAddress itemAddress, Callback callback)
				{
					this.\uE00C = item;
					this.\uE000 = callback;
					this.\uE026 = camoraIndex;
					this.\uE025 = (this.\uE02D.GetCurrentMagazine() as \uEEF0);
					this.\uE00D = itemAddress;
					base.Start();
					this.\uE002.IsAiming = false;
					this.\uE02B.Discharge(true);
					this.\uE02B.SetFire(false);
					this.\uE001.MovementContext.SetBlindFire(0);
					this.\uE02B.SetCamoraIndexForUnloadAmmo(camoraIndex);
					this.\uE001.BodyAnimatorCommon.SetFloat(PlayerAnimator.RELOAD_FLOAT_PARAM_HASH, 1f);
				}

				// Token: 0x06009180 RID: 37248 RVA: 0x002EF66C File Offset: 0x002ED86C
				public override void Reset()
				{
					base.Reset();
					this.\uE00C = null;
					this.\uE000 = null;
					this.\uE00E = false;
					this.\uE00F = false;
					this.\uE026 = -1;
					this.\uE025 = null;
					this.\uE00D = null;
				}

				// Token: 0x06009181 RID: 37249 RVA: 0x002EF6C4 File Offset: 0x002ED8C4
				public override void FastForward()
				{
					if (this.State == Player.EOperationState.Finished)
					{
						return;
					}
					this.OnMagAppeared();
					this.OnMagPuttedToRig();
				}

				// Token: 0x06009182 RID: 37250 RVA: 0x002EF6DC File Offset: 0x002ED8DC
				public override void OnMagAppeared()
				{
					if (this.\uE00E)
					{
						return;
					}
					this.\uE00E = true;
					this.\uE02B.Discharge(false);
					this.\uE02B.SetShellsInWeapon(this.\uE02D.ShellsInChamberCount);
					this.\uE02B.SetAmmoOnMag(this.\uE025.Count);
					this.\uE02C.DestroyPatronInWeapon(this.\uE026);
					this.\uE02B.SetCanReload(false);
					if (this.\uE00D == null)
					{
						return;
					}
					this.\uE000();
				}

				// Token: 0x06009183 RID: 37251 RVA: 0x002EF770 File Offset: 0x002ED970
				public override void OnMagPuttedToRig()
				{
					if (this.\uE00F)
					{
						return;
					}
					this.\uE00F = true;
					if (this.\uE00D != null)
					{
						return;
					}
					this.\uE000();
				}

				// Token: 0x06009184 RID: 37252 RVA: 0x002EF794 File Offset: 0x002ED994
				private new void \uE000()
				{
					this.\uE025.ResetCamoraIndex();
					this.\uE02B.SetCamoraIndex(this.\uE025.CurrentCamoraIndex);
					this.State = Player.EOperationState.Finished;
					this.\uE001();
					this.\uE002.InitiateOperation<Player.FirearmController.\uE010>().Start(null);
					this.\uE000.Succeed();
				}

				// Token: 0x06009185 RID: 37253 RVA: 0x002EF7F8 File Offset: 0x002ED9F8
				public override void SetInventoryOpened(bool opened)
				{
					this.\uE002.InventoryOpened = opened;
					this.\uE02B.SetInventory(opened);
				}

				// Token: 0x06009186 RID: 37254 RVA: 0x002EF814 File Offset: 0x002EDA14
				private new void \uE001()
				{
					this.\uE02B.LoadOneTrigger(this.\uE00D != null);
				}

				// Token: 0x0400860A RID: 34314
				private \uEDED \uE00C;

				// Token: 0x0400860B RID: 34315
				private \uEEF0 \uE025;

				// Token: 0x0400860C RID: 34316
				private ItemAddress \uE00D;

				// Token: 0x0400860D RID: 34317
				private new Callback \uE000;

				// Token: 0x0400860E RID: 34318
				private bool \uE00E;

				// Token: 0x0400860F RID: 34319
				private bool \uE00F;

				// Token: 0x04008610 RID: 34320
				private int \uE026 = -1;
			}

			// Token: 0x020016B0 RID: 5808
			public class \uE006 : Player.FirearmController.\uE007
			{
				// Token: 0x06009187 RID: 37255 RVA: 0x002EF82C File Offset: 0x002EDA2C
				public \uE006(Player.FirearmController controller) : base(controller)
				{
				}

				// Token: 0x06009188 RID: 37256 RVA: 0x002EF838 File Offset: 0x002EDA38
				public override void RemoveAmmoFromChamber()
				{
					this.\uE000.Succeed();
					this.\uE02B.SetAmmoInChamber((float)this.\uE02D.ChamberAmmoCount);
					this.\uE02B.SetShellsInWeapon(this.\uE02D.ShellsInWeaponCount);
					this.\uE02B.SetCanReload(false);
					if (this.\uE027)
					{
						this.\uE02C.RemoveShellInWeapon(0);
						return;
					}
					this.\uE02C.DestroyPatronInWeapon(this.\uE010);
				}

				// Token: 0x06009189 RID: 37257 RVA: 0x002EF8C0 File Offset: 0x002EDAC0
				public override void OnMagPuttedToRig()
				{
					if (this.\uE00F)
					{
						return;
					}
					this.\uE00F = true;
					this.State = Player.EOperationState.Finished;
					this.\uE02B.Discharge(false);
					this.\uE002.InitiateOperation<Player.FirearmController.\uE010>().Start(null);
					if (base.\uE001)
					{
						this.RemoveAmmoFromChamber();
					}
				}
			}

			// Token: 0x020016B1 RID: 5809
			public class \uE007 : Player.FirearmController.\uE00A
			{
				// Token: 0x170014C4 RID: 5316
				// (get) Token: 0x0600918A RID: 37258 RVA: 0x002EF920 File Offset: 0x002EDB20
				protected new bool \uE001
				{
					get
					{
						return this.\uE028 != null;
					}
				}

				// Token: 0x0600918B RID: 37259 RVA: 0x002EF92C File Offset: 0x002EDB2C
				public \uE007(Player.FirearmController controller) : base(controller)
				{
				}

				// Token: 0x0600918C RID: 37260 RVA: 0x002EF93C File Offset: 0x002EDB3C
				internal virtual void Start(\uEDED ammo, int chamberIndex, ItemAddress destinationAddress, Callback callback)
				{
					if (this.\uE02D.MalfState.State == Weapon.EMalfunctionState.Misfire)
					{
						base.\uE000();
					}
					this.\uE000 = callback;
					this.\uE027 = ammo.IsUsed;
					this.\uE010 = chamberIndex;
					this.\uE028 = destinationAddress;
					base.Start();
					this.\uE002.IsAiming = false;
					this.\uE02B.Discharge(true);
					this.\uE02B.SetFire(false);
					this.\uE001.MovementContext.SetBlindFire(0);
					this.\uE02B.SetChamberIndexForLoadUnloadAmmo((float)this.\uE010);
					this.\uE001.BodyAnimatorCommon.SetFloat(PlayerAnimator.RELOAD_FLOAT_PARAM_HASH, 1f);
					this.\uE000();
					base.\uE001();
				}

				// Token: 0x0600918D RID: 37261 RVA: 0x002EFA18 File Offset: 0x002EDC18
				public override void Reset()
				{
					base.Reset();
					this.\uE028 = null;
					this.\uE000 = null;
					this.\uE027 = false;
					this.\uE00F = false;
					this.\uE010 = -1;
				}

				// Token: 0x0600918E RID: 37262 RVA: 0x002EFA50 File Offset: 0x002EDC50
				public override void FastForward()
				{
					if (this.State == Player.EOperationState.Finished)
					{
						return;
					}
					this.OnMagPuttedToRig();
				}

				// Token: 0x0600918F RID: 37263 RVA: 0x002EFA64 File Offset: 0x002EDC64
				public override void OnMagPuttedToRig()
				{
					if (this.\uE00F)
					{
						return;
					}
					this.\uE00F = true;
					this.State = Player.EOperationState.Finished;
					this.\uE02B.Discharge(false);
					this.\uE002.InitiateOperation<Player.FirearmController.\uE010>().Start(null);
					this.\uE000.Succeed();
					this.\uE02B.SetAmmoInChamber((float)this.\uE02D.ChamberAmmoCount);
					this.\uE02B.SetShellsInWeapon(this.\uE02D.ShellsInWeaponCount);
					this.\uE02B.SetCanReload(false);
					if (this.\uE027)
					{
						this.\uE02C.RemoveShellInWeapon(0);
						return;
					}
					this.\uE02C.DestroyPatronInWeapon(this.\uE010);
				}

				// Token: 0x06009190 RID: 37264 RVA: 0x002EFB2C File Offset: 0x002EDD2C
				public override void SetInventoryOpened(bool opened)
				{
					this.\uE002.InventoryOpened = opened;
					this.\uE02B.SetInventory(opened);
				}

				// Token: 0x06009191 RID: 37265 RVA: 0x002EFB48 File Offset: 0x002EDD48
				private new void \uE000()
				{
					this.\uE02B.LoadOneTrigger(this.\uE001);
				}

				// Token: 0x04008611 RID: 34321
				protected new Callback \uE000;

				// Token: 0x04008612 RID: 34322
				protected bool \uE027;

				// Token: 0x04008613 RID: 34323
				protected bool \uE00F;

				// Token: 0x04008614 RID: 34324
				protected int \uE010 = -1;

				// Token: 0x04008615 RID: 34325
				private ItemAddress \uE028;
			}

			// Token: 0x020016B2 RID: 5810
			public class \uE008 : Player.FirearmController.\uE00A
			{
				// Token: 0x06009192 RID: 37266 RVA: 0x002EFB5C File Offset: 0x002EDD5C
				public \uE008(Player.FirearmController controller) : base(controller)
				{
				}

				// Token: 0x06009193 RID: 37267 RVA: 0x002EFB68 File Offset: 0x002EDD68
				public virtual void Start(Item item, Callback callback)
				{
					this.\uE000 = callback;
					base.Start();
					this.\uE002.SetCompassState(false);
					this.\uE02B.SetFire(false);
					this.\uE001.MovementContext.SetBlindFire(0);
					this.\uE02B.SetInventory(false);
					this.\uE002.SetAim(false);
					this.\uE002._player.SendHandsInteractionStateChanged(true, 300);
					this.\uE001.MovementContext.SetInteractInHands(EInteraction.DropBackpack);
				}

				// Token: 0x06009194 RID: 37268 RVA: 0x002EFC00 File Offset: 0x002EDE00
				public override void Reset()
				{
					this.\uE000 = null;
					this.\uE029 = false;
					base.Reset();
				}

				// Token: 0x06009195 RID: 37269 RVA: 0x002EFC1C File Offset: 0x002EDE1C
				public override void SetAiming(bool isAiming)
				{
					if (!isAiming)
					{
						this.\uE002.IsAiming = false;
					}
				}

				// Token: 0x06009196 RID: 37270 RVA: 0x002EFC30 File Offset: 0x002EDE30
				public override void FastForward()
				{
					if (this.State == Player.EOperationState.Finished)
					{
						return;
					}
					this.OnBackpackDropEvent();
				}

				// Token: 0x06009197 RID: 37271 RVA: 0x002EFC44 File Offset: 0x002EDE44
				public override void OnBackpackDropEvent()
				{
					if (this.\uE029)
					{
						return;
					}
					this.\uE029 = true;
					this.State = Player.EOperationState.Finished;
					this.\uE002._player.SendHandsInteractionStateChanged(false, 300);
					\uE370.ResetTriggerHandReady(this.\uE002.\uE001.Animator);
					this.\uE02B.SetInventory(this.\uE002.\uE002);
					this.\uE002.InitiateOperation<Player.FirearmController.\uE010>().Start(null);
					this.\uE000.Succeed();
				}

				// Token: 0x06009198 RID: 37272 RVA: 0x002EFCD8 File Offset: 0x002EDED8
				public override void SetInventoryOpened(bool opened)
				{
					this.\uE002.\uE002 = opened;
				}

				// Token: 0x06009199 RID: 37273 RVA: 0x002EFCE8 File Offset: 0x002EDEE8
				public override bool CanChangeLightState(\uE825[] lightsStates)
				{
					return false;
				}

				// Token: 0x04008616 RID: 34326
				private new Callback \uE000;

				// Token: 0x04008617 RID: 34327
				private bool \uE029;
			}

			// Token: 0x020016B3 RID: 5811
			public sealed class \uE009 : Player.FirearmController.\uE01A
			{
				// Token: 0x0600919A RID: 37274 RVA: 0x002EFCEC File Offset: 0x002EDEEC
				public \uE009(Player.FirearmController controller) : base(controller)
				{
				}

				// Token: 0x0600919B RID: 37275 RVA: 0x002EFCF8 File Offset: 0x002EDEF8
				public new void Start()
				{
					this.\uE002.IsAiming = false;
					this.\uE02B.SetFire(false);
					this.\uE001.MovementContext.SetBlindFire(0);
					this.\uE001.BodyAnimatorCommon.SetFloat(PlayerAnimator.RELOAD_FLOAT_PARAM_HASH, 1f);
					base.Start();
				}

				// Token: 0x0600919C RID: 37276 RVA: 0x002EFD5C File Offset: 0x002EDF5C
				public override void Reset()
				{
					this.\uE02A = false;
					base.Reset();
				}

				// Token: 0x0600919D RID: 37277 RVA: 0x002EFD6C File Offset: 0x002EDF6C
				public override void OnMalfunctionOffEvent()
				{
					if (this.\uE02A)
					{
						return;
					}
					this.\uE02A = true;
					this.\uE001.InventoryController.ExamineMalfunctionType(this.\uE02D);
					base.\uE000();
				}

				// Token: 0x0600919E RID: 37278 RVA: 0x002EFDA0 File Offset: 0x002EDFA0
				public override void FastForward()
				{
					this.OnMalfunctionOffEvent();
				}

				// Token: 0x04008618 RID: 34328
				private bool \uE02A;
			}

			// Token: 0x020016B4 RID: 5812
			public abstract class \uE00A : Player.\uE00C
			{
				// Token: 0x0600919F RID: 37279 RVA: 0x002EFDA8 File Offset: 0x002EDFA8
				protected \uE00A(Player.FirearmController controller) : base(controller)
				{
					this.\uE002 = controller;
					this.\uE001 = this.\uE002._player;
					this.\uE02B = this.\uE002.\uE001;
					this.\uE02C = this.\uE002.\uE00D;
					this.\uE02D = this.\uE002.Item;
				}

				// Token: 0x060091A0 RID: 37280 RVA: 0x002EFE14 File Offset: 0x002EE014
				public virtual bool CanChangeLightState(\uE825[] lightsStates)
				{
					return lightsStates != null && lightsStates.Length != 0;
				}

				// Token: 0x060091A1 RID: 37281 RVA: 0x002EFE20 File Offset: 0x002EE020
				public void SetLightsState(\uE825[] lightsStates, bool force = false, bool animated = true)
				{
					if (!force && !this.CanChangeLightState(lightsStates))
					{
						return;
					}
					if (animated)
					{
						this.\uE02B.ModToggleTrigger();
					}
					this.\uE02C.UpdateBeams();
				}

				// Token: 0x060091A2 RID: 37282 RVA: 0x002EFE50 File Offset: 0x002EE050
				protected override void SetLeftStanceAnimOnStartOperation()
				{
					this.\uE001.MovementContext.LeftStanceController.DisableLeftStanceAnimFromHandsAction();
				}

				// Token: 0x060091A3 RID: 37283 RVA: 0x002EFE68 File Offset: 0x002EE068
				protected new void \uE000()
				{
					this.\uE001.ExecuteSkill(new Action(this.\uE002));
					this.\uE001.InventoryController.CallUnknownMalfunctionStartRepair(this.\uE02D);
					this.\uE001.InventoryController.CallMalfunctionRepaired(this.\uE02D);
					this.\uE02D.MalfState.Repair();
					this.\uE02B.MalfunctionRepair(false);
					this.\uE02B.Malfunction((int)this.\uE02D.MalfState.State);
					this.\uE02B.MisfireSlideUnknown(false);
					this.\uE02B.SetLayerWeight(this.\uE02B.MALFUNCTION_LAYER_INDEX, 0);
					this.\uE02D.MalfState.AmmoToFire = null;
					this.\uE02D.MalfState.AmmoWillBeLoadedToChamber = null;
					this.\uE02D.MalfState.MalfunctionedAmmo = null;
				}

				// Token: 0x060091A4 RID: 37284 RVA: 0x002EFF60 File Offset: 0x002EE160
				protected new void \uE001()
				{
					int num = 0;
					for (int i = 0; i < this.\uE02D.ShellsInChambers.Length; i++)
					{
						if (this.\uE02D.ShellsInChambers[i] != null)
						{
							num++;
							this.\uE02B.SetChamberIndexWithShell((float)i);
						}
					}
					if (num == this.\uE02D.ShellsInChambers.Length)
					{
						this.\uE02B.SetChamberIndexWithShell((float)num);
					}
					if (num == 0)
					{
						this.\uE02B.SetChamberIndexWithShell(-1f);
					}
				}

				// Token: 0x060091A5 RID: 37285 RVA: 0x002EFFF4 File Offset: 0x002EE1F4
				public void SetScopeMode(\uE826[] scopeStates)
				{
					if (this.CanChangeScopeStates(scopeStates))
					{
						this.\uE02B.ModToggleTrigger();
						this.\uE02C.UpdateScopesMode();
					}
				}

				// Token: 0x060091A6 RID: 37286 RVA: 0x002F001C File Offset: 0x002EE21C
				public virtual bool CanRemove()
				{
					return false;
				}

				// Token: 0x060091A7 RID: 37287 RVA: 0x002F0020 File Offset: 0x002EE220
				public virtual void ShowGesture(EInteraction gesture)
				{
					base.\uE000();
				}

				// Token: 0x060091A8 RID: 37288 RVA: 0x002F0028 File Offset: 0x002EE228
				public virtual void BlindFire(int b)
				{
					this.BlindFire_Internal(0);
				}

				// Token: 0x060091A9 RID: 37289 RVA: 0x002F0034 File Offset: 0x002EE234
				public virtual void OnFold(bool b)
				{
					base.\uE000();
				}

				// Token: 0x060091AA RID: 37290 RVA: 0x002F003C File Offset: 0x002EE23C
				public void BlindFire_Internal(int b)
				{
					this.\uE002.Blindfire = (b != 0);
					if (b != 0)
					{
						if (this.\uE002.IsAiming)
						{
							this.\uE002.IsAiming = false;
						}
					}
					this.\uE001.ProceduralWeaponAnimation.StartBlindFire(b);
				}

				// Token: 0x060091AB RID: 37291 RVA: 0x002F0094 File Offset: 0x002EE294
				public virtual void FastForward()
				{
				}

				// Token: 0x060091AC RID: 37292 RVA: 0x002F0098 File Offset: 0x002EE298
				public virtual bool CanChangeScopeStates(\uE826[] scopeStates)
				{
					return scopeStates != null && scopeStates.Length != 0;
				}

				// Token: 0x060091AD RID: 37293 RVA: 0x002F00A4 File Offset: 0x002EE2A4
				public virtual void SetFirearmCompassState(bool active)
				{
					base.\uE000();
				}

				// Token: 0x060091AE RID: 37294 RVA: 0x002F00AC File Offset: 0x002EE2AC
				public virtual void OnMagPulledOutFromWeapon()
				{
					base.\uE000();
				}

				// Token: 0x060091AF RID: 37295 RVA: 0x002F00B4 File Offset: 0x002EE2B4
				public virtual void OnMagPuttedToRig()
				{
					base.\uE000();
				}

				// Token: 0x060091B0 RID: 37296 RVA: 0x002F00BC File Offset: 0x002EE2BC
				public virtual void OnMagAppeared()
				{
					base.\uE000();
				}

				// Token: 0x060091B1 RID: 37297 RVA: 0x002F00C4 File Offset: 0x002EE2C4
				public virtual void OnMagInsertedToWeapon()
				{
					base.\uE000();
				}

				// Token: 0x060091B2 RID: 37298 RVA: 0x002F00CC File Offset: 0x002EE2CC
				public virtual void OnModChanged()
				{
					base.\uE000();
				}

				// Token: 0x060091B3 RID: 37299 RVA: 0x002F00D4 File Offset: 0x002EE2D4
				public virtual void OnAddAmmoInChamber()
				{
					base.\uE000();
				}

				// Token: 0x060091B4 RID: 37300 RVA: 0x002F00DC File Offset: 0x002EE2DC
				public virtual void RemoveAmmoFromChamber()
				{
					base.\uE000();
				}

				// Token: 0x060091B5 RID: 37301 RVA: 0x002F00E4 File Offset: 0x002EE2E4
				public virtual void OnOnOffBoltCatchEvent(bool isCaught)
				{
					base.\uE000();
				}

				// Token: 0x060091B6 RID: 37302 RVA: 0x002F00EC File Offset: 0x002EE2EC
				public virtual void OnBackpackDropEvent()
				{
					base.\uE000();
				}

				// Token: 0x060091B7 RID: 37303 RVA: 0x002F00F4 File Offset: 0x002EE2F4
				public virtual void OnFireEvent()
				{
					base.\uE000();
				}

				// Token: 0x060091B8 RID: 37304 RVA: 0x002F00FC File Offset: 0x002EE2FC
				public virtual void OnFireEndEvent()
				{
					base.\uE000();
				}

				// Token: 0x060091B9 RID: 37305 RVA: 0x002F0104 File Offset: 0x002EE304
				public virtual void OnIdleStartEvent()
				{
					base.\uE000();
				}

				// Token: 0x060091BA RID: 37306 RVA: 0x002F010C File Offset: 0x002EE30C
				public virtual void OnUtilityOperationStartEvent()
				{
					base.\uE000();
				}

				// Token: 0x060091BB RID: 37307 RVA: 0x002F0114 File Offset: 0x002EE314
				public virtual void SetTriggerPressed(bool pressed)
				{
					base.\uE000();
				}

				// Token: 0x060091BC RID: 37308 RVA: 0x002F011C File Offset: 0x002EE31C
				public virtual void ShowIncompatibleNotification()
				{
				}

				// Token: 0x060091BD RID: 37309 RVA: 0x002F0120 File Offset: 0x002EE320
				public virtual void SetInventoryOpened(bool opened)
				{
					base.\uE000();
				}

				// Token: 0x060091BE RID: 37310 RVA: 0x002F0128 File Offset: 0x002EE328
				public virtual void SetAiming(bool isAiming)
				{
					base.\uE000();
				}

				// Token: 0x060091BF RID: 37311 RVA: 0x002F0130 File Offset: 0x002EE330
				public virtual bool ChangeFireMode(Weapon.EFireMode fireMode)
				{
					base.\uE000();
					return true;
				}

				// Token: 0x060091C0 RID: 37312 RVA: 0x002F013C File Offset: 0x002EE33C
				public virtual bool CheckFireMode()
				{
					base.\uE000();
					return false;
				}

				// Token: 0x060091C1 RID: 37313 RVA: 0x002F0148 File Offset: 0x002EE348
				public virtual void OnSprintFinished()
				{
					base.\uE000();
				}

				// Token: 0x060091C2 RID: 37314 RVA: 0x002F0150 File Offset: 0x002EE350
				public virtual void OnSprintStart()
				{
					base.\uE000();
				}

				// Token: 0x060091C3 RID: 37315 RVA: 0x002F0158 File Offset: 0x002EE358
				public virtual void OnDropWeapon()
				{
					base.\uE000();
				}

				// Token: 0x060091C4 RID: 37316 RVA: 0x002F0160 File Offset: 0x002EE360
				public virtual void OnJumpOrFall()
				{
					base.\uE000();
				}

				// Token: 0x060091C5 RID: 37317 RVA: 0x002F0168 File Offset: 0x002EE368
				public virtual void OnAimingDisabled()
				{
					base.\uE000();
				}

				// Token: 0x060091C6 RID: 37318 RVA: 0x002F0170 File Offset: 0x002EE370
				public virtual bool ExamineWeapon()
				{
					base.\uE000();
					return true;
				}

				// Token: 0x060091C7 RID: 37319 RVA: 0x002F017C File Offset: 0x002EE37C
				public virtual void RollCylinder(Callback callback, bool rollToZeroCamora)
				{
					base.\uE000();
				}

				// Token: 0x060091C8 RID: 37320 RVA: 0x002F0184 File Offset: 0x002EE384
				public virtual void Execute(\uEF5F operation, Callback callback)
				{
					base.\uE000();
					if (this.\uE002.\uE016(operation))
					{
						if (callback != null)
						{
							callback.Succeed();
							return;
						}
					}
					else if (callback != null)
					{
						callback.Fail(string.Format(\uF1F8.\uE000(143114), base.GetType()));
					}
				}

				// Token: 0x060091C9 RID: 37321 RVA: 0x002F01E0 File Offset: 0x002EE3E0
				public virtual void ReloadMag(\uEE67 magazine, [CanBeNull] ItemAddress itemAddress, [CanBeNull] Callback finishCallback, [CanBeNull] Callback startCallback)
				{
					base.\uE000();
					if (finishCallback != null)
					{
						finishCallback.Fail(string.Format(\uF1F8.\uE000(143320), base.GetType()));
					}
				}

				// Token: 0x060091CA RID: 37322 RVA: 0x002F0210 File Offset: 0x002EE410
				public virtual void QuickReloadMag(\uEE67 magazine, [CanBeNull] Callback finishCallback, [CanBeNull] Callback startCallback)
				{
					base.\uE000();
					if (finishCallback != null)
					{
						finishCallback.Fail(string.Format(\uF1F8.\uE000(143278), base.GetType()));
					}
				}

				// Token: 0x060091CB RID: 37323 RVA: 0x002F0240 File Offset: 0x002EE440
				public virtual void ReloadGrenadeLauncher(\uEDA2 ammoPack, [CanBeNull] Callback callback)
				{
					base.\uE000();
					if (callback != null)
					{
						callback.Fail(string.Format(\uF1F8.\uE000(142950), base.GetType()));
					}
				}

				// Token: 0x060091CC RID: 37324 RVA: 0x002F0270 File Offset: 0x002EE470
				public virtual void ReloadWithAmmo(\uEDA2 ammoPack, [CanBeNull] Callback finishCallback, [CanBeNull] Callback startCallback)
				{
					base.\uE000();
					if (finishCallback != null)
					{
						finishCallback.Fail(string.Format(\uF1F8.\uE000(142950), base.GetType()));
					}
				}

				// Token: 0x060091CD RID: 37325 RVA: 0x002F02A0 File Offset: 0x002EE4A0
				public virtual void ReloadCylinderMagazine(\uEDA2 ammoPack, [CanBeNull] Callback finishCallback, [CanBeNull] Callback startCallback, bool quickReload = false)
				{
					base.\uE000();
					if (finishCallback != null)
					{
						finishCallback.Fail(string.Format(\uF1F8.\uE000(142882), base.GetType()));
					}
				}

				// Token: 0x060091CE RID: 37326 RVA: 0x002F02D0 File Offset: 0x002EE4D0
				public virtual void ReloadBarrels(\uEDA2 ammoPack, ItemAddress placeToPutContainedAmmoMagazine, [CanBeNull] Callback finishCallback, [CanBeNull] Callback startCallback)
				{
					base.\uE000();
					if (finishCallback != null)
					{
						finishCallback.Fail(string.Format(\uF1F8.\uE000(142950), base.GetType()));
					}
				}

				// Token: 0x060091CF RID: 37327 RVA: 0x002F0300 File Offset: 0x002EE500
				public virtual bool CanStartReload()
				{
					return false;
				}

				// Token: 0x060091D0 RID: 37328 RVA: 0x002F0304 File Offset: 0x002EE504
				public virtual void OnRemoveShellEvent()
				{
					base.\uE000();
				}

				// Token: 0x060091D1 RID: 37329 RVA: 0x002F030C File Offset: 0x002EE50C
				public virtual void OnShellEjectEvent()
				{
					base.\uE000();
				}

				// Token: 0x060091D2 RID: 37330 RVA: 0x002F0314 File Offset: 0x002EE514
				public override void Update(float deltaTime)
				{
				}

				// Token: 0x060091D3 RID: 37331 RVA: 0x002F0318 File Offset: 0x002EE518
				public virtual void AddAmmoToMag()
				{
					base.\uE000();
				}

				// Token: 0x060091D4 RID: 37332 RVA: 0x002F0320 File Offset: 0x002EE520
				public virtual void OnShowAmmo(bool value)
				{
					base.\uE000();
				}

				// Token: 0x060091D5 RID: 37333 RVA: 0x002F0328 File Offset: 0x002EE528
				public virtual void WeaponAppeared()
				{
					base.\uE000();
				}

				// Token: 0x060091D6 RID: 37334 RVA: 0x002F0330 File Offset: 0x002EE530
				public virtual void HideWeapon(Action onHidden, bool fastDrop, Item nextControllerItem = null)
				{
					base.\uE000();
				}

				// Token: 0x060091D7 RID: 37335 RVA: 0x002F0338 File Offset: 0x002EE538
				public virtual void HideWeaponComplete()
				{
					base.\uE000();
				}

				// Token: 0x060091D8 RID: 37336 RVA: 0x002F0340 File Offset: 0x002EE540
				public virtual bool CheckAmmo()
				{
					base.\uE000();
					return false;
				}

				// Token: 0x060091D9 RID: 37337 RVA: 0x002F034C File Offset: 0x002EE54C
				public virtual bool CheckChamber()
				{
					base.\uE000();
					return false;
				}

				// Token: 0x060091DA RID: 37338 RVA: 0x002F0358 File Offset: 0x002EE558
				public virtual void OnMalfunctionOffEvent()
				{
					base.\uE000();
				}

				// Token: 0x060091DB RID: 37339 RVA: 0x002F0360 File Offset: 0x002EE560
				public virtual void Pickup(bool p)
				{
					if (this.\uE02B.IsIdling())
					{
						this.\uE001.MovementContext.LeftStanceController.DisableLeftStanceAnimFromHandsAction();
						this.\uE02B.SetPickup(p);
					}
				}

				// Token: 0x060091DC RID: 37340 RVA: 0x002F0398 File Offset: 0x002EE598
				public virtual void Interact(bool isInteracting, int actionIndex)
				{
					if (this.\uE02B.IsIdling())
					{
						this.\uE001.MovementContext.LeftStanceController.DisableLeftStanceAnimFromHandsAction();
						this.\uE001.SendHandsInteractionStateChanged(isInteracting, actionIndex);
						this.\uE02B.SetInteract(isInteracting, actionIndex);
					}
				}

				// Token: 0x060091DD RID: 37341 RVA: 0x002F03E8 File Offset: 0x002EE5E8
				public virtual void Loot(bool p)
				{
					if (this.\uE02B.IsIdling())
					{
						this.\uE02B.SetLooting(p);
					}
				}

				// Token: 0x060091DE RID: 37342 RVA: 0x002F0404 File Offset: 0x002EE604
				public virtual void UnderbarrelSightingRangeUp()
				{
					base.\uE000();
				}

				// Token: 0x060091DF RID: 37343 RVA: 0x002F040C File Offset: 0x002EE60C
				public virtual void ForceSetUnderbarrelRangeIndex(int rangeIndex)
				{
					base.\uE000();
				}

				// Token: 0x060091E0 RID: 37344 RVA: 0x002F0414 File Offset: 0x002EE614
				public virtual void UnderbarrelSightingRangeDown()
				{
					base.\uE000();
				}

				// Token: 0x060091E1 RID: 37345 RVA: 0x002F041C File Offset: 0x002EE61C
				public virtual void UseSecondMagForReload()
				{
					base.\uE000();
				}

				// Token: 0x060091E2 RID: 37346 RVA: 0x002F0424 File Offset: 0x002EE624
				public virtual void ReplaceSecondMag()
				{
					base.\uE000();
				}

				// Token: 0x060091E3 RID: 37347 RVA: 0x002F042C File Offset: 0x002EE62C
				public virtual void PutMagToRig()
				{
					base.\uE000();
				}

				// Token: 0x060091E4 RID: 37348 RVA: 0x002F0434 File Offset: 0x002EE634
				public virtual bool ToggleLauncher(Action callback = null)
				{
					base.\uE000();
					return false;
				}

				// Token: 0x060091E5 RID: 37349 RVA: 0x002F0440 File Offset: 0x002EE640
				public virtual void ToggleLeftStance()
				{
					base.\uE000();
				}

				// Token: 0x060091E6 RID: 37350 RVA: 0x002F0448 File Offset: 0x002EE648
				public virtual bool CanNotBeInterrupted()
				{
					return false;
				}

				// Token: 0x060091E7 RID: 37351 RVA: 0x002F044C File Offset: 0x002EE64C
				public virtual void LauncherAppeared()
				{
					base.\uE000();
				}

				// Token: 0x060091E8 RID: 37352 RVA: 0x002F0454 File Offset: 0x002EE654
				public virtual void LauncherDisappeared()
				{
					base.\uE000();
				}

				// Token: 0x060091E9 RID: 37353 RVA: 0x002F045C File Offset: 0x002EE65C
				public virtual void LauncherInventoryUnchamberFromMainWeapon(\uEDED ammo, int camoraIndex, ItemAddress itemAddress, Callback callback)
				{
					base.\uE000();
				}

				// Token: 0x060091EA RID: 37354 RVA: 0x002F0464 File Offset: 0x002EE664
				public virtual void LoadLauncherFromMainWeapon(\uEDED ammo, int camoraIndex, ItemAddress itemAddress, Callback callback)
				{
					base.\uE000();
				}

				// Token: 0x060091EB RID: 37355 RVA: 0x002F046C File Offset: 0x002EE66C
				public virtual void DropBackpackOperationInvoke(Item item, Callback callback)
				{
					base.\uE000();
				}

				// Token: 0x060091EC RID: 37356 RVA: 0x002F0474 File Offset: 0x002EE674
				public virtual void SprintStateChanged(bool value)
				{
					base.\uE000();
				}

				// Token: 0x060091ED RID: 37357 RVA: 0x002F047C File Offset: 0x002EE67C
				public virtual void OnBipodToggleEvent()
				{
					base.\uE000();
				}

				// Token: 0x060091EE RID: 37358 RVA: 0x002F0484 File Offset: 0x002EE684
				public virtual bool ToggleBipod()
				{
					base.\uE000();
					return false;
				}

				// Token: 0x060091EF RID: 37359 RVA: 0x002F0490 File Offset: 0x002EE690
				[CompilerGenerated]
				private void \uE002()
				{
					this.\uE001.Skills.WeaponFixAction.Complete(1f);
				}

				// Token: 0x04008619 RID: 34329
				protected readonly Player.FirearmController \uE002;

				// Token: 0x0400861A RID: 34330
				protected new Player \uE001;

				// Token: 0x0400861B RID: 34331
				protected readonly FirearmsAnimator \uE02B;

				// Token: 0x0400861C RID: 34332
				protected readonly \uE865 \uE02C;

				// Token: 0x0400861D RID: 34333
				protected readonly Weapon \uE02D;
			}

			// Token: 0x020016B5 RID: 5813
			public class \uE00B : Player.FirearmController.\uE00C
			{
				// Token: 0x060091F0 RID: 37360 RVA: 0x002F04AC File Offset: 0x002EE6AC
				public \uE00B(Player.FirearmController controller) : base(controller)
				{
				}

				// Token: 0x060091F1 RID: 37361 RVA: 0x002F04BC File Offset: 0x002EE6BC
				public override void Start()
				{
					this.\uE025 = (this.\uE02D.GetCurrentMagazine() as \uEEF0);
					this.\uE026 = this.\uE025.GetCamoraFireOrLoadStartIndex(!this.\uE02D.CylinderHammerClosed);
					this.\uE02B.SetCamoraFireIndex(this.\uE025.CurrentCamoraIndex);
					if (this.\uE025.GetFirstAmmo(!this.\uE02D.CylinderHammerClosed) == null)
					{
						this.State = Player.EOperationState.Executing;
						this.\uE000();
						return;
					}
					base.Start();
				}

				// Token: 0x060091F2 RID: 37362 RVA: 0x002F0554 File Offset: 0x002EE754
				private new void \uE000()
				{
					this.\uE02E = true;
					this.\uE02B.SetCamoraFireIndex(this.\uE025.CurrentCamoraIndex);
					if ((this.\uE02D.CylinderHammerClosed && this.\uE02D.FireMode.FireMode == Weapon.EFireMode.doubleaction) || (!this.\uE02D.CylinderHammerClosed && this.\uE02D.FireMode.FireMode == Weapon.EFireMode.single))
					{
						this.\uE025.DryFireIncrementCamoraIndex();
					}
					this.\uE02B.SetDoubleAction(Convert.ToSingle(this.\uE02D.CylinderHammerClosed));
					this.\uE02B.SetCamoraIndex(this.\uE025.CurrentCamoraIndex);
					this.\uE02D.CylinderHammerClosed = (this.\uE02D.FireMode.FireMode == Weapon.EFireMode.doubleaction);
					this.\uE02B.SetFire(true);
					this.\uE032 = true;
					this.\uE002.DryShot(this.\uE026, false);
				}

				// Token: 0x060091F3 RID: 37363 RVA: 0x002F0664 File Offset: 0x002EE864
				public override void Reset()
				{
					base.Reset();
					this.\uE02E = false;
					this.\uE026 = -1;
					this.\uE025 = null;
					this.\uE031 = default(Player.FirearmController.\uE00D.SingleShotData);
					this.\uE032 = false;
				}

				// Token: 0x060091F4 RID: 37364 RVA: 0x002F06A0 File Offset: 0x002EE8A0
				public override void OnFireEvent()
				{
					if (this.\uE032)
					{
						return;
					}
					this.\uE032 = true;
					this.MakeShot(this.\uE031.AmmoToFire, this.\uE026, false);
					this.\uE002.\uE00D.MoveAmmoFromChamberToShellPort(this.\uE031.AmmoToFire.IsUsed, this.\uE026);
				}

				// Token: 0x060091F5 RID: 37365 RVA: 0x002F0704 File Offset: 0x002EE904
				public override void OnAddAmmoInChamber()
				{
					this.\uE02B.SetAmmoOnMag(this.\uE025.Count);
					this.\uE02D.CylinderHammerClosed = (this.\uE02D.FireMode.FireMode == Weapon.EFireMode.doubleaction);
					this.\uE02B.SetDoubleAction(Convert.ToSingle(this.\uE02D.CylinderHammerClosed));
				}

				// Token: 0x060091F6 RID: 37366 RVA: 0x002F0768 File Offset: 0x002EE968
				public override void SetTriggerPressed(bool pressed)
				{
					this.\uE002.IsTriggerPressed = pressed;
				}

				// Token: 0x060091F7 RID: 37367 RVA: 0x002F0780 File Offset: 0x002EE980
				public override void SetInventoryOpened(bool opened)
				{
					base.SetInventoryOpened(opened);
					this.\uE002.InventoryOpened = opened;
				}

				// Token: 0x060091F8 RID: 37368 RVA: 0x002F0798 File Offset: 0x002EE998
				public override void OnFireEndEvent()
				{
					if (this.\uE02E)
					{
						this.\uE02B.SetDoubleAction(Convert.ToSingle(this.\uE02D.CylinderHammerClosed));
					}
				}

				// Token: 0x060091F9 RID: 37369 RVA: 0x002F07C0 File Offset: 0x002EE9C0
				public override void OnIdleStartEvent()
				{
					if (!this.\uE032)
					{
						return;
					}
					this.\uE002.IsTriggerPressed = false;
					this.\uE02B.SetFire(this.\uE002.IsTriggerPressed);
					if (this.\uE038 != null)
					{
						this.\uE02B.SetFire(this.\uE002.IsTriggerPressed);
						this.SetAiming(false);
						this.\uE003();
						return;
					}
					this.\uE02B.SetFire(this.\uE002.IsTriggerPressed);
					this.\uE001();
				}

				// Token: 0x060091FA RID: 37370 RVA: 0x002F0854 File Offset: 0x002EEA54
				public override void OnShellEjectEvent()
				{
				}

				// Token: 0x060091FB RID: 37371 RVA: 0x002F0858 File Offset: 0x002EEA58
				public override void FastForward()
				{
					this.OnFireEvent();
					this.\uE001();
					this.\uE02B.Animator.Play(this.\uE02B.FullIdleStateName, 1, 0.2f);
				}

				// Token: 0x060091FC RID: 37372 RVA: 0x002F0890 File Offset: 0x002EEA90
				protected override void PrepareShot()
				{
					\uEDED firstAmmo = this.\uE025.GetFirstAmmo(!this.\uE02D.CylinderHammerClosed);
					this.\uE031 = default(Player.FirearmController.\uE00D.SingleShotData);
					\uF190<\uEF07> uF = this.\uE025.RemoveAmmoInCamora(firstAmmo, this.\uE002._player.InventoryController);
					if (uF.Failed)
					{
						Debug.LogError(uF.Error);
						return;
					}
					this.\uE001.InventoryController.CheckChamber(this.\uE02D, false);
					if (firstAmmo == null)
					{
						Debug.LogError(\uF1F8.\uE000(143074));
						return;
					}
					this.\uE031.AmmoToFire = firstAmmo;
					this.\uE031.AmmoToFire.IsUsed = true;
					this.\uE02D.ShellsInChambers[this.\uE026] = (AmmoTemplate)this.\uE031.AmmoToFire.Template;
					if (this.\uE02D.CylinderHammerClosed || this.\uE02D.FireMode.FireMode != Weapon.EFireMode.doubleaction)
					{
						this.\uE025.IncrementCamoraIndex(false);
					}
					this.\uE02B.SetCamoraIndex(this.\uE025.CurrentCamoraIndex);
					this.\uE02B.SetFire(this.\uE002.IsTriggerPressed);
					this.ShowIncompatibleNotification();
					this.\uE002._player.MouseLook(false);
				}

				// Token: 0x060091FD RID: 37373 RVA: 0x002F09F8 File Offset: 0x002EEBF8
				protected new void \uE001()
				{
					this.\uE02B.SetAmmoOnMag(this.\uE025.Count);
					this.\uE02B.SetInventory(this.\uE037);
					this.\uE02B.SetFire(this.\uE002.IsTriggerPressed);
					this.State = Player.EOperationState.Finished;
					this.\uE002.InitiateOperation<Player.FirearmController.\uE010>().Start(null);
				}

				// Token: 0x060091FE RID: 37374 RVA: 0x002F0A68 File Offset: 0x002EEC68
				protected new void \uE002()
				{
					this.\uE02B.SetFire(this.\uE002.IsTriggerPressed);
					this.\uE02B.Malfunction((int)this.\uE02D.MalfState.State);
					this.State = Player.EOperationState.Finished;
					this.\uE02D.MalfState.AmmoToFire = this.\uE031.AmmoToFire;
					this.\uE02D.MalfState.AmmoWillBeLoadedToChamber = this.\uE031.AmmoWillBeLoadedToChamber;
					this.\uE02D.MalfState.MalfunctionedAmmo = (this.\uE031.FedAmmo ?? this.\uE031.AmmoToFire);
					this.\uE002.InitiateOperation<Player.FirearmController.\uE030>().Start();
				}

				// Token: 0x060091FF RID: 37375 RVA: 0x002F0B38 File Offset: 0x002EED38
				private new void \uE003()
				{
					this.\uE02B.SetAmmoOnMag(this.\uE025.Count);
					this.\uE02B.SetFire(this.\uE002.IsTriggerPressed);
					this.SetAiming(false);
					this.State = Player.EOperationState.Finished;
					this.\uE038();
				}

				// Token: 0x0400861E RID: 34334
				private \uEEF0 \uE025;

				// Token: 0x0400861F RID: 34335
				private int \uE026 = -1;

				// Token: 0x04008620 RID: 34336
				protected bool \uE02E;
			}

			// Token: 0x020016B6 RID: 5814
			protected sealed class FireOnlyBarrelFireOperation : Player.FirearmController.\uE00C
			{
				// Token: 0x06009200 RID: 37376 RVA: 0x002F0B98 File Offset: 0x002EED98
				public FireOnlyBarrelFireOperation(Player.FirearmController controller) : base(controller)
				{
				}

				// Token: 0x06009201 RID: 37377 RVA: 0x002F0BB8 File Offset: 0x002EEDB8
				protected override void PrepareShot()
				{
					if (this.\uE02D.FireMode.FireMode == Weapon.EFireMode.single)
					{
						Slot firstLoadedChamberSlot = this.\uE02D.FirstLoadedChamberSlot;
						int chamberIndex = Array.IndexOf<Slot>(this.\uE02D.Chambers, firstLoadedChamberSlot);
						this.\uE001(chamberIndex);
					}
					else
					{
						this.\uE000();
					}
					this.\uE02B.SetFire(this.\uE002.IsTriggerPressed);
				}

				// Token: 0x06009202 RID: 37378 RVA: 0x002F0C28 File Offset: 0x002EEE28
				private new void \uE000()
				{
					for (int i = 0; i < this.\uE02D.Chambers.Length; i++)
					{
						this.\uE001(i);
					}
				}

				// Token: 0x06009203 RID: 37379 RVA: 0x002F0C5C File Offset: 0x002EEE5C
				private new void \uE001(int chamberIndex)
				{
					Player.FirearmController.\uE00D.SingleShotData item = new Player.FirearmController.\uE00D.SingleShotData
					{
						AmmoCountInChamberBeforeShot = this.\uE02D.ChamberAmmoCount
					};
					Slot slot = this.\uE02D.Chambers[chamberIndex];
					\uEDED uEDED = slot.ContainedItem as \uEDED;
					if (uEDED == null || uEDED.IsUsed)
					{
						return;
					}
					uEDED.IsUsed = true;
					bool succeeded = slot.RemoveItem(false).Succeeded;
					this.\uE02F.Add(chamberIndex);
					item.AmmoToFire = uEDED;
					this.\uE030.Add(item);
				}

				// Token: 0x06009204 RID: 37380 RVA: 0x002F0CF8 File Offset: 0x002EEEF8
				public override void Reset()
				{
					base.Reset();
					this.\uE02F.Clear();
					this.\uE030.Clear();
				}

				// Token: 0x06009205 RID: 37381 RVA: 0x002F0D1C File Offset: 0x002EEF1C
				public override void RemoveAmmoFromChamber()
				{
					base.\uE000();
				}

				// Token: 0x06009206 RID: 37382 RVA: 0x002F0D24 File Offset: 0x002EEF24
				public override void OnAddAmmoInChamber()
				{
					base.\uE000();
				}

				// Token: 0x06009207 RID: 37383 RVA: 0x002F0D2C File Offset: 0x002EEF2C
				public override void OnFireEvent()
				{
					this.\uE032 = true;
					this.MakeMultiBarrelShot(this.\uE030, this.\uE02F);
					for (int i = 0; i < this.\uE030.Count; i++)
					{
						this.\uE002.\uE00D.MoveAmmoFromChamberToShellPort(this.\uE030[i].AmmoToFire.IsUsed, this.\uE02F[i]);
						this.\uE02B.SetFire(this.\uE002.IsTriggerPressed);
						this.SetTriggerPressed(false);
						this.\uE02D.ShellsInChambers[this.\uE02F[i]] = (AmmoTemplate)this.\uE030[i].AmmoToFire.Template;
					}
					this.\uE02B.SetAmmoInChamber((float)this.\uE02D.ChamberAmmoCount);
					this.\uE02B.SetShellsInWeapon(this.\uE02D.ShellsInWeaponCount);
				}

				// Token: 0x04008621 RID: 34337
				private readonly List<int> \uE02F = new List<int>();

				// Token: 0x04008622 RID: 34338
				private readonly List<Player.FirearmController.\uE00D.SingleShotData> \uE030 = new List<Player.FirearmController.\uE00D.SingleShotData>();
			}

			// Token: 0x020016B7 RID: 5815
			public class \uE00C : Player.FirearmController.\uE00D
			{
				// Token: 0x06009208 RID: 37384 RVA: 0x002F0E40 File Offset: 0x002EF040
				public \uE00C(Player.FirearmController controller) : base(controller)
				{
				}

				// Token: 0x06009209 RID: 37385 RVA: 0x002F0E50 File Offset: 0x002EF050
				public new virtual void Start()
				{
					this.\uE02B.SetBoltActionReload(true);
					base.Start();
					this.PrepareShot();
					this.\uE033 = 60f / (float)this.\uE02D.SingleFireRate;
					this.\uE036 = this.\uE02D.CanQueueSecondShot;
					this.StartFireAnimation();
				}

				// Token: 0x0600920A RID: 37386 RVA: 0x002F0EB0 File Offset: 0x002EF0B0
				protected virtual void StartFireAnimation()
				{
					if (this.\uE02D.MalfState.State == Weapon.EMalfunctionState.None)
					{
						if (this.\uE02D is \uEEA0)
						{
							if (this.\uE02D.CylinderHammerClosed)
							{
								this.\uE02B.Animator.Play(this.\uE02B.FullDoubleActionFireStateName, 1, 0.2f);
								return;
							}
						}
						if (this.\uE02D.FireMode.FireMode == Weapon.EFireMode.semiauto)
						{
							this.\uE02B.Animator.Play(this.\uE02B.FullSemiFireStateName, 1, 0.2f);
							return;
						}
						this.\uE02B.Animator.Play(this.\uE02B.FullFireStateName, 1, 0.2f);
					}
				}

				// Token: 0x0600920B RID: 37387 RVA: 0x002F0F74 File Offset: 0x002EF174
				public override void Reset()
				{
					base.Reset();
					this.\uE031 = default(Player.FirearmController.\uE00D.SingleShotData);
					this.\uE032 = false;
					this.\uE033 = 0f;
					this.\uE034 = false;
					this.\uE035 = false;
				}

				// Token: 0x0600920C RID: 37388 RVA: 0x002F0FB4 File Offset: 0x002EF1B4
				public override void OnFireEvent()
				{
					this.\uE032 = true;
					this.MakeShot(this.\uE031.AmmoToFire, 0, false);
					if (this.\uE02D.HasChambers)
					{
						this.\uE002.\uE00D.MoveAmmoFromChamberToShellPort(this.\uE031.AmmoToFire.IsUsed, 0);
					}
					this.\uE002.IsTriggerPressed = false;
					this.\uE02B.SetFire(this.\uE002.IsTriggerPressed);
					if (this.\uE02D.MalfState.State == Weapon.EMalfunctionState.Jam || this.\uE02D.MalfState.State == Weapon.EMalfunctionState.SoftSlide || this.\uE02D.MalfState.State == Weapon.EMalfunctionState.HardSlide || this.\uE02D.MalfState.State == Weapon.EMalfunctionState.Feed)
					{
						if (true)
						{
							this.\uE001.InventoryController.ExamineMalfunction(this.\uE02D, true);
						}
						this.\uE001();
					}
					if (this.\uE002.\uE043())
					{
						this.\uE001.InventoryController.ProcessFastWeaponSwitchAvailability();
					}
				}

				// Token: 0x0600920D RID: 37389 RVA: 0x002F10E0 File Offset: 0x002EF2E0
				protected virtual void PrepareShot()
				{
					Weapon.EMalfunctionState emalfunctionState;
					Weapon.EMalfunctionSource malfSource;
					this.\uE031 = base.\uE000(out emalfunctionState, out malfSource);
					this.\uE02D.MalfState.State = emalfunctionState;
					if (emalfunctionState == Weapon.EMalfunctionState.None)
					{
						this.\uE002.\uE012 = false;
						this.\uE02B.SetFire(this.\uE002.IsTriggerPressed);
					}
					else
					{
						this.\uE02D.MalfState.LastMalfunctionTime = \uE780.PastTime;
						this.\uE002.\uE012 = true;
						if (this.\uE001.Skills.TroubleFixingDurElite.Value)
						{
							this.\uE02D.MalfState.AddMalfReduceChance(this.\uE001.ProfileId, malfSource);
						}
						this.\uE02B.MisfireSlideUnknown(false);
						if (this.\uE02D.MalfState.State == Weapon.EMalfunctionState.Misfire)
						{
							this.\uE001.InventoryController.ExamineMalfunction(this.\uE02D, true);
						}
						if (emalfunctionState == Weapon.EMalfunctionState.Misfire)
						{
							this.\uE001();
						}
						else
						{
							this.\uE02B.SetFire(this.\uE002.IsTriggerPressed);
						}
					}
					this.ShowIncompatibleNotification();
					this.\uE002._player.MouseLook(false);
				}

				// Token: 0x0600920E RID: 37390 RVA: 0x002F1224 File Offset: 0x002EF424
				public override void RemoveAmmoFromChamber()
				{
					this.\uE02B.SetAmmoInChamber(0f);
					if (this.\uE031.AmmoWillBeLoadedToChamber != null)
					{
						if (this.\uE02D.MalfState.State == Weapon.EMalfunctionState.None)
						{
							return;
						}
					}
					this.\uE002.\uE012 = true;
				}

				// Token: 0x0600920F RID: 37391 RVA: 0x002F1274 File Offset: 0x002EF474
				public override void OnAddAmmoInChamber()
				{
					this.\uE02B.SetAmmoInChamber((float)this.\uE031.AmmoCountInChamberAfterShot);
					this.\uE02B.SetAmmoOnMag(this.\uE031.AmmoCountInMagAfterShot);
					if (this.\uE031.AmmoWillBeLoadedToChamber != null)
					{
						this.\uE002.\uE00D.SetRoundIntoWeapon(this.\uE031.AmmoWillBeLoadedToChamber, 0);
					}
					this.\uE02B.SetFire(this.\uE002.IsTriggerPressed);
				}

				// Token: 0x06009210 RID: 37392 RVA: 0x002F12FC File Offset: 0x002EF4FC
				public override void OnShellEjectEvent()
				{
					if (!this.\uE02D.HasChambers && this.\uE031.AmmoToFire != null)
					{
						this.\uE002.\uE00D.SetRoundIntoWeapon(this.\uE031.AmmoToFire, 0);
						this.\uE002.\uE00D.MoveAmmoFromChamberToShellPort(this.\uE031.AmmoToFire.IsUsed, 0);
					}
					base.\uE003();
				}

				// Token: 0x06009211 RID: 37393 RVA: 0x002F1374 File Offset: 0x002EF574
				public override void Update(float deltaTime)
				{
					this.\uE033 -= deltaTime;
					if (this.\uE033 <= 0f)
					{
						if (this.\uE034)
						{
							this.\uE003();
						}
					}
				}

				// Token: 0x06009212 RID: 37394 RVA: 0x002F13A8 File Offset: 0x002EF5A8
				public override void SetTriggerPressed(bool pressed)
				{
					this.\uE002.IsTriggerPressed = pressed;
					this.\uE035 |= (pressed && this.\uE036);
				}

				// Token: 0x06009213 RID: 37395 RVA: 0x002F13D8 File Offset: 0x002EF5D8
				public override void OnFireEndEvent()
				{
					this.\uE002.IsTriggerPressed = false;
					if (!this.\uE02D.HasChambers)
					{
						if (this.\uE031.AmmoToFire != null)
						{
							this.\uE002.\uE00D.DestroyPatronInWeapon(0);
						}
					}
				}

				// Token: 0x06009214 RID: 37396 RVA: 0x002F1428 File Offset: 0x002EF628
				public override void OnIdleStartEvent()
				{
					if (!this.\uE032)
					{
						return;
					}
					this.\uE034 = true;
				}

				// Token: 0x06009215 RID: 37397 RVA: 0x002F143C File Offset: 0x002EF63C
				protected new void \uE000()
				{
					if (this.\uE02D.HasChambers)
					{
						this.\uE02B.SetAmmoInChamber((float)this.\uE02D.ChamberAmmoCount);
					}
					this.\uE02B.SetAmmoOnMag(this.\uE031.AmmoCountInMagAfterShot);
					this.\uE02B.SetInventory(this.\uE037);
					this.\uE02B.SetFire(this.\uE002.IsTriggerPressed);
					this.State = Player.EOperationState.Finished;
					this.\uE002.InitiateOperation<Player.FirearmController.\uE010>().Start(null);
					if (this.\uE035)
					{
						if (!this.\uE037)
						{
							this.\uE002.CurrentOperation.SetTriggerPressed(true);
							this.\uE002.CurrentOperation.SetTriggerPressed(false);
						}
					}
				}

				// Token: 0x06009216 RID: 37398 RVA: 0x002F1518 File Offset: 0x002EF718
				protected new void \uE001()
				{
					this.\uE02B.SetFire(this.\uE002.IsTriggerPressed);
					this.\uE02B.Malfunction((int)this.\uE02D.MalfState.State);
					this.State = Player.EOperationState.Finished;
					this.\uE02D.MalfState.AmmoToFire = this.\uE031.AmmoToFire;
					this.\uE02D.MalfState.AmmoWillBeLoadedToChamber = this.\uE031.AmmoWillBeLoadedToChamber;
					this.\uE02D.MalfState.MalfunctionedAmmo = (this.\uE031.FedAmmo ?? this.\uE031.AmmoToFire);
					this.\uE002.InitiateOperation<Player.FirearmController.\uE030>().Start();
				}

				// Token: 0x06009217 RID: 37399 RVA: 0x002F15E8 File Offset: 0x002EF7E8
				private new void \uE002()
				{
					this.\uE02B.SetAmmoInChamber((float)this.\uE031.AmmoCountInChamberAfterShot);
					this.\uE02B.SetAmmoOnMag(this.\uE031.AmmoCountInMagAfterShot);
					this.\uE02B.SetFire(this.\uE002.IsTriggerPressed);
					this.SetAiming(false);
					this.State = Player.EOperationState.Finished;
					this.\uE038();
				}

				// Token: 0x06009218 RID: 37400 RVA: 0x002F1660 File Offset: 0x002EF860
				private new void \uE003()
				{
					if (this.\uE038 != null)
					{
						this.\uE02B.SetFire(this.\uE002.IsTriggerPressed);
						this.SetAiming(false);
						this.\uE002();
						return;
					}
					this.\uE02B.SetFire(this.\uE002.IsTriggerPressed);
					this.\uE000();
				}

				// Token: 0x06009219 RID: 37401 RVA: 0x002F16C4 File Offset: 0x002EF8C4
				public override void FastForward()
				{
					base.FastForward();
					if (!this.\uE032)
					{
						this.OnFireEvent();
					}
					this.\uE035 = false;
					this.\uE003();
					this.\uE02B.Animator.Play(this.\uE02B.FullIdleStateName, 1, 0.2f);
				}

				// Token: 0x04008623 RID: 34339
				protected Player.FirearmController.\uE00D.SingleShotData \uE031;

				// Token: 0x04008624 RID: 34340
				protected bool \uE032;

				// Token: 0x04008625 RID: 34341
				private float \uE033;

				// Token: 0x04008626 RID: 34342
				private bool \uE034;

				// Token: 0x04008627 RID: 34343
				private bool \uE035;

				// Token: 0x04008628 RID: 34344
				private bool \uE036 = true;
			}

			// Token: 0x020016B8 RID: 5816
			public class \uE00D : Player.FirearmController.\uE00A
			{
				// Token: 0x0600921A RID: 37402 RVA: 0x002F1720 File Offset: 0x002EF920
				protected \uE00D(Player.FirearmController controller) : base(controller)
				{
				}

				// Token: 0x0600921B RID: 37403 RVA: 0x002F172C File Offset: 0x002EF92C
				protected override void SetLeftStanceAnimOnStartOperation()
				{
				}

				// Token: 0x0600921C RID: 37404 RVA: 0x002F1730 File Offset: 0x002EF930
				protected Player.FirearmController.\uE00D.SingleShotData \uE000(out Weapon.EMalfunctionState malfState, out Weapon.EMalfunctionSource malfSource)
				{
					\uEDED ammoToFire;
					\uEDED uEDED;
					int num;
					this.\uE001(out ammoToFire, out uEDED, out num);
					\uE714 instance = Singleton<\uE714>.Instance;
					float num2;
					float currentOverheat = this.\uE02D.GetCurrentOverheat(\uE780.PastTime, instance.Overheat, out num2);
					malfState = this.\uE002.GetMalfunctionState(ammoToFire, num > 0, this.\uE02D.IsBoltCatch, this.\uE02D.GetCurrentMagazine() != null, currentOverheat, instance.Overheat.FixSlideOverheat, out malfSource);
					if (!this.\uE001.IsAI && this.\uE02D.Template.AllowMisfire)
					{
						IHealthController healthController = this.\uE001.HealthController;
						if (((healthController != null) ? healthController.FindActiveEffect<\uED5B>(EBodyPart.Common) : null) != null)
						{
							malfState = Weapon.EMalfunctionState.Misfire;
							malfSource = Weapon.EMalfunctionSource.Effect;
						}
					}
					this.\uE02D.MalfState.Source = malfSource;
					if (this.\uE001.IsAI && !instance.Malfunction.AllowMalfForBots)
					{
						malfState = Weapon.EMalfunctionState.None;
					}
					if (!this.\uE02D.ValidateMalfunction(malfState))
					{
						malfState = Weapon.EMalfunctionState.None;
					}
					return this.\uE002(malfState);
				}

				// Token: 0x0600921D RID: 37405 RVA: 0x002F1854 File Offset: 0x002EFA54
				private new void \uE001(out \uEDED ammoToFire, out \uEDED ammoToChamber, out int ammoCountInMagBeforeShot)
				{
					Slot[] chambers = this.\uE02D.Chambers;
					Slot slot = this.\uE02D.HasChambers ? chambers[0] : null;
					ammoToFire = (((slot != null) ? slot.ContainedItem : null) as \uEDED);
					ammoToChamber = null;
					\uEE67 currentMagazine = this.\uE02D.GetCurrentMagazine();
					if (currentMagazine == null)
					{
						ammoCountInMagBeforeShot = 0;
						return;
					}
					ammoCountInMagBeforeShot = currentMagazine.Count;
					if (currentMagazine.IsAmmoCompatible(chambers))
					{
						if (ammoCountInMagBeforeShot > 0)
						{
							if (!this.\uE02D.HasChambers)
							{
								ammoToFire = (\uEDED)currentMagazine.Cartridges.Last;
								return;
							}
							ammoToChamber = (\uEDED)currentMagazine.Cartridges.Last;
							return;
						}
					}
				}

				// Token: 0x0600921E RID: 37406 RVA: 0x002F190C File Offset: 0x002EFB0C
				protected new Player.FirearmController.\uE00D.SingleShotData \uE002(Weapon.EMalfunctionState malfState)
				{
					bool flag = malfState == Weapon.EMalfunctionState.Feed;
					Slot[] chambers = this.\uE02D.Chambers;
					Player.FirearmController.\uE00D.SingleShotData singleShotData = new Player.FirearmController.\uE00D.SingleShotData
					{
						AmmoCountInChamberBeforeShot = (this.\uE02D.HasChambers ? this.\uE02D.ChamberAmmoCount : 1)
					};
					Slot slot = this.\uE02D.HasChambers ? chambers[0] : null;
					\uEDED uEDED = ((slot != null) ? slot.ContainedItem : null) as \uEDED;
					\uEE67 currentMagazine = this.\uE02D.GetCurrentMagazine();
					if (this.\uE02D.HasChambers)
					{
						bool succeeded = slot.RemoveItem(false).Succeeded;
						uEDED.IsUsed = true;
						singleShotData.AmmoToFire = uEDED;
					}
					if (currentMagazine == null)
					{
						singleShotData.AmmoCountInChamberAfterShot = 0;
						singleShotData.AmmoWillBeLoadedToChamber = null;
						singleShotData.IsAmmoCompatible = true;
						return singleShotData;
					}
					singleShotData.AmmoCountInMagBeforeShot = currentMagazine.Count;
					singleShotData.IsAmmoCompatible = currentMagazine.IsAmmoCompatible(chambers);
					if (singleShotData.IsAmmoCompatible && singleShotData.AmmoCountInMagBeforeShot > 0 && (malfState == Weapon.EMalfunctionState.None || malfState == Weapon.EMalfunctionState.Feed))
					{
						\uEDED uEDED2 = (\uEDED)((this.\uE02D.HasChambers && !flag) ? currentMagazine.Cartridges.PopTo(this.\uE002._player.InventoryController, this.\uE02D.Chambers[0].CreateItemAddress()).Value.ResultItem : currentMagazine.Cartridges.PopToNowhere(this.\uE002._player.InventoryController).Value.ResultItem);
						if (this.\uE02D.HasChambers)
						{
							if (flag)
							{
								singleShotData.FedAmmo = uEDED2;
							}
							else
							{
								singleShotData.AmmoWillBeLoadedToChamber = uEDED2;
							}
						}
						else
						{
							singleShotData.AmmoToFire = uEDED2;
						}
						this.UncheckOnShot();
					}
					singleShotData.AmmoCountInChamberAfterShot = this.\uE02D.ChamberAmmoCount;
					singleShotData.AmmoCountInMagAfterShot = this.\uE02D.GetCurrentMagazineCount();
					return singleShotData;
				}

				// Token: 0x0600921F RID: 37407 RVA: 0x002F1B10 File Offset: 0x002EFD10
				public override void BlindFire(int b)
				{
					base.BlindFire_Internal(b);
				}

				// Token: 0x06009220 RID: 37408 RVA: 0x002F1B1C File Offset: 0x002EFD1C
				public override void Reset()
				{
					this.\uE037 = false;
					this.\uE038 = null;
					base.Reset();
				}

				// Token: 0x06009221 RID: 37409 RVA: 0x002F1B38 File Offset: 0x002EFD38
				public override void SetAiming(bool isAiming)
				{
					this.\uE002.IsAiming = isAiming;
				}

				// Token: 0x06009222 RID: 37410 RVA: 0x002F1B48 File Offset: 0x002EFD48
				public override void ReloadMag(\uEE67 magazine, ItemAddress itemAddress, Callback finishCallback, Callback startCallback)
				{
					Player.FirearmController.\uE00D.\uE000 uE = new Player.FirearmController.\uE00D.\uE000();
					uE.<>4__this = this;
					uE.magazine = magazine;
					uE.itemAddress = itemAddress;
					uE.finishCallback = finishCallback;
					uE.startCallback = startCallback;
					this.\uE002.IsTriggerPressed = false;
					if (this.\uE038 == null)
					{
						this.\uE038 = new Action(uE.\uE000);
						return;
					}
					Callback finishCallback2 = uE.finishCallback;
					if (finishCallback2 == null)
					{
						return;
					}
					finishCallback2.Fail(\uF1F8.\uE000(143052));
				}

				// Token: 0x06009223 RID: 37411 RVA: 0x002F1BD4 File Offset: 0x002EFDD4
				public override void ReloadCylinderMagazine(\uEDA2 ammoPack, Callback finishCallback, Callback startCallback, bool quickReload = false)
				{
					Player.FirearmController.\uE00D.\uE001 uE = new Player.FirearmController.\uE00D.\uE001();
					uE.<>4__this = this;
					uE.ammoPack = ammoPack;
					uE.finishCallback = finishCallback;
					uE.quickReload = quickReload;
					uE.startCallback = startCallback;
					this.\uE002.IsTriggerPressed = false;
					if (this.\uE02D.GetCurrentMagazine() == null)
					{
						return;
					}
					if (this.\uE038 == null)
					{
						this.\uE038 = new Action(uE.\uE000);
					}
				}

				// Token: 0x06009224 RID: 37412 RVA: 0x002F1C54 File Offset: 0x002EFE54
				public override void ReloadWithAmmo(\uEDA2 ammoPack, Callback finishCallback, Callback startCallback)
				{
					Player.FirearmController.\uE00D.\uE002 uE = new Player.FirearmController.\uE00D.\uE002();
					uE.<>4__this = this;
					uE.ammoPack = ammoPack;
					uE.finishCallback = finishCallback;
					uE.startCallback = startCallback;
					this.\uE002.IsTriggerPressed = false;
					if (this.\uE02D.GetCurrentMagazine() == null)
					{
						return;
					}
					if (this.\uE038 == null)
					{
						this.\uE038 = new Action(uE.\uE000);
					}
				}

				// Token: 0x06009225 RID: 37413 RVA: 0x002F1CCC File Offset: 0x002EFECC
				public override void QuickReloadMag(\uEE67 magazine, Callback finishCallback, Callback startCallback)
				{
					Player.FirearmController.\uE00D.\uE003 uE = new Player.FirearmController.\uE00D.\uE003();
					uE.<>4__this = this;
					uE.magazine = magazine;
					uE.finishCallback = finishCallback;
					uE.startCallback = startCallback;
					this.\uE002.IsTriggerPressed = false;
					if (this.\uE038 == null)
					{
						this.\uE038 = new Action(uE.\uE000);
						return;
					}
					Callback finishCallback2 = uE.finishCallback;
					if (finishCallback2 == null)
					{
						return;
					}
					finishCallback2.Fail(\uF1F8.\uE000(143052));
				}

				// Token: 0x06009226 RID: 37414 RVA: 0x002F1D50 File Offset: 0x002EFF50
				public override bool CanStartReload()
				{
					return this.\uE038 == null;
				}

				// Token: 0x06009227 RID: 37415 RVA: 0x002F1D5C File Offset: 0x002EFF5C
				public override void HideWeapon(Action onHidden, bool fastDrop, Item nextControllerItem = null)
				{
					Player.FirearmController.\uE00D.\uE004 uE = new Player.FirearmController.\uE00D.\uE004();
					uE.<>4__this = this;
					uE.onHidden = onHidden;
					uE.fastDrop = fastDrop;
					uE.nextControllerItem = nextControllerItem;
					this.\uE002.IsTriggerPressed = false;
					this.\uE038 = new Action(uE.\uE000);
				}

				// Token: 0x06009228 RID: 37416 RVA: 0x002F1DB8 File Offset: 0x002EFFB8
				public override void OnOnOffBoltCatchEvent(bool isCaught)
				{
					if (this.\uE02D.IsBoltCatch)
					{
						this.\uE02B.SetBoltCatch(isCaught);
					}
				}

				// Token: 0x06009229 RID: 37417 RVA: 0x002F1DD4 File Offset: 0x002EFFD4
				public override void SetInventoryOpened(bool opened)
				{
					this.\uE037 = opened;
				}

				// Token: 0x0600922A RID: 37418 RVA: 0x002F1DE0 File Offset: 0x002EFFE0
				protected void \uE003()
				{
					this.\uE002.\uE00D.StartSpawnShell(this.\uE002._player.Velocity * 0.66f, 0);
				}

				// Token: 0x0600922B RID: 37419 RVA: 0x002F1E10 File Offset: 0x002F0010
				protected virtual void MakeMultiBarrelShot(List<Player.FirearmController.\uE00D.SingleShotData> singleShotDatas, List<int> chambersForFire)
				{
					bool multiBarrelShot = singleShotDatas.Count > 1;
					for (int i = 0; i < singleShotDatas.Count; i++)
					{
						this.MakeShot(singleShotDatas[i].AmmoToFire, chambersForFire[i], multiBarrelShot);
					}
				}

				// Token: 0x0600922C RID: 37420 RVA: 0x002F1E58 File Offset: 0x002F0058
				protected virtual void MakeShot(\uEDED ammo, int chamberIndex = 0, bool multiBarrelShot = false)
				{
					this.\uE002.\uE03C(this.\uE002.Item, ammo, chamberIndex, multiBarrelShot);
				}

				// Token: 0x0600922D RID: 37421 RVA: 0x002F1E74 File Offset: 0x002F0074
				protected virtual void UncheckOnShot()
				{
					Weapon item = this.\uE002.Item;
					\uEE67 currentMagazine = item.GetCurrentMagazine();
					if (currentMagazine != null)
					{
						this.\uE002._player.InventoryController.CheckChamber(item, this.\uE002._player.Profile.CheckedMagazines.ContainsKey(currentMagazine.Id));
						if (Singleton<\uE714>.Instance.UncheckOnShot)
						{
							this.\uE002._player.InventoryController.CheckMagazineAmmoDepend(currentMagazine, new Action(this.\uE004), false, true);
							return;
						}
					}
					else
					{
						this.\uE002._player.InventoryController.CheckChamber(item, false);
					}
				}

				// Token: 0x0600922E RID: 37422 RVA: 0x002F1F2C File Offset: 0x002F012C
				private void \uE004()
				{
				}

				// Token: 0x04008629 RID: 34345
				protected bool \uE037;

				// Token: 0x0400862A RID: 34346
				protected Action \uE038;

				// Token: 0x020016B9 RID: 5817
				protected struct SingleShotData
				{
					// Token: 0x0400862B RID: 34347
					public \uEDED AmmoToFire;

					// Token: 0x0400862C RID: 34348
					[CanBeNull]
					public \uEDED AmmoWillBeLoadedToChamber;

					// Token: 0x0400862D RID: 34349
					public \uEDED FedAmmo;

					// Token: 0x0400862E RID: 34350
					public int AmmoCountInChamberBeforeShot;

					// Token: 0x0400862F RID: 34351
					public int AmmoCountInChamberAfterShot;

					// Token: 0x04008630 RID: 34352
					public int AmmoCountInMagBeforeShot;

					// Token: 0x04008631 RID: 34353
					public int AmmoCountInMagAfterShot;

					// Token: 0x04008632 RID: 34354
					public bool IsAmmoCompatible;
				}

				// Token: 0x020016BA RID: 5818
				[CompilerGenerated]
				private new sealed class \uE000
				{
					// Token: 0x06009230 RID: 37424 RVA: 0x002F1F38 File Offset: 0x002F0138
					internal void \uE000()
					{
						\uF192<Player.FirearmController.\uE020> uF = Player.FirearmController.\uE020.Run(this.<>4__this.\uE002._player.InventoryController, this.<>4__this.\uE002.Item, this.magazine, false, this.<>4__this.\uE002.Item.MalfState.IsKnownMalfunction(this.<>4__this.\uE002._player.ProfileId), this.itemAddress);
						if (uF.Succeeded)
						{
							this.<>4__this.State = Player.EOperationState.Finished;
							this.<>4__this.\uE002.InitiateOperation<Player.FirearmController.\uE01F>().Start(uF.Value, this.finishCallback);
							Callback callback = this.startCallback;
							if (callback == null)
							{
								return;
							}
							callback.Succeed();
							return;
						}
						else
						{
							Callback callback2 = this.finishCallback;
							if (callback2 == null)
							{
								return;
							}
							callback2.Invoke(uF);
							return;
						}
					}

					// Token: 0x04008633 RID: 34355
					public Player.FirearmController.\uE00D <>4__this;

					// Token: 0x04008634 RID: 34356
					public \uEE67 magazine;

					// Token: 0x04008635 RID: 34357
					public ItemAddress itemAddress;

					// Token: 0x04008636 RID: 34358
					public Callback finishCallback;

					// Token: 0x04008637 RID: 34359
					public Callback startCallback;
				}

				// Token: 0x020016BB RID: 5819
				[CompilerGenerated]
				private new sealed class \uE001
				{
					// Token: 0x06009232 RID: 37426 RVA: 0x002F2018 File Offset: 0x002F0218
					internal void \uE000()
					{
						this.<>4__this.State = Player.EOperationState.Finished;
						this.<>4__this.\uE002.InitiateOperation<Player.FirearmController.\uE01E>().Start(this.ammoPack, this.finishCallback, this.quickReload);
						Callback callback = this.startCallback;
						if (callback == null)
						{
							return;
						}
						callback.Succeed();
					}

					// Token: 0x04008638 RID: 34360
					public Player.FirearmController.\uE00D <>4__this;

					// Token: 0x04008639 RID: 34361
					public \uEDA2 ammoPack;

					// Token: 0x0400863A RID: 34362
					public Callback finishCallback;

					// Token: 0x0400863B RID: 34363
					public bool quickReload;

					// Token: 0x0400863C RID: 34364
					public Callback startCallback;
				}

				// Token: 0x020016BC RID: 5820
				[CompilerGenerated]
				private new sealed class \uE002
				{
					// Token: 0x06009234 RID: 37428 RVA: 0x002F2078 File Offset: 0x002F0278
					internal void \uE000()
					{
						this.<>4__this.State = Player.EOperationState.Finished;
						this.<>4__this.\uE002.InitiateOperation<Player.FirearmController.\uE021>().Start(this.ammoPack, this.finishCallback);
						Callback callback = this.startCallback;
						if (callback == null)
						{
							return;
						}
						callback.Succeed();
					}

					// Token: 0x0400863D RID: 34365
					public Player.FirearmController.\uE00D <>4__this;

					// Token: 0x0400863E RID: 34366
					public \uEDA2 ammoPack;

					// Token: 0x0400863F RID: 34367
					public Callback finishCallback;

					// Token: 0x04008640 RID: 34368
					public Callback startCallback;
				}

				// Token: 0x020016BD RID: 5821
				[CompilerGenerated]
				private sealed class \uE003
				{
					// Token: 0x06009236 RID: 37430 RVA: 0x002F20D0 File Offset: 0x002F02D0
					internal void \uE000()
					{
						\uF192<Player.FirearmController.\uE020> uF = Player.FirearmController.\uE020.Run(this.<>4__this.\uE002._player.InventoryController, this.<>4__this.\uE002.Item, this.magazine, true, this.<>4__this.\uE002.Item.MalfState.IsKnownMalfunction(this.<>4__this.\uE002._player.ProfileId), null);
						if (uF.Succeeded)
						{
							this.<>4__this.State = Player.EOperationState.Finished;
							this.<>4__this.\uE002.InitiateOperation<Player.FirearmController.\uE01F>().Start(uF.Value, this.finishCallback);
							Callback callback = this.startCallback;
							if (callback == null)
							{
								return;
							}
							callback.Succeed();
							return;
						}
						else
						{
							Callback callback2 = this.finishCallback;
							if (callback2 == null)
							{
								return;
							}
							callback2.Invoke(uF);
							return;
						}
					}

					// Token: 0x04008641 RID: 34369
					public Player.FirearmController.\uE00D <>4__this;

					// Token: 0x04008642 RID: 34370
					public \uEE67 magazine;

					// Token: 0x04008643 RID: 34371
					public Callback finishCallback;

					// Token: 0x04008644 RID: 34372
					public Callback startCallback;
				}

				// Token: 0x020016BE RID: 5822
				[CompilerGenerated]
				private sealed class \uE004
				{
					// Token: 0x06009238 RID: 37432 RVA: 0x002F21AC File Offset: 0x002F03AC
					internal void \uE000()
					{
						this.<>4__this.State = Player.EOperationState.Finished;
						this.<>4__this.\uE002.InitiateOperation<Player.FirearmController.\uE02A>().Start(this.onHidden, this.fastDrop, this.nextControllerItem);
					}

					// Token: 0x04008645 RID: 34373
					public Player.FirearmController.\uE00D <>4__this;

					// Token: 0x04008646 RID: 34374
					public Action onHidden;

					// Token: 0x04008647 RID: 34375
					public bool fastDrop;

					// Token: 0x04008648 RID: 34376
					public Item nextControllerItem;
				}
			}

			// Token: 0x020016BF RID: 5823
			public class \uE00E : Player.FirearmController.\uE00C
			{
				// Token: 0x06009239 RID: 37433 RVA: 0x002F21E4 File Offset: 0x002F03E4
				public \uE00E(Player.FirearmController controller) : base(controller)
				{
				}

				// Token: 0x0600923A RID: 37434 RVA: 0x002F21F0 File Offset: 0x002F03F0
				public override void Start()
				{
					base.Start();
					this.\uE02B.SetFire(this.\uE002.IsTriggerPressed);
					this.\uE001.InventoryController.RaiseEvent(new \uEEDA(this.\uE02D, CommandStatus.Begin, this.\uE001.InventoryController));
				}

				// Token: 0x0600923B RID: 37435 RVA: 0x002F2248 File Offset: 0x002F0448
				public override void Reset()
				{
					this.\uE039 = null;
					base.Reset();
				}

				// Token: 0x0600923C RID: 37436 RVA: 0x002F2258 File Offset: 0x002F0458
				protected override void PrepareShot()
				{
				}

				// Token: 0x0600923D RID: 37437 RVA: 0x002F225C File Offset: 0x002F045C
				public override void OnFireEvent()
				{
					this.\uE032 = true;
					this.\uE039 = (this.\uE02D.FirstLoadedChamberSlot.ContainedItem as \uEDED);
					if (this.\uE039 == null || this.\uE039.IsUsed)
					{
						return;
					}
					this.\uE039.IsUsed = true;
					this.\uE002.\uE039(this.\uE039);
					this.\uE002.\uE00D.MoveAmmoFromChamberToShellPort(this.\uE039.IsUsed, 0);
					this.\uE02D.FirstLoadedChamberSlot.RemoveItem(false);
				}

				// Token: 0x0600923E RID: 37438 RVA: 0x002F2304 File Offset: 0x002F0504
				public override void SetTriggerPressed(bool pressed)
				{
					this.\uE002.IsTriggerPressed = pressed;
				}

				// Token: 0x0600923F RID: 37439 RVA: 0x002F231C File Offset: 0x002F051C
				public override void OnFireEndEvent()
				{
					this.\uE001.InventoryController.RaiseEvent(new \uEEDA(this.\uE02D, CommandStatus.Succeed, this.\uE001.InventoryController));
					this.SetTriggerPressed(false);
					this.\uE02B.SetFire(false);
					this.\uE02D.ShellsInChambers[0] = (AmmoTemplate)this.\uE039.Template;
					this.\uE02B.SetAmmoInChamber((float)this.\uE02D.ChamberAmmoCount);
					this.\uE02B.SetShellsInWeapon(this.\uE02D.ShellsInWeaponCount);
					this.State = Player.EOperationState.Finished;
					this.\uE002.InitiateOperation<Player.FirearmController.\uE010>().Start(null);
				}

				// Token: 0x06009240 RID: 37440 RVA: 0x002F23DC File Offset: 0x002F05DC
				public override bool CanNotBeInterrupted()
				{
					return true;
				}

				// Token: 0x04008649 RID: 34377
				protected \uEDED \uE039;
			}

			// Token: 0x020016C0 RID: 5824
			private sealed class \uE00F : Player.FirearmController.\uE00A
			{
				// Token: 0x06009241 RID: 37441 RVA: 0x002F23E0 File Offset: 0x002F05E0
				public \uE00F(Player.FirearmController controller) : base(controller)
				{
				}

				// Token: 0x06009242 RID: 37442 RVA: 0x002F23EC File Offset: 0x002F05EC
				public void Start(\uEF8C foldOperation, Callback callback)
				{
					this.\uE03C = false;
					this.\uE03B = foldOperation;
					FoldableComponent foldable = this.\uE03B.Foldable;
					this.\uE02B.SetInventory(false);
					this.\uE001.MovementContext.SetBlindFire(0);
					this.\uE001.BodyAnimatorCommon.SetFloat(PlayerAnimator.RELOAD_FLOAT_PARAM_HASH, 1f);
					if (foldable.CanBeFolded)
					{
						this.\uE03A = callback;
						this.\uE02B.TriggerFold();
						return;
					}
					Debug.LogError(\uF1F8.\uE000(143018));
					this.OnIdleStartEvent();
				}

				// Token: 0x06009243 RID: 37443 RVA: 0x002F248C File Offset: 0x002F068C
				public override void OnFold(bool b)
				{
					this.\uE000();
				}

				// Token: 0x06009244 RID: 37444 RVA: 0x002F2494 File Offset: 0x002F0694
				public override void SetInventoryOpened(bool opened)
				{
					this.\uE002.InventoryOpened = opened;
				}

				// Token: 0x06009245 RID: 37445 RVA: 0x002F24A4 File Offset: 0x002F06A4
				private new void \uE000()
				{
					this.State = Player.EOperationState.Finished;
					this.\uE002.RecalculateErgonomic();
					this.\uE02B.Fold(this.\uE03B.NewValue);
					this.\uE02B.SetInventory(this.\uE002.InventoryOpened);
					if (this.\uE03C)
					{
						this.\uE002.InitiateOperation<Player.FirearmController.\uE010>().HideWeapon(this.\uE009, this.\uE03D, null);
					}
					else
					{
						this.\uE002.InitiateOperation<Player.FirearmController.\uE010>().Start(null);
					}
					this.\uE03B = null;
					if (this.\uE03A != null)
					{
						Callback uE03A = this.\uE03A;
						this.\uE03A = null;
						uE03A.Succeed();
					}
					this.\uE001.BodyAnimatorCommon.SetFloat(PlayerAnimator.WEAPON_SIZE_MODIFIER_PARAM_HASH, (float)this.\uE02D.CalculateCellSize().X);
					this.\uE001.ProceduralWeaponAnimation.UpdateWeaponVariables();
				}

				// Token: 0x06009246 RID: 37446 RVA: 0x002F25A0 File Offset: 0x002F07A0
				public override void HideWeapon(Action onHidden, bool fastDrop, Item nextControllerItem = null)
				{
					this.\uE03C = true;
					this.\uE009 = onHidden;
					this.\uE03D = fastDrop;
				}

				// Token: 0x06009247 RID: 37447 RVA: 0x002F25C0 File Offset: 0x002F07C0
				public override void FastForward()
				{
					this.\uE000();
					this.\uE02B.Animator.Play(this.\uE02B.FullIdleStateName, 1, 0.2f);
				}

				// Token: 0x0400864A RID: 34378
				private Callback \uE03A;

				// Token: 0x0400864B RID: 34379
				private \uEF8C \uE03B;

				// Token: 0x0400864C RID: 34380
				private bool \uE03C;

				// Token: 0x0400864D RID: 34381
				private Action \uE009;

				// Token: 0x0400864E RID: 34382
				private bool \uE03D;
			}

			// Token: 0x020016C1 RID: 5825
			public class \uE010 : Player.FirearmController.\uE00A
			{
				// Token: 0x06009248 RID: 37448 RVA: 0x002F25EC File Offset: 0x002F07EC
				public \uE010(Player.FirearmController controller) : base(controller)
				{
				}

				// Token: 0x06009249 RID: 37449 RVA: 0x002F25F8 File Offset: 0x002F07F8
				public override void BlindFire(int b)
				{
					base.BlindFire_Internal(b);
				}

				// Token: 0x0600924A RID: 37450 RVA: 0x002F2604 File Offset: 0x002F0804
				public virtual void Start(Action callback = null)
				{
					base.Start();
					this.\uE001.ProceduralWeaponAnimation.TacticalReload = false;
					this.\uE040 = callback;
					this.\uE004 = 0f;
					this.\uE03E = false;
					this.\uE03F = 0f;
					this.\uE002.SetAnimatorAndProceduralValues();
					if (this.\uE02D.IsUnderBarrelDeviceActive)
					{
						this.\uE002.ToggleLauncher(callback);
					}
					this.\uE000();
					this.\uE002.\uE042();
				}

				// Token: 0x0600924B RID: 37451 RVA: 0x002F269C File Offset: 0x002F089C
				private new void \uE000()
				{
					if (this.\uE040 == null)
					{
						return;
					}
					this.\uE040();
					this.\uE040 = null;
				}

				// Token: 0x0600924C RID: 37452 RVA: 0x002F26BC File Offset: 0x002F08BC
				private new void \uE001()
				{
					if (this.\uE041 == null)
					{
						return;
					}
					this.\uE041();
					this.\uE041 = null;
				}

				// Token: 0x0600924D RID: 37453 RVA: 0x002F26DC File Offset: 0x002F08DC
				public override void OnIdleStartEvent()
				{
					this.SetLeftStanceAnimOnStartOperation();
					this.\uE001.BodyAnimatorCommon.SetFloat(PlayerAnimator.RELOAD_FLOAT_PARAM_HASH, 0f);
					this.\uE002.\uE00E = false;
					this.\uE002.\uE00F = false;
					this.\uE001();
				}

				// Token: 0x0600924E RID: 37454 RVA: 0x002F2734 File Offset: 0x002F0934
				public override void OnEnd()
				{
					this.\uE002.SetCompassState(false);
				}

				// Token: 0x0600924F RID: 37455 RVA: 0x002F2744 File Offset: 0x002F0944
				public override void Update(float deltaTime)
				{
					if (!this.\uE002.IsAiming && !this.\uE002.InventoryOpened && this.\uE02B.IsIdling())
					{
						this.\uE004 += deltaTime;
					}
					else
					{
						this.\uE004 = 0f;
					}
					if ((double)this.\uE004 > EFTHardSettings.Instance.IDLING_MAX_TIME && (double)this.\uE001.MovementIdlingTime > EFTHardSettings.Instance.IDLING_MAX_TIME)
					{
						this.\uE02B.Idle();
						this.\uE004 = 0f;
					}
					this.ProcessAutoshot();
					this.ProcessRemoveOneOffWeapon();
					this.\uE002();
				}

				// Token: 0x06009250 RID: 37456 RVA: 0x002F2804 File Offset: 0x002F0A04
				public override void OnDropWeapon()
				{
					this.\uE001.InventoryController.ThrowItem(this.\uE02D, false, null);
				}

				// Token: 0x06009251 RID: 37457 RVA: 0x002F2820 File Offset: 0x002F0A20
				protected virtual void ProcessRemoveOneOffWeapon()
				{
					if (this.\uE002.Item.IsOneOff && this.\uE002.Item.Repairable.Durability == 0f)
					{
						if (this.\uE001.InventoryController.CanThrow(this.\uE02D))
						{
							this.\uE001.InventoryController.TryThrowItem(this.\uE02D, null, false);
						}
					}
				}

				// Token: 0x06009252 RID: 37458 RVA: 0x002F2894 File Offset: 0x002F0A94
				private new void \uE002()
				{
					float layerWeight = this.\uE02B.GetLayerWeight(this.\uE02B.LACTIONS_LAYER_INDEX);
					if (this.\uE042 >= 1f)
					{
						if (layerWeight < this.\uE042)
						{
							this.SetLeftStanceAnimOnStartOperation();
						}
					}
					this.\uE042 = layerWeight;
				}

				// Token: 0x06009253 RID: 37459 RVA: 0x002F28EC File Offset: 0x002F0AEC
				protected virtual void ProcessAutoshot()
				{
					if (!this.\uE002.Item.MalfState.AutoshotChanceInited || this.\uE002.Item.MalfState.AutoshotTime <= 0f)
					{
						return;
					}
					if (this.\uE002.Item.MalfState.State != Weapon.EMalfunctionState.None)
					{
						this.\uE002.Item.MalfState.AutoshotTime = -1f;
						return;
					}
					if (\uE780.PastTime < this.\uE002.Item.MalfState.AutoshotTime)
					{
						return;
					}
					this.\uE002.Item.MalfState.AutoshotTime = -1f;
					Weapon.EFireMode selectedFireMode = this.\uE002.Item.SelectedFireMode;
					this.\uE002.Item.FireMode.FireMode = Weapon.EFireMode.single;
					this.SetTriggerPressed(true);
					this.\uE002.Item.FireMode.FireMode = selectedFireMode;
					if (selectedFireMode == Weapon.EFireMode.semiauto)
					{
						this.SetTriggerPressed(false);
					}
				}

				// Token: 0x06009254 RID: 37460 RVA: 0x002F2A0C File Offset: 0x002F0C0C
				public override void OnSprintStart()
				{
					this.SetAiming(false);
				}

				// Token: 0x06009255 RID: 37461 RVA: 0x002F2A18 File Offset: 0x002F0C18
				public override void OnSprintFinished()
				{
				}

				// Token: 0x06009256 RID: 37462 RVA: 0x002F2A1C File Offset: 0x002F0C1C
				public override void OnAimingDisabled()
				{
					this.SetAiming(false);
				}

				// Token: 0x06009257 RID: 37463 RVA: 0x002F2A28 File Offset: 0x002F0C28
				public override void OnJumpOrFall()
				{
					this.SetAiming(false);
				}

				// Token: 0x06009258 RID: 37464 RVA: 0x002F2A34 File Offset: 0x002F0C34
				public void DisableAimingOnReload()
				{
					if (this.\uE002.CurrentMasteringLevel >= 2)
					{
						if (!this.\uE02D.IsBeltMachineGun)
						{
							return;
						}
					}
					this.SetAiming(false);
				}

				// Token: 0x06009259 RID: 37465 RVA: 0x002F2A60 File Offset: 0x002F0C60
				public override void SetAiming(bool isAiming)
				{
					if (isAiming && !EFTHardSettings.Instance.CanAimInState(this.\uE001.CurrentState.Name))
					{
						return;
					}
					if (isAiming && this.\uE002.Blindfire)
					{
						return;
					}
					if (isAiming && this.\uE002.\uE013 > EFTHardSettings.Instance.STOP_AIMING_AT && !this.\uE001.MovementContext.IsInMountedState)
					{
						return;
					}
					if (isAiming && !this.\uE002.FirearmsAnimator.IsIdling() && this.\uE002.Item.Template.ReloadMode == Weapon.EReloadMode.OnlyBarrel)
					{
						return;
					}
					if (isAiming)
					{
						if (!this.\uE002.FirearmsAnimator.IsIdling())
						{
							if (this.\uE02D.IsBeltMachineGun)
							{
								return;
							}
						}
					}
					this.\uE002.IsAiming = isAiming;
					this.\uE004 = 0f;
				}

				// Token: 0x0600925A RID: 37466 RVA: 0x002F2B5C File Offset: 0x002F0D5C
				public override void SetInventoryOpened(bool opened)
				{
					this.SetAiming(false);
					this.SetTriggerPressed(false);
					this.\uE002.InventoryOpened = opened;
					this.\uE02B.SetInventory(opened);
				}

				// Token: 0x0600925B RID: 37467 RVA: 0x002F2B8C File Offset: 0x002F0D8C
				public override void SetTriggerPressed(bool pressed)
				{
					if (pressed && !this.\uE002.SuitableForHandInput)
					{
						return;
					}
					if (!this.\uE002.CanPressTrigger())
					{
						if (!pressed)
						{
							this.\uE002.IsTriggerPressed = pressed;
							this.\uE02B.SetFire(pressed);
						}
						Debug.Log(\uF1F8.\uE000(142984));
						return;
					}
					if (pressed)
					{
						this.ShowIncompatibleNotification();
					}
					if (this.\uE02D.HasChambers)
					{
						this.\uE02B.SetAmmoInChamber((float)this.\uE02D.ChamberAmmoCount);
					}
					this.\uE02B.SetAmmoOnMag(this.\uE02D.GetCurrentMagazineCount());
					this.\uE002.IsTriggerPressed = pressed;
					if (this.\uE02D.HasMagazineWithBelt() && ((this.\uE002.\uE00E && this.\uE02D.WithAnimatorAiming && this.\uE02D.GetCurrentMagazineCount() > 0 && !this.\uE002.\uE01F) || this.\uE002.\uE00F))
					{
						return;
					}
					if (this.\uE002.IsTriggerPressed && this.\uE02D.MalfState.State == Weapon.EMalfunctionState.None && (this.\uE02D.ChamberAmmoCount > 0 || this.\uE02D.IsOneOff || (!this.\uE02D.HasChambers && this.\uE02D.GetCurrentMagazineCount() > 0)) && !(this.\uE02D is \uEEA0))
					{
						this.State = Player.EOperationState.Finished;
						if (this.\uE002.Item.SelectedFireMode == Weapon.EFireMode.single || this.\uE002.Item.SelectedFireMode == Weapon.EFireMode.doublet || this.\uE002.Item.SelectedFireMode == Weapon.EFireMode.semiauto)
						{
							this.\uE002.InitiateOperation<Player.FirearmController.\uE00C>().Start();
							return;
						}
						this.\uE002.InitiateOperation<Player.FirearmController.\uE002>().Start();
						return;
					}
					else
					{
						if (this.\uE002.IsTriggerPressed && this.\uE02D.MalfState.State == Weapon.EMalfunctionState.None && this.\uE02D is \uEEA0)
						{
							this.State = Player.EOperationState.Finished;
							this.\uE002.InitiateOperation<Player.FirearmController.\uE00C>().Start();
							return;
						}
						this.\uE02B.SetFire(pressed);
						if (this.\uE02D.MalfState.State > Weapon.EMalfunctionState.None && pressed)
						{
							this.\uE002.FirearmsAnimator.MisfireSlideUnknown(false);
							this.\uE001.InventoryController.ExamineMalfunction(this.\uE02D, false);
						}
						if (pressed)
						{
							this.\uE002.DryShot(0, false);
						}
						return;
					}
				}

				// Token: 0x0600925C RID: 37468 RVA: 0x002F2E1C File Offset: 0x002F101C
				public override void ShowIncompatibleNotification()
				{
					\uEE67 currentMagazine = this.\uE02D.GetCurrentMagazine();
					bool flag = currentMagazine != null && currentMagazine.IsAmmoCompatible(this.\uE02D.Chambers);
					if (currentMagazine != null)
					{
						if (!flag)
						{
							\uEA30.DisplaySingletonWarningNotification(string.Format(\uF1F8.\uE000(142671).Localized(null), currentMagazine.Cartridges.Last.Name.Localized(null), this.\uE02D.AmmoCaliber), ENotificationDurationType.Default);
						}
					}
					this.\uE02D.CompatibleAmmo = (flag || currentMagazine == null);
				}

				// Token: 0x0600925D RID: 37469 RVA: 0x002F2EC0 File Offset: 0x002F10C0
				public override bool ChangeFireMode(Weapon.EFireMode fireMode)
				{
					Weapon.EFireMode selectedFireMode = this.\uE02D.SelectedFireMode;
					if (this.\uE02D.IsBoltCatch && this.\uE02D.NoFiremodeOnBoltcatch && this.\uE02B.GetBoltCatch())
					{
						return false;
					}
					if (selectedFireMode != fireMode)
					{
						this.\uE003(fireMode);
						this.\uE002.Item.FireMode.SetFireMode(fireMode);
						this.\uE02B.SetFireMode(this.\uE002.Item.SelectedFireMode, false);
						this.\uE002.SetCompassState(false);
						if (this.\uE001.ArmsAnimatorCommon.HasParameter(\uE370.BOOL_FIREMODE_SPRINT))
						{
							this.\uE001.BodyAnimatorCommon.SetFloat(PlayerAnimator.RELOAD_FLOAT_PARAM_HASH, 1f);
						}
						this.\uE004();
						return true;
					}
					this.\uE004();
					return false;
				}

				// Token: 0x0600925E RID: 37470 RVA: 0x002F2FB8 File Offset: 0x002F11B8
				private void \uE003(Weapon.EFireMode fireMode)
				{
					if (!(this.\uE02D is \uEEA0))
					{
						return;
					}
					if (fireMode == Weapon.EFireMode.single)
					{
						if (this.\uE02D.CylinderHammerClosed)
						{
							\uEEF0 uEEF = this.\uE02D.GetCurrentMagazine() as \uEEF0;
							uEEF.IncrementCamoraIndex(false);
							this.\uE02B.SetCamoraIndex(uEEF.CurrentCamoraIndex);
							this.\uE02B.HammerArmed();
						}
						this.\uE02B.SetDoubleAction(0f);
						this.\uE02D.CylinderHammerClosed = false;
					}
				}

				// Token: 0x0600925F RID: 37471 RVA: 0x002F3048 File Offset: 0x002F1248
				public override bool CheckFireMode()
				{
					this.\uE004();
					if (this.\uE02D.FireMode.AvailableEFireModes.Length <= 1)
					{
						return false;
					}
					if (this.\uE002._player.InventoryController.CheckItemAction(this.\uE002.Item, this.\uE002.Item.CurrentAddress).Failed)
					{
						return false;
					}
					this.SetAiming(false);
					if (!(this.\uE02D is \uEEA0))
					{
						this.\uE02B.TriggerFiremodeCheck();
					}
					if (!(this.\uE02D is \uEEA0))
					{
						this.RunUtilityOperation(Player.FirearmController.\uE034.EUtilityType.CheckFireMode);
					}
					return true;
				}

				// Token: 0x06009260 RID: 37472 RVA: 0x002F3100 File Offset: 0x002F1300
				private void \uE004()
				{
					if (this.\uE02D != null)
					{
						if (this.\uE001.FirstPersonPointOfView)
						{
							Action<Weapon.EFireMode> onShowFireMode = this.\uE001.OnShowFireMode;
							if (onShowFireMode == null)
							{
								return;
							}
							onShowFireMode(this.\uE02D.SelectedFireMode);
						}
					}
				}

				// Token: 0x06009261 RID: 37473 RVA: 0x002F3140 File Offset: 0x002F1340
				public override void ShowGesture(EInteraction gesture)
				{
					this.\uE001.MovementContext.LeftStanceController.DisableLeftStanceAnimFromHandsAction();
					this.\uE02B.Gesture(gesture);
				}

				// Token: 0x06009262 RID: 37474 RVA: 0x002F3164 File Offset: 0x002F1364
				public override void SetFirearmCompassState(bool active)
				{
					if (active && this.\uE002.Blindfire)
					{
						return;
					}
					if (active)
					{
						this.\uE001.MovementContext.LeftStanceController.DisableLeftStanceAnimFromHandsAction();
					}
					this.\uE002.CompassState.Value = active;
					if (active)
					{
						if (this.\uE002.IsAiming)
						{
							this.\uE002.SetAim(false);
						}
					}
				}

				// Token: 0x06009263 RID: 37475 RVA: 0x002F31E0 File Offset: 0x002F13E0
				public override bool ExamineWeapon()
				{
					if (this.\uE002.Item.MalfState.State != Weapon.EMalfunctionState.None)
					{
						if ((this.\uE002.Item.MalfState.State == Weapon.EMalfunctionState.Misfire || this.\uE002.Item.MalfState.State == Weapon.EMalfunctionState.SoftSlide || this.\uE002.Item.MalfState.State == Weapon.EMalfunctionState.HardSlide) && !this.\uE002.Item.MalfState.IsKnownMalfunction(this.\uE001.ProfileId))
						{
							if (this.\uE002.IsAiming)
							{
								return false;
							}
							this.RunUtilityOperation(Player.FirearmController.\uE034.EUtilityType.ExamineWeapon);
						}
						else
						{
							this.State = Player.EOperationState.Finished;
							this.\uE002.InitiateOperation<Player.FirearmController.\uE009>().Start();
						}
					}
					else
					{
						if (this.\uE002.IsAiming)
						{
							return false;
						}
						this.RunUtilityOperation(Player.FirearmController.\uE034.EUtilityType.ExamineWeapon);
					}
					this.\uE02B.LookTrigger();
					return true;
				}

				// Token: 0x06009264 RID: 37476 RVA: 0x002F32E8 File Offset: 0x002F14E8
				public override void RollCylinder(Callback finishCallback, bool rollToZeroCamora)
				{
					if (!(this.\uE02D is \uEEA0))
					{
						return;
					}
					this.State = Player.EOperationState.Finished;
					this.\uE002.InitiateOperation<Player.FirearmController.\uE02D>().Start(finishCallback, rollToZeroCamora);
				}

				// Token: 0x06009265 RID: 37477 RVA: 0x002F3314 File Offset: 0x002F1514
				public override void HideWeapon(Action onHidden, bool fastDrop, Item nextControllerItem = null)
				{
					this.\uE001.PreviousWeaponAimState = this.\uE002._isAiming;
					this.BlindFire(0);
					this.SetAiming(false);
					this.SetTriggerPressed(false);
					this.State = Player.EOperationState.Finished;
					this.\uE002.InitiateOperation<Player.FirearmController.\uE02A>().Start(onHidden, fastDrop, nextControllerItem);
				}

				// Token: 0x06009266 RID: 37478 RVA: 0x002F3374 File Offset: 0x002F1574
				public override bool CanRemove()
				{
					return true;
				}

				// Token: 0x06009267 RID: 37479 RVA: 0x002F3378 File Offset: 0x002F1578
				public override void ReloadMag(\uEE67 magazine, ItemAddress itemAddress, Callback finishCallback, Callback startCallback)
				{
					this.DisableAimingOnReload();
					this.SetTriggerPressed(false);
					\uF192<Player.FirearmController.\uE020> uF = Player.FirearmController.\uE020.Run(this.\uE001.InventoryController, this.\uE02D, magazine, false, this.\uE02D.MalfState.IsKnownMalfunction(this.\uE001.ProfileId), itemAddress);
					if (uF.Succeeded)
					{
						this.State = Player.EOperationState.Finished;
						this.\uE002.InitiateOperation<Player.FirearmController.\uE01F>().Start(uF.Value, finishCallback);
						if (startCallback != null)
						{
							startCallback.Succeed();
							return;
						}
					}
					else if (finishCallback != null)
					{
						finishCallback.Invoke(uF);
					}
				}

				// Token: 0x06009268 RID: 37480 RVA: 0x002F3420 File Offset: 0x002F1620
				public override void QuickReloadMag(\uEE67 magazine, Callback finishCallback, Callback startCallback)
				{
					this.DisableAimingOnReload();
					this.SetTriggerPressed(false);
					\uF192<Player.FirearmController.\uE020> uF = Player.FirearmController.\uE020.Run(this.\uE001.InventoryController, this.\uE02D, magazine, true, this.\uE02D.MalfState.IsKnownMalfunction(this.\uE001.ProfileId), null);
					if (uF.Succeeded)
					{
						this.State = Player.EOperationState.Finished;
						this.\uE002.InitiateOperation<Player.FirearmController.\uE01F>().Start(uF.Value, finishCallback);
						if (startCallback != null)
						{
							startCallback.Succeed();
							return;
						}
					}
					else if (finishCallback != null)
					{
						finishCallback.Invoke(uF);
					}
				}

				// Token: 0x06009269 RID: 37481 RVA: 0x002F34C8 File Offset: 0x002F16C8
				public override void ReloadWithAmmo(\uEDA2 ammoPack, Callback finishCallback, Callback startCallback)
				{
					this.DisableAimingOnReload();
					this.SetTriggerPressed(false);
					\uEE67 currentMagazine = this.\uE02D.GetCurrentMagazine();
					if (currentMagazine != null && currentMagazine.Count < currentMagazine.MaxCount)
					{
						this.State = Player.EOperationState.Finished;
						this.\uE002.InitiateOperation<Player.FirearmController.\uE021>().Start(ammoPack, finishCallback);
						if (startCallback != null)
						{
							startCallback.Succeed();
							return;
						}
					}
					else if (finishCallback != null)
					{
						finishCallback.Fail(\uF1F8.\uE000(142615));
					}
				}

				// Token: 0x0600926A RID: 37482 RVA: 0x002F3550 File Offset: 0x002F1750
				public override void ReloadCylinderMagazine(\uEDA2 ammoPack, Callback finishCallback, Callback startCallback, bool quickReload = false)
				{
					this.DisableAimingOnReload();
					this.SetTriggerPressed(false);
					\uEE67 currentMagazine = this.\uE02D.GetCurrentMagazine();
					if (currentMagazine != null && (quickReload || currentMagazine.Count < currentMagazine.MaxCount))
					{
						this.State = Player.EOperationState.Finished;
						this.\uE002.InitiateOperation<Player.FirearmController.\uE01E>().Start(ammoPack, finishCallback, quickReload);
						if (startCallback != null)
						{
							startCallback.Succeed();
							return;
						}
					}
					else if (finishCallback != null)
					{
						finishCallback.Fail(\uF1F8.\uE000(142615));
					}
				}

				// Token: 0x0600926B RID: 37483 RVA: 0x002F35DC File Offset: 0x002F17DC
				public override void ReloadBarrels(\uEDA2 ammoPack, ItemAddress placeToPutContainedAmmoMagazine, Callback finishCallback, Callback startCallback)
				{
					this.DisableAimingOnReload();
					this.SetTriggerPressed(false);
					if (this.\uE02D.Chambers.Length > 1)
					{
						\uF192<Player.FirearmController.\uE026> uF = Player.FirearmController.\uE026.Run(this.\uE001.InventoryController, this.\uE001.InventoryController, this.\uE02D, ammoPack, placeToPutContainedAmmoMagazine);
						if (uF.Error == null)
						{
							this.State = Player.EOperationState.Finished;
							this.\uE002.InitiateOperation<Player.FirearmController.\uE024>().Start(uF.Value, finishCallback);
							if (startCallback != null)
							{
								startCallback.Succeed();
								return;
							}
						}
						else if (finishCallback != null)
						{
							finishCallback.Invoke(uF);
							return;
						}
					}
					else
					{
						\uF192<Player.FirearmController.\uE028> uF2 = Player.FirearmController.\uE028.Run(this.\uE001.InventoryController, this.\uE001.InventoryController, this.\uE02D, ammoPack.GetAmmoToReload(0), placeToPutContainedAmmoMagazine);
						if (uF2.Error == null)
						{
							this.State = Player.EOperationState.Finished;
							this.\uE002.InitiateOperation<Player.FirearmController.\uE027>().Start(uF2.Value, finishCallback);
							if (startCallback != null)
							{
								startCallback.Succeed();
								return;
							}
						}
						else if (finishCallback != null)
						{
							finishCallback.Invoke(uF2);
						}
					}
				}

				// Token: 0x0600926C RID: 37484 RVA: 0x002F3700 File Offset: 0x002F1900
				public override bool CheckAmmo()
				{
					if (!(this.\uE002 == null))
					{
						if (this.\uE02D != null)
						{
							\uEE67 currentMagazine = this.\uE02D.GetCurrentMagazine();
							if (currentMagazine == null || this.\uE002._player.InventoryController.CheckItemAction(this.\uE002.Item, this.\uE002.Item.CurrentAddress).Failed || this.\uE002._player.InventoryController.CheckItemAction(currentMagazine, currentMagazine.CurrentAddress).Failed)
							{
								return false;
							}
							if (this.\uE02D.MalfState.State == Weapon.EMalfunctionState.Feed || (this.\uE02D.MalfState.State != Weapon.EMalfunctionState.None && this.\uE02D.IsBoltCatch))
							{
								this.SetAiming(false);
								this.\uE002.FirearmsAnimator.MisfireSlideUnknown(false);
								this.\uE001.InventoryController.ExamineMalfunction(this.\uE002.Item, false);
								return false;
							}
							if (this.\uE02D is \uEEA0 || this.\uE02D.Chambers.Length > 1)
							{
								this.\uE001.InventoryController.CheckChamber(this.\uE02D, true);
							}
							if (this.\uE001.FirstPersonPointOfView)
							{
								\uEDED uEDED;
								if (!(this.\uE02D is \uEEA0))
								{
									uEDED = (currentMagazine.Cartridges.Last as \uEDED);
								}
								else
								{
									\uEEF0 uEEF = (\uEEF0)currentMagazine;
									uEDED = ((uEEF != null) ? uEEF.GetFirstAmmo(!this.\uE02D.CylinderHammerClosed) : null);
								}
								\uEDED uEDED2 = uEDED;
								Action<int, int, int, string, bool> onShowAmmoDetails = this.\uE001.OnShowAmmoDetails;
								if (onShowAmmoDetails != null)
								{
									onShowAmmoDetails(currentMagazine.Count, currentMagazine.MaxCount, Mathf.Max(this.\uE001.Profile.MagDrillsMastering, currentMagazine.CheckOverride), (uEDED2 != null) ? uEDED2.Name.Localized(null) : null, this.\uE02D is \uEEA0 || this.\uE02D.Chambers.Length > 1);
								}
								this.\uE001.InventoryController.StrictCheckMagazine(currentMagazine, true, 0, false, true);
							}
							this.SetAiming(false);
							this.\uE02B.CheckAmmo();
							bool isExternalMag = this.\uE02D.ReloadMode == Weapon.EReloadMode.ExternalMagazine || this.\uE02D.ReloadMode == Weapon.EReloadMode.ExternalMagazineWithInternalReloadSupport || (this.\uE02D.ReloadMode == Weapon.EReloadMode.InternalMagazine && currentMagazine == null);
							this.\uE02B.SetIsExternalMag(isExternalMag);
							if (this.\uE002._player.MovementContext.StationaryWeapon != null)
							{
								return true;
							}
							this.RunUtilityOperation(Player.FirearmController.\uE034.EUtilityType.CheckMagazine);
							return true;
						}
					}
					Debug.LogError(\uF1F8.\uE000(142818));
					return false;
				}

				// Token: 0x0600926D RID: 37485 RVA: 0x002F39BC File Offset: 0x002F1BBC
				public override bool CheckChamber()
				{
					if (this.\uE002.IsTriggerPressed)
					{
						return false;
					}
					if (this.\uE002._player.MovementContext.StationaryWeapon != null)
					{
						return false;
					}
					if (this.\uE02D is \uEEA0)
					{
						return false;
					}
					if (this.\uE02D.MalfState.State == Weapon.EMalfunctionState.None)
					{
						if (this.\uE002._player.InventoryController.CheckItemAction(this.\uE002.Item, this.\uE002.Item.CurrentAddress).Failed)
						{
							return false;
						}
						this.SetAiming(false);
						this.\uE02B.CheckChamber();
						this.\uE001.InventoryController.CheckChamber(this.\uE02D, true);
						this.RunUtilityOperation(Player.FirearmController.\uE034.EUtilityType.CheckChamber);
					}
					else
					{
						this.SetAiming(false);
						if (this.\uE02D.MalfState.IsKnownMalfType(this.\uE001.ProfileId))
						{
							this.State = Player.EOperationState.Finished;
							this.\uE002.InitiateOperation<Player.FirearmController.\uE02C>().Start();
						}
						else
						{
							this.\uE02B.MisfireSlideUnknown(false);
							this.\uE001.InventoryController.ExamineMalfunction(this.\uE002.Item, false);
						}
					}
					return true;
				}

				// Token: 0x0600926E RID: 37486 RVA: 0x002F3B1C File Offset: 0x002F1D1C
				public override bool CanStartReload()
				{
					return true;
				}

				// Token: 0x0600926F RID: 37487 RVA: 0x002F3B20 File Offset: 0x002F1D20
				protected virtual void RunUtilityOperation(Player.FirearmController.\uE034.EUtilityType utilityType)
				{
					this.\uE001.BodyAnimatorCommon.SetFloat(PlayerAnimator.RELOAD_FLOAT_PARAM_HASH, 1f);
					this.State = Player.EOperationState.Finished;
					this.\uE002.InitiateOperation<Player.FirearmController.\uE034>().Start(utilityType);
				}

				// Token: 0x06009270 RID: 37488 RVA: 0x002F3B5C File Offset: 0x002F1D5C
				public override void Execute(\uEF5F operation, Callback callback)
				{
					\uEF8E uEF8E = operation as \uEF8E;
					if (uEF8E != null)
					{
						\uEF6A uEF6A = uEF8E.InternalOperation as \uEF6A;
						if (uEF6A != null && this.\uE02D.SupportsInternalReload)
						{
							\uEDED uEDED = uEF6A.Item1 as \uEDED;
							if (uEDED != null)
							{
								this.\uE002.ReloadWithAmmo(new \uEDA2(new List<\uEDED>
								{
									uEDED
								}), callback);
								return;
							}
						}
						if (callback != null)
						{
							callback.Fail(string.Format(\uF1F8.\uE000(142792), this.\uE02D.ReloadMode));
						}
						return;
					}
					\uEF6A uEF6A2 = operation as \uEF6A;
					if (uEF6A2 == null)
					{
						callback.Succeed();
						return;
					}
					if (!this.\uE002.\uE017(operation))
					{
						if (this.\uE001.InventoryController.IsAnimatedSlot(uEF6A2.From1))
						{
							this.State = Player.EOperationState.Finished;
							this.\uE002.InitiateOperation<Player.FirearmController.\uE008>().Start(uEF6A2.Item1, callback);
							return;
						}
						callback.Succeed();
						return;
					}
					else
					{
						this.\uE002.IsTriggerPressed = false;
						\uEF8C uEF8C = operation as \uEF8C;
						if (uEF8C != null)
						{
							this.State = Player.EOperationState.Finished;
							this.\uE002.InitiateOperation<Player.FirearmController.\uE00F>().Start(uEF8C, callback);
							return;
						}
						\uEDED uEDED2 = uEF6A2.Item1 as \uEDED;
						if (uEDED2 != null)
						{
							\uEE67 currentMagazine = this.\uE02D.GetCurrentMagazine();
							bool flag = this.\uE02D is \uEEA0;
							if (!this.\uE02D.HasChambers && !flag)
							{
								callback.Fail(string.Format(\uF1F8.\uE000(142726), operation));
								return;
							}
							\uEE5D underbarrelWeapon = this.\uE002.UnderbarrelWeapon;
							if (underbarrelWeapon != null && ((uEF6A2.From1 != null && uEF6A2.From1.Container == underbarrelWeapon.Chamber) || (uEF6A2.To1 != null && uEF6A2.To1.Container == underbarrelWeapon.Chamber)))
							{
								this.\uE005(uEF6A2, uEDED2, callback);
								return;
							}
							if (flag)
							{
								this.\uE006(uEF6A2, uEDED2, callback);
								return;
							}
							\uEFA9 uEFA = operation as \uEFA9;
							if (uEFA == null)
							{
								string text = null;
								for (int i = 0; i < this.\uE02D.Chambers.Length; i++)
								{
									Slot slot = this.\uE02D.Chambers[i];
									Item containedItem = slot.ContainedItem;
									if (uEF6A2.From1 != null && uEF6A2.From1.Container == slot && containedItem == uEF6A2.Item1)
									{
										if ((this.\uE02D.ReloadMode == Weapon.EReloadMode.ExternalMagazine || this.\uE02D.ReloadMode == Weapon.EReloadMode.ExternalMagazineWithInternalReloadSupport) && currentMagazine != null)
										{
											text = string.Format(\uF1F8.\uE000(142357), operation);
										}
										else
										{
											if (this.\uE02D.ReloadMode != Weapon.EReloadMode.InternalMagazine || this.\uE02D.GetCurrentMagazineCount() <= 0)
											{
												ItemAddress destinationAddress = null;
												\uEF6C uEF6C = uEF6A2 as \uEF6C;
												if (uEF6C != null)
												{
													\uEF91 uEF = uEF6C.BaseInventoryOperation as \uEF91;
													if (uEF != null && Enumerable.Contains<IContainer>(this.\uE02D.Chambers, uEF.To.Container))
													{
														destinationAddress = uEF.To;
													}
												}
												this.State = Player.EOperationState.Finished;
												this.\uE002.InitiateOperation<Player.FirearmController.\uE007>().Start((\uEDED)uEF6A2.Item1, i, destinationAddress, callback);
												this.\uE001.ExecuteSkill(new Action(this.\uE007));
												return;
											}
											text = string.Format(\uF1F8.\uE000(142569), operation);
										}
									}
									else if (uEF6A2.To1 != null && uEF6A2.To1.Container == slot)
									{
										if (!this.\uE02D.CanLoadAmmoToChamber)
										{
											text = string.Format(\uF1F8.\uE000(142524), operation);
										}
										else if ((this.\uE02D.ReloadMode == Weapon.EReloadMode.ExternalMagazine || this.\uE02D.ReloadMode == Weapon.EReloadMode.ExternalMagazineWithInternalReloadSupport) && currentMagazine != null)
										{
											text = string.Format(\uF1F8.\uE000(142357), operation);
										}
										else
										{
											if (this.\uE02D.ReloadMode != Weapon.EReloadMode.InternalMagazine || currentMagazine == null || currentMagazine.Cartridges.Count != currentMagazine.MaxCount || slot.CanAccept(currentMagazine.Cartridges.Last))
											{
												this.State = Player.EOperationState.Finished;
												this.\uE002.InitiateOperation<Player.FirearmController.\uE019>().Start((\uEDED)uEF6A2.Item1, i, callback);
												this.\uE001.ExecuteSkill(new Action(this.\uE008));
												return;
											}
											text = string.Format(\uF1F8.\uE000(142175), operation);
										}
									}
								}
								string error;
								if ((error = text) == null)
								{
									error = string.Format(\uF1F8.\uE000(142322), new object[]
									{
										operation,
										uEF6A2.Item1,
										uEF6A2.From1,
										uEF6A2.To1
									});
								}
								callback.Fail(error);
								return;
							}
							if (this.\uE02D.ReloadMode != Weapon.EReloadMode.OnlyBarrel)
							{
								this.State = Player.EOperationState.Finished;
								this.\uE002.InitiateOperation<Player.FirearmController.\uE01D>().Start(uEFA.AmmoInChamber, callback);
								return;
							}
							callback.Fail(\uF1F8.\uE000(142408));
							return;
						}
						else
						{
							if (uEF6A2.Item1 is \uEE67)
							{
								if (this.\uE02D.ReloadMode == Weapon.EReloadMode.ExternalMagazine || this.\uE02D.ReloadMode == Weapon.EReloadMode.ExternalMagazineWithInternalReloadSupport)
								{
									if (uEF6A2.To1 != null && uEF6A2.To1.IsChildOf(this.\uE02D, false))
									{
										\uF192<Player.FirearmController.\uE012> uF = Player.FirearmController.\uE012.Run(this.\uE001.InventoryController, this.\uE02D, this.\uE001.ProfileId);
										if (uF.Succeeded)
										{
											this.State = Player.EOperationState.Finished;
											this.\uE002.InitiateOperation<Player.FirearmController.\uE011>().Start(uF.Value, callback);
											return;
										}
										callback.Invoke(uF);
										return;
									}
									else if (uEF6A2.From1 != null && uEF6A2.From1.IsChildOf(this.\uE02D, false))
									{
										this.State = Player.EOperationState.Finished;
										this.\uE002.InitiateOperation<Player.FirearmController.\uE01C>().Start((\uEE67)uEF6A2.Item1, (Slot)uEF6A2.From1.Container, callback);
										return;
									}
								}
								Debug.LogErrorFormat(\uF1F8.\uE000(142296), new object[]
								{
									operation
								});
								callback.Succeed();
								return;
							}
							if (!(uEF6A2.Item1 is Mod))
							{
								Debug.LogErrorFormat(\uF1F8.\uE000(142296), new object[]
								{
									operation
								});
								callback.Succeed();
								return;
							}
							if (uEF6A2.From1 != null && uEF6A2.From1.IsChildOf(this.\uE02D, false))
							{
								this.State = Player.EOperationState.Finished;
								Slot slot2 = (Slot)uEF6A2.From1.Container;
								this.\uE002.InitiateOperation<Player.FirearmController.\uE029>().Start(uEF6A2.Item1, slot2, callback);
								return;
							}
							if (uEF6A2.To1 != null && uEF6A2.To1.IsChildOf(this.\uE02D, false))
							{
								this.State = Player.EOperationState.Finished;
								Slot slot3 = (Slot)uEF6A2.To1.Container;
								this.\uE002.InitiateOperation<Player.FirearmController.\uE001>().Start(uEF6A2.Item1, slot3, callback);
								return;
							}
							Debug.LogErrorFormat(\uF1F8.\uE000(142250), new object[]
							{
								operation
							});
							callback.Succeed();
							return;
						}
					}
				}

				// Token: 0x06009271 RID: 37489 RVA: 0x002F423C File Offset: 0x002F243C
				private void \uE005(\uEF6A oneItemOperation, \uEDED ammo, Callback callback)
				{
					Player.FirearmController.\uE010.\uE000 uE = new Player.FirearmController.\uE010.\uE000();
					uE.<>4__this = this;
					uE.ammo = ammo;
					uE.oneItemOperation = oneItemOperation;
					uE.callback = callback;
					this.State = Player.EOperationState.Finished;
					this.\uE02B.SetInventory(false);
					if (uE.oneItemOperation.From1 != null)
					{
						this.\uE041 = new Action(uE.\uE000);
					}
					else
					{
						this.\uE041 = new Action(uE.\uE002);
					}
					this.\uE001();
				}

				// Token: 0x06009272 RID: 37490 RVA: 0x002F42CC File Offset: 0x002F24CC
				private void \uE006(\uEF6A oneItemOperation, \uEDED ammo, Callback callback)
				{
					\uEEF0 uEEF = this.\uE02D.GetCurrentMagazine() as \uEEF0;
					\uEFA9 uEFA = oneItemOperation as \uEFA9;
					if (uEFA == null)
					{
						ItemAddress itemAddress = null;
						\uEF6C uEF6C = oneItemOperation as \uEF6C;
						if (uEF6C != null)
						{
							\uEF91 uEF = uEF6C.BaseInventoryOperation as \uEF91;
							if (uEF != null && Enumerable.Contains<IContainer>(uEEF.Camoras, uEF.To.Container))
							{
								itemAddress = uEF.To;
							}
						}
						for (int i = 0; i < uEEF.Camoras.Length; i++)
						{
							Slot slot = uEEF.Camoras[i];
							Item containedItem = slot.ContainedItem;
							if (oneItemOperation.From1 != null && oneItemOperation.From1.Container == slot && containedItem == oneItemOperation.Item1)
							{
								if ((this.\uE02D.ReloadMode != Weapon.EReloadMode.ExternalMagazine && this.\uE02D.ReloadMode != Weapon.EReloadMode.ExternalMagazineWithInternalReloadSupport) || this.\uE02D.GetCurrentMagazine() == null)
								{
									this.State = Player.EOperationState.Finished;
									this.\uE002.InitiateOperation<Player.FirearmController.\uE005>().Start((\uEDED)oneItemOperation.Item1, i, itemAddress, callback);
									this.\uE001.ExecuteSkill(new Action(this.\uE009));
									return;
								}
							}
							else if (oneItemOperation.To1 != null && oneItemOperation.To1.Container == slot)
							{
								if (!this.\uE02D.CanLoadAmmoToChamber)
								{
									callback.Fail(\uF1F8.\uE000(141942) + ((oneItemOperation != null) ? oneItemOperation.ToString() : null));
								}
								else
								{
									if ((this.\uE02D.ReloadMode != Weapon.EReloadMode.ExternalMagazine && this.\uE02D.ReloadMode != Weapon.EReloadMode.ExternalMagazineWithInternalReloadSupport) || this.\uE02D.GetCurrentMagazine() == null)
									{
										this.State = Player.EOperationState.Finished;
										this.\uE002.InitiateOperation<Player.FirearmController.\uE018>().Start((\uEDED)oneItemOperation.Item1, i, callback);
										this.\uE001.ExecuteSkill(new Action(this.\uE00A));
										return;
									}
									callback.Fail(string.Format(\uF1F8.\uE000(142357), oneItemOperation));
								}
							}
						}
						callback.Fail(string.Format(\uF1F8.\uE000(141842), oneItemOperation));
						return;
					}
					if (this.\uE02D.ReloadMode != Weapon.EReloadMode.OnlyBarrel)
					{
						this.State = Player.EOperationState.Finished;
						this.\uE002.InitiateOperation<Player.FirearmController.\uE01D>().Start(uEFA.AmmoInChamber, callback);
						return;
					}
					callback.Fail(\uF1F8.\uE000(142408));
				}

				// Token: 0x06009273 RID: 37491 RVA: 0x002F453C File Offset: 0x002F273C
				protected override void SetLeftStanceAnimOnStartOperation()
				{
					if (!this.\uE02D.IsStationaryWeapon)
					{
						if (!this.\uE001._isInventoryOpened)
						{
							if (!this.\uE002.DisableLeftStanceByOverlap)
							{
								this.\uE001.MovementContext.LeftStanceController.SetAnimatorLeftStanceToCacheFromHandsAction();
								return;
							}
						}
					}
				}

				// Token: 0x06009274 RID: 37492 RVA: 0x002F4590 File Offset: 0x002F2790
				public override bool ToggleLauncher(Action callback)
				{
					if (this.\uE002.UnderbarrelWeapon != null)
					{
						this.State = Player.EOperationState.Finished;
						this.\uE002.InitiateOperation<Player.FirearmController.\uE032>().Start(true, callback);
						this.\uE001.ProceduralWeaponAnimation.IsGrenadeLauncher = true;
						return true;
					}
					return false;
				}

				// Token: 0x06009275 RID: 37493 RVA: 0x002F45E4 File Offset: 0x002F27E4
				public override void OnOnOffBoltCatchEvent(bool isCatched)
				{
					this.\uE02B.SetBoltCatch(isCatched);
				}

				// Token: 0x06009276 RID: 37494 RVA: 0x002F45F4 File Offset: 0x002F27F4
				public override void DropBackpackOperationInvoke(Item item, Callback callback)
				{
					this.State = Player.EOperationState.Finished;
					this.\uE002.InitiateOperation<Player.FirearmController.\uE008>().Start(item, callback);
				}

				// Token: 0x06009277 RID: 37495 RVA: 0x002F4610 File Offset: 0x002F2810
				public override void ToggleLeftStance()
				{
					if (!this.\uE02D.IsStationaryWeapon && !this.\uE02D.BlockLeftStance)
					{
						if (!this.\uE002.CurrentCompassState)
						{
							if (!this.\uE001.MovementContext.IsInPronePose)
							{
								this.\uE001.MovementContext.LeftStanceController.ToggleLeftStance();
								return;
							}
						}
					}
				}

				// Token: 0x06009278 RID: 37496 RVA: 0x002F4674 File Offset: 0x002F2874
				public override bool ToggleBipod()
				{
					this.State = Player.EOperationState.Finished;
					this.\uE002.InitiateOperation<Player.FirearmController.\uE031>().Start(null);
					return true;
				}

				// Token: 0x06009279 RID: 37497 RVA: 0x002F4698 File Offset: 0x002F2898
				[CompilerGenerated]
				private void \uE007()
				{
					this.\uE001.Skills.WeaponChamberAction.Complete(this.\uE02D, 1f);
				}

				// Token: 0x0600927A RID: 37498 RVA: 0x002F46BC File Offset: 0x002F28BC
				[CompilerGenerated]
				private void \uE008()
				{
					this.\uE001.Skills.WeaponChamberAction.Complete(this.\uE02D, 1f);
				}

				// Token: 0x0600927B RID: 37499 RVA: 0x002F46E0 File Offset: 0x002F28E0
				[CompilerGenerated]
				private void \uE009()
				{
					this.\uE001.Skills.WeaponChamberAction.Complete(this.\uE02D, 1f);
				}

				// Token: 0x0600927C RID: 37500 RVA: 0x002F4704 File Offset: 0x002F2904
				[CompilerGenerated]
				private void \uE00A()
				{
					this.\uE001.Skills.WeaponChamberAction.Complete(this.\uE02D, 1f);
				}

				// Token: 0x0400864F RID: 34383
				private float \uE004;

				// Token: 0x04008650 RID: 34384
				private bool \uE03E;

				// Token: 0x04008651 RID: 34385
				private float \uE03F;

				// Token: 0x04008652 RID: 34386
				private Action \uE040;

				// Token: 0x04008653 RID: 34387
				private Action \uE041;

				// Token: 0x04008654 RID: 34388
				private float \uE042;

				// Token: 0x020016C2 RID: 5826
				[CompilerGenerated]
				private new sealed class \uE000
				{
					// Token: 0x0600927E RID: 37502 RVA: 0x002F4730 File Offset: 0x002F2930
					internal void \uE000()
					{
						Player.FirearmController.\uE032 uE = this.<>4__this.\uE002.InitiateOperation<Player.FirearmController.\uE032>();
						bool isLauncherEnabled = true;
						Action action;
						if ((action = this.<>9__2) == null)
						{
							action = (this.<>9__2 = new Action(this.\uE001));
						}
						uE.Start(isLauncherEnabled, action);
					}

					// Token: 0x0600927F RID: 37503 RVA: 0x002F4774 File Offset: 0x002F2974
					internal void \uE001()
					{
						this.<>4__this.\uE002.CurrentOperation.LauncherInventoryUnchamberFromMainWeapon(this.ammo, 0, this.oneItemOperation.To1, this.callback);
					}

					// Token: 0x06009280 RID: 37504 RVA: 0x002F47A4 File Offset: 0x002F29A4
					internal void \uE002()
					{
						Player.FirearmController.\uE032 uE = this.<>4__this.\uE002.InitiateOperation<Player.FirearmController.\uE032>();
						bool isLauncherEnabled = true;
						Action action;
						if ((action = this.<>9__3) == null)
						{
							action = (this.<>9__3 = new Action(this.\uE003));
						}
						uE.Start(isLauncherEnabled, action);
					}

					// Token: 0x06009281 RID: 37505 RVA: 0x002F47E8 File Offset: 0x002F29E8
					internal void \uE003()
					{
						this.<>4__this.\uE002.CurrentOperation.LoadLauncherFromMainWeapon(this.ammo, 0, this.oneItemOperation.To1, this.callback);
					}

					// Token: 0x04008655 RID: 34389
					public Player.FirearmController.\uE010 <>4__this;

					// Token: 0x04008656 RID: 34390
					public \uEDED ammo;

					// Token: 0x04008657 RID: 34391
					public \uEF6A oneItemOperation;

					// Token: 0x04008658 RID: 34392
					public Callback callback;

					// Token: 0x04008659 RID: 34393
					public Action <>9__2;

					// Token: 0x0400865A RID: 34394
					public Action <>9__3;
				}
			}

			// Token: 0x020016C3 RID: 5827
			public class \uE011 : Player.FirearmController.\uE00A
			{
				// Token: 0x06009282 RID: 37506 RVA: 0x002F4818 File Offset: 0x002F2A18
				public \uE011(Player.FirearmController controller) : base(controller)
				{
				}

				// Token: 0x06009283 RID: 37507 RVA: 0x002F4824 File Offset: 0x002F2A24
				public virtual void Start(Player.FirearmController.\uE012 insertMagResult, Callback callback)
				{
					this.\uE043 = insertMagResult;
					this.\uE000 = callback;
					base.Start();
					this.\uE02B.SetFire(false);
					this.\uE02B.SetIsExternalMag(true);
					this.\uE02B.SetCanReload(true);
					this.\uE001.MovementContext.SetBlindFire(0);
					this.\uE02B.SetMagTypeCurrent(this.\uE043.Magazine.magAnimationIndex);
					this.\uE02B.SetMagTypeNew(this.\uE043.Magazine.magAnimationIndex);
					this.\uE02B.InsertMagInInventoryMode();
					this.\uE001.BodyAnimatorCommon.SetFloat(PlayerAnimator.RELOAD_FLOAT_PARAM_HASH, 1f);
					this.\uE002.\uE00F = true;
					if (this.\uE02D.IsBoltCatch && this.\uE02D.ChamberAmmoCount == 1 && !this.\uE043.HasNewAmmo && !this.\uE02D.ManualBoltCatch && !this.\uE02D.MustBoltBeOpennedForExternalReload && !this.\uE02D.MustBoltBeOpennedForInternalReload)
					{
						this.\uE02B.SetBoltCatch(false);
					}
					if (this.\uE02D.MalfState.State == Weapon.EMalfunctionState.Misfire && this.\uE02D.MalfState.IsKnownMalfunction(this.\uE001.ProfileId))
					{
						if (this.\uE043.Magazine.Count > 0)
						{
							if (this.\uE043.AmmoCompatible)
							{
								this.\uE02B.SetAmmoInChamber(0f);
								this.\uE02B.SetLayerWeight(this.\uE02B.MALFUNCTION_LAYER_INDEX, 0);
							}
						}
					}
				}

				// Token: 0x06009284 RID: 37508 RVA: 0x002F49E4 File Offset: 0x002F2BE4
				public override void Reset()
				{
					this.\uE000 = null;
					this.\uE043 = null;
					this.\uE044 = false;
					this.\uE00E = false;
					this.\uE045 = false;
					base.Reset();
				}

				// Token: 0x06009285 RID: 37509 RVA: 0x002F4A1C File Offset: 0x002F2C1C
				public override void OnMagAppeared()
				{
					if (this.\uE00E)
					{
						return;
					}
					this.\uE00E = true;
					this.\uE02C.SetupMod(this.\uE043.MagazineSlot.Slot, Singleton<\uE90C>.Instance.CreateItem(this.\uE043.Magazine, true));
					if (this.\uE043.Magazine.IsMagazineWithBelt)
					{
						this.\uE002.\uE010.UpdateAnimatorHierarchy();
						if (this.\uE002.HasBipod)
						{
							this.\uE002.FirearmsAnimator.SetBipod(this.\uE002.BipodState);
						}
					}
				}

				// Token: 0x06009286 RID: 37510 RVA: 0x002F4AC4 File Offset: 0x002F2CC4
				public override void OnMagInsertedToWeapon()
				{
					if (this.\uE045)
					{
						return;
					}
					this.\uE045 = true;
					this.\uE02B.SetAmmoOnMag(this.\uE043.MagazineAmmoCount + (this.\uE043.HasNewAmmo ? 1 : 0));
					this.\uE02B.SetMagInWeapon(true);
					this.\uE02B.SetAmmoCompatible(this.\uE043.AmmoCompatible);
					if (!this.\uE043.HasNewAmmo)
					{
						if (this.\uE02D.MalfState.State == Weapon.EMalfunctionState.Misfire && this.\uE02D.MalfState.IsKnownMalfunction(this.\uE001.ProfileId) && this.\uE043.AmmoCompatible)
						{
							if (this.\uE043.Magazine.Count > 0)
							{
								goto IL_DA;
							}
						}
						this.\uE000();
					}
					IL_DA:
					if (this.\uE002.HasBipod)
					{
						this.\uE002.FirearmsAnimator.SetBipod(this.\uE002.BipodState);
					}
				}

				// Token: 0x06009287 RID: 37511 RVA: 0x002F4BE4 File Offset: 0x002F2DE4
				public override void OnOnOffBoltCatchEvent(bool isCaught)
				{
					this.\uE02B.SetBoltCatch(isCaught);
				}

				// Token: 0x06009288 RID: 37512 RVA: 0x002F4BF4 File Offset: 0x002F2DF4
				public override void OnAddAmmoInChamber()
				{
					if (this.\uE044)
					{
						return;
					}
					this.\uE044 = true;
					this.\uE02B.SetAmmoOnMag(this.\uE043.Magazine.Count);
					if (this.\uE02D.MalfState.State == Weapon.EMalfunctionState.Misfire)
					{
						base.\uE000();
					}
					if (this.\uE043.HasNewAmmo)
					{
						this.\uE02C.SetRoundIntoWeapon(this.\uE043.NewAmmo, 0);
					}
					this.\uE02B.SetAmmoInChamber((float)this.\uE043.Weapon.ChamberAmmoCount);
					this.\uE000();
				}

				// Token: 0x06009289 RID: 37513 RVA: 0x002F4CA8 File Offset: 0x002F2EA8
				public override void SetInventoryOpened(bool opened)
				{
					this.\uE002.InventoryOpened = opened;
					this.\uE02B.SetInventory(opened);
				}

				// Token: 0x0600928A RID: 37514 RVA: 0x002F4CC4 File Offset: 0x002F2EC4
				private new void \uE000()
				{
					this.State = Player.EOperationState.Finished;
					this.\uE002.RecalculateErgonomic();
					this.\uE002.InitiateOperation<Player.FirearmController.\uE010>().Start(null);
					this.\uE000.Succeed();
					this.\uE002.WeaponModified();
				}

				// Token: 0x0600928B RID: 37515 RVA: 0x002F4D18 File Offset: 0x002F2F18
				public override bool CanChangeLightState(\uE825[] lightsStates)
				{
					return false;
				}

				// Token: 0x0600928C RID: 37516 RVA: 0x002F4D1C File Offset: 0x002F2F1C
				public override void FastForward()
				{
					if (this.State == Player.EOperationState.Finished)
					{
						return;
					}
					this.OnMagAppeared();
					this.OnMagInsertedToWeapon();
					this.OnAddAmmoInChamber();
					if (this.State != Player.EOperationState.Finished)
					{
						this.\uE000();
					}
				}

				// Token: 0x0600928D RID: 37517 RVA: 0x002F4D58 File Offset: 0x002F2F58
				public override void HideWeapon(Action onHidden, bool fastDrop, Item nextControllerItem = null)
				{
					this.State = Player.EOperationState.Finished;
					this.\uE002.RecalculateErgonomic();
					this.\uE002.IsTriggerPressed = false;
					this.\uE002.IsAiming = false;
					this.State = Player.EOperationState.Finished;
					this.\uE002.InitiateOperation<Player.FirearmController.\uE02A>().Start(onHidden, fastDrop, nextControllerItem);
				}

				// Token: 0x0400865B RID: 34395
				private new Callback \uE000;

				// Token: 0x0400865C RID: 34396
				private Player.FirearmController.\uE012 \uE043;

				// Token: 0x0400865D RID: 34397
				private bool \uE044;

				// Token: 0x0400865E RID: 34398
				private bool \uE00E;

				// Token: 0x0400865F RID: 34399
				private bool \uE045;
			}

			// Token: 0x020016C4 RID: 5828
			public sealed class \uE012
			{
				// Token: 0x170014C5 RID: 5317
				// (get) Token: 0x0600928E RID: 37518 RVA: 0x002F4DB8 File Offset: 0x002F2FB8
				public \uEDED NewAmmo
				{
					get
					{
						\uEF07 uE = this.\uE001;
						return (\uEDED)((uE != null) ? uE.ResultItem : null);
					}
				}

				// Token: 0x170014C6 RID: 5318
				// (get) Token: 0x0600928F RID: 37519 RVA: 0x002F4DD4 File Offset: 0x002F2FD4
				public bool HasNewAmmo
				{
					get
					{
						return this.\uE001 != null;
					}
				}

				// Token: 0x06009290 RID: 37520 RVA: 0x002F4DE0 File Offset: 0x002F2FE0
				public \uE012(Weapon weapon, \uEE67 magazine, bool ammoCompatible, [CanBeNull] \uEF18 removeOldAmmoResult, [CanBeNull] \uEF07 addNewAmmoResult)
				{
					this.Weapon = weapon;
					this.Magazine = magazine;
					this.MagazineAmmoCount = magazine.Count;
					this.MagazineSlot = (\uEEFE)magazine.Parent;
					this.AmmoCompatible = ammoCompatible;
					this.\uE000 = removeOldAmmoResult;
					this.\uE001 = addNewAmmoResult;
				}

				// Token: 0x06009291 RID: 37521 RVA: 0x002F4E48 File Offset: 0x002F3048
				public void RollBack()
				{
					\uEF07 uE = this.\uE001;
					if (uE != null)
					{
						uE.RollBack();
					}
					\uEF18 uE2 = this.\uE000;
					if (uE2 == null)
					{
						return;
					}
					uE2.RollBack();
				}

				// Token: 0x06009292 RID: 37522 RVA: 0x002F4E6C File Offset: 0x002F306C
				public void RaiseEvents(\uEEFC controller, CommandStatus status)
				{
					\uEF07 uE = this.\uE001;
					if (uE != null)
					{
						uE.RaiseEvents(controller, status);
					}
					\uEF18 uE2 = this.\uE000;
					if (uE2 == null)
					{
						return;
					}
					uE2.RaiseEvents(controller, status);
				}

				// Token: 0x06009293 RID: 37523 RVA: 0x002F4E94 File Offset: 0x002F3094
				public static \uF192<Player.FirearmController.\uE012> Run(InventoryController inventoryController, Weapon weapon, string playerId)
				{
					\uEE67 currentMagazine = weapon.GetCurrentMagazine();
					Slot[] chambers = weapon.Chambers;
					Slot slot = weapon.HasChambers ? chambers[0] : null;
					bool flag = currentMagazine.IsAmmoCompatible(chambers);
					\uF190<\uEF18> uF = (slot != null && weapon.MustBoltBeOpennedForExternalReload && slot.ContainedItem != null) ? \uEF02.Remove(slot.ContainedItem, inventoryController, false) : default(\uF190<\uEF18>);
					if (uF.Failed)
					{
						return uF.Error;
					}
					bool flag2 = weapon.MalfState.State == Weapon.EMalfunctionState.None || (weapon.MalfState.State == Weapon.EMalfunctionState.Misfire && weapon.MalfState.IsKnownMalfunction(playerId));
					Weapon.EMalfunctionState state = weapon.MalfState.State;
					if (flag2 && weapon.MalfState.State != Weapon.EMalfunctionState.None)
					{
						weapon.MalfState.ChangeStateSilent(Weapon.EMalfunctionState.None);
					}
					\uF190<\uEF07> uF2 = (slot != null && slot.ContainedItem == null && currentMagazine.Count > 0 && flag && flag2) ? currentMagazine.Cartridges.PopTo(inventoryController, slot.CreateItemAddress()) : default(\uF190<\uEF07>);
					if (flag2)
					{
						if (state != Weapon.EMalfunctionState.None)
						{
							weapon.MalfState.ChangeStateSilent(state);
						}
					}
					if (uF2.Failed)
					{
						\uEF18 value = uF.Value;
						if (value != null)
						{
							value.RollBack();
						}
						return uF2.Error;
					}
					return new Player.FirearmController.\uE012(weapon, currentMagazine, flag, uF.Value, uF2.Value);
				}

				// Token: 0x06009294 RID: 37524 RVA: 0x002F5024 File Offset: 0x002F3224
				public bool CanExecute(\uEEFC itemController)
				{
					return true;
				}

				// Token: 0x04008660 RID: 34400
				public readonly Weapon Weapon;

				// Token: 0x04008661 RID: 34401
				public readonly \uEE67 Magazine;

				// Token: 0x04008662 RID: 34402
				public readonly int MagazineAmmoCount;

				// Token: 0x04008663 RID: 34403
				public readonly \uEEFE MagazineSlot;

				// Token: 0x04008664 RID: 34404
				public readonly bool AmmoCompatible;

				// Token: 0x04008665 RID: 34405
				[CanBeNull]
				private readonly \uEF18 \uE000;

				// Token: 0x04008666 RID: 34406
				[CanBeNull]
				private readonly \uEF07 \uE001;
			}

			// Token: 0x020016C5 RID: 5829
			public class \uE013 : Player.FirearmController.\uE00C
			{
				// Token: 0x06009295 RID: 37525 RVA: 0x002F5028 File Offset: 0x002F3228
				public \uE013(Player.FirearmController controller) : base(controller)
				{
				}

				// Token: 0x06009296 RID: 37526 RVA: 0x002F5034 File Offset: 0x002F3234
				public new void Start()
				{
					base.Start();
					this.\uE02B.Animator.Play(this.\uE02B.FullFireStateName, 1, 0.2f);
				}

				// Token: 0x06009297 RID: 37527 RVA: 0x002F5060 File Offset: 0x002F3260
				protected override void PrepareShot()
				{
					this.\uE02B.SetFire(this.\uE002.IsTriggerPressed);
				}

				// Token: 0x06009298 RID: 37528 RVA: 0x002F5078 File Offset: 0x002F3278
				public override void Reset()
				{
					this.\uE046 = false;
					base.Reset();
				}

				// Token: 0x06009299 RID: 37529 RVA: 0x002F5088 File Offset: 0x002F3288
				protected new void \uE000()
				{
					this.\uE002.IsTriggerPressed = false;
					this.\uE02B.SetFire(false);
					this.State = Player.EOperationState.Finished;
					this.\uE002.InitiateOperation<Player.FirearmController.\uE014>().Start(null);
				}

				// Token: 0x0600929A RID: 37530 RVA: 0x002F50C0 File Offset: 0x002F32C0
				public override void OnFireEndEvent()
				{
					this.\uE000();
				}

				// Token: 0x0600929B RID: 37531 RVA: 0x002F50C8 File Offset: 0x002F32C8
				public override void SetInventoryOpened(bool opened)
				{
					this.\uE046 = opened;
				}

				// Token: 0x0600929C RID: 37532 RVA: 0x002F50D4 File Offset: 0x002F32D4
				public override void OnFireEvent()
				{
					if (this.\uE032)
					{
						return;
					}
					FirearmsAnimator firearmsAnimator = this.\uE002.\uE010.FirearmsAnimator;
					firearmsAnimator.ResetGestureTrigger();
					firearmsAnimator.ResetHandReadyTrigger();
					IAnimator animator = firearmsAnimator.Animator;
					animator.SetLayerWeight(animator.GetLayerIndex(\uF1F8.\uE000(104842)), 0f);
					animator.Play(\uF1F8.\uE000(13427), animator.GetLayerIndex(\uF1F8.\uE000(104842)), 0f);
					\uEE5D underbarrelWeapon = this.\uE002.UnderbarrelWeapon;
					\uEDED uEDED = underbarrelWeapon.Chamber.ContainedItem as \uEDED;
					this.\uE002.\uE03B(underbarrelWeapon, uEDED);
					underbarrelWeapon.Chamber.RemoveItem(false);
					uEDED.IsUsed = true;
					this.\uE032 = true;
					if (uEDED.AmmoTemplate.RemoveShellAfterFire)
					{
						this.\uE002.\uE024.DestroyPatronInWeapon();
					}
					else
					{
						this.\uE002.\uE024.MoveAmmoFromChamberToShellPort(uEDED.IsUsed, 0);
					}
					if (!uEDED.AmmoTemplate.RemoveShellAfterFire)
					{
						underbarrelWeapon.ShellsInChambers[0] = uEDED.AmmoTemplate;
					}
					this.\uE02B.SetShellsInWeapon(uEDED.AmmoTemplate.RemoveShellAfterFire ? 0 : 1);
					this.\uE02B.SetAmmoInChamber(0f);
				}

				// Token: 0x04008667 RID: 34407
				private bool \uE046;
			}

			// Token: 0x020016C6 RID: 5830
			public class \uE014 : Player.FirearmController.\uE00A
			{
				// Token: 0x0600929D RID: 37533 RVA: 0x002F5238 File Offset: 0x002F3438
				public \uE014(Player.FirearmController controller) : base(controller)
				{
				}

				// Token: 0x0600929E RID: 37534 RVA: 0x002F5244 File Offset: 0x002F3444
				public void Start(Action callback = null)
				{
					base.Start();
					this.\uE000 = callback;
					this.\uE047 = this.\uE002.UnderbarrelWeapon;
					\uE370.SetUseLeftHand(this.\uE02B.Animator, false);
					this.\uE02B.SetAmmoInChamber((float)this.\uE047.ChamberAmmoCount);
					this.\uE02B.SetInventory(this.\uE002.\uE002);
					this.\uE02B.ResetCheckChamberTrigger();
					this.\uE02B.SetFire(false);
					Action uE = this.\uE000;
					if (uE == null)
					{
						return;
					}
					uE();
				}

				// Token: 0x0600929F RID: 37535 RVA: 0x002F52EC File Offset: 0x002F34EC
				protected override void SetLeftStanceAnimOnStartOperation()
				{
					if (this.\uE02D.IsStationaryWeapon)
					{
						return;
					}
					this.\uE001.MovementContext.LeftStanceController.SetAnimatorLeftStanceToCacheFromHandsAction();
				}

				// Token: 0x060092A0 RID: 37536 RVA: 0x002F5314 File Offset: 0x002F3514
				public override bool ToggleLauncher(Action callback)
				{
					this.\uE000(callback);
					return true;
				}

				// Token: 0x060092A1 RID: 37537 RVA: 0x002F5320 File Offset: 0x002F3520
				private void \uE000(Action callback)
				{
					this.State = Player.EOperationState.Finished;
					this.\uE002.InitiateOperation<Player.FirearmController.\uE032>().Start(false, callback);
				}

				// Token: 0x060092A2 RID: 37538 RVA: 0x002F533C File Offset: 0x002F353C
				private new void \uE001()
				{
					this.\uE001.UpdateLauncherBones(false, this.\uE002.\uE024.LauncherWeaponPrefab);
					this.\uE048 = true;
				}

				// Token: 0x060092A3 RID: 37539 RVA: 0x002F5364 File Offset: 0x002F3564
				public override void ForceSetUnderbarrelRangeIndex(int rangeIndex)
				{
					this.\uE047.ForceSetSightRangeIndex(rangeIndex);
				}

				// Token: 0x060092A4 RID: 37540 RVA: 0x002F5374 File Offset: 0x002F3574
				public override void UnderbarrelSightingRangeDown()
				{
					this.\uE047.SightingRangeDown();
					this.\uE002();
				}

				// Token: 0x060092A5 RID: 37541 RVA: 0x002F5388 File Offset: 0x002F3588
				public override void UnderbarrelSightingRangeUp()
				{
					this.\uE047.SightingRangeUp();
					this.\uE002();
				}

				// Token: 0x060092A6 RID: 37542 RVA: 0x002F539C File Offset: 0x002F359C
				private new void \uE002()
				{
					this.\uE001.ShowAmmoCountZeroingPanel(this.\uE047.RangeValue.ToString() ?? "");
				}

				// Token: 0x060092A7 RID: 37543 RVA: 0x002F53D0 File Offset: 0x002F35D0
				public override void SprintStateChanged(bool value)
				{
					this.\uE02B.SetSprint(value);
				}

				// Token: 0x060092A8 RID: 37544 RVA: 0x002F53E0 File Offset: 0x002F35E0
				public override void Update(float deltaTime)
				{
					if (this.\uE048 && !this.\uE02B.IsIdling())
					{
						this.\uE001.UpdateLauncherBones(true, this.\uE002.\uE024.LauncherWeaponPrefab);
						this.\uE048 = false;
					}
					this.SetSightingRange(deltaTime);
				}

				// Token: 0x060092A9 RID: 37545 RVA: 0x002F5438 File Offset: 0x002F3638
				protected virtual void SetSightingRange(float deltaTime)
				{
					int lastRangeValue = this.\uE047.LastRangeValue;
					if (lastRangeValue != this.\uE047.RangeValue)
					{
						int num;
						if (lastRangeValue > this.\uE047.RangeValue)
						{
							num = (int)Mathf.Clamp((float)lastRangeValue - 400f * deltaTime, (float)this.\uE047.RangeValue, (float)lastRangeValue);
						}
						else
						{
							if (lastRangeValue >= this.\uE047.RangeValue)
							{
								return;
							}
							num = (int)Mathf.Clamp((float)lastRangeValue + 400f * deltaTime, (float)lastRangeValue, (float)this.\uE047.RangeValue);
						}
						this.\uE047.LastRangeValue = num;
						this.\uE02B.SetUnderbarrelSightingRange((float)num);
					}
				}

				// Token: 0x060092AA RID: 37546 RVA: 0x002F54F8 File Offset: 0x002F36F8
				public override void SetTriggerPressed(bool pressed)
				{
					this.\uE002.IsTriggerPressed = pressed;
					if (pressed && !this.\uE001.StateIsSuitableForHandInput)
					{
						return;
					}
					if (pressed && this.\uE047.Chamber.ContainedItem != null)
					{
						this.State = Player.EOperationState.Finished;
						this.\uE002.InitiateOperation<Player.FirearmController.\uE013>().Start();
						return;
					}
					this.\uE002.\uE001.SetFire(pressed);
					if (pressed)
					{
						this.\uE002.DryShot(0, true);
					}
				}

				// Token: 0x060092AB RID: 37547 RVA: 0x002F5588 File Offset: 0x002F3788
				public override bool ExamineWeapon()
				{
					if (this.\uE002.IsAiming)
					{
						return false;
					}
					this.RunUtilityOperation(Player.FirearmController.\uE034.EUtilityType.ExamineWeapon);
					this.\uE02B.LookTrigger();
					return true;
				}

				// Token: 0x060092AC RID: 37548 RVA: 0x002F55B4 File Offset: 0x002F37B4
				public override void OnIdleStartEvent()
				{
					this.SetLeftStanceAnimOnStartOperation();
					this.\uE001.BodyAnimatorCommon.SetFloat(PlayerAnimator.RELOAD_FLOAT_PARAM_HASH, 0f);
				}

				// Token: 0x060092AD RID: 37549 RVA: 0x002F55D8 File Offset: 0x002F37D8
				public override void ReloadGrenadeLauncher(\uEDA2 ammoPack, Callback callback)
				{
					if (this.\uE047.Chamber.ContainedItem == null)
					{
						this.SetAiming(false);
						this.State = Player.EOperationState.Finished;
						this.\uE002.InitiateOperation<Player.FirearmController.\uE015>().Start(ammoPack, callback);
					}
				}

				// Token: 0x060092AE RID: 37550 RVA: 0x002F5614 File Offset: 0x002F3814
				public override void SetInventoryOpened(bool opened)
				{
					this.SetAiming(false);
					this.SetTriggerPressed(false);
					this.\uE002.InventoryOpened = opened;
					this.\uE02B.SetInventory(opened);
				}

				// Token: 0x060092AF RID: 37551 RVA: 0x002F5644 File Offset: 0x002F3844
				public override bool CanStartReload()
				{
					return true;
				}

				// Token: 0x060092B0 RID: 37552 RVA: 0x002F5648 File Offset: 0x002F3848
				public override void SetAiming(bool isAiming)
				{
					if (isAiming && !EFTHardSettings.Instance.CanAimInState(this.\uE001.CurrentState.Name))
					{
						return;
					}
					if (this.\uE002.\uE013 > EFTHardSettings.Instance.STOP_AIMING_AT && isAiming)
					{
						this.\uE002.AimingInterruptedByOverlap = false;
						return;
					}
					this.\uE002.IsAiming = isAiming;
				}

				// Token: 0x060092B1 RID: 37553 RVA: 0x002F56B4 File Offset: 0x002F38B4
				public override void Interact(bool isInteracting, int actionIndex)
				{
					if (!this.\uE02B.IsIdling())
					{
						return;
					}
					this.\uE001.MovementContext.LeftStanceController.DisableLeftStanceAnimFromHandsAction();
					this.\uE001.SendHandsInteractionStateChanged(isInteracting, actionIndex);
					this.\uE002.\uE010.FirearmsAnimator.SetInteract(isInteracting, actionIndex);
					this.\uE001();
				}

				// Token: 0x060092B2 RID: 37554 RVA: 0x002F5714 File Offset: 0x002F3914
				public override void Pickup(bool pickup)
				{
					if (!this.\uE02B.IsIdling())
					{
						return;
					}
					this.\uE001.MovementContext.LeftStanceController.DisableLeftStanceAnimFromHandsAction();
					this.\uE002.\uE010.FirearmsAnimator.SetPickup(pickup);
					this.\uE001();
				}

				// Token: 0x060092B3 RID: 37555 RVA: 0x002F5768 File Offset: 0x002F3968
				public override void ShowGesture(EInteraction gesture)
				{
					this.\uE001.MovementContext.LeftStanceController.DisableLeftStanceAnimFromHandsAction();
					this.\uE002.\uE010.FirearmsAnimator.Gesture(gesture);
					this.\uE001();
				}

				// Token: 0x060092B4 RID: 37556 RVA: 0x002F57A4 File Offset: 0x002F39A4
				public override void LoadLauncherFromMainWeapon(\uEDED ammo, int camoraIndex, ItemAddress itemAddress, Callback callback)
				{
					this.SetAiming(false);
					this.SetTriggerPressed(false);
					this.\uE002.IsTriggerPressed = false;
					this.State = Player.EOperationState.Finished;
					this.\uE002.InitiateOperation<Player.FirearmController.\uE017>().Start(ammo, 0, callback);
				}

				// Token: 0x060092B5 RID: 37557 RVA: 0x002F57F4 File Offset: 0x002F39F4
				public override void LauncherInventoryUnchamberFromMainWeapon(\uEDED ammo, int camoraIndex, ItemAddress itemAddress, Callback callback)
				{
					this.SetAiming(false);
					this.SetTriggerPressed(false);
					this.State = Player.EOperationState.Finished;
					this.\uE002.InitiateOperation<Player.FirearmController.\uE000>().Start(ammo, 0, itemAddress, callback);
				}

				// Token: 0x060092B6 RID: 37558 RVA: 0x002F5828 File Offset: 0x002F3A28
				protected void \uE003(Action onHidden, bool fastDrop, Item nextControllerItem = null)
				{
					this.SetAiming(false);
					this.SetTriggerPressed(false);
					this.State = Player.EOperationState.Finished;
					this.\uE002.InitiateOperation<Player.FirearmController.\uE032>().Start(false, null);
					this.\uE002.FirearmsAnimator.Animator.Play(\uF1F8.\uE000(16994), this.\uE002.FirearmsAnimator.Animator.GetLayerIndex(\uF1F8.\uE000(104842)), 0f);
					this.\uE002.CurrentOperation.LauncherDisappeared();
					this.\uE002.CurrentOperation.HideWeapon(onHidden, fastDrop, nextControllerItem);
				}

				// Token: 0x060092B7 RID: 37559 RVA: 0x002F58DC File Offset: 0x002F3ADC
				public override void DropBackpackOperationInvoke(Item item, Callback callback)
				{
					Player.FirearmController.\uE014.\uE000 uE = new Player.FirearmController.\uE014.\uE000();
					uE.<>4__this = this;
					uE.item = item;
					uE.callback = callback;
					this.State = Player.EOperationState.Finished;
					this.\uE002.InitiateOperation<Player.FirearmController.\uE032>().Start(false, new Action(uE.\uE000));
				}

				// Token: 0x060092B8 RID: 37560 RVA: 0x002F5934 File Offset: 0x002F3B34
				public override void HideWeapon(Action onHidden, bool fastDrop, Item nextControllerItem = null)
				{
					Player.FirearmController.\uE014.\uE001 uE = new Player.FirearmController.\uE014.\uE001();
					uE.<>4__this = this;
					uE.onHidden = onHidden;
					uE.fastDrop = fastDrop;
					uE.nextControllerItem = nextControllerItem;
					this.SetAiming(false);
					this.SetTriggerPressed(false);
					this.State = Player.EOperationState.Finished;
					this.\uE002.InitiateOperation<Player.FirearmController.\uE032>().Start(false, new Action(uE.\uE000));
				}

				// Token: 0x060092B9 RID: 37561 RVA: 0x002F59A8 File Offset: 0x002F3BA8
				private void \uE004(\uEF6A oneItemOperation, \uEDED ammo, Callback callback)
				{
					ItemAddress itemAddress = null;
					Slot chamber = this.\uE047.Chamber;
					\uEDED uEDED = chamber.ContainedItem as \uEDED;
					if (oneItemOperation.From1 != null && oneItemOperation.From1.Container == chamber && uEDED == oneItemOperation.Item1)
					{
						this.State = Player.EOperationState.Finished;
						this.\uE002.InitiateOperation<Player.FirearmController.\uE000>().Start((\uEDED)oneItemOperation.Item1, 0, itemAddress, callback);
						this.\uE001.ExecuteSkill(new Action(this.\uE005));
						return;
					}
					if (oneItemOperation.To1 != null && oneItemOperation.To1.Container == chamber)
					{
						this.State = Player.EOperationState.Finished;
						this.\uE002.InitiateOperation<Player.FirearmController.\uE017>().Start((\uEDED)oneItemOperation.Item1, 0, callback);
						this.\uE001.ExecuteSkill(new Action(this.\uE006));
						return;
					}
					if (callback != null)
					{
						callback.Fail(\uF1F8.\uE000(141838));
					}
				}

				// Token: 0x060092BA RID: 37562 RVA: 0x002F5AB8 File Offset: 0x002F3CB8
				public override bool CheckChamber()
				{
					if (this.\uE002.IsTriggerPressed)
					{
						return false;
					}
					if (this.\uE002._player.MovementContext.StationaryWeapon != null)
					{
						return false;
					}
					if (this.\uE047.UseAmmoWithoutShell && this.\uE047.ChamberAmmoCount == 0)
					{
						return false;
					}
					if (this.\uE002._player.InventoryController.CheckItemAction(this.\uE002.Item, this.\uE002.Item.CurrentAddress).Failed)
					{
						return false;
					}
					this.SetAiming(false);
					this.\uE02B.CheckChamber();
					this.\uE001.InventoryController.CheckChamber(this.\uE02D, true);
					this.RunUtilityOperation(Player.FirearmController.\uE034.EUtilityType.CheckChamber);
					return true;
				}

				// Token: 0x060092BB RID: 37563 RVA: 0x002F5BA0 File Offset: 0x002F3DA0
				protected virtual void RunUtilityOperation(Player.FirearmController.\uE034.EUtilityType utilityType)
				{
					this.\uE001.BodyAnimatorCommon.SetFloat(PlayerAnimator.RELOAD_FLOAT_PARAM_HASH, 1f);
					this.State = Player.EOperationState.Finished;
					this.\uE002.InitiateOperation<Player.FirearmController.\uE016>().Start(utilityType, this.\uE047);
				}

				// Token: 0x060092BC RID: 37564 RVA: 0x002F5BE0 File Offset: 0x002F3DE0
				public override void Execute(\uEF5F operation, Callback callback)
				{
					\uEF6A uEF6A = operation as \uEF6A;
					if (uEF6A == null)
					{
						callback.Succeed();
						return;
					}
					if (!this.\uE002.\uE017(operation))
					{
						if (this.\uE001.InventoryController.IsAnimatedSlot(uEF6A.From1))
						{
							this.DropBackpackOperationInvoke(uEF6A.Item1, callback);
							return;
						}
						callback.Succeed();
						return;
					}
					else
					{
						this.\uE002.IsTriggerPressed = false;
						\uEF8C uEF8C = operation as \uEF8C;
						if (uEF8C != null)
						{
							this.State = Player.EOperationState.Finished;
							this.\uE002.InitiateOperation<Player.FirearmController.\uE00F>().Start(uEF8C, callback);
							return;
						}
						\uEDED uEDED = uEF6A.Item1 as \uEDED;
						if (uEDED != null)
						{
							if (this.\uE002.IsInLauncherMode())
							{
								this.\uE004(uEF6A, uEDED, callback);
								return;
							}
						}
						if (callback != null)
						{
							callback.Fail(\uF1F8.\uE000(141838));
						}
						return;
					}
				}

				// Token: 0x060092BD RID: 37565 RVA: 0x002F5CCC File Offset: 0x002F3ECC
				public override void ToggleLeftStance()
				{
					if (!this.\uE02D.IsStationaryWeapon)
					{
						if (!this.\uE02D.BlockLeftStance)
						{
							if (!this.\uE002.CurrentCompassState)
							{
								this.\uE001.MovementContext.LeftStanceController.ToggleLeftStance();
								return;
							}
						}
					}
				}

				// Token: 0x060092BE RID: 37566 RVA: 0x002F5D20 File Offset: 0x002F3F20
				[CompilerGenerated]
				private void \uE005()
				{
					this.\uE001.Skills.WeaponChamberAction.Complete(this.\uE02D, 1f);
				}

				// Token: 0x060092BF RID: 37567 RVA: 0x002F5D44 File Offset: 0x002F3F44
				[CompilerGenerated]
				private void \uE006()
				{
					this.\uE001.Skills.WeaponChamberAction.Complete(this.\uE02D, 1f);
				}

				// Token: 0x04008668 RID: 34408
				protected \uEE5D \uE047;

				// Token: 0x04008669 RID: 34409
				private new Action \uE000;

				// Token: 0x0400866A RID: 34410
				private bool \uE048;

				// Token: 0x020016C7 RID: 5831
				[CompilerGenerated]
				private new sealed class \uE000
				{
					// Token: 0x060092C1 RID: 37569 RVA: 0x002F5D70 File Offset: 0x002F3F70
					internal void \uE000()
					{
						this.<>4__this.\uE002.CurrentOperation.DropBackpackOperationInvoke(this.item, this.callback);
					}

					// Token: 0x0400866B RID: 34411
					public Player.FirearmController.\uE014 <>4__this;

					// Token: 0x0400866C RID: 34412
					public Item item;

					// Token: 0x0400866D RID: 34413
					public Callback callback;
				}

				// Token: 0x020016C8 RID: 5832
				[CompilerGenerated]
				private new sealed class \uE001
				{
					// Token: 0x060092C3 RID: 37571 RVA: 0x002F5D9C File Offset: 0x002F3F9C
					internal void \uE000()
					{
						this.<>4__this.\uE002.CurrentOperation.HideWeapon(this.onHidden, this.fastDrop, this.nextControllerItem);
					}

					// Token: 0x0400866E RID: 34414
					public Player.FirearmController.\uE014 <>4__this;

					// Token: 0x0400866F RID: 34415
					public Action onHidden;

					// Token: 0x04008670 RID: 34416
					public bool fastDrop;

					// Token: 0x04008671 RID: 34417
					public Item nextControllerItem;
				}
			}

			// Token: 0x020016C9 RID: 5833
			public class \uE015 : Player.FirearmController.\uE00A
			{
				// Token: 0x060092C4 RID: 37572 RVA: 0x002F5DC8 File Offset: 0x002F3FC8
				public \uE015(Player.FirearmController controller) : base(controller)
				{
				}

				// Token: 0x060092C5 RID: 37573 RVA: 0x002F5DD4 File Offset: 0x002F3FD4
				public virtual void Start(\uEDA2 ammoPack, Callback callback)
				{
					base.Start();
					this.\uE04A = ammoPack;
					this.\uE04A.LockItems();
					this.\uE049 = callback;
					this.\uE02B.SetFire(false);
					this.\uE001.MovementContext.SetBlindFire(0);
					this.\uE02B.Reload(true);
					this.\uE000();
				}

				// Token: 0x060092C6 RID: 37574 RVA: 0x002F5E44 File Offset: 0x002F4044
				public override void Reset()
				{
					this.\uE04A = null;
					this.\uE049 = null;
					this.\uE00C = null;
					this.\uE046 = false;
					this.\uE022 = null;
					this.\uE021 = false;
					base.Reset();
				}

				// Token: 0x060092C7 RID: 37575 RVA: 0x002F5E94 File Offset: 0x002F4094
				public override void SetInventoryOpened(bool opened)
				{
					this.\uE046 = opened;
				}

				// Token: 0x060092C8 RID: 37576 RVA: 0x002F5EA0 File Offset: 0x002F40A0
				public override void OnMagAppeared()
				{
					this.\uE002.\uE024.SetRoundIntoWeapon(this.\uE00C);
				}

				// Token: 0x060092C9 RID: 37577 RVA: 0x002F5EB8 File Offset: 0x002F40B8
				public override void OnAddAmmoInChamber()
				{
					this.State = Player.EOperationState.Finished;
					Action uE = this.\uE022;
					bool uE2 = this.\uE021;
					Player.FirearmController.\uE014 uE3 = this.\uE002.InitiateOperation<Player.FirearmController.\uE014>();
					uE3.Start(null);
					Callback uE4 = this.\uE049;
					if (uE4 != null)
					{
						uE4.Succeed();
					}
					if (uE != null)
					{
						uE3.HideWeapon(uE, uE2, null);
					}
				}

				// Token: 0x060092CA RID: 37578 RVA: 0x002F5F20 File Offset: 0x002F4120
				public override void HideWeapon(Action onHidden, bool fastDrop, Item nextControllerItem = null)
				{
					this.\uE022 = onHidden;
					this.\uE021 = fastDrop;
				}

				// Token: 0x060092CB RID: 37579 RVA: 0x002F5F30 File Offset: 0x002F4130
				private new void \uE000()
				{
					this.\uE04A.UnlockItems();
					this.\uE00C = this.\uE04A.GetAmmoToReload(1);
					this.\uE02D.RaiseRefreshEvent(false, true);
					\uEE5D underbarrelWeapon = this.\uE002.UnderbarrelWeapon;
					\uF190<\uEF07> uF = this.\uE04A.LoadAmmo(this.\uE001.InventoryController, this.\uE001.InventoryController, underbarrelWeapon.Chamber.CreateItemAddress());
					if (uF.Error != null)
					{
						string str = \uF1F8.\uE000(142061);
						Error error = uF.Error;
						Debug.LogError(str + ((error != null) ? error.ToString() : null));
						return;
					}
					uF.Value.RaiseEvents(this.\uE001.InventoryController, CommandStatus.Begin);
					uF.Value.RaiseEvents(this.\uE001.InventoryController, CommandStatus.Succeed);
					this.\uE00C = (\uEDED)uF.Value.Item;
					if (this.\uE00C == null)
					{
						Debug.LogError(\uF1F8.\uE000(141977));
						return;
					}
				}

				// Token: 0x060092CC RID: 37580 RVA: 0x002F6054 File Offset: 0x002F4254
				public override void OnShellEjectEvent()
				{
					this.\uE002.\uE024.StartSpawnShell(this.\uE002._player.Velocity * 0.33f, 0);
					for (int i = 0; i < this.\uE002.UnderbarrelWeapon.ShellsInChambers.Length; i++)
					{
						this.\uE002.UnderbarrelWeapon.ShellsInChambers[i] = null;
					}
					this.\uE02B.SetShellsInWeapon(this.\uE002.UnderbarrelWeapon.ShellsInLauncherCount);
				}

				// Token: 0x04008672 RID: 34418
				private Callback \uE049;

				// Token: 0x04008673 RID: 34419
				private \uEDA2 \uE04A;

				// Token: 0x04008674 RID: 34420
				private bool \uE046;

				// Token: 0x04008675 RID: 34421
				protected \uEDED \uE00C;

				// Token: 0x04008676 RID: 34422
				protected bool \uE021;

				// Token: 0x04008677 RID: 34423
				protected Action \uE022;
			}

			// Token: 0x020016CA RID: 5834
			public class \uE016 : Player.FirearmController.\uE014
			{
				// Token: 0x060092CD RID: 37581 RVA: 0x002F60E8 File Offset: 0x002F42E8
				public \uE016(Player.FirearmController firearmController) : base(firearmController)
				{
				}

				// Token: 0x060092CE RID: 37582 RVA: 0x002F60F4 File Offset: 0x002F42F4
				public void Start(Player.FirearmController.\uE034.EUtilityType utilityType, \uEE5D launcher)
				{
					this.\uE04E = utilityType;
					this.\uE047 = launcher;
					this.\uE02B.SetShellsInWeapon(this.\uE047.ShellsInLauncherCount);
					this.State = Player.EOperationState.Executing;
					this.\uE04C = 0f;
				}

				// Token: 0x060092CF RID: 37583 RVA: 0x002F6144 File Offset: 0x002F4344
				public override void OnIdleStartEvent()
				{
					if (this.State != Player.EOperationState.Ready)
					{
						return;
					}
					base.OnIdleStartEvent();
					this.State = Player.EOperationState.Finished;
					this.\uE002.InitiateOperation<Player.FirearmController.\uE014>().Start(null);
				}

				// Token: 0x060092D0 RID: 37584 RVA: 0x002F6174 File Offset: 0x002F4374
				public override void OnUtilityOperationStartEvent()
				{
					this.State = Player.EOperationState.Ready;
				}

				// Token: 0x060092D1 RID: 37585 RVA: 0x002F6180 File Offset: 0x002F4380
				public override bool CanStartReload()
				{
					return false;
				}

				// Token: 0x060092D2 RID: 37586 RVA: 0x002F6184 File Offset: 0x002F4384
				public override void Reset()
				{
					this.\uE04E = Player.FirearmController.\uE034.EUtilityType.None;
					base.Reset();
				}

				// Token: 0x060092D3 RID: 37587 RVA: 0x002F6194 File Offset: 0x002F4394
				public override bool CheckAmmo()
				{
					return false;
				}

				// Token: 0x060092D4 RID: 37588 RVA: 0x002F6198 File Offset: 0x002F4398
				public override bool CheckChamber()
				{
					return false;
				}

				// Token: 0x060092D5 RID: 37589 RVA: 0x002F619C File Offset: 0x002F439C
				public override bool CheckFireMode()
				{
					return false;
				}

				// Token: 0x060092D6 RID: 37590 RVA: 0x002F61A0 File Offset: 0x002F43A0
				public override void ReloadMag(\uEE67 magazine, ItemAddress itemAddress, Callback finishCallback, Callback startCallback)
				{
				}

				// Token: 0x060092D7 RID: 37591 RVA: 0x002F61A4 File Offset: 0x002F43A4
				public override void ReloadWithAmmo(\uEDA2 ammoPack, Callback finishCallback, Callback startCallback)
				{
				}

				// Token: 0x060092D8 RID: 37592 RVA: 0x002F61A8 File Offset: 0x002F43A8
				public override void ReloadCylinderMagazine(\uEDA2 ammoPack, Callback finishCallback, Callback startCallback, bool quickReload = false)
				{
				}

				// Token: 0x060092D9 RID: 37593 RVA: 0x002F61AC File Offset: 0x002F43AC
				public override void QuickReloadMag(\uEE67 magazine, Callback finishCallback, Callback startCallback)
				{
				}

				// Token: 0x060092DA RID: 37594 RVA: 0x002F61B0 File Offset: 0x002F43B0
				public override void ReloadGrenadeLauncher(\uEDA2 ammoPack, Callback callback)
				{
				}

				// Token: 0x060092DB RID: 37595 RVA: 0x002F61B4 File Offset: 0x002F43B4
				public override void SetTriggerPressed(bool pressed)
				{
					if (this.\uE04E == Player.FirearmController.\uE034.EUtilityType.ExamineWeapon)
					{
						this.OnUtilityOperationStartEvent();
						this.OnIdleStartEvent();
						this.\uE002.CurrentOperation.SetTriggerPressed(pressed);
					}
				}

				// Token: 0x060092DC RID: 37596 RVA: 0x002F61E4 File Offset: 0x002F43E4
				public override void SetInventoryOpened(bool opened)
				{
					this.\uE04D = opened;
					if (!this.\uE04D)
					{
						this.\uE04C = 0f;
					}
					base.SetInventoryOpened(opened);
				}

				// Token: 0x060092DD RID: 37597 RVA: 0x002F6210 File Offset: 0x002F4410
				public override void Update(float deltaTime)
				{
					base.Update(deltaTime);
					if (this.State != Player.EOperationState.Executing || this.\uE04D)
					{
						return;
					}
					if (this.\uE04C > 2.5f)
					{
						if (this.\uE02B != null)
						{
							Debug.LogError(\uF1F8.\uE000(141682) + this.\uE02B.Animator.name);
						}
						else
						{
							Debug.LogError(\uF1F8.\uE000(141654));
						}
						this.State = Player.EOperationState.Ready;
						this.OnIdleStartEvent();
						return;
					}
					this.\uE04C += deltaTime;
				}

				// Token: 0x060092DE RID: 37598 RVA: 0x002F62B4 File Offset: 0x002F44B4
				protected override void SetSightingRange(float deltaTime)
				{
				}

				// Token: 0x060092DF RID: 37599 RVA: 0x002F62B8 File Offset: 0x002F44B8
				public override void SetAiming(bool isAiming)
				{
				}

				// Token: 0x060092E0 RID: 37600 RVA: 0x002F62BC File Offset: 0x002F44BC
				public override bool ExamineWeapon()
				{
					return true;
				}

				// Token: 0x060092E1 RID: 37601 RVA: 0x002F62C0 File Offset: 0x002F44C0
				public override void OnShellEjectEvent()
				{
					this.\uE002.\uE024.StartSpawnShell(this.\uE002._player.Velocity * 0.33f, 0);
					for (int i = 0; i < this.\uE047.ShellsInChambers.Length; i++)
					{
						this.\uE047.ShellsInChambers[i] = null;
					}
					this.\uE02B.SetShellsInWeapon(this.\uE047.ShellsInLauncherCount);
				}

				// Token: 0x04008678 RID: 34424
				private const float \uE04B = 2.5f;

				// Token: 0x04008679 RID: 34425
				private float \uE04C;

				// Token: 0x0400867A RID: 34426
				private bool \uE04D;

				// Token: 0x0400867B RID: 34427
				private Player.FirearmController.\uE034.EUtilityType \uE04E;

				// Token: 0x0400867C RID: 34428
				private new \uEE5D \uE047;
			}

			// Token: 0x020016CB RID: 5835
			public class \uE017 : Player.FirearmController.\uE00A
			{
				// Token: 0x060092E2 RID: 37602 RVA: 0x002F6344 File Offset: 0x002F4544
				public \uE017(Player.FirearmController controller) : base(controller)
				{
				}

				// Token: 0x060092E3 RID: 37603 RVA: 0x002F6354 File Offset: 0x002F4554
				public virtual void Start(\uEDED ammo, int chamberIndex, Callback callback)
				{
					this.\uE00C = ammo;
					this.\uE010 = chamberIndex;
					this.\uE000 = callback;
					base.Start();
					this.\uE002.IsAiming = false;
					this.\uE02B.SetFire(false);
					this.\uE02B.LoadOneTrigger(true);
					this.\uE001.MovementContext.SetBlindFire(0);
					this.\uE02B.SetChamberIndexForLoadUnloadAmmo((float)chamberIndex);
					this.\uE001.BodyAnimatorCommon.SetFloat(PlayerAnimator.RELOAD_FLOAT_PARAM_HASH, 1f);
				}

				// Token: 0x060092E4 RID: 37604 RVA: 0x002F63EC File Offset: 0x002F45EC
				public override void Reset()
				{
					this.\uE00C = null;
					this.\uE010 = -1;
					this.\uE000 = null;
					base.Reset();
				}

				// Token: 0x060092E5 RID: 37605 RVA: 0x002F6410 File Offset: 0x002F4610
				public override void OnMagAppeared()
				{
					this.\uE002.\uE024.SetRoundIntoWeapon(this.\uE00C);
				}

				// Token: 0x060092E6 RID: 37606 RVA: 0x002F6428 File Offset: 0x002F4628
				public override void OnRemoveShellEvent()
				{
					this.\uE002.\uE024.RemoveShellInWeapon();
					this.\uE02B.SetShellsInWeapon(0);
				}

				// Token: 0x060092E7 RID: 37607 RVA: 0x002F6448 File Offset: 0x002F4648
				public override void OnAddAmmoInChamber()
				{
					this.\uE02B.SetAmmoInChamber(1f);
					this.\uE02B.SetShellsInWeapon(0);
					this.\uE02B.SetCanReload(false);
					this.\uE02B.LoadOneTrigger(false);
					this.State = Player.EOperationState.Finished;
					this.\uE002.InitiateOperation<Player.FirearmController.\uE014>().Start(null);
					Callback uE = this.\uE000;
					if (uE == null)
					{
						return;
					}
					uE.Succeed();
				}

				// Token: 0x060092E8 RID: 37608 RVA: 0x002F64C4 File Offset: 0x002F46C4
				public override void OnOnOffBoltCatchEvent(bool isCaught)
				{
					this.\uE02B.SetBoltCatch(isCaught);
				}

				// Token: 0x060092E9 RID: 37609 RVA: 0x002F64D4 File Offset: 0x002F46D4
				public override void SetInventoryOpened(bool opened)
				{
					this.\uE002.InventoryOpened = opened;
					this.\uE02B.SetInventory(opened);
				}

				// Token: 0x0400867D RID: 34429
				private \uEDED \uE00C;

				// Token: 0x0400867E RID: 34430
				private int \uE010 = -1;

				// Token: 0x0400867F RID: 34431
				private new Callback \uE000;
			}

			// Token: 0x020016CC RID: 5836
			public class \uE018 : Player.FirearmController.\uE00A
			{
				// Token: 0x060092EA RID: 37610 RVA: 0x002F64F0 File Offset: 0x002F46F0
				public \uE018(Player.FirearmController controller) : base(controller)
				{
				}

				// Token: 0x060092EB RID: 37611 RVA: 0x002F6500 File Offset: 0x002F4700
				public virtual void Start(\uEDED ammo, int camoraIndex, Callback callback)
				{
					this.\uE00C = ammo;
					this.\uE025 = (this.\uE02D.GetCurrentMagazine() as \uEEF0);
					this.\uE000 = callback;
					this.\uE026 = camoraIndex;
					base.Start();
					this.\uE002.IsAiming = false;
					this.\uE02B.SetFire(false);
					this.\uE001.MovementContext.SetBlindFire(0);
					this.\uE02B.LoadOneTrigger(true);
					if (this.\uE02D.ShellsInChambers[this.\uE026] != null)
					{
						this.\uE02B.SetCamoraIndexWithShellForRemove(this.\uE026);
					}
					else
					{
						this.\uE02B.SetCamoraIndexWithShellForRemove(-1);
					}
					this.\uE02B.SetShellsInWeapon(this.\uE02D.GetShellsInWeaponCount());
					this.\uE02B.SetCamoraIndexForLoadAmmo(this.\uE026);
					this.\uE02B.SetAmmoOnMag(this.\uE025.Count - 1);
					this.\uE02B.SetCanReload(true);
					this.\uE001.BodyAnimatorCommon.SetFloat(PlayerAnimator.RELOAD_FLOAT_PARAM_HASH, 1f);
				}

				// Token: 0x060092EC RID: 37612 RVA: 0x002F6630 File Offset: 0x002F4830
				public override void Reset()
				{
					this.\uE00C = null;
					this.\uE025 = null;
					this.\uE000 = null;
					this.\uE026 = -1;
					base.Reset();
				}

				// Token: 0x060092ED RID: 37613 RVA: 0x002F6660 File Offset: 0x002F4860
				public override void FastForward()
				{
					if (this.State == Player.EOperationState.Finished)
					{
						return;
					}
					this.OnRemoveShellEvent();
					this.OnAddAmmoInChamber();
					this.AddAmmoToMag();
				}

				// Token: 0x060092EE RID: 37614 RVA: 0x002F6684 File Offset: 0x002F4884
				public override void OnMagPuttedToRig()
				{
					this.SwitchToIdle();
				}

				// Token: 0x060092EF RID: 37615 RVA: 0x002F668C File Offset: 0x002F488C
				public override void OnRemoveShellEvent()
				{
					this.\uE02D.ShellsInChambers[this.\uE026] = null;
					this.\uE02C.RemoveShellInWeapon(this.\uE026);
					this.\uE02B.SetShellsInWeapon(this.\uE02D.GetShellsInWeaponCount());
				}

				// Token: 0x060092F0 RID: 37616 RVA: 0x002F66DC File Offset: 0x002F48DC
				public override void OnAddAmmoInChamber()
				{
					this.\uE02B.SetAmmoOnMag(this.\uE025.Count);
					this.\uE02B.SetShellsInWeapon(this.\uE02D.GetShellsInWeaponCount());
					this.\uE02B.SetCanReload(true);
					this.\uE02B.LoadOneTrigger(false);
					this.\uE02C.SetRoundIntoWeapon(this.\uE00C, this.\uE026);
				}

				// Token: 0x060092F1 RID: 37617 RVA: 0x002F6750 File Offset: 0x002F4950
				public override void AddAmmoToMag()
				{
					this.\uE02B.SetCanReload(false);
				}

				// Token: 0x060092F2 RID: 37618 RVA: 0x002F6760 File Offset: 0x002F4960
				public override void OnOnOffBoltCatchEvent(bool isCaught)
				{
					this.\uE02B.SetBoltCatch(isCaught);
				}

				// Token: 0x060092F3 RID: 37619 RVA: 0x002F6770 File Offset: 0x002F4970
				public override void SetInventoryOpened(bool opened)
				{
					this.\uE002.InventoryOpened = opened;
					this.\uE02B.SetInventory(opened);
				}

				// Token: 0x060092F4 RID: 37620 RVA: 0x002F678C File Offset: 0x002F498C
				protected virtual void SwitchToIdle()
				{
					this.\uE025.ResetCamoraIndex();
					this.\uE02B.SetCamoraIndex(this.\uE025.CurrentCamoraIndex);
					this.State = Player.EOperationState.Finished;
					this.\uE002.InitiateOperation<Player.FirearmController.\uE010>().Start(null);
					this.\uE000.Succeed();
				}

				// Token: 0x060092F5 RID: 37621 RVA: 0x002F67EC File Offset: 0x002F49EC
				public override void HideWeapon(Action onHidden, bool fastDrop, Item nextControllerItem = null)
				{
					this.SwitchToIdle();
					this.\uE002.InitiateOperation<Player.FirearmController.\uE02A>().Start(onHidden, fastDrop, nextControllerItem);
				}

				// Token: 0x04008680 RID: 34432
				private \uEDED \uE00C;

				// Token: 0x04008681 RID: 34433
				protected int \uE026 = -1;

				// Token: 0x04008682 RID: 34434
				private \uEEF0 \uE025;

				// Token: 0x04008683 RID: 34435
				private new Callback \uE000;
			}

			// Token: 0x020016CD RID: 5837
			public class \uE019 : Player.FirearmController.\uE00A
			{
				// Token: 0x060092F6 RID: 37622 RVA: 0x002F6808 File Offset: 0x002F4A08
				public \uE019(Player.FirearmController controller) : base(controller)
				{
				}

				// Token: 0x060092F7 RID: 37623 RVA: 0x002F6818 File Offset: 0x002F4A18
				public virtual void Start(\uEDED ammo, int chamberIndex, Callback callback)
				{
					this.\uE00C = ammo;
					this.\uE010 = chamberIndex;
					this.\uE000 = callback;
					base.Start();
					this.\uE002.IsAiming = false;
					this.\uE02B.SetFire(false);
					this.\uE02B.LoadOneTrigger(true);
					this.\uE001.MovementContext.SetBlindFire(0);
					this.\uE02B.SetChamberIndexForLoadUnloadAmmo((float)chamberIndex);
					this.\uE001.BodyAnimatorCommon.SetFloat(PlayerAnimator.RELOAD_FLOAT_PARAM_HASH, 1f);
					base.\uE001();
				}

				// Token: 0x060092F8 RID: 37624 RVA: 0x002F68BC File Offset: 0x002F4ABC
				public override void Reset()
				{
					this.\uE00C = null;
					this.\uE010 = -1;
					this.\uE000 = null;
					base.Reset();
				}

				// Token: 0x060092F9 RID: 37625 RVA: 0x002F68E0 File Offset: 0x002F4AE0
				public override void OnRemoveShellEvent()
				{
					for (int i = 0; i < this.\uE02D.ShellsInChambers.Length; i++)
					{
						this.\uE02D.ShellsInChambers[i] = null;
					}
					this.\uE02C.RemoveAllShells();
					this.\uE02B.SetShellsInWeapon(this.\uE02D.ShellsInWeaponCount);
				}

				// Token: 0x060092FA RID: 37626 RVA: 0x002F6944 File Offset: 0x002F4B44
				public override void OnMagAppeared()
				{
					if (!this.\uE00C.IsUsed && !this.\uE02C.HasPatronInWeapon(this.\uE010))
					{
						this.\uE02C.SetRoundIntoWeapon(this.\uE00C, this.\uE010);
					}
					if (this.\uE00C.IsUsed)
					{
						if (!this.\uE02C.HasShellInWeapon(this.\uE010))
						{
							this.\uE02C.CreatePatronInShellPort(this.\uE00C, 0);
						}
					}
				}

				// Token: 0x060092FB RID: 37627 RVA: 0x002F69CC File Offset: 0x002F4BCC
				public override void OnAddAmmoInChamber()
				{
					this.\uE02B.SetAmmoInChamber((float)this.\uE02D.ChamberAmmoCount);
					this.\uE02B.SetShellsInWeapon(this.\uE02D.ShellsInWeaponCount);
					this.\uE001.ExecuteSkill(new Action(this.\uE000));
					this.\uE02B.SetCanReload(false);
					this.\uE02B.LoadOneTrigger(false);
					if (!this.\uE00C.IsUsed && !this.\uE02C.HasPatronInWeapon(this.\uE010))
					{
						this.\uE02C.SetRoundIntoWeapon(this.\uE00C, this.\uE010);
					}
					if (this.\uE00C.IsUsed)
					{
						if (!this.\uE02C.HasShellInWeapon(this.\uE010))
						{
							this.\uE02C.CreatePatronInShellPort(this.\uE00C, this.\uE010);
						}
					}
					this.SwitchToIdle();
				}

				// Token: 0x060092FC RID: 37628 RVA: 0x002F6ACC File Offset: 0x002F4CCC
				public override void OnOnOffBoltCatchEvent(bool isCaught)
				{
					this.\uE02B.SetBoltCatch(isCaught);
				}

				// Token: 0x060092FD RID: 37629 RVA: 0x002F6ADC File Offset: 0x002F4CDC
				public override void SetInventoryOpened(bool opened)
				{
					this.\uE002.InventoryOpened = opened;
					this.\uE02B.SetInventory(opened);
				}

				// Token: 0x060092FE RID: 37630 RVA: 0x002F6AF8 File Offset: 0x002F4CF8
				protected virtual void SwitchToIdle()
				{
					this.State = Player.EOperationState.Finished;
					this.\uE002.InitiateOperation<Player.FirearmController.\uE010>().Start(null);
					this.\uE000.Succeed();
				}

				// Token: 0x060092FF RID: 37631 RVA: 0x002F6B24 File Offset: 0x002F4D24
				public override void HideWeapon(Action onHidden, bool fastDrop, Item nextControllerItem = null)
				{
					this.\uE002.IsTriggerPressed = false;
					this.\uE002.IsAiming = false;
					this.State = Player.EOperationState.Finished;
					this.\uE002.InitiateOperation<Player.FirearmController.\uE02A>().Start(onHidden, fastDrop, nextControllerItem);
				}

				// Token: 0x06009300 RID: 37632 RVA: 0x002F6B60 File Offset: 0x002F4D60
				[CompilerGenerated]
				private new void \uE000()
				{
					this.\uE001.Skills.RaidLoadedAmmoAction.Complete(1f);
				}

				// Token: 0x04008684 RID: 34436
				private \uEDED \uE00C;

				// Token: 0x04008685 RID: 34437
				private int \uE010 = -1;

				// Token: 0x04008686 RID: 34438
				private new Callback \uE000;
			}

			// Token: 0x020016CE RID: 5838
			public abstract class \uE01A : Player.FirearmController.\uE00A
			{
				// Token: 0x06009301 RID: 37633 RVA: 0x002F6B7C File Offset: 0x002F4D7C
				protected \uE01A(Player.FirearmController controller) : base(controller)
				{
				}

				// Token: 0x06009302 RID: 37634 RVA: 0x002F6B88 File Offset: 0x002F4D88
				public new virtual void Start()
				{
					base.Start();
					this.\uE039 = this.\uE02D.MalfState.AmmoToFire;
					this.\uE04F = this.\uE02D.MalfState.AmmoWillBeLoadedToChamber;
					this.\uE001.MovementContext.SetBlindFire(0);
				}

				// Token: 0x06009303 RID: 37635 RVA: 0x002F6BE0 File Offset: 0x002F4DE0
				public override void Reset()
				{
					this.\uE039 = null;
					this.\uE04F = null;
					this.\uE038 = null;
					base.Reset();
				}

				// Token: 0x06009304 RID: 37636 RVA: 0x002F6C04 File Offset: 0x002F4E04
				public override void RemoveAmmoFromChamber()
				{
					this.\uE02B.SetAmmoInChamber((float)(this.\uE02D.ChamberAmmoCount - ((this.\uE04F != null) ? 1 : 0)));
					this.\uE02C.SetupPatronInWeaponForJam(0);
				}

				// Token: 0x06009305 RID: 37637 RVA: 0x002F6C38 File Offset: 0x002F4E38
				protected new void \uE000()
				{
					this.\uE002.IsTriggerPressed = false;
					this.\uE02B.SetFire(this.\uE002.IsTriggerPressed);
					this.State = Player.EOperationState.Finished;
					if (this.\uE038 != null)
					{
						this.\uE038();
						return;
					}
					this.\uE002.InitiateOperation<Player.FirearmController.\uE010>().Start(null);
				}

				// Token: 0x06009306 RID: 37638 RVA: 0x002F6CA4 File Offset: 0x002F4EA4
				public override void HideWeapon(Action onHidden, bool fastDrop, Item nextControllerItem = null)
				{
					Player.FirearmController.\uE01A.\uE000 uE = new Player.FirearmController.\uE01A.\uE000();
					uE.<>4__this = this;
					uE.onHidden = onHidden;
					uE.fastDrop = fastDrop;
					uE.nextControllerItem = nextControllerItem;
					this.\uE002.IsTriggerPressed = false;
					this.\uE002.IsAiming = false;
					this.\uE038 = new Action(uE.\uE000);
				}

				// Token: 0x06009307 RID: 37639 RVA: 0x002F6D10 File Offset: 0x002F4F10
				protected override void SetLeftStanceAnimOnStartOperation()
				{
				}

				// Token: 0x04008687 RID: 34439
				protected \uEDED \uE039;

				// Token: 0x04008688 RID: 34440
				protected \uEDED \uE04F;

				// Token: 0x04008689 RID: 34441
				private Action \uE038;

				// Token: 0x020016CF RID: 5839
				[CompilerGenerated]
				private new sealed class \uE000
				{
					// Token: 0x06009309 RID: 37641 RVA: 0x002F6D1C File Offset: 0x002F4F1C
					internal void \uE000()
					{
						this.<>4__this.State = Player.EOperationState.Finished;
						this.<>4__this.\uE002.InitiateOperation<Player.FirearmController.\uE02A>().Start(this.onHidden, this.fastDrop, this.nextControllerItem);
					}

					// Token: 0x0400868A RID: 34442
					public Player.FirearmController.\uE01A <>4__this;

					// Token: 0x0400868B RID: 34443
					public Action onHidden;

					// Token: 0x0400868C RID: 34444
					public bool fastDrop;

					// Token: 0x0400868D RID: 34445
					public Item nextControllerItem;
				}
			}

			// Token: 0x020016D0 RID: 5840
			public class \uE01B : Player.FirearmController.\uE00C
			{
				// Token: 0x0600930A RID: 37642 RVA: 0x002F6D54 File Offset: 0x002F4F54
				public \uE01B(Player.FirearmController controller) : base(controller)
				{
				}

				// Token: 0x0600930B RID: 37643 RVA: 0x002F6D60 File Offset: 0x002F4F60
				public override void Start()
				{
					base.Start();
					this.\uE02B.SetFire(this.\uE002.IsTriggerPressed);
					this.\uE002.SendStartOneShotFire();
					this.\uE001.InventoryController.RaiseEvent(new \uEEDA(this.\uE02D, CommandStatus.Begin, this.\uE001.InventoryController));
				}

				// Token: 0x0600930C RID: 37644 RVA: 0x002F6DC4 File Offset: 0x002F4FC4
				protected override void StartFireAnimation()
				{
					if (this.\uE02D.MalfState.State == Weapon.EMalfunctionState.None)
					{
						if (this.\uE02D is \uEEA0)
						{
							if (this.\uE02D.CylinderHammerClosed)
							{
								this.\uE02B.Animator.Play(this.\uE02B.FullDoubleActionFireStateName, 1, 0f);
								return;
							}
						}
						this.\uE02B.Animator.Play(this.\uE02B.FullFireStateName, 1, 0f);
					}
				}

				// Token: 0x0600930D RID: 37645 RVA: 0x002F6E48 File Offset: 0x002F5048
				public override void Reset()
				{
					this.\uE039 = null;
					base.Reset();
				}

				// Token: 0x0600930E RID: 37646 RVA: 0x002F6E58 File Offset: 0x002F5058
				protected override void PrepareShot()
				{
				}

				// Token: 0x0600930F RID: 37647 RVA: 0x002F6E5C File Offset: 0x002F505C
				public override void OnFireEvent()
				{
					this.\uE039 = new \uEDED(Guid.NewGuid().ToString(), this.\uE02D.Template.DefAmmoTemplate);
					if (this.\uE039 == null)
					{
						return;
					}
					this.\uE039.IsUsed = true;
					this.\uE002.\uE039(this.\uE039);
					this.\uE002.\uE00D.MoveAmmoFromChamberToShellPort(this.\uE039.IsUsed, 0);
					this.\uE039 = null;
					this.\uE02D.Repairable.Durability = 0f;
				}

				// Token: 0x06009310 RID: 37648 RVA: 0x002F6F04 File Offset: 0x002F5104
				public override void SetTriggerPressed(bool pressed)
				{
					this.\uE002.IsTriggerPressed = pressed;
				}

				// Token: 0x06009311 RID: 37649 RVA: 0x002F6F1C File Offset: 0x002F511C
				public override void OnFireEndEvent()
				{
					this.\uE032 = true;
					this.SetTriggerPressed(false);
					this.\uE02B.SetFire(false);
					this.\uE02B.SetAmmoInChamber((float)this.\uE02D.ChamberAmmoCount);
					this.\uE02B.SetShellsInWeapon(this.\uE02D.ShellsInWeaponCount);
					this.\uE001.InventoryController.RaiseEvent(new \uEEDA(this.\uE02D, CommandStatus.Succeed, this.\uE001.InventoryController));
					this.SetAiming(false);
					this.SetTriggerPressed(false);
					this.State = Player.EOperationState.Finished;
					this.\uE002.InitiateOperation<Player.FirearmController.\uE010>().Start(null);
				}

				// Token: 0x06009312 RID: 37650 RVA: 0x002F6FD8 File Offset: 0x002F51D8
				public override void FastForward()
				{
					if (!this.\uE032)
					{
						this.OnFireEvent();
					}
					this.OnFireEndEvent();
				}

				// Token: 0x06009313 RID: 37651 RVA: 0x002F6FF4 File Offset: 0x002F51F4
				public override bool CanNotBeInterrupted()
				{
					return true;
				}

				// Token: 0x0400868E RID: 34446
				protected \uEDED \uE039;
			}

			// Token: 0x020016D1 RID: 5841
			public class \uE01C : Player.FirearmController.\uE00A
			{
				// Token: 0x06009314 RID: 37652 RVA: 0x002F6FF8 File Offset: 0x002F51F8
				public \uE01C(Player.FirearmController controller) : base(controller)
				{
				}

				// Token: 0x06009315 RID: 37653 RVA: 0x002F7004 File Offset: 0x002F5204
				public virtual void Start(\uEE67 magazine, Slot from, Callback callback)
				{
					this.\uE050 = from;
					this.\uE000 = callback;
					this.\uE055 = magazine.IsMagazineWithBelt;
					base.Start();
					this.\uE02B.PullOutMagInInventoryMode();
					this.\uE02B.SetCanReload(false);
					this.\uE02B.ResetInsertMagInInventoryMode();
					this.\uE02B.SetFire(false);
					this.\uE001.MovementContext.SetBlindFire(0);
					this.\uE001.BodyAnimatorCommon.SetFloat(PlayerAnimator.RELOAD_FLOAT_PARAM_HASH, 1f);
					this.\uE002.\uE00F = true;
					if (this.\uE02D.IsBeltMachineGun)
					{
						this.\uE002.IsAiming = false;
					}
					if (!this.\uE02D.MustBoltBeOpennedForExternalReload)
					{
						this.\uE053 = true;
						this.\uE054 = true;
						if (this.\uE02D.MalfState.State == Weapon.EMalfunctionState.Misfire)
						{
							this.\uE02B.SetLayerWeight(this.\uE02B.MALFUNCTION_LAYER_INDEX, 0);
						}
					}
					else if (this.\uE02D.MalfState.State == Weapon.EMalfunctionState.Misfire)
					{
						this.\uE02B.SetAmmoInChamber(1f);
						this.\uE02B.SetLayerWeight(this.\uE02B.MALFUNCTION_LAYER_INDEX, 0);
					}
					this.\uE051 = false;
					this.\uE052 = false;
					this.\uE02B.SetIsExternalMag(true);
					\uEE67 currentMagazine = this.\uE02D.GetCurrentMagazine();
					this.\uE02B.SetMagTypeCurrent((currentMagazine != null) ? currentMagazine.magAnimationIndex : 0);
					if (this.\uE02D.IsBoltCatch && this.\uE02D.ChamberAmmoCount == 1)
					{
						if (!this.\uE02D.ManualBoltCatch)
						{
							if (!this.\uE02D.MustBoltBeOpennedForExternalReload)
							{
								if (!this.\uE02D.MustBoltBeOpennedForInternalReload)
								{
									this.\uE02B.SetBoltCatch(false);
								}
							}
						}
					}
				}

				// Token: 0x06009316 RID: 37654 RVA: 0x002F71E8 File Offset: 0x002F53E8
				public override void Reset()
				{
					this.\uE050 = null;
					this.\uE000 = null;
					base.Reset();
				}

				// Token: 0x06009317 RID: 37655 RVA: 0x002F7204 File Offset: 0x002F5404
				public override void OnMagPulledOutFromWeapon()
				{
					this.\uE051 = true;
					this.\uE02B.SetAmmoOnMag(0);
					this.\uE02B.SetMagInWeapon(false);
					if (this.\uE002.HasBipod)
					{
						this.\uE002.FirearmsAnimator.SetBipod(this.\uE002.BipodState);
					}
				}

				// Token: 0x06009318 RID: 37656 RVA: 0x002F7268 File Offset: 0x002F5468
				public override void OnMagPuttedToRig()
				{
					this.\uE052 = true;
					this.\uE02C.RemoveMod(this.\uE050);
					this.State = Player.EOperationState.Finished;
					this.\uE002.RecalculateErgonomic();
					this.\uE002.InitiateOperation<Player.FirearmController.\uE010>().Start(null);
					this.\uE000.Succeed();
					this.\uE002.WeaponModified();
					if (this.\uE055)
					{
						this.\uE002.\uE010.UpdateAnimatorHierarchy();
						if (this.\uE002.HasBipod)
						{
							this.\uE002.FirearmsAnimator.SetBipod(this.\uE002.BipodState);
						}
					}
				}

				// Token: 0x06009319 RID: 37657 RVA: 0x002F7324 File Offset: 0x002F5524
				public override void SetInventoryOpened(bool opened)
				{
					this.\uE002.InventoryOpened = opened;
					this.\uE02B.SetInventory(opened);
				}

				// Token: 0x0600931A RID: 37658 RVA: 0x002F7340 File Offset: 0x002F5540
				public override void OnShellEjectEvent()
				{
					this.\uE053 = true;
					if (this.\uE02D.MustBoltBeOpennedForExternalReload && this.\uE02D.MalfState.State == Weapon.EMalfunctionState.Misfire)
					{
						this.\uE02C.CreatePatronInShellPort(this.\uE02D.MalfState.MalfunctionedAmmo, 0);
						this.\uE02C.StartSpawnMisfiredCartridge(this.\uE001.Velocity * 0.66f);
						return;
					}
					\uEDED uEDED = null;
					for (int i = 0; i < this.\uE02D.Chambers.Length; i++)
					{
						uEDED = (\uEDED)this.\uE02D.Chambers[i].ContainedItem;
						if (uEDED != null && !uEDED.IsUsed)
						{
							IL_B5:
							this.\uE02C.MoveAmmoFromChamberToShellPort(uEDED.IsUsed, 0);
							this.\uE02C.StartSpawnShell(this.\uE001.Velocity * 0.66f, 0);
							return;
						}
					}
					goto IL_B5;
				}

				// Token: 0x0600931B RID: 37659 RVA: 0x002F7444 File Offset: 0x002F5644
				public override void RemoveAmmoFromChamber()
				{
					this.\uE054 = true;
					if (this.\uE02D.MustBoltBeOpennedForExternalReload && this.\uE02D.MalfState.State == Weapon.EMalfunctionState.Misfire)
					{
						base.\uE000();
						this.\uE02B.SetAmmoInChamber((float)this.\uE02D.ChamberAmmoCount);
						return;
					}
					bool flag = false;
					Slot[] chambers = this.\uE02D.Chambers;
					for (int i = 0; i < chambers.Length; i++)
					{
						if (flag)
						{
							IL_B6:
							this.\uE02B.SetAmmoInChamber((float)this.\uE02D.ChamberAmmoCount);
							return;
						}
						Slot slot = chambers[i];
						\uEDED uEDED = (\uEDED)slot.ContainedItem;
						flag |= (!uEDED.IsUsed && slot.RemoveItem(false).Succeeded);
					}
					goto IL_B6;
				}

				// Token: 0x0600931C RID: 37660 RVA: 0x002F7520 File Offset: 0x002F5720
				public override void OnOnOffBoltCatchEvent(bool isCaught)
				{
					this.\uE02B.SetBoltCatch(isCaught);
				}

				// Token: 0x0600931D RID: 37661 RVA: 0x002F7530 File Offset: 0x002F5730
				public override bool CanChangeLightState(\uE825[] lightsStates)
				{
					return false;
				}

				// Token: 0x0600931E RID: 37662 RVA: 0x002F7534 File Offset: 0x002F5734
				public override void FastForward()
				{
					if (!this.\uE054)
					{
						this.RemoveAmmoFromChamber();
					}
					if (!this.\uE053)
					{
						this.OnShellEjectEvent();
					}
					if (!this.\uE051)
					{
						this.OnMagPulledOutFromWeapon();
					}
					if (!this.\uE052)
					{
						this.OnMagPuttedToRig();
					}
					this.\uE02B.Animator.Play(this.\uE02B.FullIdleStateName, 1, 0.1f);
				}

				// Token: 0x0400868F RID: 34447
				private Slot \uE050;

				// Token: 0x04008690 RID: 34448
				private new Callback \uE000;

				// Token: 0x04008691 RID: 34449
				private bool \uE051;

				// Token: 0x04008692 RID: 34450
				private bool \uE052;

				// Token: 0x04008693 RID: 34451
				private bool \uE053;

				// Token: 0x04008694 RID: 34452
				private bool \uE054;

				// Token: 0x04008695 RID: 34453
				private bool \uE055;
			}

			// Token: 0x020016D2 RID: 5842
			public class \uE01D : Player.FirearmController.\uE00A
			{
				// Token: 0x0600931F RID: 37663 RVA: 0x002F75B0 File Offset: 0x002F57B0
				public \uE01D(Player.FirearmController controller) : base(controller)
				{
				}

				// Token: 0x06009320 RID: 37664 RVA: 0x002F75BC File Offset: 0x002F57BC
				public virtual void Start(\uEDED ammo, Callback callback)
				{
					base.Start();
					this.\uE000 = callback;
					if (this.\uE02D.MalfState.State == Weapon.EMalfunctionState.Misfire)
					{
						base.\uE000();
					}
					if (this.\uE02D.ChamberAmmoCount == 0)
					{
						this.SwitchToIdle();
						return;
					}
					if (this.\uE02D.HasChambers)
					{
						Slot slot = this.\uE02D.Chambers[0];
					}
					this.\uE056 = ammo;
					\uEF02.Remove(this.\uE056, this.\uE001.InventoryController, true);
					\uEE67 currentMagazine = this.\uE02D.GetCurrentMagazine();
					if (currentMagazine != null && currentMagazine.Count > 0)
					{
						this.\uE057 = currentMagazine.Cartridges.Last;
						this.\uE001.ExecuteSkill(new Action(this.\uE000));
					}
					this.\uE002.SetAim(false);
					this.\uE001.MovementContext.SetBlindFire(0);
					this.\uE02B.SetAmmoInChamber((float)this.\uE02D.ChamberAmmoCount);
					this.\uE02B.Rechamber(true);
					this.\uE02B.SetInventory(false);
					this.\uE02B.SetFire(false);
					this.\uE001.BodyAnimatorCommon.SetFloat(PlayerAnimator.RELOAD_FLOAT_PARAM_HASH, 1f);
				}

				// Token: 0x06009321 RID: 37665 RVA: 0x002F771C File Offset: 0x002F591C
				public override void Reset()
				{
					this.\uE056 = null;
					this.\uE057 = null;
					this.\uE038 = null;
					this.\uE058 = false;
					this.\uE059 = false;
					this.\uE05A = false;
					base.Reset();
				}

				// Token: 0x06009322 RID: 37666 RVA: 0x002F776C File Offset: 0x002F596C
				public override void RemoveAmmoFromChamber()
				{
					if (this.\uE058)
					{
						return;
					}
					this.\uE058 = true;
					this.\uE02C.RemovePatronInWeapon(0);
					this.\uE02B.SetAmmoInChamber(0f);
				}

				// Token: 0x06009323 RID: 37667 RVA: 0x002F77A0 File Offset: 0x002F59A0
				public override void OnOnOffBoltCatchEvent(bool isCatched)
				{
					this.\uE02B.SetBoltCatch(isCatched);
				}

				// Token: 0x06009324 RID: 37668 RVA: 0x002F77B0 File Offset: 0x002F59B0
				public override void OnAddAmmoInChamber()
				{
					if (this.\uE059)
					{
						return;
					}
					this.\uE059 = true;
					if (this.\uE057 == null)
					{
						return;
					}
					this.\uE02C.SetRoundIntoWeapon((\uEDED)this.\uE057, 0);
					this.SwitchToIdle();
				}

				// Token: 0x06009325 RID: 37669 RVA: 0x002F77F0 File Offset: 0x002F59F0
				public override void OnShellEjectEvent()
				{
					if (this.\uE05A)
					{
						return;
					}
					this.\uE05A = true;
					Callback uE = this.\uE000;
					if (uE != null)
					{
						uE.Succeed();
					}
					this.\uE02C.ThrowPatronAsLoot(this.\uE056, this.\uE001, \uF1F8.\uE000(141600));
					if (this.\uE057 == null)
					{
						this.SwitchToIdle();
					}
				}

				// Token: 0x06009326 RID: 37670 RVA: 0x002F7858 File Offset: 0x002F5A58
				public override void HideWeapon(Action onHidden, bool fastDrop, Item nextControllerItem = null)
				{
					Player.FirearmController.\uE01D.\uE000 uE = new Player.FirearmController.\uE01D.\uE000();
					uE.<>4__this = this;
					uE.onHidden = onHidden;
					uE.fastDrop = fastDrop;
					uE.nextControllerItem = nextControllerItem;
					this.\uE038 = new Action(uE.\uE000);
				}

				// Token: 0x06009327 RID: 37671 RVA: 0x002F78A8 File Offset: 0x002F5AA8
				public override void FastForward()
				{
					if (this.State == Player.EOperationState.Finished)
					{
						return;
					}
					this.RemoveAmmoFromChamber();
					\uEE67 currentMagazine = this.\uE02D.GetCurrentMagazine();
					bool flag = this.\uE02D.ReloadMode == Weapon.EReloadMode.ExternalMagazine || this.\uE02D.ReloadMode == Weapon.EReloadMode.ExternalMagazineWithInternalReloadSupport;
					bool flag2 = currentMagazine != null && currentMagazine.Count > 0;
					if (this.\uE02D.IsBoltCatch && this.\uE057 == null && !flag2 && ((flag && currentMagazine != null) || !flag))
					{
						this.OnOnOffBoltCatchEvent(true);
					}
					this.OnShellEjectEvent();
					if (this.State == Player.EOperationState.Finished)
					{
						return;
					}
					this.OnAddAmmoInChamber();
					if (this.State != Player.EOperationState.Finished)
					{
						this.SwitchToIdle();
					}
				}

				// Token: 0x06009328 RID: 37672 RVA: 0x002F796C File Offset: 0x002F5B6C
				protected virtual void SwitchToIdle()
				{
					this.\uE02B.SetAmmoInChamber((float)this.\uE02D.ChamberAmmoCount);
					this.\uE02B.SetAmmoOnMag(this.\uE02D.GetCurrentMagazineCount());
					this.\uE02B.Rechamber(false);
					this.\uE02B.SetAmmoInChamber((float)this.\uE02D.ChamberAmmoCount);
					this.\uE02B.SetInventory(this.\uE002.\uE002);
					this.State = Player.EOperationState.Finished;
					if (this.\uE038 == null)
					{
						this.\uE002.InitiateOperation<Player.FirearmController.\uE010>().Start(null);
						return;
					}
					this.\uE038();
				}

				// Token: 0x06009329 RID: 37673 RVA: 0x002F7A24 File Offset: 0x002F5C24
				[CompilerGenerated]
				private new void \uE000()
				{
					this.\uE001.Skills.WeaponChamberAction.Complete(this.\uE02D, 1f);
				}

				// Token: 0x04008696 RID: 34454
				protected Item \uE056;

				// Token: 0x04008697 RID: 34455
				protected Item \uE057;

				// Token: 0x04008698 RID: 34456
				private Action \uE038;

				// Token: 0x04008699 RID: 34457
				private new Callback \uE000;

				// Token: 0x0400869A RID: 34458
				private bool \uE058;

				// Token: 0x0400869B RID: 34459
				private bool \uE059;

				// Token: 0x0400869C RID: 34460
				private bool \uE05A;

				// Token: 0x020016D3 RID: 5843
				[CompilerGenerated]
				private new sealed class \uE000
				{
					// Token: 0x0600932B RID: 37675 RVA: 0x002F7A50 File Offset: 0x002F5C50
					internal void \uE000()
					{
						this.<>4__this.\uE002.InitiateOperation<Player.FirearmController.\uE02A>().Start(this.onHidden, this.fastDrop, this.nextControllerItem);
					}

					// Token: 0x0400869D RID: 34461
					public Player.FirearmController.\uE01D <>4__this;

					// Token: 0x0400869E RID: 34462
					public Action onHidden;

					// Token: 0x0400869F RID: 34463
					public bool fastDrop;

					// Token: 0x040086A0 RID: 34464
					public Item nextControllerItem;
				}
			}

			// Token: 0x020016D4 RID: 5844
			public class \uE01E : Player.FirearmController.\uE021
			{
				// Token: 0x0600932C RID: 37676 RVA: 0x002F7A7C File Offset: 0x002F5C7C
				public \uE01E(Player.FirearmController controller) : base(controller)
				{
				}

				// Token: 0x0600932D RID: 37677 RVA: 0x002F7AA4 File Offset: 0x002F5CA4
				public virtual void Start(\uEDA2 ammoPack, Callback callback, bool quickReload = false)
				{
					base.Start(ammoPack, callback);
					this.\uE05F = quickReload;
					this.\uE000();
					base.\uE000 = false;
				}

				// Token: 0x0600932E RID: 37678 RVA: 0x002F7AC8 File Offset: 0x002F5CC8
				public override void OnMagPuttedToRig()
				{
					this.\uE005();
					this.SwitchToIdle();
				}

				// Token: 0x0600932F RID: 37679 RVA: 0x002F7AD8 File Offset: 0x002F5CD8
				public override void Reset()
				{
					base.Reset();
					this.\uE05F = false;
					this.\uE061 = false;
					this.\uE05B = false;
					this.\uE025 = null;
					this.\uE05E = -1;
					this.\uE060 = 0;
					this.\uE05C.Clear();
					this.\uE05D.Clear();
				}

				// Token: 0x06009330 RID: 37680 RVA: 0x002F7B40 File Offset: 0x002F5D40
				private new void \uE000()
				{
					this.\uE025 = (this.\uE02D.GetCurrentMagazine() as \uEEF0);
					this.\uE060 = this.\uE025.Count;
					this.\uE05B = ((this.\uE05F || this.\uE025.Count == 0) && this.\uE002.CurrentMasteringLevel > 0);
					this.\uE02B.SetWeaponLevel((float)(this.\uE05B ? 1 : 0));
					this.\uE05C = (this.\uE05B ? this.\uE025.GetCamorasIndexesList() : this.\uE025.GetFreeCamorasIndexesFromCurrentActiveIndex(this.\uE05F, !this.\uE02D.CylinderHammerClosed));
					this.\uE02D.GetShellsIndexes(this.\uE05D);
					this.\uE02B.SetShellsInWeapon(this.\uE05D.Count);
					this.\uE02B.SetAmmoOnMag(this.\uE025.Count);
					this.SendReloadCommand();
					if (this.\uE025.Count != 0)
					{
						this.\uE008();
						this.\uE02B.SetCamoraIndexWithShellForRemove(this.\uE05E);
					}
					if (this.\uE05F)
					{
						this.\uE02B.ReloadFast(this.\uE05F);
						this.\uE02B.SetAmmoCountForRemove(this.\uE05D.Count + this.\uE025.Count);
						this.\uE02B.ResetReload();
						this.\uE060 = 0;
					}
					else
					{
						this.\uE02B.SetAmmoCountForRemove(this.\uE05D.Count);
					}
					this.\uE006();
				}

				// Token: 0x06009331 RID: 37681 RVA: 0x002F7CEC File Offset: 0x002F5EEC
				public override void OnOnOffBoltCatchEvent(bool isCatched)
				{
					this.\uE02B.SetBoltCatch(isCatched);
				}

				// Token: 0x06009332 RID: 37682 RVA: 0x002F7CFC File Offset: 0x002F5EFC
				public override void OnMagAppeared()
				{
					this.\uE001();
				}

				// Token: 0x06009333 RID: 37683 RVA: 0x002F7D04 File Offset: 0x002F5F04
				private new void \uE001()
				{
					if (!this.\uE05B)
					{
						return;
					}
					this.\uE025.SetCurrentCamoraIndex(this.\uE02D.CylinderHammerClosed ? (this.\uE025.MaxCount - 1) : 0);
					for (int i = 0; i < this.\uE025.MaxCount; i++)
					{
						if (i >= this.\uE04A.AmmoCount)
						{
							return;
						}
						\uEDED ammoToReload = this.\uE04A.GetAmmoToReload(i);
						this.\uE02C.SetRoundIntoWeapon(ammoToReload, i);
					}
				}

				// Token: 0x06009334 RID: 37684 RVA: 0x002F7D90 File Offset: 0x002F5F90
				private new void \uE002()
				{
					if (!this.\uE05B)
					{
						return;
					}
					for (int i = this.\uE06C; i < this.\uE05C.Count; i++)
					{
						if (i >= this.\uE04A.AmmoCount)
						{
							return;
						}
						this.\uE02C.DestroyPatronInWeapon(this.\uE05C[i]);
					}
				}

				// Token: 0x06009335 RID: 37685 RVA: 0x002F7DF0 File Offset: 0x002F5FF0
				public override void RemoveAmmoFromChamber()
				{
					this.\uE002();
				}

				// Token: 0x06009336 RID: 37686 RVA: 0x002F7DF8 File Offset: 0x002F5FF8
				public override void OnRemoveShellEvent()
				{
					if (this.\uE025.Count == 0)
					{
						this.\uE009();
						return;
					}
					if (this.\uE05F)
					{
						this.\uE009();
						this.\uE00A();
						return;
					}
					this.\uE02D.ShellsInChambers[this.\uE05E] = null;
					this.\uE02C.StartSpawnShell(this.\uE001.Velocity * 0.33f, this.\uE05E);
					this.\uE008();
				}

				// Token: 0x06009337 RID: 37687 RVA: 0x002F7E7C File Offset: 0x002F607C
				public override void OnShellEjectEvent()
				{
					this.\uE02B.SetCamoraIndexWithShellForRemove(this.\uE05E);
				}

				// Token: 0x06009338 RID: 37688 RVA: 0x002F7E90 File Offset: 0x002F6090
				public override void OnAddAmmoInChamber()
				{
					if (this.\uE05B)
					{
						this.\uE003();
					}
					else
					{
						this.\uE007();
					}
					this.\uE02B.SetAmmoOnMag(this.\uE025.Count + this.\uE06C);
				}

				// Token: 0x06009339 RID: 37689 RVA: 0x002F7ECC File Offset: 0x002F60CC
				private void \uE003()
				{
					if (this.\uE06C >= this.\uE05C.Count || this.\uE06C >= this.\uE04A.AmmoCount)
					{
						return;
					}
					this.\uE06C++;
					this.\uE02B.SetAmmoOnMag(this.\uE06C);
					if (this.\uE06C < this.\uE05C.Count)
					{
						if (this.\uE06C < this.\uE04A.AmmoCount)
						{
							return;
						}
					}
					this.AddAmmoToMag();
				}

				// Token: 0x0600933A RID: 37690 RVA: 0x002F7F60 File Offset: 0x002F6160
				public override void AddAmmoToMag()
				{
					this.\uE006();
					base.\uE000 = true;
					this.\uE02B.SetAmmoOnMag(this.\uE025.Count + this.\uE06C);
					if (this.CanReload())
					{
						if (!this.\uE06B)
						{
							return;
						}
					}
					this.\uE02B.SetMasteringReloadAborted(this.\uE06B);
					this.\uE005();
				}

				// Token: 0x0600933B RID: 37691 RVA: 0x002F7FD4 File Offset: 0x002F61D4
				private static void \uE004(int ammoToLoadIntoMag, \uEDA2 ammoPack, Player player, \uEEF0 magazine, Weapon weapon, List<int> camorasIndexesForLoadAmmo)
				{
					for (int i = 0; i < ammoToLoadIntoMag; i++)
					{
						\uF190<\uEF07> uF = ammoPack.LoadAmmo(player.InventoryController, player.InventoryController, magazine.Camoras[camorasIndexesForLoadAmmo[i]].CreateItemAddress());
						if (uF.Error == null)
						{
							uF.Value.RaiseEvents(player.InventoryController, CommandStatus.Begin);
							uF.Value.RaiseEvents(player.InventoryController, CommandStatus.Succeed);
						}
						else
						{
							string[] array = new string[6];
							array[0] = \uF1F8.\uE000(141573);
							array[1] = ammoPack.AmmoCount.ToString();
							array[2] = \uF1F8.\uE000(141777);
							array[3] = (ammoToLoadIntoMag - i).ToString();
							array[4] = \uF1F8.\uE000(141771);
							int num = 5;
							Error error = uF.Error;
							array[num] = ((error != null) ? error.ToString() : null);
							Debug.LogError(string.Concat(array));
						}
					}
				}

				// Token: 0x0600933C RID: 37692 RVA: 0x002F80D0 File Offset: 0x002F62D0
				public override void HideWeapon(Action onHidden, bool fastDrop, Item nextControllerItem = null)
				{
					base.HideWeapon(onHidden, fastDrop, null);
					this.\uE06B = true;
				}

				// Token: 0x0600933D RID: 37693 RVA: 0x002F80E4 File Offset: 0x002F62E4
				public override void FastForward()
				{
					if (this.State == Player.EOperationState.Finished)
					{
						return;
					}
					if (this.State != Player.EOperationState.Finished)
					{
						this.\uE005();
						this.SwitchToIdle();
					}
				}

				// Token: 0x0600933E RID: 37694 RVA: 0x002F810C File Offset: 0x002F630C
				protected void \uE005()
				{
					if (this.\uE061)
					{
						return;
					}
					this.\uE061 = true;
					if (this.\uE06C > 0)
					{
						this.\uE001.ExecuteSkill(new Action(this.\uE00C));
					}
					this.\uE02D.Parent.RaiseRemoveEvent(this.\uE02D, CommandStatus.Failed, this.\uE001.InventoryController);
					this.\uE02B.SetCamoraIndex(this.\uE025.CurrentCamoraIndex);
					this.\uE02B.SetCanReload(false);
					if (this.\uE02D.MalfState.State == Weapon.EMalfunctionState.Misfire)
					{
						this.\uE02B.SetLayerWeight(this.\uE02B.MALFUNCTION_LAYER_INDEX, 1);
					}
				}

				// Token: 0x0600933F RID: 37695 RVA: 0x002F81D4 File Offset: 0x002F63D4
				protected virtual void SwitchToIdle()
				{
					this.\uE04A.UnlockItems();
					this.\uE00B();
					this.\uE02B.SetMasteringReloadAborted(false);
					this.\uE02B.SetInventory(this.\uE002.InventoryOpened);
					Action uE = this.\uE022;
					bool uE2 = this.\uE021;
					this.\uE02D.RaiseRefreshEvent(false, true);
					this.State = Player.EOperationState.Finished;
					Player.FirearmController.\uE010 uE3 = this.\uE002.InitiateOperation<Player.FirearmController.\uE010>();
					uE3.Start(null);
					base.\uE001();
					if (uE != null)
					{
						uE3.HideWeapon(uE, uE2, null);
					}
				}

				// Token: 0x06009340 RID: 37696 RVA: 0x002F8274 File Offset: 0x002F6474
				protected void \uE006()
				{
					if (this.\uE06C >= this.\uE05C.Count)
					{
						return;
					}
					int camoraIndexForLoadAmmo = this.\uE05C[this.\uE06C];
					this.\uE02B.SetCamoraIndexForLoadAmmo(camoraIndexForLoadAmmo);
				}

				// Token: 0x06009341 RID: 37697 RVA: 0x002F82B4 File Offset: 0x002F64B4
				private void \uE007()
				{
					if (this.\uE06C >= this.\uE05C.Count || this.\uE06C >= this.\uE04A.AmmoCount)
					{
						return;
					}
					this.\uE02B.SetCamoraIndex(this.\uE025.CurrentCamoraIndex);
					this.\uE02B.SetCamoraIndexForLoadAmmo(this.\uE05C[this.\uE06C]);
					\uEDED ammoToReload = this.\uE04A.GetAmmoToReload(this.\uE06C);
					this.\uE02C.SetRoundIntoWeapon(ammoToReload, this.\uE05C[this.\uE06C]);
					this.\uE06C++;
				}

				// Token: 0x06009342 RID: 37698 RVA: 0x002F836C File Offset: 0x002F656C
				protected virtual void SendReloadCommand()
				{
				}

				// Token: 0x06009343 RID: 37699 RVA: 0x002F8370 File Offset: 0x002F6570
				protected void \uE008()
				{
					this.\uE02B.SetShellsInWeapon(this.\uE05D.Count);
					if (this.\uE05F)
					{
						return;
					}
					if (this.\uE05D.Count == 0)
					{
						return;
					}
					this.\uE05E = Enumerable.First<int>(this.\uE05D);
					this.\uE05D.RemoveAt(0);
				}

				// Token: 0x06009344 RID: 37700 RVA: 0x002F83D0 File Offset: 0x002F65D0
				protected override bool CanReload()
				{
					return this.\uE04A.AmmoCount - this.\uE06C > 0 && this.\uE060 + this.\uE06C != this.\uE06A.MaxCount;
				}

				// Token: 0x06009345 RID: 37701 RVA: 0x002F8408 File Offset: 0x002F6608
				private void \uE009()
				{
					for (int i = 0; i < this.\uE02D.ShellsInChambers.Length; i++)
					{
						this.\uE02D.ShellsInChambers[i] = null;
					}
					this.\uE02C.StartSpawnAllShells(Vector3.down);
					this.\uE02B.SetShellsInWeapon(0);
				}

				// Token: 0x06009346 RID: 37702 RVA: 0x002F8468 File Offset: 0x002F6668
				private void \uE00A()
				{
					this.\uE02C.DestroyAllPatronsInWeapon();
					Slot[] camoras = this.\uE025.Camoras;
					for (int i = 0; i < camoras.Length; i++)
					{
						Item containedItem = camoras[i].ContainedItem;
						if (containedItem != null)
						{
							\uF190<\uEF07> uF = this.\uE025.RemoveAmmoInCamora(containedItem, this.\uE001.InventoryController);
							if (uF.Failed)
							{
								Debug.LogError(uF.Error);
								return;
							}
							this.\uE02C.ThrowPatronAsLoot(containedItem, this.\uE001, \uF1F8.\uE000(141745));
						}
					}
				}

				// Token: 0x06009347 RID: 37703 RVA: 0x002F8510 File Offset: 0x002F6710
				private void \uE00B()
				{
					\uEDA2 uE04A = this.\uE04A;
					\uEEF0 uE = this.\uE025;
					Weapon uE02D = this.\uE02D;
					int uE06C = this.\uE06C;
					Player uE2 = this.\uE001;
					List<int> uE05C = this.\uE05C;
					Player.FirearmController.\uE01E.\uE004(uE06C, uE04A, uE2, uE, uE02D, uE05C);
					if (!uE02D.CylinderHammerClosed)
					{
						this.\uE025.SetNotEmptyCamoraAsActive();
					}
					this.\uE02B.SetAmmoOnMag(uE.Count);
					this.\uE001.InventoryController.CheckChamber(this.\uE02D, true);
				}

				// Token: 0x06009348 RID: 37704 RVA: 0x002F85A4 File Offset: 0x002F67A4
				[CompilerGenerated]
				private void \uE00C()
				{
					this.\uE001.Skills.WeaponReloadAction.Complete(this.\uE02D, 1f);
				}

				// Token: 0x040086A1 RID: 34465
				protected bool \uE05B;

				// Token: 0x040086A2 RID: 34466
				protected \uEEF0 \uE025;

				// Token: 0x040086A3 RID: 34467
				protected List<int> \uE05C = new List<int>();

				// Token: 0x040086A4 RID: 34468
				protected List<int> \uE05D = new List<int>();

				// Token: 0x040086A5 RID: 34469
				protected int \uE05E = -1;

				// Token: 0x040086A6 RID: 34470
				protected bool \uE05F;

				// Token: 0x040086A7 RID: 34471
				protected int \uE060;

				// Token: 0x040086A8 RID: 34472
				protected bool \uE061;
			}

			// Token: 0x020016D5 RID: 5845
			public class \uE01F : Player.FirearmController.\uE003
			{
				// Token: 0x06009349 RID: 37705 RVA: 0x002F85C8 File Offset: 0x002F67C8
				public \uE01F(Player.FirearmController controller) : base(controller)
				{
				}

				// Token: 0x0600934A RID: 37706 RVA: 0x002F85D4 File Offset: 0x002F67D4
				public override void SetAiming(bool isAiming)
				{
					if (this.\uE069.NextMagazine.IsMagazineWithBelt)
					{
						return;
					}
					base.\uE000(isAiming);
				}

				// Token: 0x0600934B RID: 37707 RVA: 0x002F85F0 File Offset: 0x002F67F0
				public virtual void Start(Player.FirearmController.\uE020 reloadExternalMagResult, [CanBeNull] Callback callback)
				{
					this.\uE062 = callback;
					base.Start(callback);
					this.\uE002.\uE00F = true;
					this.\uE069 = reloadExternalMagResult;
					this.\uE02B.SetAmmoCompatible(this.\uE069.AmmoCompatible);
					this.\uE02B.SetIsExternalMag(true);
					if (this.\uE069.RemoveFromChamberResult == null)
					{
						this.\uE063 = true;
					}
					if (this.\uE069.PopNewAmmoResult == null)
					{
						this.\uE066 = true;
					}
					this.\uE02B.SetCanReload(true);
					this.\uE02B.Reload((this.\uE069.OldMagazine != null) ? this.\uE069.OldMagazine.magAnimationIndex : -1, this.\uE069.NextMagazine.magAnimationIndex, reloadExternalMagResult.QuickReload);
					this.\uE069.RaiseEvents(this.\uE001.InventoryController, CommandStatus.Begin);
					if (this.\uE02D.IsBoltCatch && this.\uE02D.ChamberAmmoCount == 1 && this.\uE069.PopNewAmmoResult == null && !this.\uE02D.ManualBoltCatch && !this.\uE02D.MustBoltBeOpennedForExternalReload && !this.\uE02D.MustBoltBeOpennedForInternalReload)
					{
						this.\uE02B.SetBoltCatch(false);
					}
					this.\uE001.Say(EPhraseTrigger.OnWeaponReload, false, 0f, (ETagStatus)0, 100, false);
					if (this.\uE02D.MalfState.State == Weapon.EMalfunctionState.Misfire && this.\uE02D.MalfState.IsKnownMalfunction(this.\uE001.ProfileId) && this.\uE069.NextMagazine.Count > 0)
					{
						if (this.\uE069.AmmoCompatible)
						{
							this.\uE066 = false;
							this.\uE02B.SetAmmoInChamber(0f);
							this.\uE02B.SetLayerWeight(this.\uE02B.MALFUNCTION_LAYER_INDEX, 0);
						}
					}
				}

				// Token: 0x0600934C RID: 37708 RVA: 0x002F87E8 File Offset: 0x002F69E8
				public override void Reset()
				{
					this.\uE062 = null;
					this.\uE063 = false;
					this.\uE064 = false;
					this.\uE00F = false;
					this.\uE00E = false;
					this.\uE065 = false;
					this.\uE066 = false;
					this.\uE068 = false;
					this.\uE069 = null;
					base.Reset();
				}

				// Token: 0x0600934D RID: 37709 RVA: 0x002F884C File Offset: 0x002F6A4C
				public override void UseSecondMagForReload()
				{
					this.\uE000();
				}

				// Token: 0x0600934E RID: 37710 RVA: 0x002F8854 File Offset: 0x002F6A54
				public override void OnShellEjectEvent()
				{
					this.\uE02C.StartSpawnShell(this.\uE001.Velocity * 0.66f, 0);
				}

				// Token: 0x0600934F RID: 37711 RVA: 0x002F8878 File Offset: 0x002F6A78
				public override void RemoveAmmoFromChamber()
				{
					if (this.\uE063)
					{
						return;
					}
					this.\uE063 = true;
					if (this.\uE069.RemoveFromChamberResult != null)
					{
						this.\uE02C.RemovePatronInWeapon(0);
					}
					this.\uE02B.SetAmmoInChamber(0f);
					Player.FirearmController.\uE020 uE = this.\uE069;
					if (((uE != null) ? uE.RemoveFromChamberResult : null) != null)
					{
						this.\uE02C.ThrowPatronAsLoot(this.\uE069.RemoveFromChamberResult.Item, this.\uE001, \uF1F8.\uE000(141726));
					}
				}

				// Token: 0x06009350 RID: 37712 RVA: 0x002F8914 File Offset: 0x002F6B14
				public override void OnMagPulledOutFromWeapon()
				{
					if (this.\uE064)
					{
						return;
					}
					this.\uE064 = true;
					base.\uE002();
					this.\uE02B.SetMagInWeapon(false);
				}

				// Token: 0x06009351 RID: 37713 RVA: 0x002F8940 File Offset: 0x002F6B40
				public override void OnMagPuttedToRig()
				{
					if (this.\uE00F)
					{
						return;
					}
					this.\uE00F = true;
					if (this.\uE069.RemoveOldMagResult != null)
					{
						Item item = this.\uE069.RemoveOldMagResult.Item;
						this.DropMod(item, EWeaponModType.mod_magazine);
					}
					this.\uE02C.RemoveMod(this.\uE069.MagazineSlot);
				}

				// Token: 0x06009352 RID: 37714 RVA: 0x002F89A8 File Offset: 0x002F6BA8
				protected virtual void DropMod(Item droppedMod, EWeaponModType modType)
				{
					BifacialTransform bodyTransform = this.\uE001.PlayerBones.BodyTransform;
					Transform original = bodyTransform.Original;
					Transform modTransform = this.\uE02C.GetModTransform(modType);
					Vector3 position = original.InverseTransformPoint(modTransform.position);
					Quaternion rhs = Quaternion.Inverse(original.rotation) * modTransform.rotation;
					Vector3 position2 = bodyTransform.TransformPoint(position);
					Quaternion rotation = bodyTransform.rotation * rhs;
					Vector3 velocity = Vector3.down / 100f;
					Vector3 angularVelocity = new Vector3(UnityEngine.Random.Range(-3f, 3f), UnityEngine.Random.Range(-3f, 3f), UnityEngine.Random.Range(-3f, 3f));
					Singleton<GameWorld>.Instance.ThrowItem(droppedMod, this.\uE001, position2, rotation, velocity, angularVelocity, true, true, 0f);
				}

				// Token: 0x06009353 RID: 37715 RVA: 0x002F8A7C File Offset: 0x002F6C7C
				public override void OnMagAppeared()
				{
					if (this.\uE00E)
					{
						return;
					}
					this.\uE00E = true;
					base.\uE002();
					this.\uE02C.SetupMod(this.\uE069.MagazineSlot, Singleton<\uE90C>.Instance.CreateItem(this.\uE069.NextMagazine, Player.GetVisibleToCamera(this.\uE001), this.\uE001, true));
					if (this.\uE069.NextMagazine.IsMagazineWithBelt)
					{
						this.\uE002.\uE010.UpdateAnimatorHierarchy();
						if (this.\uE002.HasBipod)
						{
							this.\uE002.FirearmsAnimator.SetBipod(this.\uE002.BipodState);
						}
					}
				}

				// Token: 0x06009354 RID: 37716 RVA: 0x002F8B44 File Offset: 0x002F6D44
				public override void OnMagInsertedToWeapon()
				{
					if (this.\uE065)
					{
						return;
					}
					this.\uE065 = true;
					this.\uE02B.SetMagInWeapon(true);
					this.\uE02B.SetAmmoOnMag(this.\uE069.NextMagazine.Count + ((this.\uE069.PopNewAmmoResult == null) ? 0 : 1));
					if (this.\uE02D.HasChambers && this.\uE069.PopNewAmmoResult == null && this.\uE02D.MalfState.State != Weapon.EMalfunctionState.SoftSlide && this.\uE02D.MalfState.State != Weapon.EMalfunctionState.HardSlide && this.\uE02D.MalfState.State != Weapon.EMalfunctionState.Jam)
					{
						if (this.\uE02D.MalfState.State == Weapon.EMalfunctionState.Misfire)
						{
							if (this.\uE02D.MalfState.IsKnownMalfunction(this.\uE001.ProfileId))
							{
								if (this.\uE069.AmmoCompatible)
								{
									goto IL_116;
								}
							}
						}
						this.SwitchToIdlingState();
					}
					IL_116:
					this.\uE02B.SetMagTypeCurrent(this.\uE069.NextMagazine.magAnimationIndex);
				}

				// Token: 0x06009355 RID: 37717 RVA: 0x002F8C84 File Offset: 0x002F6E84
				public override void OnOnOffBoltCatchEvent(bool isCatched)
				{
					if (!isCatched && this.\uE068)
					{
						return;
					}
					if (!isCatched)
					{
						this.\uE068 = true;
					}
					this.\uE02B.SetBoltCatch(isCatched);
				}

				// Token: 0x06009356 RID: 37718 RVA: 0x002F8CB0 File Offset: 0x002F6EB0
				public override void OnAddAmmoInChamber()
				{
					if (this.\uE066)
					{
						return;
					}
					this.\uE066 = true;
					if (this.\uE02D.MalfState.State == Weapon.EMalfunctionState.Misfire)
					{
						base.\uE000();
					}
					this.\uE02B.SetAmmoOnMag(this.\uE069.NextMagazine.Count);
					if (this.\uE02D.HasChambers && this.\uE069.PopNewAmmoResult != null)
					{
						this.\uE02C.SetRoundIntoWeapon((\uEDED)this.\uE069.PopNewAmmoResult.ResultItem, 0);
					}
					this.\uE02B.SetAmmoInChamber((float)this.\uE069.Weapon.ChamberAmmoCount);
					if (!this.\uE068)
					{
						this.OnOnOffBoltCatchEvent(false);
					}
					this.SwitchToIdlingState();
				}

				// Token: 0x06009357 RID: 37719 RVA: 0x002F8D90 File Offset: 0x002F6F90
				public override void SetInventoryOpened(bool opened)
				{
					this.\uE002.InventoryOpened = opened;
					if (!this.\uE064)
					{
						if (!this.\uE00E)
						{
							return;
						}
					}
					this.\uE02B.SetInventory(opened);
				}

				// Token: 0x06009358 RID: 37720 RVA: 0x002F8DC4 File Offset: 0x002F6FC4
				protected virtual void SwitchToIdlingState()
				{
					if (this.State == Player.EOperationState.Finished)
					{
						return;
					}
					this.State = Player.EOperationState.Finished;
					Action uE = this.\uE022;
					bool uE2 = this.\uE021;
					this.\uE069.RaiseEvents(this.\uE001.InventoryController, CommandStatus.Succeed);
					this.\uE002.RecalculateErgonomic();
					Player.FirearmController.\uE010 uE3 = this.\uE002.InitiateOperation<Player.FirearmController.\uE010>();
					uE3.Start(null);
					Callback uE4 = this.\uE062;
					if (uE4 != null)
					{
						uE4.Succeed();
					}
					this.\uE002.WeaponModified();
					if (uE != null)
					{
						uE3.HideWeapon(uE, uE2, null);
					}
				}

				// Token: 0x06009359 RID: 37721 RVA: 0x002F8E64 File Offset: 0x002F7064
				private new void \uE000()
				{
					Debug.LogError(\uF1F8.\uE000(141423));
				}

				// Token: 0x0600935A RID: 37722 RVA: 0x002F8E78 File Offset: 0x002F7078
				public override void OnIdleStartEvent()
				{
					this.SwitchToIdlingState();
				}

				// Token: 0x0600935B RID: 37723 RVA: 0x002F8E80 File Offset: 0x002F7080
				public override void FastForward()
				{
					if (this.State == Player.EOperationState.Finished)
					{
						return;
					}
					this.RemoveAmmoFromChamber();
					this.OnMagPulledOutFromWeapon();
					this.OnMagPuttedToRig();
					this.OnMagAppeared();
					this.OnMagInsertedToWeapon();
					this.OnAddAmmoInChamber();
					this.OnOnOffBoltCatchEvent(false);
					if (this.State != Player.EOperationState.Finished)
					{
						this.SwitchToIdlingState();
					}
					this.\uE02B.Animator.Play(this.\uE02B.FullIdleStateName, 1, 0.1f);
				}

				// Token: 0x040086A9 RID: 34473
				protected Callback \uE062;

				// Token: 0x040086AA RID: 34474
				private bool \uE063;

				// Token: 0x040086AB RID: 34475
				private bool \uE064;

				// Token: 0x040086AC RID: 34476
				private bool \uE00F;

				// Token: 0x040086AD RID: 34477
				private bool \uE00E;

				// Token: 0x040086AE RID: 34478
				private bool \uE065;

				// Token: 0x040086AF RID: 34479
				private bool \uE066;

				// Token: 0x040086B0 RID: 34480
				private bool \uE067;

				// Token: 0x040086B1 RID: 34481
				private bool \uE068;

				// Token: 0x040086B2 RID: 34482
				protected Player.FirearmController.\uE020 \uE069;
			}

			// Token: 0x020016D6 RID: 5846
			public sealed class \uE020
			{
				// Token: 0x0600935C RID: 37724 RVA: 0x002F8F08 File Offset: 0x002F7108
				private \uE020(\uEEFC itemController, [CanBeNull] \uEF18 removeFromChamberResult, [CanBeNull] \uEF18 removeOldMagResult, [CanBeNull] \uEF19 moveOldMagResult, \uEF19 insertNextMagResult, [CanBeNull] \uEF07 popNewAmmoResult, Weapon weapon, bool ammoCompatible, bool quickReload, bool isKnownMalfunction)
				{
					this.ItemController = itemController;
					this.Weapon = weapon;
					this.AmmoCompatible = ammoCompatible;
					this.OldMagazine = ((removeOldMagResult != null) ? ((\uEE67)removeOldMagResult.Item) : ((\uEE67)((moveOldMagResult != null) ? moveOldMagResult.Item : null)));
					this.NextMagazine = (\uEE67)insertNextMagResult.Item;
					this.MagazineSlot = ((\uEEFE)insertNextMagResult.To).Slot;
					this.QuickReload = quickReload;
					this.IsKnownMalfunction = isKnownMalfunction;
					this.RemoveFromChamberResult = removeFromChamberResult;
					this.RemoveOldMagResult = removeOldMagResult;
					this.MoveOldMagResult = moveOldMagResult;
					this.InsertNextMagResult = insertNextMagResult;
					this.PopNewAmmoResult = popNewAmmoResult;
				}

				// Token: 0x0600935D RID: 37725 RVA: 0x002F8FE0 File Offset: 0x002F71E0
				public void RollBack()
				{
					\uEF07 popNewAmmoResult = this.PopNewAmmoResult;
					if (popNewAmmoResult != null)
					{
						popNewAmmoResult.RollBack();
					}
					this.InsertNextMagResult.RollBack();
					\uEF18 removeOldMagResult = this.RemoveOldMagResult;
					if (removeOldMagResult != null)
					{
						removeOldMagResult.RollBack();
					}
					\uEF19 moveOldMagResult = this.MoveOldMagResult;
					if (moveOldMagResult != null)
					{
						moveOldMagResult.RollBack();
					}
					\uEF18 removeFromChamberResult = this.RemoveFromChamberResult;
					if (removeFromChamberResult == null)
					{
						return;
					}
					removeFromChamberResult.RollBack();
				}

				// Token: 0x0600935E RID: 37726 RVA: 0x002F903C File Offset: 0x002F723C
				public void RaiseEvents(\uEEFC controller, CommandStatus status)
				{
					this.Weapon.Parent.RaiseRemoveEvent(this.Weapon, (status == CommandStatus.Begin) ? CommandStatus.Begin : CommandStatus.Failed, controller);
					\uEF18 removeFromChamberResult = this.RemoveFromChamberResult;
					if (removeFromChamberResult != null)
					{
						removeFromChamberResult.RaiseEvents(controller, status);
					}
					\uEF18 removeOldMagResult = this.RemoveOldMagResult;
					if (removeOldMagResult != null)
					{
						removeOldMagResult.RaiseEvents(controller, status);
					}
					\uEF19 moveOldMagResult = this.MoveOldMagResult;
					if (moveOldMagResult != null)
					{
						moveOldMagResult.RaiseEvents(controller, status);
					}
					this.InsertNextMagResult.RaiseEvents(controller, status);
					\uEF07 popNewAmmoResult = this.PopNewAmmoResult;
					if (popNewAmmoResult == null)
					{
						return;
					}
					popNewAmmoResult.RaiseEvents(controller, status);
				}

				// Token: 0x0600935F RID: 37727 RVA: 0x002F90CC File Offset: 0x002F72CC
				public static \uF192<Player.FirearmController.\uE020> Run(\uEEFC itemController, Weapon weapon, \uEE67 nextMagazine, bool quickReload, bool isKnownMalfunction, [CanBeNull] ItemAddress vestTargetAddress)
				{
					Slot slot = weapon.HasChambers ? weapon.Chambers[0] : null;
					\uEDED uEDED = ((slot != null) ? slot.ContainedItem : null) as \uEDED;
					\uEE67 currentMagazine = weapon.GetCurrentMagazine();
					Slot magazineSlot = weapon.GetMagazineSlot();
					Weapon.EMalfunctionState state = weapon.MalfState.State;
					if (state == Weapon.EMalfunctionState.Misfire)
					{
						weapon.MalfState.ChangeStateSilent(Weapon.EMalfunctionState.None);
					}
					\uF190<\uEF18> uF = (uEDED != null && weapon.MustBoltBeOpennedForExternalReload) ? \uEF02.Remove(uEDED, itemController, false) : default(\uF190<\uEF18>);
					weapon.MalfState.ChangeStateSilent(state);
					if (uF.Failed)
					{
						return uF.Error;
					}
					\uF190<\uEF18> uF2 = default(\uF190<\uEF18>);
					\uF190<\uEF19> uF3 = default(\uF190<\uEF19>);
					if (currentMagazine != null)
					{
						if (vestTargetAddress != null)
						{
							uF3 = \uEF02.Move(currentMagazine, vestTargetAddress, itemController, false);
							if (uF3.Failed)
							{
								\uEF18 value = uF.Value;
								if (value != null)
								{
									value.RollBack();
								}
								return uF3.Error;
							}
						}
						else
						{
							uF2 = \uEF02.Remove(currentMagazine, itemController, false);
							if (uF2.Failed)
							{
								\uEF18 value2 = uF.Value;
								if (value2 != null)
								{
									value2.RollBack();
								}
								return uF2.Error;
							}
						}
					}
					\uF190<\uEF19> uF4 = \uEF02.Move(nextMagazine, magazineSlot.CreateItemAddress(), itemController, false);
					if (uF4.Failed)
					{
						\uEF18 value3 = uF2.Value;
						if (value3 != null)
						{
							value3.RollBack();
						}
						\uEF19 value4 = uF3.Value;
						if (value4 != null)
						{
							value4.RollBack();
						}
						\uEF18 value5 = uF.Value;
						if (value5 != null)
						{
							value5.RollBack();
						}
						return uF4.Error;
					}
					bool flag = nextMagazine.IsAmmoCompatible(weapon.Chambers);
					\uF190<\uEF07> uF5 = default(\uF190<\uEF07>);
					if (slot != null && slot.ContainedItem == null && nextMagazine.Count > 0 && flag)
					{
						object obj = weapon.MalfState.State == Weapon.EMalfunctionState.None || (weapon.MalfState.State == Weapon.EMalfunctionState.Misfire && isKnownMalfunction);
						Weapon.EMalfunctionState state2 = weapon.MalfState.State;
						object obj2 = obj;
						if (obj2 != null && weapon.MalfState.State != Weapon.EMalfunctionState.None)
						{
							weapon.MalfState.ChangeStateSilent(Weapon.EMalfunctionState.None);
						}
						if (obj2 != null)
						{
							uF5 = nextMagazine.Cartridges.PopTo(itemController, slot.CreateItemAddress());
							if (state2 != Weapon.EMalfunctionState.None)
							{
								weapon.MalfState.ChangeStateSilent(state2);
							}
							if (uF5.Failed)
							{
								uF4.Value.RollBack();
								\uEF18 value6 = uF2.Value;
								if (value6 != null)
								{
									value6.RollBack();
								}
								\uEF19 value7 = uF3.Value;
								if (value7 != null)
								{
									value7.RollBack();
								}
								\uEF18 value8 = uF.Value;
								if (value8 != null)
								{
									value8.RollBack();
								}
								return uF5.Error;
							}
						}
					}
					return new Player.FirearmController.\uE020(itemController, uF.Value, uF2.Value, uF3.Value, uF4.Value, uF5.Value, weapon, flag, quickReload, isKnownMalfunction);
				}

				// Token: 0x06009360 RID: 37728 RVA: 0x002F93AC File Offset: 0x002F75AC
				public bool CanExecute(\uEEFC itemController)
				{
					if (this.Weapon.CheckAction(null).Failed)
					{
						return false;
					}
					if (this.NextMagazine.CheckAction(null).Failed)
					{
						return false;
					}
					if (this.OldMagazine != null && this.OldMagazine.CheckAction(this.MagazineSlot.CreateItemAddress()).Failed)
					{
						return false;
					}
					if (this.MoveOldMagResult != null)
					{
						if (this.MoveOldMagResult.Item.CheckAction(this.MoveOldMagResult.To).Failed)
						{
							return false;
						}
					}
					return true;
				}

				// Token: 0x040086B3 RID: 34483
				public readonly \uEEFC ItemController;

				// Token: 0x040086B4 RID: 34484
				public readonly Weapon Weapon;

				// Token: 0x040086B5 RID: 34485
				public readonly bool AmmoCompatible;

				// Token: 0x040086B6 RID: 34486
				[CanBeNull]
				public readonly \uEE67 OldMagazine;

				// Token: 0x040086B7 RID: 34487
				public readonly \uEE67 NextMagazine;

				// Token: 0x040086B8 RID: 34488
				public readonly Slot MagazineSlot;

				// Token: 0x040086B9 RID: 34489
				public readonly bool QuickReload;

				// Token: 0x040086BA RID: 34490
				public readonly bool IsKnownMalfunction;

				// Token: 0x040086BB RID: 34491
				[CanBeNull]
				public readonly \uEF18 RemoveFromChamberResult;

				// Token: 0x040086BC RID: 34492
				[CanBeNull]
				public readonly \uEF18 RemoveOldMagResult;

				// Token: 0x040086BD RID: 34493
				[CanBeNull]
				public readonly \uEF19 MoveOldMagResult;

				// Token: 0x040086BE RID: 34494
				public readonly \uEF19 InsertNextMagResult;

				// Token: 0x040086BF RID: 34495
				[CanBeNull]
				public readonly \uEF07 PopNewAmmoResult;
			}

			// Token: 0x020016D7 RID: 5847
			public class \uE021 : Player.FirearmController.\uE003
			{
				// Token: 0x170014C7 RID: 5319
				// (get) Token: 0x06009361 RID: 37729 RVA: 0x002F9464 File Offset: 0x002F7664
				// (set) Token: 0x06009362 RID: 37730 RVA: 0x002F946C File Offset: 0x002F766C
				protected new bool \uE000
				{
					get
					{
						return this.\uE06D;
					}
					set
					{
						this.\uE06D = value;
						if (!this.\uE06D)
						{
							if (value)
							{
								base.\uE002();
							}
						}
					}
				}

				// Token: 0x06009363 RID: 37731 RVA: 0x002F9490 File Offset: 0x002F7690
				public \uE021(Player.FirearmController controller) : base(controller)
				{
				}

				// Token: 0x06009364 RID: 37732 RVA: 0x002F949C File Offset: 0x002F769C
				public virtual void Start(\uEDA2 ammoPack, [CanBeNull] Callback callback)
				{
					base.Start(callback);
					this.\uE04A = ammoPack;
					this.\uE02B.SetInventory(false);
					this.\uE02B.SetCanReload(true);
					this.\uE02B.Reload(true);
					this.\uE02B.SetIsExternalMag(false);
					this.\uE04A.LockItems();
					this.\uE02D.Parent.RaiseRemoveEvent(this.\uE02D, CommandStatus.Begin, this.\uE001.InventoryController);
					this.\uE06A = this.\uE02D.GetCurrentMagazine();
				}

				// Token: 0x06009365 RID: 37733 RVA: 0x002F953C File Offset: 0x002F773C
				public override void Reset()
				{
					this.\uE04A = null;
					this.\uE06A = null;
					this.\uE06C = 0;
					this.\uE06B = false;
					this.\uE000 = false;
					base.Reset();
				}

				// Token: 0x06009366 RID: 37734 RVA: 0x002F9574 File Offset: 0x002F7774
				protected virtual bool CanReload()
				{
					return this.\uE04A.AmmoCount - this.\uE06C > 0 && this.\uE06A.Count + this.\uE06C != this.\uE06A.MaxCount;
				}

				// Token: 0x06009367 RID: 37735 RVA: 0x002F95B0 File Offset: 0x002F77B0
				public override void SetTriggerPressed(bool pressed)
				{
					this.\uE06B |= (pressed && this.\uE000);
				}

				// Token: 0x06009368 RID: 37736 RVA: 0x002F95CC File Offset: 0x002F77CC
				public override void SetInventoryOpened(bool opened)
				{
					this.\uE002.InventoryOpened = opened;
					this.\uE06B = true;
					if (this.\uE000)
					{
						this.\uE02B.SetInventory(opened);
					}
				}

				// Token: 0x040086C0 RID: 34496
				protected \uEDA2 \uE04A;

				// Token: 0x040086C1 RID: 34497
				protected \uEE67 \uE06A;

				// Token: 0x040086C2 RID: 34498
				protected bool \uE06B;

				// Token: 0x040086C3 RID: 34499
				protected int \uE06C;

				// Token: 0x040086C4 RID: 34500
				private bool \uE06D;
			}

			// Token: 0x020016D8 RID: 5848
			public class \uE022 : Player.FirearmController.\uE021
			{
				// Token: 0x06009369 RID: 37737 RVA: 0x002F9600 File Offset: 0x002F7800
				public \uE022(Player.FirearmController controller) : base(controller)
				{
				}

				// Token: 0x0600936A RID: 37738 RVA: 0x002F960C File Offset: 0x002F780C
				public override void Start(\uEDA2 ammoPack, Callback callback)
				{
					base.Start(ammoPack, callback);
					this.\uE000();
				}

				// Token: 0x0600936B RID: 37739 RVA: 0x002F961C File Offset: 0x002F781C
				private new void \uE000()
				{
					bool flag = this.\uE02D.MalfState.State == Weapon.EMalfunctionState.None || this.\uE02D.MalfState.State == Weapon.EMalfunctionState.Misfire;
					if (this.\uE02D.ChamberAmmoCount == 0 && flag)
					{
						Weapon.EMalfunctionState state = this.\uE02D.MalfState.State;
						if (state == Weapon.EMalfunctionState.Misfire)
						{
							this.\uE02D.MalfState.ChangeStateSilent(Weapon.EMalfunctionState.None);
						}
						\uF190<\uEF07> uF = this.\uE04A.LoadAmmo(this.\uE001.InventoryController, this.\uE001.InventoryController, base.\uE000.CreateItemAddress());
						this.\uE02D.MalfState.ChangeStateSilent(state);
						if (uF.Error != null)
						{
							string str = \uF1F8.\uE000(142061);
							Error error = uF.Error;
							Debug.LogError(str + ((error != null) ? error.ToString() : null));
							return;
						}
						this.\uE06E = (\uEDED)uF.Value.ResultItem;
						\uEF19 uEF = uF.Value as \uEF19;
						if (uEF != null)
						{
							uEF.From.RaiseRemoveEvent(this.\uE06E, CommandStatus.Succeed, this.\uE001.InventoryController);
						}
						if (uF.Value is \uEF21)
						{
							((\uEF21)uF.Value).From.RaiseRemoveEvent(this.\uE06E, CommandStatus.Succeed, this.\uE001.InventoryController);
						}
					}
					if (this.\uE02D.MalfState.State == Weapon.EMalfunctionState.Misfire)
					{
						this.\uE02B.SetLayerWeight(this.\uE02B.MALFUNCTION_LAYER_INDEX, 0);
					}
				}

				// Token: 0x0600936C RID: 37740 RVA: 0x002F97C8 File Offset: 0x002F79C8
				public override void Reset()
				{
					this.\uE06E = null;
					this.\uE059 = false;
					base.Reset();
				}

				// Token: 0x0600936D RID: 37741 RVA: 0x002F97E4 File Offset: 0x002F79E4
				public override void OnMagAppeared()
				{
					base.\uE000 = true;
				}

				// Token: 0x0600936E RID: 37742 RVA: 0x002F97F0 File Offset: 0x002F79F0
				public override void OnAddAmmoInChamber()
				{
					if (this.\uE059)
					{
						return;
					}
					this.\uE059 = true;
					if (this.\uE02D.MalfState.State == Weapon.EMalfunctionState.Misfire && this.\uE06E == null)
					{
						base.\uE000 = true;
						if (!this.CanReload() || this.\uE06B)
						{
							this.SwitchToIdle();
						}
						return;
					}
					if (this.\uE02D.MalfState.State == Weapon.EMalfunctionState.Misfire)
					{
						base.\uE000();
					}
					base.\uE000 = true;
					this.\uE02C.SetRoundIntoWeapon(this.\uE06E, 0);
					this.\uE02B.SetAmmoInChamber((float)this.\uE02D.ChamberAmmoCount);
					this.\uE02B.SetCanReload(this.CanReload());
					this.\uE001.ExecuteSkill(new Action(this.\uE002));
					if (this.CanReload())
					{
						if (!this.\uE06B)
						{
							return;
						}
					}
					this.SwitchToIdle();
				}

				// Token: 0x0600936F RID: 37743 RVA: 0x002F98F8 File Offset: 0x002F7AF8
				public override void OnOnOffBoltCatchEvent(bool isCatched)
				{
					this.\uE02B.SetBoltCatch(isCatched);
				}

				// Token: 0x06009370 RID: 37744 RVA: 0x002F9908 File Offset: 0x002F7B08
				public override void AddAmmoToMag()
				{
					base.\uE000 = true;
					this.\uE06C++;
					this.\uE02B.SetAmmoOnMag(this.\uE06A.Count + this.\uE06C);
					this.\uE001.ExecuteSkill(new Action(this.\uE003));
					if (this.CanReload())
					{
						if (!this.\uE06B)
						{
							return;
						}
					}
					this.SwitchToIdle();
				}

				// Token: 0x06009371 RID: 37745 RVA: 0x002F9984 File Offset: 0x002F7B84
				protected virtual void SwitchToIdle()
				{
					this.\uE02B.SetCanReload(this.CanReload() && !this.\uE06B);
					if (this.\uE02D.MalfState.State == Weapon.EMalfunctionState.Misfire)
					{
						this.\uE02B.SetLayerWeight(this.\uE02B.MALFUNCTION_LAYER_INDEX, 1);
					}
					this.\uE001();
					Action uE = this.\uE022;
					bool uE2 = this.\uE021;
					this.\uE02D.RaiseRefreshEvent(false, true);
					this.State = Player.EOperationState.Finished;
					Player.FirearmController.\uE010 uE3 = this.\uE002.InitiateOperation<Player.FirearmController.\uE010>();
					uE3.Start(null);
					base.\uE001();
					if (uE != null)
					{
						uE3.HideWeapon(uE, uE2, null);
					}
				}

				// Token: 0x06009372 RID: 37746 RVA: 0x002F9A44 File Offset: 0x002F7C44
				private new void \uE001()
				{
					\uEDA2 uE04A = this.\uE04A;
					\uEE67 uE06A = this.\uE06A;
					Weapon uE02D = this.\uE02D;
					int uE06C = this.\uE06C;
					Player uE = this.\uE001;
					uE04A.UnlockItems();
					Player.FirearmController.\uE022.CommitReloadWithAmmo(uE06C, uE04A, uE, uE06A, uE02D);
					this.\uE02B.SetAmmoOnMag(uE06A.Count);
					uE02D.Parent.RaiseRemoveEvent(uE02D, CommandStatus.Failed, this.\uE001.InventoryController);
				}

				// Token: 0x06009373 RID: 37747 RVA: 0x002F9AB8 File Offset: 0x002F7CB8
				public static void CommitReloadWithAmmo(int ammoToLoadIntoMag, \uEDA2 ammoPack, Player player, \uEE67 magazine, Weapon weapon)
				{
					Player.FirearmController.\uE022.\uE000 uE = new Player.FirearmController.\uE022.\uE000();
					uE.player = player;
					uE.weapon = weapon;
					for (int i = 0; i < ammoToLoadIntoMag; i++)
					{
						\uF190<\uEF07> uF = ammoPack.LoadAmmo(uE.player.InventoryController, uE.player.InventoryController, magazine.Cartridges.CreateItemAddress());
						if (uF.Error == null)
						{
							uF.Value.RaiseEvents(uE.player.InventoryController, CommandStatus.Begin);
							uF.Value.RaiseEvents(uE.player.InventoryController, CommandStatus.Succeed);
						}
						else
						{
							string[] array = new string[6];
							array[0] = \uF1F8.\uE000(141573);
							array[1] = ammoPack.AmmoCount.ToString();
							array[2] = \uF1F8.\uE000(141777);
							array[3] = (ammoToLoadIntoMag - i).ToString();
							array[4] = \uF1F8.\uE000(141771);
							int num = 5;
							Error error = uF.Error;
							array[num] = ((error != null) ? error.ToString() : null);
							Debug.LogError(string.Concat(array));
						}
						Player player2 = uE.player;
						Action action;
						if ((action = uE.<>9__0) == null)
						{
							action = (uE.<>9__0 = new Action(uE.\uE000));
						}
						player2.ExecuteSkill(action);
					}
				}

				// Token: 0x06009374 RID: 37748 RVA: 0x002F9C0C File Offset: 0x002F7E0C
				public override void HideWeapon(Action onHidden, bool fastDrop, Item nextControllerItem = null)
				{
					base.HideWeapon(onHidden, fastDrop, null);
					this.\uE06B = true;
				}

				// Token: 0x06009375 RID: 37749 RVA: 0x002F9C20 File Offset: 0x002F7E20
				public override void FastForward()
				{
					if (this.State == Player.EOperationState.Finished)
					{
						return;
					}
					this.\uE06B = true;
					if (this.\uE06E != null)
					{
						this.OnAddAmmoInChamber();
						if (this.\uE02D.IsBoltCatch)
						{
							this.OnOnOffBoltCatchEvent(false);
						}
					}
					if (this.State != Player.EOperationState.Finished)
					{
						this.SwitchToIdle();
					}
				}

				// Token: 0x06009376 RID: 37750 RVA: 0x002F9C88 File Offset: 0x002F7E88
				[CompilerGenerated]
				private new void \uE002()
				{
					this.\uE001.Skills.WeaponChamberAction.Complete(this.\uE02D, 1f);
				}

				// Token: 0x06009377 RID: 37751 RVA: 0x002F9CAC File Offset: 0x002F7EAC
				[CompilerGenerated]
				private void \uE003()
				{
					this.\uE001.Skills.RaidLoadedAmmoAction.Complete(1f);
				}

				// Token: 0x040086C5 RID: 34501
				private \uEDED \uE06E;

				// Token: 0x040086C6 RID: 34502
				private bool \uE059;

				// Token: 0x020016D9 RID: 5849
				[CompilerGenerated]
				private new sealed class \uE000
				{
					// Token: 0x06009379 RID: 37753 RVA: 0x002F9CD0 File Offset: 0x002F7ED0
					internal void \uE000()
					{
						this.player.Skills.WeaponReloadAction.Complete(this.weapon, 1f);
					}

					// Token: 0x040086C7 RID: 34503
					public Player player;

					// Token: 0x040086C8 RID: 34504
					public Weapon weapon;

					// Token: 0x040086C9 RID: 34505
					public Action <>9__0;
				}
			}

			// Token: 0x020016DA RID: 5850
			public class \uE023 : Player.FirearmController.\uE021
			{
				// Token: 0x0600937A RID: 37754 RVA: 0x002F9CF4 File Offset: 0x002F7EF4
				public \uE023(Player.FirearmController controller) : base(controller)
				{
				}

				// Token: 0x0600937B RID: 37755 RVA: 0x002F9D00 File Offset: 0x002F7F00
				public override void Start(\uEDA2 ammoPack, Callback callback)
				{
					base.Start(ammoPack, callback);
					this.\uE000();
					if (this.\uE02D.MalfState.State == Weapon.EMalfunctionState.Misfire)
					{
						this.\uE02B.SetLayerWeight(this.\uE02B.MALFUNCTION_LAYER_INDEX, 0);
					}
				}

				// Token: 0x0600937C RID: 37756 RVA: 0x002F9D50 File Offset: 0x002F7F50
				public override void Reset()
				{
					this.\uE056 = null;
					this.\uE059 = false;
					this.\uE058 = false;
					base.Reset();
				}

				// Token: 0x0600937D RID: 37757 RVA: 0x002F9D74 File Offset: 0x002F7F74
				private new void \uE000()
				{
					if (this.\uE02D.ChamberAmmoCount != 0)
					{
						this.\uE056 = base.\uE000.ContainedItem;
						if (this.\uE056 == null)
						{
							Debug.LogError(\uF1F8.\uE000(141407));
							return;
						}
						Weapon.EMalfunctionState state = this.\uE02D.MalfState.State;
						if (this.\uE02D.MalfState.State == Weapon.EMalfunctionState.Misfire)
						{
							this.\uE02D.MalfState.ChangeStateSilent(Weapon.EMalfunctionState.None);
						}
						bool succeeded = \uEF02.Remove(this.\uE056, this.\uE001.InventoryController, false).Succeeded;
						if (state == Weapon.EMalfunctionState.Misfire)
						{
							this.\uE02D.MalfState.ChangeStateSilent(state);
						}
					}
				}

				// Token: 0x0600937E RID: 37758 RVA: 0x002F9E40 File Offset: 0x002F8040
				public override void RemoveAmmoFromChamber()
				{
					if (this.\uE058)
					{
						return;
					}
					this.\uE058 = true;
					this.\uE02C.RemovePatronInWeapon(0);
					this.\uE02B.SetAmmoInChamber(0f);
					this.\uE02C.ThrowPatronAsLoot(this.\uE056, this.\uE001, \uF1F8.\uE000(141326));
				}

				// Token: 0x0600937F RID: 37759 RVA: 0x002F9EA0 File Offset: 0x002F80A0
				public override void OnOnOffBoltCatchEvent(bool isCatched)
				{
					this.\uE02B.SetBoltCatch(isCatched);
				}

				// Token: 0x06009380 RID: 37760 RVA: 0x002F9EB0 File Offset: 0x002F80B0
				public override void AddAmmoToMag()
				{
					this.\uE02C.DestroyPatronInWeapon(0);
					base.\uE000 = true;
					this.\uE06C++;
					this.\uE02B.SetAmmoOnMag(this.\uE06A.Count + this.\uE06C);
					this.\uE001.ExecuteSkill(new Action(this.\uE001));
					this.\uE02B.SetCanReload(this.CanReload() && !this.\uE06B);
				}

				// Token: 0x06009381 RID: 37761 RVA: 0x002F9F40 File Offset: 0x002F8140
				public override void OnAddAmmoInChamber()
				{
					if (this.\uE059)
					{
						return;
					}
					this.\uE059 = true;
					base.\uE000 = true;
					if (this.\uE02D.MalfState.State == Weapon.EMalfunctionState.Misfire)
					{
						base.\uE000();
						this.\uE02B.SetAmmoInChamber((float)this.\uE02D.ChamberAmmoCount);
					}
					this.SwitchToIdle();
				}

				// Token: 0x06009382 RID: 37762 RVA: 0x002F9FA8 File Offset: 0x002F81A8
				protected virtual void SwitchToIdle()
				{
					this.\uE04A.UnlockItems();
					Player.FirearmController.\uE023.CommitReloadWithAmmo(this.\uE06C, this.\uE04A, this.\uE001, this.\uE06A, this.\uE02D);
					this.\uE001.InventoryController.RaiseRemoveEvent(new \uEED9(this.\uE02D, this.\uE02D.Parent, CommandStatus.Failed, this.\uE001.InventoryController));
					this.\uE02C.DestroyPatronInWeapon(0);
					if (base.\uE000.ContainedItem != null)
					{
						this.\uE02C.SetRoundIntoWeapon((\uEDED)base.\uE000.ContainedItem, 0);
					}
					this.\uE02B.SetAmmoOnMag(this.\uE06A.Count);
					this.\uE02B.SetAmmoInChamber((float)this.\uE02D.ChamberAmmoCount);
					this.\uE02B.SetCanReload(false);
					Action uE = this.\uE022;
					bool uE2 = this.\uE021;
					this.\uE02D.RaiseRefreshEvent(false, true);
					this.State = Player.EOperationState.Finished;
					Player.FirearmController.\uE010 uE3 = this.\uE002.InitiateOperation<Player.FirearmController.\uE010>();
					uE3.Start(null);
					base.\uE001();
					if (uE != null)
					{
						uE3.HideWeapon(uE, uE2, null);
					}
				}

				// Token: 0x06009383 RID: 37763 RVA: 0x002FA0F4 File Offset: 0x002F82F4
				public static void CommitReloadWithAmmo(int ammoToLoadIntoMag, \uEDA2 ammoPack, Player player, \uEE67 magazine, Weapon weapon)
				{
					Player.FirearmController.\uE023.\uE000 uE = new Player.FirearmController.\uE023.\uE000();
					uE.player = player;
					uE.weapon = weapon;
					for (int i = 0; i < ammoToLoadIntoMag; i++)
					{
						\uF190<\uEF07> uF = ammoPack.LoadAmmo(uE.player.InventoryController, uE.player.InventoryController, magazine.Cartridges.CreateItemAddress());
						if (uF.Succeeded)
						{
							uF.Value.RaiseEvents(uE.player.InventoryController, CommandStatus.Begin);
							uF.Value.RaiseEvents(uE.player.InventoryController, CommandStatus.Succeed);
							Player player2 = uE.player;
							Action action;
							if ((action = uE.<>9__0) == null)
							{
								action = (uE.<>9__0 = new Action(uE.\uE000));
							}
							player2.ExecuteSkill(action);
						}
						else
						{
							string[] array = new string[6];
							array[0] = \uF1F8.\uE000(141573);
							array[1] = ammoPack.AmmoCount.ToString();
							array[2] = \uF1F8.\uE000(141777);
							array[3] = (ammoToLoadIntoMag - i).ToString();
							array[4] = \uF1F8.\uE000(141771);
							int num = 5;
							Error error = uF.Error;
							array[num] = ((error != null) ? error.ToString() : null);
							Debug.LogError(string.Concat(array));
						}
					}
					if (ammoToLoadIntoMag > 0 && uE.weapon.ChamberAmmoCount == 0)
					{
						if (magazine.IsAmmoCompatible(uE.weapon.Chambers))
						{
							\uF190<\uEF07> uF2 = magazine.Cartridges.PopTo(uE.player.InventoryController, uE.weapon.Chambers[0].CreateItemAddress());
							if (uF2.Failed)
							{
								string str = \uF1F8.\uE000(141515);
								Error error2 = uF2.Error;
								Debug.LogError(str + ((error2 != null) ? error2.ToString() : null));
							}
						}
						uE.player.ExecuteSkill(new Action(uE.\uE001));
					}
				}

				// Token: 0x06009384 RID: 37764 RVA: 0x002FA2E8 File Offset: 0x002F84E8
				public override void HideWeapon(Action onHidden, bool fastDrop, Item nextControllerItem = null)
				{
					base.HideWeapon(onHidden, fastDrop, null);
					this.\uE06B = true;
				}

				// Token: 0x06009385 RID: 37765 RVA: 0x002FA2FC File Offset: 0x002F84FC
				public override void OnShowAmmo(bool value)
				{
					if (value)
					{
						\uEDED ammoToReload = this.\uE04A.GetAmmoToReload(this.\uE06C);
						if (ammoToReload != null)
						{
							this.\uE02C.SetRoundIntoWeapon(ammoToReload, 0);
						}
					}
				}

				// Token: 0x06009386 RID: 37766 RVA: 0x002FA338 File Offset: 0x002F8538
				public override void FastForward()
				{
					if (this.State == Player.EOperationState.Finished)
					{
						return;
					}
					if (this.\uE056 != null)
					{
						this.RemoveAmmoFromChamber();
					}
					this.OnAddAmmoInChamber();
					if (this.\uE02D.IsBoltCatch)
					{
						this.OnOnOffBoltCatchEvent(false);
					}
					if (this.State != Player.EOperationState.Finished)
					{
						this.SwitchToIdle();
					}
				}

				// Token: 0x06009387 RID: 37767 RVA: 0x002FA39C File Offset: 0x002F859C
				[CompilerGenerated]
				private new void \uE001()
				{
					this.\uE001.Skills.RaidLoadedAmmoAction.Complete(1f);
				}

				// Token: 0x040086CA RID: 34506
				private Item \uE056;

				// Token: 0x040086CB RID: 34507
				private bool \uE059;

				// Token: 0x040086CC RID: 34508
				private bool \uE058;

				// Token: 0x020016DB RID: 5851
				[CompilerGenerated]
				private new sealed class \uE000
				{
					// Token: 0x06009389 RID: 37769 RVA: 0x002FA3C0 File Offset: 0x002F85C0
					internal void \uE000()
					{
						this.player.Skills.WeaponReloadAction.Complete(this.weapon, 1f);
					}

					// Token: 0x0600938A RID: 37770 RVA: 0x002FA3E4 File Offset: 0x002F85E4
					internal void \uE001()
					{
						this.player.Skills.WeaponChamberAction.Complete(this.weapon, 1f);
					}

					// Token: 0x040086CD RID: 34509
					public Player player;

					// Token: 0x040086CE RID: 34510
					public Weapon weapon;

					// Token: 0x040086CF RID: 34511
					public Action <>9__0;
				}
			}

			// Token: 0x020016DC RID: 5852
			public class \uE024 : Player.FirearmController.\uE003
			{
				// Token: 0x0600938B RID: 37771 RVA: 0x002FA408 File Offset: 0x002F8608
				public \uE024(Player.FirearmController controller) : base(controller)
				{
				}

				// Token: 0x0600938C RID: 37772 RVA: 0x002FA414 File Offset: 0x002F8614
				public virtual void Start(Player.FirearmController.\uE026 reloadMultiBarrelResult, Callback callback)
				{
					base.Start(callback);
					this.\uE06F = reloadMultiBarrelResult;
					this.\uE06F.RaiseEvents(this.\uE001.InventoryController, CommandStatus.Begin);
					this.\uE071 = this.\uE02D.ShellsInWeaponCount;
					this.\uE000();
					base.\uE001();
					this.\uE02B.SetCanReload(true);
					this.\uE02B.Reload(true);
					this.\uE02B.SetShellsInWeapon(this.\uE02D.ShellsInWeaponCount);
					this.\uE02B.SetAmmoInChamber((float)this.\uE02D.ChamberAmmoCount);
					this.\uE001.Say(EPhraseTrigger.OnWeaponReload, false, 0f, (ETagStatus)0, 100, false);
				}

				// Token: 0x0600938D RID: 37773 RVA: 0x002FA4D8 File Offset: 0x002F86D8
				private new void \uE000()
				{
					int num = 0;
					foreach (Player.FirearmController.\uE025 uE in this.\uE06F.ChambersForReloading)
					{
						num++;
						this.\uE02B.SetChamberIndexForLoadUnloadAmmo((float)uE.ChamberIndex);
					}
					if (num == this.\uE06F.ChambersInWeaponTotal)
					{
						this.\uE02B.SetChamberIndexForLoadUnloadAmmo((float)num);
					}
				}

				// Token: 0x0600938E RID: 37774 RVA: 0x002FA568 File Offset: 0x002F8768
				public override void Reset()
				{
					this.\uE071 = 0;
					this.\uE070 = false;
					this.\uE066 = false;
					this.\uE06F = null;
					base.Reset();
				}

				// Token: 0x0600938F RID: 37775 RVA: 0x002FA598 File Offset: 0x002F8798
				public override void FastForward()
				{
					if (this.\uE070)
					{
						return;
					}
					this.OnRemoveShellEvent();
					this.OnShellEjectEvent();
					this.OnAddAmmoInChamber();
				}

				// Token: 0x06009390 RID: 37776 RVA: 0x002FA5BC File Offset: 0x002F87BC
				public override void RemoveAmmoFromChamber()
				{
					this.\uE02B.SetAmmoInChamber((float)this.\uE02D.ChamberAmmoCount);
				}

				// Token: 0x06009391 RID: 37777 RVA: 0x002FA5D8 File Offset: 0x002F87D8
				public override void OnRemoveShellEvent()
				{
					for (int i = 0; i < this.\uE02D.ShellsInChambers.Length; i++)
					{
						this.\uE02D.ShellsInChambers[i] = null;
					}
					this.\uE02C.RemoveAllShells();
					this.\uE02B.SetShellsInWeapon(this.\uE02D.ShellsInWeaponCount);
				}

				// Token: 0x06009392 RID: 37778 RVA: 0x002FA63C File Offset: 0x002F883C
				public override void OnShellEjectEvent()
				{
					this.\uE02B.SetCanReload(true);
					IEnumerable<Player.FirearmController.\uE025> chambersForReloading = this.\uE06F.ChambersForReloading;
					bool discardOldAmmo = this.\uE06F.DiscardOldAmmo;
					foreach (Player.FirearmController.\uE025 uE in chambersForReloading)
					{
						if (uE.OldAmmoResult != null)
						{
							if (discardOldAmmo)
							{
								\uEDED uEDED = (\uEDED)uE.OldAmmoResult.Item;
								if (!uEDED.IsUsed)
								{
									this.\uE02C.RemovePatronInWeapon(uE.ChamberIndex);
									this.\uE02C.ThrowPatronAsLoot(uEDED, this.\uE001, \uF1F8.\uE000(141480));
								}
							}
							else
							{
								this.\uE02C.DestroyPatronInWeapon(uE.ChamberIndex);
							}
						}
					}
					if (this.\uE071 > 0)
					{
						this.\uE02C.StartSpawnAllShells(this.\uE001.Velocity * 0.33f);
					}
					this.\uE02B.SetAmmoInChamber((float)this.\uE02D.ChamberAmmoCount);
				}

				// Token: 0x06009393 RID: 37779 RVA: 0x002FA768 File Offset: 0x002F8968
				public override void OnAddAmmoInChamber()
				{
					if (this.\uE066)
					{
						return;
					}
					this.\uE070 = true;
					this.\uE066 = true;
					this.\uE02B.SetAmmoInChamber((float)this.\uE02D.ChamberAmmoCount);
				}

				// Token: 0x06009394 RID: 37780 RVA: 0x002FA7A0 File Offset: 0x002F89A0
				public override void AddAmmoToMag()
				{
					this.\uE06F.RaiseEvents(this.\uE001.InventoryController, CommandStatus.Succeed);
					this.State = Player.EOperationState.Finished;
					this.\uE02B.SetCanReload(false);
					Action uE = this.\uE022;
					bool uE2 = this.\uE021;
					this.\uE02D.RaiseRefreshEvent(false, true);
					Player.FirearmController.\uE010 uE3 = this.\uE002.InitiateOperation<Player.FirearmController.\uE010>();
					uE3.Start(null);
					base.\uE001();
					if (uE != null)
					{
						uE3.HideWeapon(uE, uE2, null);
					}
				}

				// Token: 0x06009395 RID: 37781 RVA: 0x002FA82C File Offset: 0x002F8A2C
				public override void OnMagAppeared()
				{
					foreach (Player.FirearmController.\uE025 uE in this.\uE06F.ChambersForReloading)
					{
						this.\uE02C.SetRoundIntoWeapon((\uEDED)uE.InsertResult.ResultItem, uE.ChamberIndex);
					}
				}

				// Token: 0x06009396 RID: 37782 RVA: 0x002FA8A0 File Offset: 0x002F8AA0
				public override void HideWeapon(Action onHidden, bool fastDrop, Item nextControllerItem = null)
				{
					this.FastForward();
					this.\uE002.InitiateOperation<Player.FirearmController.\uE02A>().Start(onHidden, fastDrop, nextControllerItem);
				}

				// Token: 0x040086D0 RID: 34512
				private Player.FirearmController.\uE026 \uE06F;

				// Token: 0x040086D1 RID: 34513
				private bool \uE066;

				// Token: 0x040086D2 RID: 34514
				private bool \uE070;

				// Token: 0x040086D3 RID: 34515
				private int \uE071;
			}

			// Token: 0x020016DD RID: 5853
			public sealed class \uE025
			{
				// Token: 0x06009397 RID: 37783 RVA: 0x002FA8BC File Offset: 0x002F8ABC
				public \uE025(int chamberIndex, \uEF07 oldAmmoResult, \uEF07 insertResult)
				{
					this.ChamberIndex = chamberIndex;
					this.OldAmmoResult = oldAmmoResult;
					this.InsertResult = insertResult;
				}

				// Token: 0x06009398 RID: 37784 RVA: 0x002FA8E0 File Offset: 0x002F8AE0
				public void RaiseEvents(\uEEFC controller, CommandStatus status)
				{
					\uEF07 oldAmmoResult = this.OldAmmoResult;
					if (oldAmmoResult != null)
					{
						oldAmmoResult.RaiseEvents(controller, status);
					}
					this.InsertResult.RaiseEvents(controller, status);
				}

				// Token: 0x06009399 RID: 37785 RVA: 0x002FA904 File Offset: 0x002F8B04
				public bool CheckAction()
				{
					\uEF07 oldAmmoResult = this.OldAmmoResult;
					return oldAmmoResult != null && oldAmmoResult.Item.CheckAction(null).Succeeded && this.InsertResult.ResultItem.CheckAction(null).Succeeded;
				}

				// Token: 0x0600939A RID: 37786 RVA: 0x002FA95C File Offset: 0x002F8B5C
				public void RollBack()
				{
					\uEF07 oldAmmoResult = this.OldAmmoResult;
					if (oldAmmoResult != null)
					{
						oldAmmoResult.RollBack();
					}
					this.InsertResult.RollBack();
				}

				// Token: 0x040086D4 RID: 34516
				public readonly int ChamberIndex;

				// Token: 0x040086D5 RID: 34517
				public readonly \uEF07 OldAmmoResult;

				// Token: 0x040086D6 RID: 34518
				public readonly \uEF07 InsertResult;
			}

			// Token: 0x020016DE RID: 5854
			public sealed class \uE026
			{
				// Token: 0x0600939B RID: 37787 RVA: 0x002FA97C File Offset: 0x002F8B7C
				private \uE026(\uEEFC itemController, \uEDA2 ammoPackToLoad, Weapon weapon, int chambersInWeaponTotal, ItemAddress placeToPutContainedAmmo, IReadOnlyCollection<Player.FirearmController.\uE025> chambersForReloading, bool discardOldAmmo)
				{
					this.ItemController = itemController;
					this.AmmoPackToLoad = ammoPackToLoad;
					this.Weapon = weapon;
					this.ChambersInWeaponTotal = chambersInWeaponTotal;
					this.PlaceToPutContainedAmmo = placeToPutContainedAmmo;
					this.ChambersForReloading = chambersForReloading;
					this.DiscardOldAmmo = discardOldAmmo;
				}

				// Token: 0x0600939C RID: 37788 RVA: 0x002FA9D8 File Offset: 0x002F8BD8
				public static \uF192<Player.FirearmController.\uE026> Run(\uEEF6 idGenerator, \uEEFC itemController, Weapon weapon, \uEDA2 ammoPack, ItemAddress placeToPutContainedAmmo)
				{
					int num = weapon.Chambers.Length;
					if (num == 0)
					{
						return default(\uF192<Player.FirearmController.\uE026>).Error;
					}
					bool flag = placeToPutContainedAmmo == null;
					List<Player.FirearmController.\uE025> list = new List<Player.FirearmController.\uE025>();
					int num2 = 0;
					for (int i = 0; i < num; i++)
					{
						Slot slot = weapon.Chambers[i];
						\uEDED uEDED = slot.ContainedItem as \uEDED;
						if (uEDED == null || uEDED.IsUsed)
						{
							\uEDED ammoToReload = ammoPack.GetAmmoToReload(num2);
							if (ammoToReload == null)
							{
								IL_144:
								return new Player.FirearmController.\uE026(itemController, ammoPack, weapon, num, placeToPutContainedAmmo, list, flag);
							}
							int stackObjectsCount = ammoToReload.StackObjectsCount;
							ItemAddress to = slot.CreateItemAddress();
							\uF190<\uEF07> uF = default(\uF190<\uEF07>);
							if (uEDED != null)
							{
								uF = (flag ? \uEF02.Remove(uEDED, itemController, false).Cast<\uEF18, \uEF07>() : \uEF02.Move(uEDED, placeToPutContainedAmmo, itemController, false).Cast<\uEF19, \uEF07>());
								if (uF.Failed)
								{
									goto IL_120;
								}
							}
							\uF190<\uEF07> uF2 = \uEF02.ApplySingleItemToAddress(ammoToReload, idGenerator, itemController, to);
							if (uF2.Failed)
							{
								\uEF07 value = uF.Value;
								if (value != null)
								{
									value.RollBack();
								}
							}
							else
							{
								Player.FirearmController.\uE025 item = new Player.FirearmController.\uE025(i, uF.Value, uF2.Value);
								list.Add(item);
								if (stackObjectsCount <= 1)
								{
									num2++;
								}
							}
						}
						IL_120:;
					}
					goto IL_144;
				}

				// Token: 0x0600939D RID: 37789 RVA: 0x002FAB3C File Offset: 0x002F8D3C
				public void RollBack()
				{
					foreach (Player.FirearmController.\uE025 uE in this.ChambersForReloading)
					{
						uE.RollBack();
					}
				}

				// Token: 0x0600939E RID: 37790 RVA: 0x002FAB88 File Offset: 0x002F8D88
				public void RaiseEvents(\uEEFC controller, CommandStatus status)
				{
					if (this.ChambersForReloading.Count == 0)
					{
						return;
					}
					this.Weapon.Parent.RaiseRemoveEvent(this.Weapon, (status == CommandStatus.Begin) ? CommandStatus.Begin : CommandStatus.Failed, controller);
					foreach (Player.FirearmController.\uE025 uE in this.ChambersForReloading)
					{
						uE.RaiseEvents(controller, status);
					}
				}

				// Token: 0x0600939F RID: 37791 RVA: 0x002FAC00 File Offset: 0x002F8E00
				public bool CanExecute(\uEEFC itemController)
				{
					if (this.Weapon.CheckAction(null).Failed)
					{
						return false;
					}
					using (IEnumerator<Player.FirearmController.\uE025> enumerator = this.ChambersForReloading.GetEnumerator())
					{
						while (enumerator.MoveNext())
						{
							if (enumerator.Current.CheckAction())
							{
								return true;
							}
						}
					}
					return false;
				}

				// Token: 0x040086D7 RID: 34519
				public readonly \uEEFC ItemController;

				// Token: 0x040086D8 RID: 34520
				public readonly \uEDA2 AmmoPackToLoad;

				// Token: 0x040086D9 RID: 34521
				public readonly Weapon Weapon;

				// Token: 0x040086DA RID: 34522
				public readonly ItemAddress PlaceToPutContainedAmmo;

				// Token: 0x040086DB RID: 34523
				public readonly IReadOnlyCollection<Player.FirearmController.\uE025> ChambersForReloading;

				// Token: 0x040086DC RID: 34524
				public readonly int ChambersInWeaponTotal;

				// Token: 0x040086DD RID: 34525
				public readonly bool DiscardOldAmmo;
			}

			// Token: 0x020016DF RID: 5855
			public class \uE027 : Player.FirearmController.\uE003
			{
				// Token: 0x060093A0 RID: 37792 RVA: 0x002FAC74 File Offset: 0x002F8E74
				public \uE027(Player.FirearmController controller) : base(controller)
				{
				}

				// Token: 0x060093A1 RID: 37793 RVA: 0x002FAC80 File Offset: 0x002F8E80
				public virtual void Start(Player.FirearmController.\uE028 reloadSingleBarrelResult, Callback callback)
				{
					base.Start(callback);
					this.\uE072 = reloadSingleBarrelResult;
					this.\uE072.RaiseEvents(this.\uE001.InventoryController, CommandStatus.Begin);
					this.\uE02B.SetShellsInWeapon(this.\uE02D.ShellsInWeaponCount);
					this.\uE02B.SetAmmoInChamber((float)(reloadSingleBarrelResult.HasOldAmmoInChamber ? this.\uE02D.ChamberAmmoCount : 0));
					this.\uE02B.SetCanReload(true);
					this.\uE02B.Reload(true);
					if (reloadSingleBarrelResult.HasOldAmmoInChamber)
					{
						for (int i = 0; i < this.\uE02D.ShellsInChambers.Length; i++)
						{
							this.\uE02D.ShellsInChambers[i] = null;
						}
					}
					this.\uE001.Say(EPhraseTrigger.OnWeaponReload, false, 0f, (ETagStatus)0, 100, false);
				}

				// Token: 0x060093A2 RID: 37794 RVA: 0x002FAD68 File Offset: 0x002F8F68
				public override void Reset()
				{
					this.\uE072 = null;
					base.Reset();
				}

				// Token: 0x060093A3 RID: 37795 RVA: 0x002FAD78 File Offset: 0x002F8F78
				public override void RemoveAmmoFromChamber()
				{
					this.\uE02B.SetAmmoInChamber((float)this.\uE02D.ChamberAmmoCount);
				}

				// Token: 0x060093A4 RID: 37796 RVA: 0x002FAD94 File Offset: 0x002F8F94
				public override void OnRemoveShellEvent()
				{
					for (int i = 0; i < this.\uE02D.ShellsInChambers.Length; i++)
					{
						this.\uE02D.ShellsInChambers[i] = null;
					}
					this.\uE02C.RemoveAllShells();
					this.\uE02B.SetShellsInWeapon(this.\uE02D.ShellsInWeaponCount);
				}

				// Token: 0x060093A5 RID: 37797 RVA: 0x002FADF8 File Offset: 0x002F8FF8
				public override void OnShellEjectEvent()
				{
					this.\uE02B.SetCanReload(true);
					if (this.\uE072.HasOldAmmoInChamber)
					{
						if (this.\uE072.DiscardOldAmmoToInventory)
						{
							this.\uE02C.DestroyPatronInWeapon(0);
						}
						else
						{
							\uEDED uEDED = (\uEDED)this.\uE072.OldAmmoResult.Item;
							if (!uEDED.IsUsed)
							{
								this.\uE02C.RemovePatronInWeapon(0);
								this.\uE02C.ThrowPatronAsLoot(uEDED, this.\uE001, \uF1F8.\uE000(145269));
							}
						}
					}
					else if (this.\uE02D.HasShellsInChamberBarrelOnlyWeapon)
					{
						this.\uE02C.StartSpawnShell(this.\uE001.Velocity, 0);
					}
					this.\uE02B.SetAmmoInChamber(0f);
				}

				// Token: 0x060093A6 RID: 37798 RVA: 0x002FAEDC File Offset: 0x002F90DC
				public override void OnAddAmmoInChamber()
				{
					this.\uE02B.SetAmmoInChamber((float)this.\uE02D.ChamberAmmoCount);
					this.\uE072.RaiseEvents(this.\uE001.InventoryController, CommandStatus.Succeed);
					this.State = Player.EOperationState.Finished;
					this.\uE02B.SetCanReload(false);
					Action uE = this.\uE022;
					bool uE2 = this.\uE021;
					this.\uE02D.RaiseRefreshEvent(false, true);
					this.\uE02B.SetInventory(this.\uE002.InventoryOpened);
					Player.FirearmController.\uE010 uE3 = this.\uE002.InitiateOperation<Player.FirearmController.\uE010>();
					uE3.Start(null);
					base.\uE001();
					if (uE != null)
					{
						uE3.HideWeapon(uE, uE2, null);
					}
				}

				// Token: 0x060093A7 RID: 37799 RVA: 0x002FAF9C File Offset: 0x002F919C
				public override void OnMagAppeared()
				{
					this.\uE02C.SetRoundIntoWeapon((\uEDED)this.\uE072.InsertNewAmmoResult.ResultItem, 0);
				}

				// Token: 0x060093A8 RID: 37800 RVA: 0x002FAFC0 File Offset: 0x002F91C0
				public override void FastForward()
				{
					if (this.State == Player.EOperationState.Finished)
					{
						return;
					}
					this.OnRemoveShellEvent();
					this.OnShellEjectEvent();
					this.OnAddAmmoInChamber();
				}

				// Token: 0x060093A9 RID: 37801 RVA: 0x002FAFE4 File Offset: 0x002F91E4
				public override void HideWeapon(Action onHidden, bool fastDrop, Item nextControllerItem = null)
				{
					base.HideWeapon(onHidden, fastDrop, nextControllerItem);
					this.FastForward();
				}

				// Token: 0x040086DE RID: 34526
				protected Player.FirearmController.\uE028 \uE072;
			}

			// Token: 0x020016E0 RID: 5856
			public sealed class \uE028
			{
				// Token: 0x170014C8 RID: 5320
				// (get) Token: 0x060093AA RID: 37802 RVA: 0x002FAFF8 File Offset: 0x002F91F8
				public bool DiscardOldAmmoToInventory
				{
					get
					{
						return this.PlaceToPutContainedAmmoMagazine != null;
					}
				}

				// Token: 0x170014C9 RID: 5321
				// (get) Token: 0x060093AB RID: 37803 RVA: 0x002FB004 File Offset: 0x002F9204
				public bool HasOldAmmoInChamber
				{
					get
					{
						return this.OldAmmoResult != null;
					}
				}

				// Token: 0x170014CA RID: 5322
				// (get) Token: 0x060093AC RID: 37804 RVA: 0x002FB010 File Offset: 0x002F9210
				// (set) Token: 0x060093AD RID: 37805 RVA: 0x002FB018 File Offset: 0x002F9218
				public MongoID AmmoToLoadTemplateId { get; private set; }

				// Token: 0x170014CB RID: 5323
				// (get) Token: 0x060093AE RID: 37806 RVA: 0x002FB024 File Offset: 0x002F9224
				// (set) Token: 0x060093AF RID: 37807 RVA: 0x002FB02C File Offset: 0x002F922C
				public MongoID? AmmoToUnloadTemplateId { get; private set; }

				// Token: 0x060093B0 RID: 37808 RVA: 0x002FB038 File Offset: 0x002F9238
				private \uE028(\uEDED ammoToLoad, [CanBeNull] \uEF07 oldAmmoResult, [NotNull] \uEF07 insertNewAmmoResult, Weapon weapon, ItemAddress placeToPutContainedAmmoMagazine)
				{
					this.\uE001 = ammoToLoad;
					this.\uE000 = weapon;
					this.PlaceToPutContainedAmmoMagazine = placeToPutContainedAmmoMagazine;
					this.OldAmmoResult = oldAmmoResult;
					this.InsertNewAmmoResult = insertNewAmmoResult;
					this.AmmoToLoadTemplateId = this.\uE001.TemplateId;
					\uEF07 oldAmmoResult2 = this.OldAmmoResult;
					this.AmmoToUnloadTemplateId = ((oldAmmoResult2 != null) ? new MongoID?(oldAmmoResult2.ResultItem.TemplateId) : null);
				}

				// Token: 0x060093B1 RID: 37809 RVA: 0x002FB0C0 File Offset: 0x002F92C0
				public static \uF192<Player.FirearmController.\uE028> Run(\uEEF6 idGenerator, \uEEFC itemController, Weapon weapon, \uEDED ammo, ItemAddress placeToPutContainedAmmoMagazine)
				{
					Slot slot = weapon.Chambers[0];
					\uEDED uEDED = slot.ContainedItem as \uEDED;
					ItemAddress to = slot.CreateItemAddress();
					\uF190<\uEF07> uF = default(\uF190<\uEF07>);
					if (uEDED != null)
					{
						uF = ((placeToPutContainedAmmoMagazine == null) ? \uEF02.Remove(uEDED, itemController, false).Cast<\uEF18, \uEF07>() : \uEF02.Move(uEDED, placeToPutContainedAmmoMagazine, itemController, false).Cast<\uEF19, \uEF07>());
						if (uF.Failed)
						{
							return uF.Error;
						}
					}
					\uF190<\uEF07> uF2 = \uEF02.ApplySingleItemToAddress(ammo, idGenerator, itemController, to);
					if (uF2.Failed)
					{
						\uEF07 value = uF.Value;
						if (value != null)
						{
							value.RollBack();
						}
						return uF2.Error;
					}
					return new Player.FirearmController.\uE028(ammo, uF.Value, uF2.Value, weapon, placeToPutContainedAmmoMagazine);
				}

				// Token: 0x060093B2 RID: 37810 RVA: 0x002FB194 File Offset: 0x002F9394
				public void RollBack()
				{
					\uEF07 oldAmmoResult = this.OldAmmoResult;
					if (oldAmmoResult != null)
					{
						oldAmmoResult.RollBack();
					}
					this.InsertNewAmmoResult.RollBack();
				}

				// Token: 0x060093B3 RID: 37811 RVA: 0x002FB1B4 File Offset: 0x002F93B4
				public void RaiseEvents(\uEEFC controller, CommandStatus status)
				{
					this.\uE000.Parent.RaiseRemoveEvent(this.\uE000, (status == CommandStatus.Begin) ? CommandStatus.Begin : CommandStatus.Failed, controller);
					\uEF07 oldAmmoResult = this.OldAmmoResult;
					if (oldAmmoResult != null)
					{
						oldAmmoResult.RaiseEvents(controller, status);
					}
					this.InsertNewAmmoResult.RaiseEvents(controller, status);
				}

				// Token: 0x060093B4 RID: 37812 RVA: 0x002FB208 File Offset: 0x002F9408
				public bool CanExecute(\uEEFC itemController)
				{
					if (this.\uE000.CheckAction(null).Failed)
					{
						return false;
					}
					if (this.OldAmmoResult != null)
					{
						if (this.OldAmmoResult.Item.CheckAction(null).Failed)
						{
							return false;
						}
					}
					return this.\uE001.CheckAction(null).Succeeded;
				}

				// Token: 0x040086DF RID: 34527
				[CanBeNull]
				public readonly \uEF07 OldAmmoResult;

				// Token: 0x040086E0 RID: 34528
				[NotNull]
				public readonly \uEF07 InsertNewAmmoResult;

				// Token: 0x040086E1 RID: 34529
				public readonly ItemAddress PlaceToPutContainedAmmoMagazine;

				// Token: 0x040086E2 RID: 34530
				private readonly Weapon \uE000;

				// Token: 0x040086E3 RID: 34531
				private readonly \uEDED \uE001;

				// Token: 0x040086E4 RID: 34532
				[CompilerGenerated]
				private MongoID \uE002;

				// Token: 0x040086E5 RID: 34533
				[CompilerGenerated]
				private MongoID? \uE003;
			}

			// Token: 0x020016E1 RID: 5857
			public sealed class \uE029 : Player.FirearmController.\uE00A
			{
				// Token: 0x060093B5 RID: 37813 RVA: 0x002FB27C File Offset: 0x002F947C
				public \uE029(Player.FirearmController controller) : base(controller)
				{
				}

				// Token: 0x060093B6 RID: 37814 RVA: 0x002FB288 File Offset: 0x002F9488
				public void Start(Item item, Slot slot, Callback callback)
				{
					this.\uE012 = slot;
					this.\uE000 = callback;
					base.Start();
					this.\uE02B.SetupMod(true);
					this.\uE002.SetAim(false);
					this.\uE02B.SetFire(false);
					this.\uE001.MovementContext.SetBlindFire(0);
				}

				// Token: 0x060093B7 RID: 37815 RVA: 0x002FB2F0 File Offset: 0x002F94F0
				public override void Reset()
				{
					this.\uE012 = null;
					this.\uE000 = null;
					this.\uE013 = false;
					base.Reset();
				}

				// Token: 0x060093B8 RID: 37816 RVA: 0x002FB314 File Offset: 0x002F9514
				public override void FastForward()
				{
					if (this.State == Player.EOperationState.Finished)
					{
						return;
					}
					this.OnModChanged();
				}

				// Token: 0x060093B9 RID: 37817 RVA: 0x002FB328 File Offset: 0x002F9528
				public override void SetAiming(bool isAiming)
				{
					if (!isAiming)
					{
						this.\uE002.IsAiming = false;
					}
				}

				// Token: 0x060093BA RID: 37818 RVA: 0x002FB33C File Offset: 0x002F953C
				public override void OnModChanged()
				{
					if (this.\uE013)
					{
						return;
					}
					this.\uE013 = true;
					this.\uE02C.RemoveMod(this.\uE012);
					this.\uE02B.SetupMod(false);
					this.State = Player.EOperationState.Finished;
					this.\uE002.InitiateOperation<Player.FirearmController.\uE010>().Start(null);
					this.\uE000();
					this.\uE000.Succeed();
					this.\uE02C.ModFinallyRemoved(this.\uE012);
					this.\uE001.BodyAnimatorCommon.SetFloat(PlayerAnimator.WEAPON_SIZE_MODIFIER_PARAM_HASH, (float)this.\uE02D.CalculateCellSize().X);
					this.\uE001.UpdateFirstPersonGrip(GripPose.EGripType.Common, this.\uE002.HandsHierarchy);
					this.\uE002.ClearModAudioController(this.\uE012);
					this.\uE002.WeaponModified();
				}

				// Token: 0x060093BB RID: 37819 RVA: 0x002FB428 File Offset: 0x002F9628
				private new void \uE000()
				{
					if (this.\uE012.ContainedItem is \uEE5D)
					{
						this.\uE002.\uE00A();
					}
				}

				// Token: 0x060093BC RID: 37820 RVA: 0x002FB448 File Offset: 0x002F9648
				public override void SetInventoryOpened(bool opened)
				{
					this.\uE002.InventoryOpened = opened;
					this.\uE02B.SetInventory(opened);
				}

				// Token: 0x060093BD RID: 37821 RVA: 0x002FB464 File Offset: 0x002F9664
				public override bool CanChangeLightState(\uE825[] lightsStates)
				{
					return false;
				}

				// Token: 0x040086E6 RID: 34534
				private Slot \uE012;

				// Token: 0x040086E7 RID: 34535
				private new Callback \uE000;

				// Token: 0x040086E8 RID: 34536
				private bool \uE013;
			}

			// Token: 0x020016E2 RID: 5858
			public sealed class \uE02A : Player.FirearmController.\uE00A
			{
				// Token: 0x060093BE RID: 37822 RVA: 0x002FB468 File Offset: 0x002F9668
				public \uE02A(Player.FirearmController controller) : base(controller)
				{
				}

				// Token: 0x060093BF RID: 37823 RVA: 0x002FB474 File Offset: 0x002F9674
				public void Start(Action onHidden, bool fastDrop = false, Item nextControllerItem = null)
				{
					this.\uE005 = onHidden;
					if (this.\uE001.UsedSimplifiedSkeleton)
					{
						base.Start();
						this.FastForward();
						return;
					}
					this.\uE02D.IsUnderBarrelDeviceActive = false;
					if (this.\uE002.CheckForFastWeaponSwitch(nextControllerItem))
					{
						\uE8FB uE8FB;
						this.\uE001.Skills.WeaponSkills.TryGetValue(this.\uE002.Item.GetType(), out uE8FB);
						this.\uE001.Physical.OnWeaponSwitchFast((uE8FB != null) ? uE8FB.Level : 0);
						this.\uE02B.SetSpeedParameters(1f, this.\uE002.GetWeaponDrawSpeedMultiplier(this.\uE002.Item, true));
						this.\uE001.QuickdrawWeaponFast = true;
						this.\uE001.QuickdrawTime = \uE780.PastTime;
						Action onStartQuickdrawPistol = this.\uE001.OnStartQuickdrawPistol;
						if (onStartQuickdrawPistol != null)
						{
							onStartQuickdrawPistol();
						}
					}
					base.Start();
					this.\uE02B.SetActiveParam(false, true);
					this.\uE02B.SetFastHide(fastDrop);
					this.\uE001.BodyAnimatorCommon.SetFloat(PlayerAnimator.RELOAD_FLOAT_PARAM_HASH, 1f);
				}

				// Token: 0x060093C0 RID: 37824 RVA: 0x002FB5BC File Offset: 0x002F97BC
				protected override void SetLeftStanceAnimOnStartOperation()
				{
					this.\uE001.MovementContext.LeftStanceController.DisableLeftStanceAnimFromHandsAction();
				}

				// Token: 0x060093C1 RID: 37825 RVA: 0x002FB5D4 File Offset: 0x002F97D4
				public override void Reset()
				{
					this.\uE005 = null;
					base.Reset();
				}

				// Token: 0x060093C2 RID: 37826 RVA: 0x002FB5E4 File Offset: 0x002F97E4
				public override void HideWeaponComplete()
				{
					this.State = Player.EOperationState.Finished;
					Action uE = this.\uE005;
					if (uE == null)
					{
						return;
					}
					uE();
				}

				// Token: 0x060093C3 RID: 37827 RVA: 0x002FB600 File Offset: 0x002F9800
				public override void HideWeapon(Action onHidden, bool fastDrop, Item nextControllerItem = null)
				{
					this.\uE005 = (Action)Delegate.Combine(this.\uE005, onHidden);
				}

				// Token: 0x060093C4 RID: 37828 RVA: 0x002FB61C File Offset: 0x002F981C
				public override void FastForward()
				{
					if (this.State != Player.EOperationState.Finished)
					{
						this.HideWeaponComplete();
					}
				}

				// Token: 0x060093C5 RID: 37829 RVA: 0x002FB630 File Offset: 0x002F9830
				public override void OnDropWeapon()
				{
					this.HideWeaponComplete();
				}

				// Token: 0x060093C6 RID: 37830 RVA: 0x002FB638 File Offset: 0x002F9838
				public override bool CanChangeLightState(\uE825[] lightsStates)
				{
					return false;
				}

				// Token: 0x060093C7 RID: 37831 RVA: 0x002FB63C File Offset: 0x002F983C
				public override void BlindFire(int b)
				{
					base.BlindFire(0);
				}

				// Token: 0x040086E9 RID: 34537
				private Action \uE005;
			}

			// Token: 0x020016E3 RID: 5859
			public sealed class \uE02B
			{
				// Token: 0x060093C8 RID: 37832 RVA: 0x002FB648 File Offset: 0x002F9848
				private \uE02B(\uEEFC itemController, \uEF07 popNewAmmoResult, Weapon weapon, bool ammoCompatible)
				{
					this.AmmoCompatible = ammoCompatible;
					this.ItemController = itemController;
					this.Weapon = weapon;
					this.PopNewAmmoResult = popNewAmmoResult;
				}

				// Token: 0x060093C9 RID: 37833 RVA: 0x002FB67C File Offset: 0x002F987C
				public void RollBack()
				{
					\uEF07 popNewAmmoResult = this.PopNewAmmoResult;
					if (popNewAmmoResult == null)
					{
						return;
					}
					popNewAmmoResult.RollBack();
				}

				// Token: 0x060093CA RID: 37834 RVA: 0x002FB690 File Offset: 0x002F9890
				public void RaiseEvents(\uEEFC controller, CommandStatus status)
				{
					this.Weapon.Parent.RaiseRemoveEvent(this.Weapon, (status == CommandStatus.Begin) ? CommandStatus.Begin : CommandStatus.Failed, controller);
					\uEF07 popNewAmmoResult = this.PopNewAmmoResult;
					if (popNewAmmoResult == null)
					{
						return;
					}
					popNewAmmoResult.RaiseEvents(controller, status);
				}

				// Token: 0x060093CB RID: 37835 RVA: 0x002FB6C4 File Offset: 0x002F98C4
				public static \uF192<Player.FirearmController.\uE02B> Run(\uEEFC itemController, Weapon weapon)
				{
					Slot slot = weapon.HasChambers ? weapon.Chambers[0] : null;
					\uEE67 currentMagazine = weapon.GetCurrentMagazine();
					bool flag = currentMagazine.IsAmmoCompatible(weapon.Chambers);
					if (slot != null && slot.ContainedItem == null)
					{
						if (flag)
						{
							\uF190<\uEF07> uF = currentMagazine.Cartridges.PopTo(itemController, slot.CreateItemAddress());
							if (uF.Failed)
							{
								return uF.Error;
							}
							return new Player.FirearmController.\uE02B(itemController, uF.Value, weapon, flag);
						}
					}
					return default(\uF192<\uEF19>).Error;
				}

				// Token: 0x060093CC RID: 37836 RVA: 0x002FB770 File Offset: 0x002F9970
				public bool CanExecute(\uEEFC itemController)
				{
					return this.Weapon.CheckAction(null).Succeeded;
				}

				// Token: 0x040086EA RID: 34538
				public readonly \uEEFC ItemController;

				// Token: 0x040086EB RID: 34539
				public readonly Weapon Weapon;

				// Token: 0x040086EC RID: 34540
				public readonly bool AmmoCompatible;

				// Token: 0x040086ED RID: 34541
				public readonly \uEF07 PopNewAmmoResult;
			}

			// Token: 0x020016E4 RID: 5860
			public class \uE02C : Player.FirearmController.\uE01A
			{
				// Token: 0x060093CD RID: 37837 RVA: 0x002FB794 File Offset: 0x002F9994
				public \uE02C(Player.FirearmController controller) : base(controller)
				{
				}

				// Token: 0x060093CE RID: 37838 RVA: 0x002FB7A0 File Offset: 0x002F99A0
				public override void Start()
				{
					base.Start();
					this.\uE001.StopBlindFire();
					this.\uE02B.MalfunctionRepair(true);
					this.\uE02B.SetLayerWeight(this.\uE02B.MALFUNCTION_LAYER_INDEX, 0);
					this.\uE02B.Malfunction((int)this.\uE02D.MalfState.State);
					this.\uE001.BodyAnimatorCommon.SetFloat(PlayerAnimator.RELOAD_FLOAT_PARAM_HASH, 1f);
					float num = 1f;
					float fixSpeed = this.\uE002.\uE016.FixSpeed;
					bool flag = this.\uE002._player.MovementContext.PhysicalConditionIs(EPhysicalCondition.LeftArmDamaged);
					bool flag2 = this.\uE002._player.MovementContext.PhysicalConditionIs(EPhysicalCondition.RightArmDamaged);
					\uE714.\uE00A malfunction = Singleton<\uE714>.Instance.Malfunction;
					float num2 = (this.\uE02D.MalfState.State == Weapon.EMalfunctionState.HardSlide) ? malfunction.MalfRepairHardSlideMult : 1f;
					if (flag && flag2)
					{
						num = malfunction.MalfRepairTwoHandsBrokenMult;
					}
					else if (flag || flag2)
					{
						num = malfunction.MalfRepairOneHandBrokenMult;
					}
					this.\uE02B.SetMalfRepairSpeed(fixSpeed * num * num2);
					this.\uE001.MovementContext.PlayerAnimator.\uE001(fixSpeed * num * num2);
					this.\uE001.ExecuteSkill(new Action(this.\uE000));
					this.\uE001.InventoryController.RaiseEvent(new \uEEDB(this.\uE02D, CommandStatus.Begin, this.\uE001.InventoryController));
					this.\uE074 = this.\uE02D.MalfState.State;
					this.\uE02D.MalfState.Repair();
				}

				// Token: 0x060093CF RID: 37839 RVA: 0x002FB95C File Offset: 0x002F9B5C
				public override void FastForward()
				{
					this.OnAddAmmoInChamber();
					this.OnShellEjectEvent();
					this.OnMalfunctionOffEvent();
				}

				// Token: 0x060093D0 RID: 37840 RVA: 0x002FB978 File Offset: 0x002F9B78
				public override void SetTriggerPressed(bool pressed)
				{
					this.\uE02B.SetFire(pressed);
				}

				// Token: 0x060093D1 RID: 37841 RVA: 0x002FB988 File Offset: 0x002F9B88
				public override void Reset()
				{
					base.Reset();
					this.\uE073 = false;
					this.\uE05A = false;
				}

				// Token: 0x060093D2 RID: 37842 RVA: 0x002FB9A4 File Offset: 0x002F9BA4
				public override void OnOnOffBoltCatchEvent(bool isCatched)
				{
					if (!isCatched)
					{
						Debug.LogError(string.Format(\uF1F8.\uE000(145223), isCatched));
					}
					if (isCatched)
					{
						if (this.\uE02D.ChamberAmmoCount == 1)
						{
							return;
						}
					}
					this.\uE02B.SetBoltCatch(isCatched);
				}

				// Token: 0x060093D3 RID: 37843 RVA: 0x002FB9F4 File Offset: 0x002F9BF4
				public override void OnIdleStartEvent()
				{
				}

				// Token: 0x060093D4 RID: 37844 RVA: 0x002FB9F8 File Offset: 0x002F9BF8
				public override void RemoveAmmoFromChamber()
				{
					this.\uE02B.SetAmmoInChamber((float)this.\uE02D.ChamberAmmoCount);
					if (this.\uE074 == Weapon.EMalfunctionState.Jam)
					{
						this.\uE02C.SetupPatronInWeaponForJam(0);
						return;
					}
					if (this.\uE074 == Weapon.EMalfunctionState.Feed)
					{
						this.\uE02C.RemoveShellInWeapon(0);
					}
					this.\uE02C.CreatePatronInShellPort(this.\uE039, 0);
				}

				// Token: 0x060093D5 RID: 37845 RVA: 0x002FBA68 File Offset: 0x002F9C68
				public override void OnAddAmmoInChamber()
				{
					bool flag = this.\uE02D.GetCurrentMagazine() != null;
					bool flag2 = flag && this.\uE02D.GetCurrentMagazine().Count > 0;
					if (flag && this.\uE02D.GetCurrentMagazine().IsAmmoCompatible(this.\uE02D.Chambers) && flag && flag2 && this.\uE02D.HasChambers && this.\uE02D.Chambers[0].ContainedItem == null)
					{
						\uF192<Player.FirearmController.\uE02B> uF = Player.FirearmController.\uE02B.Run(this.\uE002._player.InventoryController, this.\uE002.Item);
						if (uF.Error != null)
						{
							string str = \uF1F8.\uE000(145181);
							Error error = uF.Error;
							Debug.LogError(str + ((error != null) ? error.ToString() : null));
						}
						if (uF.Value.PopNewAmmoResult == null)
						{
							this.\uE073 = true;
						}
						else
						{
							this.\uE04F = (uF.Value.PopNewAmmoResult.ResultItem as \uEDED);
						}
					}
					if (this.\uE073)
					{
						return;
					}
					this.\uE073 = true;
					this.\uE02B.SetAmmoInChamber((float)this.\uE02D.ChamberAmmoCount);
					this.\uE02B.SetAmmoOnMag(this.\uE02D.GetCurrentMagazineCount());
					if (this.\uE074 == Weapon.EMalfunctionState.Feed)
					{
						this.\uE02C.RemoveShellInWeapon(0);
					}
					if (this.\uE04F != null)
					{
						this.\uE02C.SetRoundIntoWeapon(this.\uE04F, 0);
					}
					this.\uE02B.SetFire(this.\uE002.IsTriggerPressed);
					this.\uE02B.SetAmmoInChamber((float)this.\uE02D.ChamberAmmoCount);
				}

				// Token: 0x060093D6 RID: 37846 RVA: 0x002FBC38 File Offset: 0x002F9E38
				public override void OnMalfunctionOffEvent()
				{
					this.\uE02B.MalfunctionRepair(false);
					this.\uE02B.Malfunction((int)this.\uE02D.MalfState.State);
					this.\uE02B.MisfireSlideUnknown(false);
					this.\uE02B.SetAmmoInChamber((float)this.\uE02D.ChamberAmmoCount);
					this.\uE02B.SetAmmoOnMag(this.\uE02D.GetCurrentMagazineCount());
					this.\uE02D.MalfState.AmmoToFire = null;
					this.\uE02D.MalfState.AmmoWillBeLoadedToChamber = null;
					this.\uE02D.MalfState.MalfunctionedAmmo = null;
					this.\uE001.InventoryController.CallMalfunctionRepaired(this.\uE02D);
					this.\uE001.InventoryController.RaiseEvent(new \uEEDB(this.\uE02D, CommandStatus.Succeed, this.\uE001.InventoryController));
					if (this.\uE02D.HasChambers)
					{
						if (this.\uE02D.ChamberAmmoCount == 0)
						{
							this.\uE002.\uE00D.DestroyPatronInWeapon(0);
						}
					}
					base.\uE000();
				}

				// Token: 0x060093D7 RID: 37847 RVA: 0x002FBD70 File Offset: 0x002F9F70
				public override bool CheckChamber()
				{
					return false;
				}

				// Token: 0x060093D8 RID: 37848 RVA: 0x002FBD74 File Offset: 0x002F9F74
				public override void OnShellEjectEvent()
				{
					if (this.\uE05A)
					{
						return;
					}
					this.\uE05A = true;
					switch (this.\uE074)
					{
					case Weapon.EMalfunctionState.Misfire:
					case Weapon.EMalfunctionState.HardSlide:
					case Weapon.EMalfunctionState.SoftSlide:
						this.\uE02C.StartSpawnMisfiredCartridge(this.\uE001.Velocity);
						return;
					case Weapon.EMalfunctionState.Jam:
						this.\uE02C.SpawnShellAfterJam(0);
						return;
					case Weapon.EMalfunctionState.Feed:
						this.\uE02C.ThrowPatronAsLoot(this.\uE02D.MalfState.MalfunctionedAmmo, this.\uE001, \uF1F8.\uE000(145407));
						return;
					default:
						return;
					}
				}

				// Token: 0x060093D9 RID: 37849 RVA: 0x002FBE0C File Offset: 0x002FA00C
				[CompilerGenerated]
				private new void \uE000()
				{
					this.\uE001.Skills.WeaponFixAction.Complete(1f);
				}

				// Token: 0x040086EE RID: 34542
				private bool \uE073;

				// Token: 0x040086EF RID: 34543
				private bool \uE05A;

				// Token: 0x040086F0 RID: 34544
				private Weapon.EMalfunctionState \uE074;
			}

			// Token: 0x020016E5 RID: 5861
			public class \uE02D : Player.FirearmController.\uE00A
			{
				// Token: 0x060093DA RID: 37850 RVA: 0x002FBE28 File Offset: 0x002FA028
				public \uE02D(Player.FirearmController controller) : base(controller)
				{
				}

				// Token: 0x060093DB RID: 37851 RVA: 0x002FBE34 File Offset: 0x002FA034
				internal virtual void Start(Callback finishCallback, bool rollToZeroCamora)
				{
					this.\uE075 = finishCallback;
					this.\uE025 = (this.\uE02D.GetCurrentMagazine() as \uEEF0);
					this.\uE076 = rollToZeroCamora;
					base.Start();
					this.\uE002.IsAiming = false;
					if (rollToZeroCamora)
					{
						this.\uE02B.RollToZeroCamora(true);
					}
					else
					{
						this.\uE02B.SetRollCylinder(true);
					}
					this.\uE001.BodyAnimatorCommon.SetFloat(PlayerAnimator.RELOAD_FLOAT_PARAM_HASH, 1f);
				}

				// Token: 0x060093DC RID: 37852 RVA: 0x002FBEC4 File Offset: 0x002FA0C4
				public override void Reset()
				{
					base.Reset();
					this.\uE00F = false;
					this.\uE025 = null;
				}

				// Token: 0x060093DD RID: 37853 RVA: 0x002FBEE0 File Offset: 0x002FA0E0
				public override void FastForward()
				{
					if (this.State == Player.EOperationState.Finished)
					{
						return;
					}
					this.OnMagPuttedToRig();
				}

				// Token: 0x060093DE RID: 37854 RVA: 0x002FBEF4 File Offset: 0x002FA0F4
				public override void OnMagPuttedToRig()
				{
					if (this.\uE00F)
					{
						return;
					}
					this.\uE00F = true;
					this.State = Player.EOperationState.Finished;
					this.\uE002.InitiateOperation<Player.FirearmController.\uE010>().Start(null);
					this.\uE025.IncrementCamoraIndex(this.\uE076);
					this.\uE02B.SetCamoraIndex(this.\uE025.CurrentCamoraIndex);
					this.\uE02B.SetRollCylinder(false);
					this.\uE02B.RollToZeroCamora(false);
					Callback uE = this.\uE075;
					if (uE == null)
					{
						return;
					}
					uE.Succeed();
				}

				// Token: 0x060093DF RID: 37855 RVA: 0x002FBF8C File Offset: 0x002FA18C
				public override void SetInventoryOpened(bool opened)
				{
					this.\uE002.InventoryOpened = opened;
					this.\uE02B.SetInventory(opened);
				}

				// Token: 0x040086F1 RID: 34545
				protected \uEEF0 \uE025;

				// Token: 0x040086F2 RID: 34546
				private bool \uE00F;

				// Token: 0x040086F3 RID: 34547
				private Callback \uE075;

				// Token: 0x040086F4 RID: 34548
				private bool \uE076;
			}

			// Token: 0x020016E6 RID: 5862
			public sealed class \uE02E : Player.FirearmController.\uE008
			{
				// Token: 0x060093E0 RID: 37856 RVA: 0x002FBFA8 File Offset: 0x002FA1A8
				public \uE02E(Player.FirearmController controller) : base(controller)
				{
				}

				// Token: 0x060093E1 RID: 37857 RVA: 0x002FBFB4 File Offset: 0x002FA1B4
				public override void Start(Item item, Callback callback)
				{
					this.\uE007 = 0f;
					this.\uE008 = false;
					base.Start(item, callback);
				}

				// Token: 0x060093E2 RID: 37858 RVA: 0x002FBFD8 File Offset: 0x002FA1D8
				public override void FastForward()
				{
					if (!this.\uE008)
					{
						this.\uE008 = true;
						this.OnBackpackDropEvent();
					}
				}

				// Token: 0x060093E3 RID: 37859 RVA: 0x002FBFF8 File Offset: 0x002FA1F8
				public override void Update(float deltaTime)
				{
					base.Update(deltaTime);
					if (!this.\uE008 && this.\uE007 > 0.35f)
					{
						this.\uE008 = true;
						this.OnBackpackDropEvent();
					}
					this.\uE007 += deltaTime;
				}

				// Token: 0x040086F5 RID: 34549
				private const float \uE006 = 0.35f;

				// Token: 0x040086F6 RID: 34550
				private float \uE007;

				// Token: 0x040086F7 RID: 34551
				private bool \uE008;
			}

			// Token: 0x020016E7 RID: 5863
			public class \uE02F : Player.FirearmController.\uE00A
			{
				// Token: 0x060093E4 RID: 37860 RVA: 0x002FC048 File Offset: 0x002FA248
				public \uE02F(Player.FirearmController controller) : base(controller)
				{
					controller._player.Logger.LogInfo(\uF1F8.\uE000(145347), Array.Empty<object>());
				}

				// Token: 0x060093E5 RID: 37861 RVA: 0x002FC070 File Offset: 0x002FA270
				public virtual void Start(Action onWeaponAppear)
				{
					this.\uE002._player.Logger.LogInfo(\uF1F8.\uE000(145330), Array.Empty<object>());
					this.\uE00B = onWeaponAppear;
					base.Start();
					this.\uE02B.SetActiveParam(true, true);
					this.\uE02B.SetLayerWeight(this.\uE02B.LACTIONS_LAYER_INDEX, 0);
					this.\uE001.BodyAnimatorCommon.SetFloat(PlayerAnimator.WEAPON_SIZE_MODIFIER_PARAM_HASH, (float)this.\uE02D.CalculateCellSize().X);
					int chamberAmmoCount = this.\uE02D.ChamberAmmoCount;
					int currentMagazineCount = this.\uE02D.GetCurrentMagazineCount();
					this.\uE078 = this.\uE02D.GetCurrentMagazine();
					this.\uE002.AmmoInChamberOnSpawn = chamberAmmoCount;
					if (this.\uE02D.HasChambers)
					{
						this.\uE02B.SetAmmoInChamber((float)chamberAmmoCount);
					}
					else
					{
						this.\uE02B.SetHammerArmed(this.\uE02D.Armed);
					}
					\uEEF0 uEEF = this.\uE02D.GetCurrentMagazine() as \uEEF0;
					if (uEEF != null)
					{
						bool hammerArmed = !this.\uE02D.CylinderHammerClosed;
						this.\uE02B.SetHammerArmed(hammerArmed);
						this.\uE02B.SetCamoraIndex(uEEF.CurrentCamoraIndex);
						for (int i = 0; i < uEEF.Count; i++)
						{
							if (uEEF.Camoras[i].ContainedItem != null)
							{
								this.\uE02D.ShellsInChambers[i] = null;
								this.\uE02C.RemoveShellInWeapon(i);
							}
						}
					}
					if (this.\uE02D.IsMultiBarrel)
					{
						for (int j = 0; j < this.\uE02D.Chambers.Length; j++)
						{
							if (this.\uE02D.Chambers[j].ContainedItem != null)
							{
								this.\uE02D.ShellsInChambers[j] = null;
								this.\uE02C.RemoveShellInWeapon(j);
							}
						}
					}
					this.\uE02B.SetAmmoOnMag(currentMagazineCount);
					this.\uE001.BodyAnimatorCommon.SetFloat(PlayerAnimator.RELOAD_FLOAT_PARAM_HASH, 1f);
					this.\uE001.Skills.OnWeaponDraw(this.\uE02D);
					bool flag = this.\uE078 == null || this.\uE078.IsAmmoCompatible(this.\uE02D.Chambers);
					this.\uE079 = flag;
					this.\uE02B.SetAmmoCompatible(flag);
					if (this.\uE079 && this.\uE078 != null && this.\uE078.Count > 0 && this.\uE002.Item.Chambers.Length != 0 && this.\uE02D.MalfState.State == Weapon.EMalfunctionState.Misfire)
					{
						this.\uE02B.SetLayerWeight(this.\uE02B.MALFUNCTION_LAYER_INDEX, 0);
					}
					if (this.\uE078 != null && chamberAmmoCount == 0 && currentMagazineCount > 0 && flag && this.\uE002.Item.Chambers.Length != 0)
					{
						Weapon.EMalfunctionState state = this.\uE002.Item.MalfState.State;
						if (state == Weapon.EMalfunctionState.Misfire)
						{
							this.\uE002.Item.MalfState.ChangeStateSilent(Weapon.EMalfunctionState.None);
						}
						\uF190<\uEF07> uF = this.\uE078.Cartridges.PopTo(this.\uE002._player.InventoryController, this.\uE002.Item.Chambers[0].CreateItemAddress());
						this.\uE002.Item.MalfState.ChangeStateSilent(state);
						if (uF.Value == null)
						{
							return;
						}
						this.\uE02C.RemoveAllShells();
						this.\uE001.UpdatePhones();
						this.\uE057 = (\uEDED)uF.Value.ResultItem;
					}
				}

				// Token: 0x060093E6 RID: 37862 RVA: 0x002FC414 File Offset: 0x002FA614
				protected override void SetLeftStanceAnimOnStartOperation()
				{
					if (this.\uE02D.IsStationaryWeapon)
					{
						return;
					}
					if (this.\uE02D.BlockLeftStance)
					{
						this.\uE001.MovementContext.LeftStanceController.SetLeftStanceForce(false);
						return;
					}
					this.\uE001.MovementContext.LeftStanceController.SetAnimatorLeftStanceToCacheFromHandsAction();
				}

				// Token: 0x060093E7 RID: 37863 RVA: 0x002FC468 File Offset: 0x002FA668
				public override void Reset()
				{
					base.Reset();
					this.\uE00B = null;
					this.\uE077 = null;
					this.\uE078 = null;
					this.\uE057 = null;
					this.\uE079 = false;
				}

				// Token: 0x060093E8 RID: 37864 RVA: 0x002FC4A0 File Offset: 0x002FA6A0
				public override void OnAddAmmoInChamber()
				{
					if (this.\uE057 == null)
					{
						return;
					}
					this.\uE02B.SetAmmoOnMag(this.\uE078.Count);
					this.\uE02B.SetAmmoInChamber((float)this.\uE02D.ChamberAmmoCount);
					if (this.\uE02D.HasChambers)
					{
						this.\uE02C.SetRoundIntoWeapon(this.\uE057, 0);
					}
				}

				// Token: 0x060093E9 RID: 37865 RVA: 0x002FC50C File Offset: 0x002FA70C
				public override void WeaponAppeared()
				{
					if (this.\uE079 && this.\uE078 != null && this.\uE002.Item.Chambers.Length != 0 && this.\uE02D.MalfState.State == Weapon.EMalfunctionState.Misfire)
					{
						base.\uE000();
					}
					if (this.\uE02D.MalfState.State != Weapon.EMalfunctionState.None)
					{
						this.\uE001.NeedRepairMalfPhraseSituation(this.\uE02D.MalfState.State, this.\uE02D.MalfState.IsKnownMalfType(this.\uE002._player.ProfileId));
					}
					this.\uE002.SetupProp();
					this.\uE002._player.Logger.LogInfo(\uF1F8.\uE000(145317), Array.Empty<object>());
					this.State = Player.EOperationState.Finished;
					Player.FirearmController.\uE010 uE = this.\uE002.InitiateOperation<Player.FirearmController.\uE010>();
					uE.Start(null);
					this.\uE00B();
					Action<Player.FirearmController> uE2 = this.\uE002.\uE007;
					this.\uE002.\uE007 = null;
					if (uE2 != null)
					{
						uE2(this.\uE002);
					}
					if (this.\uE077 != null)
					{
						uE.HideWeapon(this.\uE077, this.\uE021, null);
					}
					this.\uE077 = null;
					this.\uE001.BodyAnimatorCommon.SetFloat(PlayerAnimator.RELOAD_FLOAT_PARAM_HASH, 0f);
					this.\uE002.\uE00C();
					if (this.\uE001.FastSlotSelection)
					{
						if (this.\uE001.PreviousWeaponAimState)
						{
							this.\uE002.ToggleAim();
						}
					}
					if (this.\uE02D.IsStationaryWeapon)
					{
						this.\uE001.MovementContext.LeftStanceController.DisableLeftStanceAnimFromHandsAction();
					}
				}

				// Token: 0x060093EA RID: 37866 RVA: 0x002FC6E0 File Offset: 0x002FA8E0
				public override void OnIdleStartEvent()
				{
					if (this.State != Player.EOperationState.Finished)
					{
						this.WeaponAppeared();
					}
				}

				// Token: 0x060093EB RID: 37867 RVA: 0x002FC6F4 File Offset: 0x002FA8F4
				public override void HideWeapon(Action onHidden, bool fastDrop, Item nextControllerItem = null)
				{
					this.\uE021 = fastDrop;
					this.\uE077 = onHidden;
				}

				// Token: 0x060093EC RID: 37868 RVA: 0x002FC704 File Offset: 0x002FA904
				public override void SetInventoryOpened(bool opened)
				{
				}

				// Token: 0x060093ED RID: 37869 RVA: 0x002FC708 File Offset: 0x002FA908
				public override void FastForward()
				{
					if (this.State != Player.EOperationState.Finished)
					{
						this.\uE02B.Animator.Play(this.\uE02B.FullIdleStateName, 1, 0.1f);
						this.WeaponAppeared();
					}
				}

				// Token: 0x060093EE RID: 37870 RVA: 0x002FC740 File Offset: 0x002FA940
				public override bool CanChangeLightState(\uE825[] lightsStates)
				{
					return false;
				}

				// Token: 0x040086F8 RID: 34552
				private Action \uE00B;

				// Token: 0x040086F9 RID: 34553
				private Action \uE077;

				// Token: 0x040086FA RID: 34554
				private bool \uE021;

				// Token: 0x040086FB RID: 34555
				private \uEDED \uE057;

				// Token: 0x040086FC RID: 34556
				private \uEE67 \uE078;

				// Token: 0x040086FD RID: 34557
				private bool \uE079;
			}

			// Token: 0x020016E8 RID: 5864
			public sealed class \uE030 : Player.FirearmController.\uE01A
			{
				// Token: 0x060093EF RID: 37871 RVA: 0x002FC744 File Offset: 0x002FA944
				public \uE030(Player.FirearmController controller) : base(controller)
				{
				}

				// Token: 0x060093F0 RID: 37872 RVA: 0x002FC750 File Offset: 0x002FA950
				public override void Start()
				{
					base.Start();
					if (this.\uE02D.MalfState.State == Weapon.EMalfunctionState.Misfire)
					{
						\uEDED ammoToFire = this.\uE02D.MalfState.AmmoToFire;
						ammoToFire.IsUsed = false;
						\uE714 instance = Singleton<\uE714>.Instance;
						float num;
						float currentOverheat = this.\uE02D.GetCurrentOverheat(\uE780.PastTime, instance.Overheat, out num);
						this.\uE002.ShotMisfired(ammoToFire, this.\uE02D.MalfState.State, currentOverheat);
					}
				}

				// Token: 0x060093F1 RID: 37873 RVA: 0x002FC7DC File Offset: 0x002FA9DC
				public override void OnShellEjectEvent()
				{
					this.\uE002.\uE00D.StartSpawnShell(this.\uE002._player.Velocity * 0.66f, 0);
					this.\uE002.\uE00D.SetRoundIntoWeapon(this.\uE02D.MalfState.MalfunctionedAmmo, 0);
					this.\uE002.\uE00D.MoveAmmoFromChamberToShellPort(false, 0);
				}

				// Token: 0x060093F2 RID: 37874 RVA: 0x002FC850 File Offset: 0x002FAA50
				public override void FastForward()
				{
					this.OnMalfunctionOffEvent();
				}

				// Token: 0x060093F3 RID: 37875 RVA: 0x002FC858 File Offset: 0x002FAA58
				public override void OnMalfunctionOffEvent()
				{
					this.\uE02B.SetAmmoInChamber((float)this.\uE02D.ChamberAmmoCount);
					this.\uE02B.SetLayerWeight(this.\uE02B.MALFUNCTION_LAYER_INDEX, 1);
					this.\uE02B.Malfunction(-1);
					base.\uE000();
				}
			}

			// Token: 0x020016E9 RID: 5865
			private class \uE031 : Player.FirearmController.\uE00A
			{
				// Token: 0x060093F4 RID: 37876 RVA: 0x002FC8AC File Offset: 0x002FAAAC
				public \uE031(Player.FirearmController controller) : base(controller)
				{
				}

				// Token: 0x060093F5 RID: 37877 RVA: 0x002FC8B8 File Offset: 0x002FAAB8
				public void Start(Action callback = null)
				{
					this.\uE07A = callback;
					this.\uE002.BipodState = !this.\uE002.BipodState;
					this.\uE02B.SetInventory(false);
					this.\uE02B.SetBipod(this.\uE002.BipodState);
					this.\uE001.MovementContext.SetBlindFire(0);
					EBipodToggleDirection bipodToggleDirection = this.\uE02C.BipodViewController.BipodToggleDirection;
					this.\uE001.MovementContext.SetInteractInHands((bipodToggleDirection == EBipodToggleDirection.Forward) ? (this.\uE002.BipodState ? EInteraction.BipodForwardOn : EInteraction.BipodForwardOff) : (this.\uE002.BipodState ? EInteraction.BipodBackwardOn : EInteraction.BipodBackwardOff));
					this.\uE001.ProceduralWeaponAnimation.IsBipodUsed = this.\uE002.BipodState;
				}

				// Token: 0x060093F6 RID: 37878 RVA: 0x002FC998 File Offset: 0x002FAB98
				public override void Reset()
				{
					this.\uE07A = null;
					base.Reset();
				}

				// Token: 0x060093F7 RID: 37879 RVA: 0x002FC9A8 File Offset: 0x002FABA8
				public override void SetInventoryOpened(bool opened)
				{
					this.\uE002.InventoryOpened = opened;
					this.\uE02B.SetInventory(opened);
				}

				// Token: 0x060093F8 RID: 37880 RVA: 0x002FC9C4 File Offset: 0x002FABC4
				public override void OnBipodToggleEvent()
				{
					this.\uE000();
				}

				// Token: 0x060093F9 RID: 37881 RVA: 0x002FC9CC File Offset: 0x002FABCC
				private new void \uE000()
				{
					this.State = Player.EOperationState.Finished;
					this.\uE02B.SetInventory(this.\uE002.InventoryOpened);
					if (this.\uE03C)
					{
						this.\uE002.InitiateOperation<Player.FirearmController.\uE010>().HideWeapon(this.\uE009, this.\uE03D, null);
					}
					else
					{
						this.\uE002.InitiateOperation<Player.FirearmController.\uE010>().Start(null);
					}
					if (this.\uE07A != null)
					{
						Action uE07A = this.\uE07A;
						if (uE07A != null)
						{
							uE07A();
						}
						this.\uE07A = null;
					}
				}

				// Token: 0x060093FA RID: 37882 RVA: 0x002FCA5C File Offset: 0x002FAC5C
				public override void HideWeapon(Action onHidden, bool fastDrop, Item nextControllerItem = null)
				{
					this.\uE03C = true;
					this.\uE009 = onHidden;
					this.\uE03D = fastDrop;
				}

				// Token: 0x060093FB RID: 37883 RVA: 0x002FCA7C File Offset: 0x002FAC7C
				public override void FastForward()
				{
					this.\uE000();
					this.\uE02B.Animator.Play(this.\uE02B.FullIdleStateName, 1, 0.2f);
				}

				// Token: 0x060093FC RID: 37884 RVA: 0x002FCAA8 File Offset: 0x002FACA8
				public override bool CanChangeLightState(\uE825[] lightsStates)
				{
					return false;
				}

				// Token: 0x040086FE RID: 34558
				private Action \uE07A;

				// Token: 0x040086FF RID: 34559
				private Action \uE009;

				// Token: 0x04008700 RID: 34560
				private bool \uE03C;

				// Token: 0x04008701 RID: 34561
				private bool \uE03D;
			}

			// Token: 0x020016EA RID: 5866
			public class \uE032 : Player.FirearmController.\uE00A
			{
				// Token: 0x060093FD RID: 37885 RVA: 0x002FCAAC File Offset: 0x002FACAC
				public \uE032(Player.FirearmController controller) : base(controller)
				{
				}

				// Token: 0x060093FE RID: 37886 RVA: 0x002FCAB8 File Offset: 0x002FACB8
				public void Start(bool isLauncherEnabled, Action callback = null)
				{
					this.\uE001.SetLauncherState(isLauncherEnabled);
					this.\uE000 = callback;
					this.\uE07C = isLauncherEnabled;
					this.\uE07B = this.\uE002.\uE024.LauncherWeaponPrefab;
					if (this.\uE07B.FirearmsAnimator == null)
					{
						this.\uE07B.Init(null, true);
					}
					this.\uE02B.SetLauncher(isLauncherEnabled);
					if (isLauncherEnabled)
					{
						this.\uE07B.SetUnderbarrelFastAnimator(this.\uE001);
						this.\uE001(true);
					}
					else
					{
						this.\uE07B.FirearmsAnimator.SetActiveParam(false, true);
					}
					this.\uE02D.IsUnderBarrelDeviceActive = isLauncherEnabled;
					if (isLauncherEnabled)
					{
						this.\uE002.\uE00B();
						this.\uE001.UpdateLauncherBones(isLauncherEnabled, this.\uE07B);
					}
					this.\uE000();
					base.Start();
				}

				// Token: 0x060093FF RID: 37887 RVA: 0x002FCBA8 File Offset: 0x002FADA8
				protected override void SetLeftStanceAnimOnStartOperation()
				{
				}

				// Token: 0x06009400 RID: 37888 RVA: 0x002FCBAC File Offset: 0x002FADAC
				public override void Reset()
				{
					base.Reset();
					this.\uE022 = null;
					this.\uE021 = false;
					this.\uE000 = null;
					this.\uE07B = null;
					this.\uE07C = false;
				}

				// Token: 0x06009401 RID: 37889 RVA: 0x002FCBE4 File Offset: 0x002FADE4
				public override void SetInventoryOpened(bool opened)
				{
					this.SetAiming(false);
					this.SetTriggerPressed(false);
					this.\uE002.InventoryOpened = opened;
					this.\uE02B.SetInventory(opened);
				}

				// Token: 0x06009402 RID: 37890 RVA: 0x002FCC14 File Offset: 0x002FAE14
				public override void HideWeapon(Action onHidden, bool fastDrop, Item nextControllerItem = null)
				{
					this.\uE022 = onHidden;
					this.\uE021 = fastDrop;
				}

				// Token: 0x06009403 RID: 37891 RVA: 0x002FCC24 File Offset: 0x002FAE24
				public override void LauncherAppeared()
				{
					this.State = Player.EOperationState.Finished;
					Action uE = this.\uE022;
					bool uE2 = this.\uE021;
					this.\uE001.UpdateFirstPersonGrip(GripPose.EGripType.Common, this.\uE002.HandsHierarchy);
					this.\uE001.ProceduralWeaponAnimation.\uE008(this.\uE002, this.\uE002.UnderbarrelWeapon, null, this.\uE002.\uE016);
					this.\uE001.ProceduralWeaponAnimation.IsGrenadeLauncher = true;
					Player.FirearmController.\uE014 uE3 = this.\uE002.InitiateOperation<Player.FirearmController.\uE014>();
					if (uE != null)
					{
						this.\uE000 = null;
					}
					uE3.Start(this.\uE000);
					if (uE != null)
					{
						uE3.HideWeapon(uE, uE2, null);
					}
				}

				// Token: 0x06009404 RID: 37892 RVA: 0x002FCCEC File Offset: 0x002FAEEC
				public override void OnEnd()
				{
					base.OnEnd();
					this.\uE07B = null;
				}

				// Token: 0x06009405 RID: 37893 RVA: 0x002FCCFC File Offset: 0x002FAEFC
				public override void LauncherDisappeared()
				{
					Action uE = this.\uE022;
					bool uE2 = this.\uE021;
					this.State = Player.EOperationState.Finished;
					this.\uE001.UpdateLauncherBones(false, this.\uE07B);
					this.\uE001.UpdateFirstPersonGrip(GripPose.EGripType.Common, this.\uE002.HandsHierarchy);
					this.\uE001.ProceduralWeaponAnimation.\uE008(this.\uE002, this.\uE002.Item, this.\uE002.\uE010, this.\uE002.\uE016);
					this.\uE001.ProceduralWeaponAnimation.IsGrenadeLauncher = false;
					this.\uE001.ProceduralWeaponAnimation.FindMountingPoint(this.\uE002.HandsHierarchy);
					this.\uE001(false);
					this.\uE07B.ResetUnderbarrelFastAnimator(this.\uE001);
					Player.FirearmController.\uE010 uE3 = this.\uE002.InitiateOperation<Player.FirearmController.\uE010>();
					if (uE != null)
					{
						this.\uE000 = null;
					}
					uE3.Start(this.\uE000);
					if (uE != null)
					{
						uE3.HideWeapon(uE, uE2, null);
					}
				}

				// Token: 0x06009406 RID: 37894 RVA: 0x002FCE18 File Offset: 0x002FB018
				public override void FastForward()
				{
					if (this.\uE07C)
					{
						this.LauncherAppeared();
						return;
					}
					this.LauncherDisappeared();
				}

				// Token: 0x06009407 RID: 37895 RVA: 0x002FCE30 File Offset: 0x002FB030
				private new void \uE000()
				{
					if (!this.\uE002.Blindfire)
					{
						return;
					}
					this.\uE002.Blindfire = false;
					this.\uE001.ProceduralWeaponAnimation.StartBlindFire(0);
				}

				// Token: 0x06009408 RID: 37896 RVA: 0x002FCE60 File Offset: 0x002FB060
				private new void \uE001(bool val)
				{
					this.\uE07B.Animator.enabled = val;
					if (val)
					{
						this.\uE07B.FirearmsAnimator.AddEventsConsumer(this.\uE002);
						this.\uE002.\uE001 = this.\uE07B.FirearmsAnimator;
						this.\uE002.AnimationEventsEmitter = this.\uE07B.AnimationEventsEmitter;
						this.\uE07B.FirearmsAnimator.SetActiveParam(true, true);
						return;
					}
					this.\uE07B.FirearmsAnimator.RemoveEventsConsumer(this.\uE002);
					this.\uE002.\uE001 = this.\uE002.\uE010.FirearmsAnimator;
					this.\uE002.AnimationEventsEmitter = this.\uE002.\uE010.AnimationEventsEmitter;
				}

				// Token: 0x04008702 RID: 34562
				private new Action \uE000;

				// Token: 0x04008703 RID: 34563
				private WeaponPrefab \uE07B;

				// Token: 0x04008704 RID: 34564
				private bool \uE07C;

				// Token: 0x04008705 RID: 34565
				private bool \uE021;

				// Token: 0x04008706 RID: 34566
				private Action \uE022;
			}

			// Token: 0x020016EB RID: 5867
			public class \uE033 : \uE869
			{
				// Token: 0x170014CC RID: 5324
				// (get) Token: 0x06009409 RID: 37897 RVA: 0x002FCF3C File Offset: 0x002FB13C
				public FirearmsEffects FirearmsEffects
				{
					get
					{
						return this.\uE005;
					}
				}

				// Token: 0x170014CD RID: 5325
				// (get) Token: 0x0600940A RID: 37898 RVA: 0x002FCF44 File Offset: 0x002FB144
				public WeaponSoundPlayer WeaponSoundPlayer
				{
					get
					{
						return this.\uE006;
					}
				}

				// Token: 0x170014CE RID: 5326
				// (get) Token: 0x0600940B RID: 37899 RVA: 0x002FCF4C File Offset: 0x002FB14C
				private static WeaponSounds \uE00F
				{
					get
					{
						return Singleton<BetterAudio>.Instance.MiscCollisionSounds;
					}
				}

				// Token: 0x170014CF RID: 5327
				// (get) Token: 0x0600940C RID: 37900 RVA: 0x002FCF58 File Offset: 0x002FB158
				public BifacialTransform Fireport
				{
					get
					{
						return this.\uE00D;
					}
				}

				// Token: 0x170014D0 RID: 5328
				// (get) Token: 0x0600940D RID: 37901 RVA: 0x002FCF60 File Offset: 0x002FB160
				public WeaponPrefab LauncherWeaponPrefab
				{
					get
					{
						return this.\uE002;
					}
				}

				// Token: 0x0600940E RID: 37902 RVA: 0x002FCF68 File Offset: 0x002FB168
				public void Init(Player player, Player.FirearmController controller, \uEE5D launcher)
				{
					this.\uE002 = controller.\uE010._objectInstance.gameObject.GetComponentInChildren<WeaponPrefab>();
					this.\uE000(player, controller, launcher);
				}

				// Token: 0x0600940F RID: 37903 RVA: 0x002FCF90 File Offset: 0x002FB190
				public void Init(Player player, Player.FirearmController controller, \uEE5D launcher, GameObject underbarrelPrefab)
				{
					this.\uE002 = underbarrelPrefab.GetComponent<WeaponPrefab>();
					this.\uE000(player, controller, launcher);
				}

				// Token: 0x06009410 RID: 37904 RVA: 0x002FCFA8 File Offset: 0x002FB1A8
				public void InitWeaponSoundPlayer()
				{
					this.\uE003();
				}

				// Token: 0x06009411 RID: 37905 RVA: 0x002FCFB0 File Offset: 0x002FB1B0
				private void \uE000(Player player, Player.FirearmController controller, \uEE5D launcher)
				{
					this.\uE000 = player;
					this.\uE001 = controller;
					this.\uE003 = launcher;
					this.\uE003.ResetRangeValueToDefault();
					this.\uE00C = this.\uE002.GetComponent<ShellExtractionData>();
					this.\uE001();
					this.\uE002();
					this.\uE004();
					this.\uE005();
				}

				// Token: 0x06009412 RID: 37906 RVA: 0x002FD018 File Offset: 0x002FB218
				private void \uE001()
				{
					this.\uE005 = this.\uE002.gameObject.AddComponent<FirearmsEffects>();
					this.\uE005.Init(this.\uE002.transform);
				}

				// Token: 0x06009413 RID: 37907 RVA: 0x002FD048 File Offset: 0x002FB248
				private void \uE002()
				{
					this.\uE00D.Original = \uE3D9.FindTransformRecursive(this.\uE002.transform, \uF1F8.\uE000(22896), false);
				}

				// Token: 0x06009414 RID: 37908 RVA: 0x002FD070 File Offset: 0x002FB270
				private void \uE003()
				{
					if (this.\uE004)
					{
						return;
					}
					this.\uE006 = this.\uE002.transform.GetComponent<WeaponSoundPlayer>();
					this.\uE006.Init(this.\uE001, this.\uE00D, this.\uE000);
					this.\uE004 = true;
				}

				// Token: 0x06009415 RID: 37909 RVA: 0x002FD0C8 File Offset: 0x002FB2C8
				public void StartSpawnShell(Vector3 playerVelocity, int shellPortIndex = 0)
				{
					if (!this.\uE007())
					{
						return;
					}
					this.\uE002.StartCoroutine(this.\uE00C(playerVelocity, shellPortIndex));
				}

				// Token: 0x06009416 RID: 37910 RVA: 0x002FD0E8 File Offset: 0x002FB2E8
				private void \uE004()
				{
					this.\uE007 = \uE3D9.FindTransformRecursive(this.\uE002.transform, \uF1F8.\uE000(23621), false);
					this.\uE009 = \uE3D9.FindTransformRecursive(this.\uE002.transform, \uF1F8.\uE000(145285), false);
					if (this.\uE007 != null)
					{
						this.\uE008 = this.\uE007.localPosition;
					}
				}

				// Token: 0x06009417 RID: 37911 RVA: 0x002FD160 File Offset: 0x002FB360
				private void \uE005()
				{
					if (this.\uE003.Chamber.ContainedItem != null)
					{
						this.SetRoundIntoWeapon((\uEDED)this.\uE003.Chamber.ContainedItem);
					}
					if (this.\uE003.ShellsInChambers != null)
					{
						for (int i = 0; i < this.\uE003.ShellsInChambers.Length; i++)
						{
							AmmoTemplate ammoTemplate = this.\uE003.ShellsInChambers[i];
							if (ammoTemplate != null)
							{
								this.SetPatronInShellPort(Singleton<\uE90C>.Instance.CreateFromPool<AmmoPoolObject>(ammoTemplate.Prefab), i);
							}
						}
					}
				}

				// Token: 0x06009418 RID: 37912 RVA: 0x002FD200 File Offset: 0x002FB400
				private bool \uE006()
				{
					return \uF01E.Instance.Distance(this.\uE002.transform.position) < EFTHardSettings.Instance.PATRONS_MANIPULATIONS_VISIBLE_DISTANCE;
				}

				// Token: 0x06009419 RID: 37913 RVA: 0x002FD228 File Offset: 0x002FB428
				private bool \uE007()
				{
					return \uF01E.Instance.Distance(this.\uE002.transform.position) < EFTHardSettings.Instance.FLYING_SHELLS_VISIBLE_DISTANCE;
				}

				// Token: 0x0600941A RID: 37914 RVA: 0x002FD250 File Offset: 0x002FB450
				public void MoveAmmoFromChamberToShellPort(bool ammoIsUsed, int chamberIndex = 0)
				{
					AmmoPoolObject uE00A = this.\uE00A;
					this.\uE00A = null;
					if (uE00A == null)
					{
						return;
					}
					this.SetPatronInShellPort(uE00A, chamberIndex);
					if (this.\uE006())
					{
						uE00A.SetUsed(ammoIsUsed);
					}
				}

				// Token: 0x0600941B RID: 37915 RVA: 0x002FD29C File Offset: 0x002FB49C
				public void SetRoundIntoWeapon(\uEDED ammo)
				{
					if (!this.\uE006())
					{
						return;
					}
					if (this.\uE00A != null)
					{
						Debug.LogWarning(\uF1F8.\uE000(145018));
						this.DestroyPatronInWeapon();
					}
					Transform uE = this.\uE009;
					if (uE.childCount > 0)
					{
						AssetPoolObject.ReturnToPool(uE.GetChild(0).gameObject, true);
					}
					AmmoPoolObject ammoPoolObject = Player.FirearmController.\uE033.\uE009(ammo);
					ammoPoolObject.SetUsed(ammo.IsUsed);
					Player.FirearmController.\uE033.ParentAmmoOrShellToTransform(ammoPoolObject.gameObject, uE);
					this.\uE00A = ammoPoolObject;
				}

				// Token: 0x0600941C RID: 37916 RVA: 0x002FD330 File Offset: 0x002FB530
				public void SetPatronInShellPort(AmmoPoolObject ammoObject, int shellTransformIndex = 0)
				{
					if (this.\uE00B != null)
					{
						Debug.LogError(\uF1F8.\uE000(144986));
						AssetPoolObject.ReturnToPool(this.\uE00B.gameObject, true);
					}
					this.\uE00B = ammoObject;
					Player.FirearmController.\uE033.ParentAmmoOrShellToTransform(ammoObject.gameObject, this.\uE007);
				}

				// Token: 0x0600941D RID: 37917 RVA: 0x002FD390 File Offset: 0x002FB590
				public bool DestroyPatronInWeapon()
				{
					if (this.\uE00A == null)
					{
						return false;
					}
					AssetPoolObject.ReturnToPool(this.\uE00A.gameObject, true);
					this.\uE00A = null;
					return true;
				}

				// Token: 0x0600941E RID: 37918 RVA: 0x002FD3C4 File Offset: 0x002FB5C4
				public void RemoveShellInWeapon()
				{
					if (!this.\uE006())
					{
						return;
					}
					this.\uE008();
				}

				// Token: 0x0600941F RID: 37919 RVA: 0x002FD3D8 File Offset: 0x002FB5D8
				private void \uE008()
				{
					if (this.\uE00B == null)
					{
						return;
					}
					AssetPoolObject.ReturnToPool(this.\uE00B.gameObject, true);
					this.\uE00B = null;
				}

				// Token: 0x06009420 RID: 37920 RVA: 0x002FD404 File Offset: 0x002FB604
				public bool HasPatronInWeapon()
				{
					return this.\uE00A != null;
				}

				// Token: 0x06009421 RID: 37921 RVA: 0x002FD414 File Offset: 0x002FB614
				public bool HasShellInWeapon()
				{
					return this.\uE00B != null;
				}

				// Token: 0x06009422 RID: 37922 RVA: 0x002FD424 File Offset: 0x002FB624
				private static AmmoPoolObject \uE009(Item ammo)
				{
					GameObject gameObject = Singleton<\uE90C>.Instance.CreateItem(ammo, true);
					AmmoPoolObject component = gameObject.GetComponent<AmmoPoolObject>();
					if (component == null)
					{
						string str = \uF1F8.\uE000(144928);
						GameObject gameObject2 = gameObject;
						throw new Exception(str + ((gameObject2 != null) ? gameObject2.ToString() : null) + \uF1F8.\uE000(144919));
					}
					return component;
				}

				// Token: 0x06009423 RID: 37923 RVA: 0x002FD47C File Offset: 0x002FB67C
				public static void ParentAmmoOrShellToTransform(GameObject shell, Transform shellParent)
				{
					shell.transform.position = shellParent.position;
					shell.transform.rotation = shellParent.rotation;
					shell.transform.localRotation *= Quaternion.Euler(90f, 0f, 0f);
					shell.transform.SetParent(shellParent, true);
					shell.transform.localScale = Vector3.one;
					shell.transform.localPosition = Vector3.zero;
					shell.SetActive(true);
				}

				// Token: 0x06009424 RID: 37924 RVA: 0x002FD520 File Offset: 0x002FB720
				private AmmoPoolObject \uE00A(Vector3 playerVelocity, AmmoPoolObject shell)
				{
					AmmoPoolObject ammoPoolObject = Singleton<GameWorld>.Instance.SpawnShellInTheWorld(ref shell);
					ammoPoolObject.transform.parent = null;
					Vector3 shotRotationVector = this.\uE00C.GetShotRotationVector();
					Vector3 shotAdditionalForce = this.\uE00C.GetShotAdditionalForce();
					Vector3 force = (this.\uE007.localPosition - this.\uE008) * this.\uE00C.GetShotShellForceMultiplier() + shotAdditionalForce;
					this.\uE00B(force, shotRotationVector, ammoPoolObject, playerVelocity);
					ammoPoolObject.StartAutoDestroyCountDown(1f);
					return ammoPoolObject;
				}

				// Token: 0x06009425 RID: 37925 RVA: 0x002FD5B8 File Offset: 0x002FB7B8
				private void \uE00B(Vector3 force, Vector3 torque, AmmoPoolObject shell, Vector3 parentForce)
				{
					shell.EnablePhysics(force, torque, parentForce, this.\uE007.transform.forward);
					shell.gameObject.layer = \uE3CA.ShellsLayer;
					shell.Shell.CollisionListener = this;
				}

				// Token: 0x06009426 RID: 37926 RVA: 0x002FD5F8 File Offset: 0x002FB7F8
				private IEnumerator \uE00C(Vector3 playerVelocity, int shellPortIndex = 0)
				{
					int num;
					AmmoPoolObject uE00B;
					for (;;)
					{
						int num2;
						num = num2;
						if (num != 0)
						{
							goto Block_3;
						}
						if (this.\uE00B == null)
						{
							break;
						}
						uE00B = this.\uE00B;
						this.\uE00B = null;
						yield return this.\uE00E;
					}
					yield break;
					Block_3:
					if (num != 1)
					{
						yield break;
					}
					if (uE00B == null)
					{
						yield break;
					}
					this.\uE00A(playerVelocity, uE00B).SetUsed(true);
					yield break;
				}

				// Token: 0x06009427 RID: 37927 RVA: 0x002FD610 File Offset: 0x002FB810
				private void \uE00D(Vector3 position, BaseBallistic.ESurfaceSound material, ECaliber caliber)
				{
					SoundBank soundBank = null;
					float volume = 1f;
					switch (material)
					{
					case BaseBallistic.ESurfaceSound.Concrete:
					case BaseBallistic.ESurfaceSound.Asphalt:
						soundBank = ((caliber == ECaliber.Shell9Mm) ? Player.FirearmController.\uE033.\uE00F.Shell9mmConcrete : ((caliber == ECaliber.Shell556Mm) ? Player.FirearmController.\uE033.\uE00F.Shell556mmConcrete : ((caliber == ECaliber.Shell12Cal) ? Player.FirearmController.\uE033.\uE00F.Shell12calConcrete : ((caliber == ECaliber.ShellHeavy) ? Player.FirearmController.\uE033.\uE00F.ShellHeavyConcrete : null))));
						break;
					case BaseBallistic.ESurfaceSound.Metal:
						soundBank = ((caliber == ECaliber.Shell9Mm) ? Player.FirearmController.\uE033.\uE00F.Shell9mmMetal : ((caliber == ECaliber.Shell556Mm) ? Player.FirearmController.\uE033.\uE00F.Shell556mmMetal : ((caliber == ECaliber.Shell12Cal) ? Player.FirearmController.\uE033.\uE00F.Shell12calMetal : ((caliber == ECaliber.ShellHeavy) ? Player.FirearmController.\uE033.\uE00F.ShellHeavyMetal : null))));
						break;
					case BaseBallistic.ESurfaceSound.Wood:
						soundBank = ((caliber == ECaliber.Shell9Mm) ? Player.FirearmController.\uE033.\uE00F.Shell9mmWood : ((caliber == ECaliber.Shell556Mm) ? Player.FirearmController.\uE033.\uE00F.Shell556mmWood : ((caliber == ECaliber.Shell12Cal) ? Player.FirearmController.\uE033.\uE00F.Shell12calWood : ((caliber == ECaliber.ShellHeavy) ? Player.FirearmController.\uE033.\uE00F.ShellHeavyWood : null))));
						break;
					case BaseBallistic.ESurfaceSound.Soil:
					case BaseBallistic.ESurfaceSound.Gravel:
						soundBank = ((caliber == ECaliber.Shell9Mm) ? Player.FirearmController.\uE033.\uE00F.Shell9mmSoil : ((caliber == ECaliber.Shell556Mm) ? Player.FirearmController.\uE033.\uE00F.Shell556mmSoil : ((caliber == ECaliber.Shell12Cal) ? Player.FirearmController.\uE033.\uE00F.Shell12calSoil : ((caliber == ECaliber.ShellHeavy) ? Player.FirearmController.\uE033.\uE00F.ShellHeavySoil : null))));
						break;
					case BaseBallistic.ESurfaceSound.Grass:
						soundBank = ((caliber == ECaliber.Shell9Mm) ? Player.FirearmController.\uE033.\uE00F.Shell9mmSoil : ((caliber == ECaliber.Shell556Mm) ? Player.FirearmController.\uE033.\uE00F.Shell556mmSoil : ((caliber == ECaliber.Shell12Cal) ? Player.FirearmController.\uE033.\uE00F.Shell12calSoil : ((caliber == ECaliber.ShellHeavy) ? Player.FirearmController.\uE033.\uE00F.ShellHeavySoil : null))));
						break;
					case BaseBallistic.ESurfaceSound.Glass:
						break;
					default:
						if (material == BaseBallistic.ESurfaceSound.Plastic)
						{
							soundBank = ((caliber == ECaliber.Shell9Mm) ? Player.FirearmController.\uE033.\uE00F.Shell9mmPlastic : ((caliber == ECaliber.Shell556Mm) ? Player.FirearmController.\uE033.\uE00F.Shell556mmPlastic : ((caliber == ECaliber.Shell12Cal) ? Player.FirearmController.\uE033.\uE00F.Shell12calPlastic : ((caliber == ECaliber.ShellHeavy) ? Player.FirearmController.\uE033.\uE00F.ShellHeavyPlastic : null))));
							volume = 0.6f;
						}
						break;
					}
					if (soundBank != null)
					{
						EOcclusionTest eocclusionTest;
						if (!(this.\uE000 == null))
						{
							if (this.\uE000.PointOfView != EPointOfView.ThirdPerson)
							{
								eocclusionTest = EOcclusionTest.None;
								goto IL_229;
							}
						}
						eocclusionTest = EOcclusionTest.Fast;
						IL_229:
						EOcclusionTest occlusionTest = eocclusionTest;
						Singleton<BetterAudio>.Instance.PlayAtPoint(position + Vector3.up / 4f, soundBank, (int)soundBank.SourceType, \uF01E.Instance.Distance(position), volume, -1f, EnvironmentType.Outdoor, occlusionTest, true);
					}
				}

				// Token: 0x06009428 RID: 37928 RVA: 0x002FD88C File Offset: 0x002FBA8C
				public void InvokeShellCollision(Vector3 position, BaseBallistic.ESurfaceSound material, ECaliber caliber)
				{
					this.\uE00D(position, material, caliber);
				}

				// Token: 0x06009429 RID: 37929 RVA: 0x002FD898 File Offset: 0x002FBA98
				public void Clear()
				{
					this.RemoveShellInWeapon();
					this.DestroyPatronInWeapon();
				}

				// Token: 0x04008707 RID: 34567
				public const string SHELLPORT_TRANSFORM_NAME = "shellport";

				// Token: 0x04008708 RID: 34568
				public const string PATRON_IN_WEAPON_TRANSFORM_NAME = "patron_in_weapon";

				// Token: 0x04008709 RID: 34569
				private Player \uE000;

				// Token: 0x0400870A RID: 34570
				private Player.FirearmController \uE001;

				// Token: 0x0400870B RID: 34571
				private WeaponPrefab \uE002;

				// Token: 0x0400870C RID: 34572
				private \uEE5D \uE003;

				// Token: 0x0400870D RID: 34573
				private bool \uE004;

				// Token: 0x0400870E RID: 34574
				private FirearmsEffects \uE005;

				// Token: 0x0400870F RID: 34575
				private WeaponSoundPlayer \uE006;

				// Token: 0x04008710 RID: 34576
				private Transform \uE007;

				// Token: 0x04008711 RID: 34577
				private Vector3 \uE008;

				// Token: 0x04008712 RID: 34578
				private Transform \uE009;

				// Token: 0x04008713 RID: 34579
				private AmmoPoolObject \uE00A;

				// Token: 0x04008714 RID: 34580
				private AmmoPoolObject \uE00B;

				// Token: 0x04008715 RID: 34581
				private ShellExtractionData \uE00C;

				// Token: 0x04008716 RID: 34582
				private BifacialTransform \uE00D = new BifacialTransform();

				// Token: 0x04008717 RID: 34583
				private WaitForEndOfFrame \uE00E = new WaitForEndOfFrame();
			}

			// Token: 0x020016ED RID: 5869
			public class \uE034 : Player.FirearmController.\uE010
			{
				// Token: 0x06009431 RID: 37937 RVA: 0x002FD9A4 File Offset: 0x002FBBA4
				public \uE034(Player.FirearmController controller) : base(controller)
				{
				}

				// Token: 0x06009432 RID: 37938 RVA: 0x002FD9B0 File Offset: 0x002FBBB0
				public void Start(Player.FirearmController.\uE034.EUtilityType utilityType)
				{
					this.\uE04E = utilityType;
					this.\uE02B.SetShellsInWeapon(this.\uE02D.ShellsInWeaponCount);
					this.State = Player.EOperationState.Executing;
					this.\uE04C = 0f;
					this.SetLeftStanceAnimOnStartOperation();
				}

				// Token: 0x06009433 RID: 37939 RVA: 0x002FDA00 File Offset: 0x002FBC00
				protected override void SetLeftStanceAnimOnStartOperation()
				{
					this.\uE001.MovementContext.LeftStanceController.DisableLeftStanceAnimFromHandsAction();
				}

				// Token: 0x06009434 RID: 37940 RVA: 0x002FDA18 File Offset: 0x002FBC18
				public override void OnIdleStartEvent()
				{
					if (this.State != Player.EOperationState.Ready)
					{
						return;
					}
					base.OnIdleStartEvent();
					this.State = Player.EOperationState.Finished;
					this.\uE002.InitiateOperation<Player.FirearmController.\uE010>().Start(null);
				}

				// Token: 0x06009435 RID: 37941 RVA: 0x002FDA48 File Offset: 0x002FBC48
				public override void OnUtilityOperationStartEvent()
				{
					this.State = Player.EOperationState.Ready;
				}

				// Token: 0x06009436 RID: 37942 RVA: 0x002FDA54 File Offset: 0x002FBC54
				public override bool CanStartReload()
				{
					return false;
				}

				// Token: 0x06009437 RID: 37943 RVA: 0x002FDA58 File Offset: 0x002FBC58
				public override void Reset()
				{
					this.\uE04E = Player.FirearmController.\uE034.EUtilityType.None;
					base.Reset();
				}

				// Token: 0x06009438 RID: 37944 RVA: 0x002FDA68 File Offset: 0x002FBC68
				public override bool CheckAmmo()
				{
					return false;
				}

				// Token: 0x06009439 RID: 37945 RVA: 0x002FDA6C File Offset: 0x002FBC6C
				public override bool CheckChamber()
				{
					return false;
				}

				// Token: 0x0600943A RID: 37946 RVA: 0x002FDA70 File Offset: 0x002FBC70
				public override bool CheckFireMode()
				{
					return false;
				}

				// Token: 0x0600943B RID: 37947 RVA: 0x002FDA74 File Offset: 0x002FBC74
				public override void ReloadMag(\uEE67 magazine, ItemAddress itemAddress, Callback finishCallback, Callback startCallback)
				{
				}

				// Token: 0x0600943C RID: 37948 RVA: 0x002FDA78 File Offset: 0x002FBC78
				public override void ReloadWithAmmo(\uEDA2 ammoPack, Callback finishCallback, Callback startCallback)
				{
				}

				// Token: 0x0600943D RID: 37949 RVA: 0x002FDA7C File Offset: 0x002FBC7C
				public override void ReloadCylinderMagazine(\uEDA2 ammoPack, Callback finishCallback, Callback startCallback, bool quickReload = false)
				{
				}

				// Token: 0x0600943E RID: 37950 RVA: 0x002FDA80 File Offset: 0x002FBC80
				public override void QuickReloadMag(\uEE67 magazine, Callback finishCallback, Callback startCallback)
				{
				}

				// Token: 0x0600943F RID: 37951 RVA: 0x002FDA84 File Offset: 0x002FBC84
				public override void ReloadGrenadeLauncher(\uEDA2 ammoPack, Callback callback)
				{
				}

				// Token: 0x06009440 RID: 37952 RVA: 0x002FDA88 File Offset: 0x002FBC88
				public override void SetTriggerPressed(bool pressed)
				{
					if (this.\uE04E == Player.FirearmController.\uE034.EUtilityType.ExamineWeapon)
					{
						this.OnUtilityOperationStartEvent();
						this.OnIdleStartEvent();
						this.\uE002.CurrentOperation.SetTriggerPressed(pressed);
					}
				}

				// Token: 0x06009441 RID: 37953 RVA: 0x002FDAB8 File Offset: 0x002FBCB8
				public override void SetInventoryOpened(bool opened)
				{
					this.\uE04D = opened;
					if (!this.\uE04D)
					{
						this.\uE04C = 0f;
					}
					base.SetInventoryOpened(opened);
				}

				// Token: 0x06009442 RID: 37954 RVA: 0x002FDAE4 File Offset: 0x002FBCE4
				public override void Update(float deltaTime)
				{
					base.Update(deltaTime);
					if (this.State != Player.EOperationState.Executing || this.\uE04D)
					{
						return;
					}
					if (this.\uE04C > 2.5f)
					{
						if (this.\uE02B != null)
						{
							Debug.LogError(\uF1F8.\uE000(141682) + this.\uE02B.Animator.name);
						}
						else
						{
							Debug.LogError(\uF1F8.\uE000(141654));
						}
						this.State = Player.EOperationState.Ready;
						this.OnIdleStartEvent();
						return;
					}
					this.\uE04C += deltaTime;
				}

				// Token: 0x06009443 RID: 37955 RVA: 0x002FDB88 File Offset: 0x002FBD88
				public override void SetAiming(bool isAiming)
				{
				}

				// Token: 0x06009444 RID: 37956 RVA: 0x002FDB8C File Offset: 0x002FBD8C
				public override bool ExamineWeapon()
				{
					return true;
				}

				// Token: 0x06009445 RID: 37957 RVA: 0x002FDB90 File Offset: 0x002FBD90
				public override void OnShellEjectEvent()
				{
					this.\uE002.\uE00D.StartSpawnShell(this.\uE002._player.Velocity * 0.66f, 0);
					for (int i = 0; i < this.\uE02D.ShellsInChambers.Length; i++)
					{
						this.\uE02D.ShellsInChambers[i] = null;
					}
					this.\uE02B.SetShellsInWeapon(this.\uE02D.ShellsInWeaponCount);
				}

				// Token: 0x0400871D RID: 34589
				private const float \uE04B = 2.5f;

				// Token: 0x0400871E RID: 34590
				private float \uE04C;

				// Token: 0x0400871F RID: 34591
				private bool \uE04D;

				// Token: 0x04008720 RID: 34592
				private Player.FirearmController.\uE034.EUtilityType \uE04E;

				// Token: 0x020016EE RID: 5870
				public enum EUtilityType
				{
					// Token: 0x04008722 RID: 34594
					None,
					// Token: 0x04008723 RID: 34595
					ExamineWeapon,
					// Token: 0x04008724 RID: 34596
					CheckChamber,
					// Token: 0x04008725 RID: 34597
					CheckMagazine,
					// Token: 0x04008726 RID: 34598
					CheckFireMode
				}
			}

			// Token: 0x020016EF RID: 5871
			public class \uE035 : Player.FirearmController.\uE00C
			{
				// Token: 0x06009446 RID: 37958 RVA: 0x002FDC14 File Offset: 0x002FBE14
				public \uE035(Player.FirearmController controller) : base(controller)
				{
				}

				// Token: 0x06009447 RID: 37959 RVA: 0x002FDC20 File Offset: 0x002FBE20
				public override void Start()
				{
					base.Start();
					this.\uE02B.SetFire(this.\uE002.IsTriggerPressed);
					this.\uE002.SetAim(false);
					this.\uE001.InventoryController.RaiseEvent(new \uEEDA(this.\uE02D, CommandStatus.Begin, this.\uE001.InventoryController));
				}

				// Token: 0x06009448 RID: 37960 RVA: 0x002FDC84 File Offset: 0x002FBE84
				public override void OnFireEvent()
				{
					this.\uE032 = true;
					this.\uE039 = this.\uE031.AmmoToFire;
					if (this.\uE039 == null)
					{
						return;
					}
					this.\uE002.\uE03A(this.\uE039);
					this.\uE002.\uE00D.MoveAmmoFromChamberToShellPort(this.\uE039.IsUsed, 0);
				}

				// Token: 0x06009449 RID: 37961 RVA: 0x002FDCE8 File Offset: 0x002FBEE8
				public override void OnFireEndEvent()
				{
					this.\uE001.InventoryController.RaiseEvent(new \uEEDA(this.\uE02D, CommandStatus.Succeed, this.\uE001.InventoryController));
					this.SetTriggerPressed(false);
					this.\uE02B.SetFire(false);
					this.State = Player.EOperationState.Finished;
					this.\uE002.InitiateOperation<Player.FirearmController.\uE010>().Start(null);
				}

				// Token: 0x0600944A RID: 37962 RVA: 0x002FDD50 File Offset: 0x002FBF50
				public override void SetTriggerPressed(bool pressed)
				{
					this.\uE002.IsTriggerPressed = pressed;
				}

				// Token: 0x0600944B RID: 37963 RVA: 0x002FDD68 File Offset: 0x002FBF68
				public override bool CanNotBeInterrupted()
				{
					return true;
				}

				// Token: 0x04008727 RID: 34599
				private \uEDED \uE039;
			}

			// Token: 0x020016F2 RID: 5874
			[CompilerGenerated]
			private sealed class \uE036<\uE084> where \uE084 : Player.FirearmController
			{
				// Token: 0x06009465 RID: 37989 RVA: 0x002FDEAC File Offset: 0x002FC0AC
				internal bool \uE000()
				{
					return this.player.AIData != null && this.player.AIData.IsAI && this.player.AIData.BotOwner.LookSensor.ShootFromEyes;
				}

				// Token: 0x06009466 RID: 37990 RVA: 0x002FDF00 File Offset: 0x002FC100
				internal bool \uE001()
				{
					if (this.player.AIData != null)
					{
						if (this.player.IsAI)
						{
							return this.player.AIData.IsNoOffsetShooting;
						}
					}
					return false;
				}

				// Token: 0x06009467 RID: 37991 RVA: 0x002FDF38 File Offset: 0x002FC138
				internal void \uE002()
				{
					ProceduralWeaponAnimation proceduralWeaponAnimation = this.player.ProceduralWeaponAnimation;
					proceduralWeaponAnimation.AvailableScopesChanged = (Action)Delegate.Remove(proceduralWeaponAnimation.AvailableScopesChanged, new Action(this.controller.ValidateCurrentScopeIndex));
				}

				// Token: 0x06009468 RID: 37992 RVA: 0x002FDF70 File Offset: 0x002FC170
				internal void \uE003()
				{
					this.controller.\uE001.RemoveEventsConsumer(this.controller);
				}

				// Token: 0x06009469 RID: 37993 RVA: 0x002FDF94 File Offset: 0x002FC194
				internal void \uE004(bool visible)
				{
					this.controller.\uE00D.SetVisiblePatronInWeapon(visible, 0);
				}

				// Token: 0x0600946A RID: 37994 RVA: 0x002FDFB0 File Offset: 0x002FC1B0
				internal void \uE005()
				{
					this.controller.\uE001.SetPatronInWeaponVisibleEvent -= this.\uE004;
				}

				// Token: 0x0600946B RID: 37995 RVA: 0x002FDFD4 File Offset: 0x002FC1D4
				internal void \uE006()
				{
					this.controller._player.Skills.WeaponMastered -= this.controller.OnCurrentWeaponBeingMastered;
					this.controller._player.Skills.OnSkillLevelChanged -= this.controller.\uE005;
					this.controller._player.MovementContext.PhysicalConditionChanged -= this.controller.\uE006;
				}

				// Token: 0x0400873E RID: 34622
				public Player player;

				// Token: 0x0400873F RID: 34623
				public \uE084 controller;
			}

			// Token: 0x020016F3 RID: 5875
			[CompilerGenerated]
			private sealed class \uE037
			{
				// Token: 0x0600946D RID: 37997 RVA: 0x002FE07C File Offset: 0x002FC27C
				internal void \uE000(Player.AbstractHandsController oldController, Player.AbstractHandsController newController)
				{
					if (oldController != this.firearmController)
					{
						return;
					}
					this.<>4__this._player.OnHandsControllerChanged -= this.\uE000;
					\uE4F5 uE4F = this.modAudioController;
					if (uE4F == null)
					{
						return;
					}
					uE4F.Clear();
				}

				// Token: 0x04008740 RID: 34624
				public Player.FirearmController firearmController;

				// Token: 0x04008741 RID: 34625
				public Player.FirearmController <>4__this;

				// Token: 0x04008742 RID: 34626
				public \uE4F5 modAudioController;
			}

			// Token: 0x020016F4 RID: 5876
			[CompilerGenerated]
			private sealed class \uE038
			{
				// Token: 0x0600946F RID: 37999 RVA: 0x002FE0C4 File Offset: 0x002FC2C4
				internal void \uE000()
				{
					this.callback();
					this.<>4__this._player.MovementContext.OnStateChanged += this.<>4__this.\uE013;
					this.<>4__this._player.Physical.OnSprintStateChangedEvent += this.<>4__this.\uE012;
				}

				// Token: 0x04008743 RID: 34627
				public Action callback;

				// Token: 0x04008744 RID: 34628
				public Player.FirearmController <>4__this;
			}

			// Token: 0x020016F5 RID: 5877
			[CompilerGenerated]
			private sealed class \uE039
			{
				// Token: 0x06009471 RID: 38001 RVA: 0x002FE130 File Offset: 0x002FC330
				internal void \uE000()
				{
					this.inventoryOperation.Confirm(true);
					this.callback();
				}

				// Token: 0x04008745 RID: 34629
				public Player.\uE014 inventoryOperation;

				// Token: 0x04008746 RID: 34630
				public Action callback;
			}
		}

		// Token: 0x020016F8 RID: 5880
		public interface \uE006
		{
			// Token: 0x06009476 RID: 38006
			void OnIdleStartAction();

			// Token: 0x06009477 RID: 38007
			void OnDrawCompleteAction();

			// Token: 0x06009478 RID: 38008
			void OnHideCompleteActionAction();

			// Token: 0x06009479 RID: 38009
			void OnDropGrenadeAction();

			// Token: 0x0600947A RID: 38010
			void OnDropFinishedAction();

			// Token: 0x0600947B RID: 38011
			void StartCountdown();

			// Token: 0x0600947C RID: 38012
			void HideGrenade(Action onHidden, bool fastHide);

			// Token: 0x0600947D RID: 38013
			void PutGrenadeBack();

			// Token: 0x0600947E RID: 38014
			void ShowGesture(EInteraction gesture);

			// Token: 0x0600947F RID: 38015
			bool CanRemove();

			// Token: 0x06009480 RID: 38016
			void FastForward();

			// Token: 0x06009481 RID: 38017
			void OnBackpackDrop();

			// Token: 0x06009482 RID: 38018
			void Execute(\uEF5F operation, Callback callback);
		}

		// Token: 0x020016F9 RID: 5881
		internal abstract class BaseGrenadeHandsController : Player.ItemHandsController
		{
			// Token: 0x170014D3 RID: 5331
			// (get) Token: 0x06009483 RID: 38019 RVA: 0x002FF20C File Offset: 0x002FD40C
			public new \uEEC9 Item
			{
				get
				{
					return base.Item as \uEEC9;
				}
			}

			// Token: 0x170014D4 RID: 5332
			// (get) Token: 0x06009484 RID: 38020 RVA: 0x002FF21C File Offset: 0x002FD41C
			public override FirearmsAnimator FirearmsAnimator
			{
				get
				{
					return this.\uE02D;
				}
			}

			// Token: 0x170014D5 RID: 5333
			// (get) Token: 0x06009485 RID: 38021 RVA: 0x002FF224 File Offset: 0x002FD424
			protected new Player.\uE006 \uE000
			{
				get
				{
					return base.CurrentHandsOperation as Player.\uE006;
				}
			}

			// Token: 0x06009486 RID: 38022 RVA: 0x002FF234 File Offset: 0x002FD434
			internal new static \uE084 \uE000<\uE084>(Player player, \uEEC9 item, bool setQuickThrowParameters) where \uE084 : Player.BaseGrenadeHandsController
			{
				\uE084 uE = Player.ItemHandsController.\uE000<\uE084>(player, item);
				Player.BaseGrenadeHandsController.\uE002<\uE084>(uE, player, setQuickThrowParameters);
				return uE;
			}

			// Token: 0x06009487 RID: 38023 RVA: 0x002FF248 File Offset: 0x002FD448
			internal new static Task<\uE084> \uE001<\uE084>(Player player, \uEEC9 item, bool setQuickThrowParameters) where \uE084 : Player.BaseGrenadeHandsController
			{
				Player.BaseGrenadeHandsController.\uE003<\uE084> uE;
				uE.<>t__builder = AsyncTaskMethodBuilder<\uE084>.Create();
				uE.player = player;
				uE.item = item;
				uE.setQuickThrowParameters = setQuickThrowParameters;
				uE.<>1__state = -1;
				uE.<>t__builder.Start<Player.BaseGrenadeHandsController.\uE003<\uE084>>(ref uE);
				return uE.<>t__builder.Task;
			}

			// Token: 0x06009488 RID: 38024 RVA: 0x002FF2B0 File Offset: 0x002FD4B0
			private static void \uE002<\uE084>(\uE084 controller, Player player, bool setQuickThrowParameters) where \uE084 : Player.BaseGrenadeHandsController
			{
				Player.BaseGrenadeHandsController.\uE000<\uE084> uE = new Player.BaseGrenadeHandsController.\uE000<\uE084>();
				uE.controller = controller;
				uE.player = player;
				WeaponPrefab componentInChildren = uE.controller.ControllerGameObject.GetComponentInChildren<WeaponPrefab>();
				uE.controller.\uE02D = componentInChildren.FirearmsAnimator;
				uE.controller.\uE02D.AddEventsConsumer(uE.controller);
				uE.controller.CompositeDisposable.AddDisposable(new Action(uE.\uE000));
				uE.controller.\uE02F = uE.player.PlayerBones.WeaponRoot.Original;
				if (setQuickThrowParameters)
				{
					uE.controller.\uE02D.SetQuickFire(true);
					uE.controller.\uE02D.SetActiveParam(false, true);
				}
				uE.controller.\uE02D.SkipTime(0.016666668f);
				uE.controller.\uE032 = uE.controller._controllerObject.GetComponent<GrenadePrefab>();
				uE.controller.\uE030 = \uE3D9.FindTransformRecursive(uE.player.PlayerBones.WeaponRoot.Original, uE.controller.\uE032.ThrowingParts[0], false);
				uE.controller.\uE030.gameObject.SetActive(true);
				uE.controller.\uE031 = Enumerable.ToArray<Transform>(Enumerable.Select<string, Transform>(uE.controller.\uE032.ThrowingParts, new Func<string, Transform>(uE.\uE001)));
				for (int i = 0; i < uE.controller.\uE031.Length; i++)
				{
					uE.controller.\uE031[i].gameObject.SetActive(true);
				}
				uE.controller._player.HandsAnimator = uE.controller.\uE02D;
				bool flag = uE.controller._player.UpdateGrenadeAnimatorDuePoV();
				uE.controller.\uE02D.Animator.SetFloat(\uF1F8.\uE000(145150), (float)(flag ? 1 : 0));
				uE.player.ProceduralWeaponAnimation.ClearPreviousWeapon();
				uE.player.ProceduralWeaponAnimation.InitTransforms(uE.controller.HandsHierarchy, null);
				componentInChildren.ObjectInHands.AfterGetFromPoolInit(uE.player.ProceduralWeaponAnimation, null, uE.player.IsYourPlayer);
				uE.controller._controllerObject.GetComponent<BaseSoundPlayer>().Init(uE.controller, uE.player.PlayerBones.WeaponRoot, uE.player);
			}

			// Token: 0x06009489 RID: 38025 RVA: 0x002FF5C0 File Offset: 0x002FD7C0
			protected override void IEventsConsumerOnWeapIn()
			{
				this.\uE008();
			}

			// Token: 0x0600948A RID: 38026 RVA: 0x002FF5C8 File Offset: 0x002FD7C8
			protected override void IEventsConsumerOnWeapOut()
			{
				this.\uE007();
			}

			// Token: 0x0600948B RID: 38027 RVA: 0x002FF5D0 File Offset: 0x002FD7D0
			protected override void IEventsConsumerOnFiringBullet()
			{
				this.\uE005();
			}

			// Token: 0x0600948C RID: 38028 RVA: 0x002FF5D8 File Offset: 0x002FD7D8
			protected override void IEventsConsumerOnIdleStart()
			{
				this.\uE006();
			}

			// Token: 0x0600948D RID: 38029 RVA: 0x002FF5E0 File Offset: 0x002FD7E0
			protected override void IEventsConsumerOnFireEnd()
			{
				this.\uE004();
			}

			// Token: 0x0600948E RID: 38030 RVA: 0x002FF5E8 File Offset: 0x002FD7E8
			protected override void IEventsConsumerOnAddAmmoInChamber()
			{
				this.\uE003();
			}

			// Token: 0x0600948F RID: 38031 RVA: 0x002FF5F0 File Offset: 0x002FD7F0
			protected override void IEventsConsumerOnDelAmmoChamber()
			{
				this.\uE00A();
			}

			// Token: 0x06009490 RID: 38032 RVA: 0x002FF5F8 File Offset: 0x002FD7F8
			protected override void IEventsConsumerOnThirdAction(int intParam)
			{
				base.TranslateAnimatorParameter(intParam);
			}

			// Token: 0x06009491 RID: 38033 RVA: 0x002FF604 File Offset: 0x002FD804
			protected override void IEventsConsumerOnCook()
			{
				this.\uE01A();
			}

			// Token: 0x06009492 RID: 38034 RVA: 0x002FF60C File Offset: 0x002FD80C
			protected override void IEventsOnBackpackDrop()
			{
				this.\uE009();
			}

			// Token: 0x06009493 RID: 38035 RVA: 0x002FF614 File Offset: 0x002FD814
			public override bool SupportPickup()
			{
				return true;
			}

			// Token: 0x06009494 RID: 38036 RVA: 0x002FF618 File Offset: 0x002FD818
			protected override void IEventsConsumerOnOnUseProp(bool boolParam)
			{
				base.SetPropVisibility(boolParam);
			}

			// Token: 0x06009495 RID: 38037 RVA: 0x002FF624 File Offset: 0x002FD824
			public override void Pickup(bool p)
			{
				if (this.CanInteract())
				{
					this.\uE02D.SetPickup(p);
				}
			}

			// Token: 0x06009496 RID: 38038 RVA: 0x002FF63C File Offset: 0x002FD83C
			public override void Interact(bool isInteracting, int actionIndex)
			{
				if (this.CanInteract())
				{
					this._player.SendHandsInteractionStateChanged(isInteracting, actionIndex);
					this.\uE02D.SetInteract(isInteracting, actionIndex);
				}
			}

			// Token: 0x06009497 RID: 38039 RVA: 0x002FF668 File Offset: 0x002FD868
			public override bool CanInteract()
			{
				return this.\uE02D.IsIdling() && this.\uE02D.Animator.GetBool(\uE370.BOOL_ACTIVE);
			}

			// Token: 0x06009498 RID: 38040 RVA: 0x002FF690 File Offset: 0x002FD890
			public override void Loot(bool p)
			{
				if (this.CanInteract())
				{
					this.\uE02D.SetLooting(p);
				}
			}

			// Token: 0x06009499 RID: 38041 RVA: 0x002FF6A8 File Offset: 0x002FD8A8
			public override float GetAnimatorFloatParam(int hash)
			{
				return this.\uE02D.GetAnimatorParameter(hash);
			}

			// Token: 0x0600949A RID: 38042 RVA: 0x002FF6B8 File Offset: 0x002FD8B8
			public override bool IsInInteraction()
			{
				return this.\uE02D.IsInInteraction;
			}

			// Token: 0x0600949B RID: 38043 RVA: 0x002FF6C8 File Offset: 0x002FD8C8
			public override bool IsInInteractionStrictCheck()
			{
				if (!this.IsInInteraction())
				{
					if (this.\uE02D.GetLayerWeight(this.\uE02D.LACTIONS_LAYER_INDEX) < 1E-45f)
					{
						return this.\uE02D.Animator.IsInTransition(this.\uE02D.LACTIONS_LAYER_INDEX);
					}
				}
				return true;
			}

			// Token: 0x0600949C RID: 38044 RVA: 0x002FF720 File Offset: 0x002FD920
			public override void Spawn(float animationSpeed, Action callback)
			{
				this.\uE02D.SetAnimationSpeed(animationSpeed);
			}

			// Token: 0x0600949D RID: 38045 RVA: 0x002FF730 File Offset: 0x002FD930
			public override void Drop(float animationSpeed, Action callback, bool fastDrop, Item nextControllerItem = null)
			{
				Player.BaseGrenadeHandsController.\uE001 uE = new Player.BaseGrenadeHandsController.\uE001();
				uE.<>4__this = this;
				uE.animationSpeed = animationSpeed;
				uE.callback = callback;
				uE.fastDrop = fastDrop;
				Callback<\uE82C> callback2 = new Callback<\uE82C>(uE.\uE000);
				Player.GrenadeHandsController grenadeHandsController = this as Player.GrenadeHandsController;
				if (this.CanRemove())
				{
					callback2(grenadeHandsController);
					return;
				}
				if (grenadeHandsController != null)
				{
					grenadeHandsController.SetOnUsedCallback(callback2);
				}
			}

			// Token: 0x0600949E RID: 38046 RVA: 0x002FF7A0 File Offset: 0x002FD9A0
			public virtual void ActualDrop(Result<\uE82C> controller, float animationSpeed, Action callback, bool fastDrop)
			{
				Player.BaseGrenadeHandsController.\uE002 uE = new Player.BaseGrenadeHandsController.\uE002();
				uE.callback = callback;
				if (base.Destroyed)
				{
					this.\uE000.HideGrenade(uE.callback, fastDrop);
					return;
				}
				base.Destroyed = true;
				this.\uE02D.SetAnimationSpeed(animationSpeed);
				uE.inventoryOperation = this._player.\uE085(this.Item);
				Action onHidden = new Action(uE.\uE000);
				this.\uE000.HideGrenade(onHidden, fastDrop);
			}

			// Token: 0x0600949F RID: 38047 RVA: 0x002FF828 File Offset: 0x002FDA28
			public override void Destroy()
			{
				this._player.ProceduralWeaponAnimation.ClearPreviousWeapon();
				base.Destroy();
				this.\uE02D = null;
				AssetPoolObject.ReturnToPool(this._controllerObject.gameObject, true);
			}

			// Token: 0x060094A0 RID: 38048 RVA: 0x002FF860 File Offset: 0x002FDA60
			protected void \uE003()
			{
				this.\uE000.StartCountdown();
			}

			// Token: 0x060094A1 RID: 38049 RVA: 0x002FF870 File Offset: 0x002FDA70
			protected virtual void \uE01A()
			{
				if (this.\uE033 != null)
				{
					return;
				}
				this.\uE033 = Singleton<Effects>.Instance.GetEmissionEffect(this.\uE032.GrenadeItself.EmmisionEffect);
				this.\uE033.AttachTo(this.\uE030, this.\uE032.GrenadeItself.Offset);
				this.\uE033.SetFillParams(0f, this.Item.EmitTime);
				this.\uE033.StartEmission(0f);
			}

			// Token: 0x060094A2 RID: 38050 RVA: 0x002FF900 File Offset: 0x002FDB00
			protected void \uE004()
			{
				this.\uE000.OnDropFinishedAction();
			}

			// Token: 0x060094A3 RID: 38051 RVA: 0x002FF910 File Offset: 0x002FDB10
			protected void \uE005()
			{
				this.\uE000.OnDropGrenadeAction();
			}

			// Token: 0x060094A4 RID: 38052 RVA: 0x002FF920 File Offset: 0x002FDB20
			private void \uE006()
			{
				this.\uE000.OnIdleStartAction();
			}

			// Token: 0x060094A5 RID: 38053 RVA: 0x002FF930 File Offset: 0x002FDB30
			protected void \uE007()
			{
				this.\uE000.OnHideCompleteActionAction();
			}

			// Token: 0x060094A6 RID: 38054 RVA: 0x002FF940 File Offset: 0x002FDB40
			protected void \uE008()
			{
				this.\uE000.OnDrawCompleteAction();
			}

			// Token: 0x060094A7 RID: 38055 RVA: 0x002FF950 File Offset: 0x002FDB50
			public override bool CanExecute(\uEF5F operation)
			{
				return true;
			}

			// Token: 0x060094A8 RID: 38056 RVA: 0x002FF954 File Offset: 0x002FDB54
			public override void Execute(\uEF5F operation, Callback callback)
			{
				this.\uE000.Execute(operation, callback);
			}

			// Token: 0x060094A9 RID: 38057 RVA: 0x002FF964 File Offset: 0x002FDB64
			public override void ShowGesture(EInteraction gesture)
			{
				this.\uE000.ShowGesture(gesture);
			}

			// Token: 0x060094AA RID: 38058 RVA: 0x002FF974 File Offset: 0x002FDB74
			private void \uE009()
			{
				this.\uE000.OnBackpackDrop();
			}

			// Token: 0x060094AB RID: 38059 RVA: 0x002FF984 File Offset: 0x002FDB84
			private void \uE00A()
			{
				this.\uE000.PutGrenadeBack();
			}

			// Token: 0x060094AC RID: 38060 RVA: 0x002FF994 File Offset: 0x002FDB94
			protected virtual void \uE01B(float timeSinceSafetyLevelRemoved, bool low = false)
			{
				if (\uE2F9.Config.UseSpiritPlayer && this._player.Spirit.IsActive)
				{
					this._player.Spirit.PlayerSync();
				}
				float num = 1f;
				Vector3 direction = Vector3.up;
				Vector3? throwPosition = null;
				float forcePower = 3f;
				bool flag = this._player.IsAI && this._player.AIData.BotOwner.BotState == EBotState.Active;
				if (this._player.HealthController.IsAlive)
				{
					if (flag)
					{
						try
						{
							BotGrenadeController grenades = this._player.AIData.BotOwner.WeaponManager.Grenades;
							float num2 = (grenades.Mass <= 0.01f) ? 0.5f : grenades.Mass;
							forcePower = grenades.AIGreanageThrowData.Force * num2;
							direction = \uE3EB.NormalizeFastSelf(grenades.ToThrowDirection);
							Vector3 direction2 = grenades.AIGreanageThrowData.Direction;
							throwPosition = new Vector3?(this.FindThrowPosition());
							goto IL_215;
						}
						catch (Exception)
						{
							return;
						}
					}
					num = (low ? 0.66f : (1f + this._player.Skills.StrengthBuffThrowDistanceInc));
					forcePower = EFTHardSettings.Instance.GrenadeForce;
					if (!this._player.Skills.ThrowingEliteBuff)
					{
						Vector3 b = Mathf.Clamp01(0.5f - this._player.Physical.HandsStamina.NormalValue) * UnityEngine.Random.onUnitSphere;
						direction = (-this.\uE02F.up * 5f + b).normalized;
						num *= Mathf.Lerp(0.4f, 1f, this._player.Physical.HandsStamina.NormalValue + 0.5f);
					}
					else
					{
						direction = -this.\uE02F.up;
					}
					IL_215:
					this.\uE00B(throwPosition, timeSinceSafetyLevelRemoved, num, direction, forcePower, low, !flag);
				}
			}

			// Token: 0x060094AD RID: 38061 RVA: 0x002FFBD8 File Offset: 0x002FDDD8
			private void \uE00B(Vector3? throwPosition, float timeSinceSafetyLevelRemoved, float lowHighThrow, Vector3 direction, float forcePower, bool lowThrow, bool withVelocity)
			{
				Vector3 vector = direction * (forcePower * lowHighThrow);
				if (withVelocity)
				{
					vector += this._player.Velocity;
				}
				if (throwPosition == null)
				{
					throwPosition = new Vector3?(this.FindThrowPosition());
				}
				this.\uE01D(timeSinceSafetyLevelRemoved, throwPosition.Value, this.\uE030.rotation, vector, lowThrow);
			}

			// Token: 0x060094AE RID: 38062 RVA: 0x002FFC48 File Offset: 0x002FDE48
			public Vector3 FindThrowPosition()
			{
				Vector3 vector = this.\uE030.position + this.\uE030.rotation * this.\uE032.GrenadeItself.Offset;
				RaycastHit raycastHit;
				Vector3 vector2;
				if (Player.BaseGrenadeHandsController.CheckHandsToBodyObstacles(this._player, vector, out raycastHit, out vector2))
				{
					vector = vector2;
				}
				return vector;
			}

			// Token: 0x060094AF RID: 38063 RVA: 0x002FFCA4 File Offset: 0x002FDEA4
			public static bool CheckHandsToBodyObstacles(Player player, Vector3 point, out RaycastHit hit, out Vector3 correctedPoint)
			{
				Vector3 projectionOnRealForwardSurface = player.MovementContext.GetProjectionOnRealForwardSurface(point);
				bool flag2;
				bool flag = \uE36B.LinecastInBothSides(projectionOnRealForwardSurface, point, out hit, out flag2, \uF05F.StaticObjectsHitMask, \uF05F.StaticObjectsHitMask, Player.BaseGrenadeHandsController.\uE034, Player.BaseGrenadeHandsController.\uE035);
				if (flag)
				{
					correctedPoint = hit.point - (point - projectionOnRealForwardSurface).normalized * 0.1f;
					return flag;
				}
				correctedPoint = point;
				return flag;
			}

			// Token: 0x060094B0 RID: 38064 RVA: 0x002FFD14 File Offset: 0x002FDF14
			private Grenade \uE00C(Vector3 position, Quaternion rotation, Vector3 force, float prewarm = 0f)
			{
				GrenadeSettings grenadeSettings = UnityEngine.Object.Instantiate<GrenadeSettings>(this.\uE032.GrenadeItself);
				Grenade grenade = Singleton<\uE71B>.Instance.GrenadeFactory.Create(grenadeSettings, position, rotation, force, this.Item, this._player.ProfileId, prewarm, true, false);
				Singleton<\uE71B>.Instance.RegisterGrenade(grenade);
				return grenade;
			}

			// Token: 0x060094B1 RID: 38065 RVA: 0x002FFD70 File Offset: 0x002FDF70
			protected virtual void \uE01D(float timeSinceSafetyLevelRemoved, Vector3 position, Quaternion rotation, Vector3 force, bool lowThrow)
			{
				this._player.ExecuteSkill(new Action(this.\uE00E));
				\uF190<Player.\uE011> uF = this._player.\uE086(this.Item, lowThrow, false);
				if (uF.Succeeded)
				{
					uF.Value.RaiseEvents(this._player.InventoryController, CommandStatus.Begin);
					uF.Value.RaiseEvents(this._player.InventoryController, CommandStatus.Succeed);
					Grenade grenade = this.\uE00C(position, rotation, force, timeSinceSafetyLevelRemoved);
					SmokeGrenade smokeGrenade = grenade as SmokeGrenade;
					if (smokeGrenade != null)
					{
						if (this.\uE033 == null)
						{
							this.\uE01A();
						}
						if (this.\uE033 != null)
						{
							this.\uE033.AttachTo(smokeGrenade.transform, Vector3.zero);
							SmokeGrenade smokeGrenade2 = smokeGrenade;
							smokeGrenade2.EmissionEnd = (Action<Grenade>)Delegate.Combine(smokeGrenade2.EmissionEnd, new Action<Grenade>(this.\uE033.StopEmission));
							smokeGrenade.VelocityBelowThreshold += this.\uE033.Stall;
						}
					}
					Transform[] uE = this.\uE031;
					for (int i = 0; i < uE.Length; i++)
					{
						uE[i].gameObject.SetActive(false);
					}
					if (Singleton<\uE34D>.Instantiated)
					{
						if (this._player.IsAI)
						{
							grenade.SetRigidbodyMass(0.5f);
							Singleton<\uE34D>.Instance.ThrowGrenade(grenade, position + Vector3.up, force, 0.5f);
							return;
						}
						Singleton<\uE34D>.Instance.ThrowGrenade(grenade, position + Vector3.up, force, 0.6f);
					}
					return;
				}
				string str = \uF1F8.\uE000(145107);
				Error error = uF.Error;
				Debug.LogError(str + ((error != null) ? error.ToString() : null));
			}

			// Token: 0x060094B2 RID: 38066 RVA: 0x002FFF4C File Offset: 0x002FE14C
			protected bool \uE00D(out \uEE8B plantingKit)
			{
				plantingKit = Enumerable.FirstOrDefault<\uEE8B>(Enumerable.OfType<\uEE8B>(this._player.InventoryController.Inventory.Equipment.GetAllItems()));
				return plantingKit != null;
			}

			// Token: 0x060094B3 RID: 38067 RVA: 0x002FFF7C File Offset: 0x002FE17C
			public override void FastForwardCurrentState()
			{
				this.\uE000.FastForward();
			}

			// Token: 0x060094B6 RID: 38070 RVA: 0x002FFFB8 File Offset: 0x002FE1B8
			[CompilerGenerated]
			private void \uE00E()
			{
				this._player.Skills.ThrowAction.Complete(1f);
			}

			// Token: 0x04008757 RID: 34647
			public const float MASS = 0.6f;

			// Token: 0x04008758 RID: 34648
			protected FirearmsAnimator \uE02D;

			// Token: 0x04008759 RID: 34649
			private const string \uE02E = "fireport";

			// Token: 0x0400875A RID: 34650
			protected Transform \uE02F;

			// Token: 0x0400875B RID: 34651
			protected Transform \uE030;

			// Token: 0x0400875C RID: 34652
			protected Transform[] \uE031;

			// Token: 0x0400875D RID: 34653
			protected GrenadePrefab \uE032;

			// Token: 0x0400875E RID: 34654
			protected GrenadeEmission \uE033;

			// Token: 0x0400875F RID: 34655
			private static readonly RaycastHit[] \uE034 = new RaycastHit[8];

			// Token: 0x04008760 RID: 34656
			private static Func<RaycastHit, bool> \uE035 = new Func<RaycastHit, bool>(Player.BaseGrenadeHandsController.<>c.<>9.\uE000);

			// Token: 0x020016FB RID: 5883
			[CompilerGenerated]
			private sealed class \uE000<\uE084> where \uE084 : Player.BaseGrenadeHandsController
			{
				// Token: 0x060094BB RID: 38075 RVA: 0x002FFFF4 File Offset: 0x002FE1F4
				internal void \uE000()
				{
					this.controller.\uE02D.RemoveEventsConsumer(this.controller);
				}

				// Token: 0x060094BC RID: 38076 RVA: 0x00300018 File Offset: 0x002FE218
				internal Transform \uE001(string x)
				{
					return \uE3D9.FindTransformRecursive(this.player.PlayerBones.WeaponRoot.Original, x, false);
				}

				// Token: 0x04008762 RID: 34658
				public \uE084 controller;

				// Token: 0x04008763 RID: 34659
				public Player player;
			}

			// Token: 0x020016FC RID: 5884
			[CompilerGenerated]
			private new sealed class \uE001
			{
				// Token: 0x060094BE RID: 38078 RVA: 0x00300040 File Offset: 0x002FE240
				internal void \uE000(Result<\uE82C> result)
				{
					this.<>4__this.ActualDrop(result, this.animationSpeed, this.callback, this.fastDrop);
				}

				// Token: 0x04008764 RID: 34660
				public Player.BaseGrenadeHandsController <>4__this;

				// Token: 0x04008765 RID: 34661
				public float animationSpeed;

				// Token: 0x04008766 RID: 34662
				public Action callback;

				// Token: 0x04008767 RID: 34663
				public bool fastDrop;
			}

			// Token: 0x020016FD RID: 5885
			[CompilerGenerated]
			private new sealed class \uE002
			{
				// Token: 0x060094C0 RID: 38080 RVA: 0x00300068 File Offset: 0x002FE268
				internal void \uE000()
				{
					this.inventoryOperation.Confirm(true);
					this.callback();
				}

				// Token: 0x04008768 RID: 34664
				public Player.\uE014 inventoryOperation;

				// Token: 0x04008769 RID: 34665
				public Action callback;
			}
		}

		// Token: 0x020016FF RID: 5887
		internal class GrenadeHandsController : Player.BaseGrenadeHandsController, \uE82C, \uE82A, \uE827, \uE828
		{
			// Token: 0x060094C3 RID: 38083 RVA: 0x0030017C File Offset: 0x002FE37C
			internal new static \uE084 \uE000<\uE084>(Player player, \uEEC9 item) where \uE084 : Player.GrenadeHandsController
			{
				return Player.BaseGrenadeHandsController.\uE000<\uE084>(player, item, false);
			}

			// Token: 0x060094C4 RID: 38084 RVA: 0x00300188 File Offset: 0x002FE388
			internal new static Task<\uE084> \uE001<\uE084>(Player player, \uEEC9 item) where \uE084 : Player.GrenadeHandsController
			{
				return Player.BaseGrenadeHandsController.\uE001<\uE084>(player, item, false);
			}

			// Token: 0x170014D6 RID: 5334
			// (get) Token: 0x060094C5 RID: 38085 RVA: 0x00300194 File Offset: 0x002FE394
			public Player.GrenadeHandsController.\uE001 CurrentOperation
			{
				get
				{
					return base.CurrentHandsOperation as Player.GrenadeHandsController.\uE001;
				}
			}

			// Token: 0x170014D7 RID: 5335
			// (get) Token: 0x060094C6 RID: 38086 RVA: 0x003001A4 File Offset: 0x002FE3A4
			public bool WaitingForHighThrow
			{
				get
				{
					Player.GrenadeHandsController.\uE002 uE = this.CurrentOperation as Player.GrenadeHandsController.\uE002;
					return uE != null && uE.WaitingHighThrow;
				}
			}

			// Token: 0x170014D8 RID: 5336
			// (get) Token: 0x060094C7 RID: 38087 RVA: 0x003001D0 File Offset: 0x002FE3D0
			public new \uEEC9 Item
			{
				get
				{
					return base.Item;
				}
			}

			// Token: 0x170014D9 RID: 5337
			// (get) Token: 0x060094C8 RID: 38088 RVA: 0x003001D8 File Offset: 0x002FE3D8
			// (set) Token: 0x060094C9 RID: 38089 RVA: 0x003001E0 File Offset: 0x002FE3E0
			public Weapon.EFireMode CurrentFireMode { get; protected set; } = Weapon.EFireMode.grenadeThrowing;

			// Token: 0x060094CA RID: 38090 RVA: 0x003001EC File Offset: 0x002FE3EC
			public override bool CanExecute(\uEF5F operation)
			{
				\uEF6A uEF6A = operation as \uEF6A;
				return uEF6A == null || !this._player.InventoryController.IsAnimatedSlot(uEF6A.From1) || this.CurrentOperation is Player.GrenadeHandsController.\uE003 || this.CurrentOperation is Player.GrenadeHandsController.\uE005;
			}

			// Token: 0x060094CB RID: 38091 RVA: 0x0030024C File Offset: 0x002FE44C
			public override void Execute(\uEF5F operation, Callback callback)
			{
				base.\uE000.Execute(operation, callback);
			}

			// Token: 0x060094CC RID: 38092 RVA: 0x0030025C File Offset: 0x002FE45C
			public override void Spawn(float animationSpeed, Action callback)
			{
				base.InitiateOperation<Player.GrenadeHandsController.\uE008>().Start(callback);
				base.Spawn(animationSpeed, callback);
			}

			// Token: 0x060094CD RID: 38093 RVA: 0x00300274 File Offset: 0x002FE474
			public virtual void ExamineWeapon()
			{
				this.CurrentOperation.ExamineWeapon();
			}

			// Token: 0x060094CE RID: 38094 RVA: 0x00300284 File Offset: 0x002FE484
			public virtual void PullRingForHighThrow()
			{
				this.CurrentOperation.PullRingForHighThrow();
			}

			// Token: 0x060094CF RID: 38095 RVA: 0x00300294 File Offset: 0x002FE494
			public virtual void HighThrow()
			{
				this.CurrentOperation.HighThrow();
			}

			// Token: 0x060094D0 RID: 38096 RVA: 0x003002A4 File Offset: 0x002FE4A4
			public void SetFireModeVisual(Weapon.EFireMode fireMode)
			{
				Action<Weapon.EFireMode> onShowFireMode = this._player.OnShowFireMode;
				if (onShowFireMode == null)
				{
					return;
				}
				onShowFireMode(fireMode);
			}

			// Token: 0x060094D1 RID: 38097 RVA: 0x003002BC File Offset: 0x002FE4BC
			public bool CanChangeFireMode(Weapon.EFireMode fireMode)
			{
				return this.CurrentOperation.CanChangeFireMode(fireMode);
			}

			// Token: 0x060094D2 RID: 38098 RVA: 0x003002CC File Offset: 0x002FE4CC
			public virtual void ChangeFireMode(Weapon.EFireMode fireMode)
			{
				this.CurrentOperation.ChangeFireMode(fireMode);
			}

			// Token: 0x060094D3 RID: 38099 RVA: 0x003002DC File Offset: 0x002FE4DC
			public virtual void HandleFireInput()
			{
				if (this.WaitingForHighThrow)
				{
					this.HighThrow();
					return;
				}
				Player.GrenadeHandsController.\uE001 currentOperation = this.CurrentOperation;
				if (currentOperation is Player.GrenadeHandsController.\uE003)
				{
					this.PullRingForHighThrow();
					return;
				}
				Player.GrenadeHandsController.\uE005 uE = currentOperation as Player.GrenadeHandsController.\uE005;
				if (uE == null)
				{
					return;
				}
				uE.HandleFireInput();
			}

			// Token: 0x060094D4 RID: 38100 RVA: 0x00300330 File Offset: 0x002FE530
			public virtual void HandleAltFireInput()
			{
				if (this.WaitingForLowThrow)
				{
					this.LowThrow();
					return;
				}
				Player.GrenadeHandsController.\uE001 currentOperation = this.CurrentOperation;
				if (currentOperation is Player.GrenadeHandsController.\uE003)
				{
					this.PullRingForLowThrow();
					return;
				}
				Player.GrenadeHandsController.\uE005 uE = currentOperation as Player.GrenadeHandsController.\uE005;
				if (uE == null)
				{
					return;
				}
				uE.HandleAltFireInput();
			}

			// Token: 0x060094D5 RID: 38101 RVA: 0x00300384 File Offset: 0x002FE584
			public virtual void PlantTripwire()
			{
				this.CurrentOperation.PlantTripwire();
			}

			// Token: 0x170014DA RID: 5338
			// (get) Token: 0x060094D6 RID: 38102 RVA: 0x00300394 File Offset: 0x002FE594
			public bool WaitingForLowThrow
			{
				get
				{
					Player.GrenadeHandsController.\uE004 uE = this.CurrentOperation as Player.GrenadeHandsController.\uE004;
					return uE != null && uE.WaitingLowThrow;
				}
			}

			// Token: 0x060094D7 RID: 38103 RVA: 0x003003C0 File Offset: 0x002FE5C0
			public virtual void PullRingForLowThrow()
			{
				this.CurrentOperation.PullRingForLowThrow();
			}

			// Token: 0x060094D8 RID: 38104 RVA: 0x003003D0 File Offset: 0x002FE5D0
			public virtual void LowThrow()
			{
				this.CurrentOperation.LowThrow();
			}

			// Token: 0x060094D9 RID: 38105 RVA: 0x003003E0 File Offset: 0x002FE5E0
			public virtual void SetOnUsedCallback(Callback<\uE82C> callback)
			{
				this.\uE036 = callback;
			}

			// Token: 0x060094DA RID: 38106 RVA: 0x003003EC File Offset: 0x002FE5EC
			public override void SetInventoryOpened(bool opened)
			{
				if (opened)
				{
					this.SetCompassState(false);
				}
				this.CurrentOperation.SetInventoryOpened(opened);
			}

			// Token: 0x060094DB RID: 38107 RVA: 0x0030040C File Offset: 0x002FE60C
			public override bool IsInventoryOpen()
			{
				return this.\uE02D.IsInInventory;
			}

			// Token: 0x060094DC RID: 38108 RVA: 0x0030041C File Offset: 0x002FE61C
			public override bool CanRemove()
			{
				return this.CurrentOperation.CanRemove();
			}

			// Token: 0x060094DD RID: 38109 RVA: 0x0030042C File Offset: 0x002FE62C
			protected virtual void \uE01E()
			{
			}

			// Token: 0x060094DE RID: 38110 RVA: 0x00300430 File Offset: 0x002FE630
			public virtual bool CanThrow()
			{
				return this._player.StateIsSuitableForHandInput;
			}

			// Token: 0x060094DF RID: 38111 RVA: 0x00300440 File Offset: 0x002FE640
			public override void SetCompassState(bool active)
			{
				if (this.CanChangeCompassState(active))
				{
					this.CurrentOperation.SetGrenadeCompassState(active);
				}
			}

			// Token: 0x060094E0 RID: 38112 RVA: 0x00300458 File Offset: 0x002FE658
			protected override Dictionary<Type, Player.ItemHandsController.OperationFactoryDelegate> GetOperationFactoryDelegates()
			{
				return new Dictionary<Type, Player.ItemHandsController.OperationFactoryDelegate>
				{
					{
						typeof(Player.GrenadeHandsController.\uE008),
						new Player.ItemHandsController.OperationFactoryDelegate(this.\uE002)
					},
					{
						typeof(Player.GrenadeHandsController.\uE003),
						new Player.ItemHandsController.OperationFactoryDelegate(this.\uE003)
					},
					{
						typeof(Player.GrenadeHandsController.\uE006),
						new Player.ItemHandsController.OperationFactoryDelegate(this.\uE004)
					},
					{
						typeof(Player.GrenadeHandsController.\uE002),
						new Player.ItemHandsController.OperationFactoryDelegate(this.\uE005)
					},
					{
						typeof(Player.GrenadeHandsController.\uE004),
						new Player.ItemHandsController.OperationFactoryDelegate(this.\uE006)
					},
					{
						typeof(Player.GrenadeHandsController.\uE005),
						new Player.ItemHandsController.OperationFactoryDelegate(this.\uE007)
					},
					{
						typeof(Player.GrenadeHandsController.\uE000),
						new Player.ItemHandsController.OperationFactoryDelegate(this.\uE008)
					}
				};
			}

			// Token: 0x060094E2 RID: 38114 RVA: 0x00300540 File Offset: 0x002FE740
			[CompilerGenerated]
			private Player.\uE00C \uE002()
			{
				return new Player.GrenadeHandsController.\uE008(this);
			}

			// Token: 0x060094E3 RID: 38115 RVA: 0x00300548 File Offset: 0x002FE748
			[CompilerGenerated]
			private new Player.\uE00C \uE003()
			{
				return new Player.GrenadeHandsController.\uE003(this);
			}

			// Token: 0x060094E4 RID: 38116 RVA: 0x00300550 File Offset: 0x002FE750
			[CompilerGenerated]
			private new Player.\uE00C \uE004()
			{
				return new Player.GrenadeHandsController.\uE006(this);
			}

			// Token: 0x060094E5 RID: 38117 RVA: 0x00300558 File Offset: 0x002FE758
			[CompilerGenerated]
			private new Player.\uE00C \uE005()
			{
				return new Player.GrenadeHandsController.\uE002(this);
			}

			// Token: 0x060094E6 RID: 38118 RVA: 0x00300560 File Offset: 0x002FE760
			[CompilerGenerated]
			private Player.\uE00C \uE006()
			{
				return new Player.GrenadeHandsController.\uE004(this);
			}

			// Token: 0x060094E7 RID: 38119 RVA: 0x00300568 File Offset: 0x002FE768
			[CompilerGenerated]
			private new Player.\uE00C \uE007()
			{
				return new Player.GrenadeHandsController.\uE005(this);
			}

			// Token: 0x060094E8 RID: 38120 RVA: 0x00300570 File Offset: 0x002FE770
			[CompilerGenerated]
			private new Player.\uE00C \uE008()
			{
				return new Player.GrenadeHandsController.\uE000(this);
			}

			// Token: 0x04008770 RID: 34672
			private new bool \uE002;

			// Token: 0x04008771 RID: 34673
			private Callback<\uE82C> \uE036;

			// Token: 0x04008772 RID: 34674
			[CompilerGenerated]
			private Weapon.EFireMode \uE037;

			// Token: 0x02001700 RID: 5888
			public new class \uE000 : Player.GrenadeHandsController.\uE001
			{
				// Token: 0x060094E9 RID: 38121 RVA: 0x00300578 File Offset: 0x002FE778
				public \uE000(Player.GrenadeHandsController controller) : base(controller)
				{
				}

				// Token: 0x060094EA RID: 38122 RVA: 0x00300584 File Offset: 0x002FE784
				public virtual void Start(Item item, Callback callback)
				{
					this.\uE000 = callback;
					base.Start();
					this.\uE002.FirearmsAnimator.SetInventory(false);
					this.\uE002._player.SendHandsInteractionStateChanged(true, 300);
					this.\uE002._player.MovementContext.SetInteractInHands(EInteraction.DropBackpack);
				}

				// Token: 0x060094EB RID: 38123 RVA: 0x003005E8 File Offset: 0x002FE7E8
				public void Setup(Player.GrenadeHandsController.\uE000.ESourceState sourceState)
				{
					this.\uE001 = sourceState;
				}

				// Token: 0x060094EC RID: 38124 RVA: 0x003005F4 File Offset: 0x002FE7F4
				public override void Reset()
				{
					this.\uE000 = null;
					base.Reset();
				}

				// Token: 0x060094ED RID: 38125 RVA: 0x00300604 File Offset: 0x002FE804
				public override void OnBackpackDrop()
				{
					this.State = Player.EOperationState.Finished;
					this.\uE002._player.SendHandsInteractionStateChanged(false, 300);
					this.\uE002.FirearmsAnimator.SetInteract(false, 300);
					this.\uE002._player.MovementContext.SetInteractInHands(EInteraction.DropBackpack);
					\uE370.ResetTriggerHandReady(this.\uE002.FirearmsAnimator.Animator);
					this.\uE002.FirearmsAnimator.SetInventory(this.\uE002.\uE002);
					Player.GrenadeHandsController.\uE000.ESourceState uE = this.\uE001;
					if (uE != Player.GrenadeHandsController.\uE000.ESourceState.IdleState)
					{
						if (uE == Player.GrenadeHandsController.\uE000.ESourceState.PlantTripwireState)
						{
							this.\uE002.InitiateOperation<Player.GrenadeHandsController.\uE005>().Start();
						}
					}
					else
					{
						this.\uE002.InitiateOperation<Player.GrenadeHandsController.\uE003>().Start();
					}
					this.\uE000.Succeed();
				}

				// Token: 0x060094EE RID: 38126 RVA: 0x003006E8 File Offset: 0x002FE8E8
				public override void SetInventoryOpened(bool opened)
				{
					this.\uE002.\uE002 = opened;
				}

				// Token: 0x04008773 RID: 34675
				private new Callback \uE000;

				// Token: 0x04008774 RID: 34676
				private new Player.GrenadeHandsController.\uE000.ESourceState \uE001;

				// Token: 0x02001701 RID: 5889
				public enum ESourceState
				{
					// Token: 0x04008776 RID: 34678
					IdleState,
					// Token: 0x04008777 RID: 34679
					PlantTripwireState
				}
			}

			// Token: 0x02001702 RID: 5890
			public new abstract class \uE001 : Player.\uE007<Player.GrenadeHandsController>
			{
				// Token: 0x060094EF RID: 38127 RVA: 0x003006F8 File Offset: 0x002FE8F8
				protected \uE001(Player.GrenadeHandsController controller) : base(controller)
				{
				}

				// Token: 0x060094F0 RID: 38128 RVA: 0x00300704 File Offset: 0x002FE904
				public virtual void ExamineWeapon()
				{
					base.\uE000();
				}

				// Token: 0x060094F1 RID: 38129 RVA: 0x0030070C File Offset: 0x002FE90C
				public virtual void PullRingForHighThrow()
				{
					base.\uE000();
				}

				// Token: 0x060094F2 RID: 38130 RVA: 0x00300714 File Offset: 0x002FE914
				public virtual void HighThrow()
				{
					base.\uE000();
				}

				// Token: 0x060094F3 RID: 38131 RVA: 0x0030071C File Offset: 0x002FE91C
				public virtual void PullRingForLowThrow()
				{
					base.\uE000();
				}

				// Token: 0x060094F4 RID: 38132 RVA: 0x00300724 File Offset: 0x002FE924
				public virtual void LowThrow()
				{
					base.\uE000();
				}

				// Token: 0x060094F5 RID: 38133 RVA: 0x0030072C File Offset: 0x002FE92C
				public virtual void ChangeFireMode(Weapon.EFireMode fireMode)
				{
					base.\uE000();
				}

				// Token: 0x060094F6 RID: 38134 RVA: 0x00300734 File Offset: 0x002FE934
				public virtual void HandleFireInput()
				{
					base.\uE000();
				}

				// Token: 0x060094F7 RID: 38135 RVA: 0x0030073C File Offset: 0x002FE93C
				public virtual void HandleAltFireInput()
				{
					base.\uE000();
				}

				// Token: 0x060094F8 RID: 38136 RVA: 0x00300744 File Offset: 0x002FE944
				public virtual void SetInventoryOpened(bool opened)
				{
					base.\uE000();
				}

				// Token: 0x060094F9 RID: 38137 RVA: 0x0030074C File Offset: 0x002FE94C
				public virtual void SetGrenadeCompassState(bool active)
				{
					base.\uE000();
				}

				// Token: 0x060094FA RID: 38138 RVA: 0x00300754 File Offset: 0x002FE954
				public virtual void PlantTripwire()
				{
					base.\uE000();
				}

				// Token: 0x060094FB RID: 38139 RVA: 0x0030075C File Offset: 0x002FE95C
				public virtual bool CanChangeFireMode(Weapon.EFireMode fireMode)
				{
					base.\uE000();
					return false;
				}
			}

			// Token: 0x02001703 RID: 5891
			protected new class \uE002 : Player.GrenadeHandsController.\uE001
			{
				// Token: 0x170014DB RID: 5339
				// (get) Token: 0x060094FC RID: 38140 RVA: 0x00300768 File Offset: 0x002FE968
				public virtual bool WaitingHighThrow
				{
					get
					{
						return this.\uE002 == Player.GrenadeHandsController.\uE002.EThrowState.Idling;
					}
				}

				// Token: 0x060094FD RID: 38141 RVA: 0x00300774 File Offset: 0x002FE974
				public \uE002(Player.GrenadeHandsController controller) : base(controller)
				{
				}

				// Token: 0x060094FE RID: 38142 RVA: 0x00300780 File Offset: 0x002FE980
				public new void Start()
				{
					this.\uE002._player.Say(EPhraseTrigger.OnGrenade, false, 0f, (ETagStatus)0, 100, false);
					base.Start();
					this.\uE01F();
					this.\uE002 = Player.GrenadeHandsController.\uE002.EThrowState.Idling;
				}

				// Token: 0x060094FF RID: 38143 RVA: 0x003007B8 File Offset: 0x002FE9B8
				public override void Reset()
				{
					base.Reset();
					this.\uE002 = Player.GrenadeHandsController.\uE002.EThrowState.None;
					this.\uE003 = null;
				}

				// Token: 0x06009500 RID: 38144 RVA: 0x003007D4 File Offset: 0x002FE9D4
				protected virtual void \uE01F()
				{
					this.\uE002.\uE02D.SetGrenadeFire(FirearmsAnimator.EGrenadeFire.Hold);
				}

				// Token: 0x06009501 RID: 38145 RVA: 0x003007E8 File Offset: 0x002FE9E8
				public override void HighThrow()
				{
					if (this.\uE002 == Player.GrenadeHandsController.\uE002.EThrowState.Throwing || this.\uE002 == Player.GrenadeHandsController.\uE002.EThrowState.Threw)
					{
						return;
					}
					this.\uE002 = Player.GrenadeHandsController.\uE002.EThrowState.Throwing;
					this.\uE002.\uE02D.SetGrenadeFire(FirearmsAnimator.EGrenadeFire.Throw);
				}

				// Token: 0x06009502 RID: 38146 RVA: 0x0030081C File Offset: 0x002FEA1C
				public override void OnDropGrenadeAction()
				{
					this.\uE002.\uE02D.SetGrenadeFire(FirearmsAnimator.EGrenadeFire.Idle);
					this.\uE000(false);
				}

				// Token: 0x06009503 RID: 38147 RVA: 0x00300838 File Offset: 0x002FEA38
				protected void \uE000(bool low = false)
				{
					this.\uE002.\uE030.gameObject.SetActive(false);
					this.\uE002.\uE01B(0f, low);
				}

				// Token: 0x06009504 RID: 38148 RVA: 0x00300864 File Offset: 0x002FEA64
				public override void OnDropFinishedAction()
				{
					if (this.\uE002 == Player.GrenadeHandsController.\uE002.EThrowState.Threw)
					{
						return;
					}
					this.\uE002 = Player.GrenadeHandsController.\uE002.EThrowState.Threw;
					if (this.\uE002.Destroyed)
					{
						if (this.\uE003 != null)
						{
							this.\uE003();
						}
						this.\uE003 = null;
						return;
					}
					if (this.\uE002.\uE036 != null)
					{
						this.\uE002.\uE036(this.\uE002);
					}
				}

				// Token: 0x06009505 RID: 38149 RVA: 0x003008E0 File Offset: 0x002FEAE0
				public override void HideGrenade(Action onHidden, bool fastHide)
				{
					if (this.\uE002 == Player.GrenadeHandsController.\uE002.EThrowState.Threw)
					{
						onHidden();
						return;
					}
					if (this.\uE002 == Player.GrenadeHandsController.\uE002.EThrowState.Idling && this.\uE002.Item.CanBeHiddenDuringThrow)
					{
						this.\uE003 = onHidden;
						this.State = Player.EOperationState.Finished;
						this.\uE002.InitiateOperation<Player.GrenadeHandsController.\uE006>().Start(onHidden);
						return;
					}
					this.\uE003 = onHidden;
				}

				// Token: 0x06009506 RID: 38150 RVA: 0x0030094C File Offset: 0x002FEB4C
				public override void HandleFireInput()
				{
					if (this.WaitingHighThrow)
					{
						this.HighThrow();
					}
				}

				// Token: 0x06009507 RID: 38151 RVA: 0x0030095C File Offset: 0x002FEB5C
				public override void SetInventoryOpened(bool opened)
				{
					if (this.\uE002 == Player.GrenadeHandsController.\uE002.EThrowState.Idling && this.\uE002.Item.CanBeHiddenDuringThrow)
					{
						this.\uE002.\uE02D.SetInventory(opened);
						this.PutGrenadeBack();
					}
				}

				// Token: 0x06009508 RID: 38152 RVA: 0x00300998 File Offset: 0x002FEB98
				protected new void \uE001()
				{
					this.State = Player.EOperationState.Finished;
					this.\uE002.InitiateOperation<Player.GrenadeHandsController.\uE003>().Start();
				}

				// Token: 0x06009509 RID: 38153 RVA: 0x003009B4 File Offset: 0x002FEBB4
				public override bool CanRemove()
				{
					return this.\uE002 != Player.GrenadeHandsController.\uE002.EThrowState.Throwing;
				}

				// Token: 0x0600950A RID: 38154 RVA: 0x003009C4 File Offset: 0x002FEBC4
				public override void PutGrenadeBack()
				{
					this.\uE002.\uE02D.SetGrenadeAltFire(FirearmsAnimator.EGrenadeFire.Idle);
					this.\uE002.\uE02D.SetGrenadeFire(FirearmsAnimator.EGrenadeFire.Idle);
					this.\uE001();
					this.\uE002.\uE01E();
				}

				// Token: 0x0600950B RID: 38155 RVA: 0x00300A00 File Offset: 0x002FEC00
				public override void FastForward()
				{
					base.FastForward();
					if (this.\uE002 == Player.GrenadeHandsController.\uE002.EThrowState.Idling)
					{
						this.PutGrenadeBack();
						return;
					}
					if (this.\uE002 != Player.GrenadeHandsController.\uE002.EThrowState.Threw)
					{
						Debug.LogErrorFormat(\uF1F8.\uE000(145096), new object[]
						{
							this.\uE002
						});
						return;
					}
				}

				// Token: 0x04008778 RID: 34680
				protected new Player.GrenadeHandsController.\uE002.EThrowState \uE002;

				// Token: 0x04008779 RID: 34681
				private Action \uE003;

				// Token: 0x02001704 RID: 5892
				protected enum EThrowState
				{
					// Token: 0x0400877B RID: 34683
					None,
					// Token: 0x0400877C RID: 34684
					Idling,
					// Token: 0x0400877D RID: 34685
					Throwing,
					// Token: 0x0400877E RID: 34686
					Threw
				}
			}

			// Token: 0x02001705 RID: 5893
			protected new class \uE003 : Player.GrenadeHandsController.\uE001
			{
				// Token: 0x0600950C RID: 38156 RVA: 0x00300A58 File Offset: 0x002FEC58
				public \uE003(Player.GrenadeHandsController controller) : base(controller)
				{
				}

				// Token: 0x0600950D RID: 38157 RVA: 0x00300A64 File Offset: 0x002FEC64
				public new void Start()
				{
					base.Start();
					this.\uE002.FirearmsAnimator.SetFireMode(Weapon.EFireMode.grenadeThrowing, false);
				}

				// Token: 0x0600950E RID: 38158 RVA: 0x00300A80 File Offset: 0x002FEC80
				public override void HideGrenade(Action onHidden, bool fastHide)
				{
					this.State = Player.EOperationState.Finished;
					this.\uE002.InitiateOperation<Player.GrenadeHandsController.\uE006>().Start(onHidden);
				}

				// Token: 0x0600950F RID: 38159 RVA: 0x00300A9C File Offset: 0x002FEC9C
				public override bool CanRemove()
				{
					return true;
				}

				// Token: 0x06009510 RID: 38160 RVA: 0x00300AA0 File Offset: 0x002FECA0
				public override void OnEnd()
				{
					this.\uE002.SetCompassState(false);
					this.\uE004 = false;
				}

				// Token: 0x06009511 RID: 38161 RVA: 0x00300AB8 File Offset: 0x002FECB8
				public override void ExamineWeapon()
				{
					this.\uE002.\uE02D.LookTrigger();
				}

				// Token: 0x06009512 RID: 38162 RVA: 0x00300ACC File Offset: 0x002FECCC
				public override void HandleFireInput()
				{
					this.PullRingForHighThrow();
				}

				// Token: 0x06009513 RID: 38163 RVA: 0x00300AD4 File Offset: 0x002FECD4
				public override void HandleAltFireInput()
				{
					this.PullRingForLowThrow();
				}

				// Token: 0x06009514 RID: 38164 RVA: 0x00300ADC File Offset: 0x002FECDC
				public override void PullRingForHighThrow()
				{
					this.State = Player.EOperationState.Finished;
					this.\uE002.InitiateOperation<Player.GrenadeHandsController.\uE002>().Start();
				}

				// Token: 0x06009515 RID: 38165 RVA: 0x00300AF8 File Offset: 0x002FECF8
				public override void PullRingForLowThrow()
				{
					this.State = Player.EOperationState.Finished;
					this.\uE002.InitiateOperation<Player.GrenadeHandsController.\uE004>().Start();
				}

				// Token: 0x06009516 RID: 38166 RVA: 0x00300B14 File Offset: 0x002FED14
				public override void LowThrow()
				{
				}

				// Token: 0x06009517 RID: 38167 RVA: 0x00300B18 File Offset: 0x002FED18
				public override void OnIdleStartAction()
				{
					this.\uE004 = true;
				}

				// Token: 0x06009518 RID: 38168 RVA: 0x00300B24 File Offset: 0x002FED24
				public override void ChangeFireMode(Weapon.EFireMode fireMode)
				{
					if (!this.CanChangeFireMode(fireMode))
					{
						return;
					}
					\uEE8B uEE8B;
					if (!this.\uE002.\uE00D(out uEE8B))
					{
						return;
					}
					this.State = Player.EOperationState.Finished;
					this.\uE002.SetFireModeVisual(fireMode);
					this.\uE002.InitiateOperation<Player.GrenadeHandsController.\uE005>().Start();
					this.\uE002.CurrentFireMode = fireMode;
				}

				// Token: 0x06009519 RID: 38169 RVA: 0x00300B80 File Offset: 0x002FED80
				public override void HighThrow()
				{
				}

				// Token: 0x0600951A RID: 38170 RVA: 0x00300B84 File Offset: 0x002FED84
				public override void SetGrenadeCompassState(bool active)
				{
					this.\uE002.CompassState.Value = active;
				}

				// Token: 0x0600951B RID: 38171 RVA: 0x00300B98 File Offset: 0x002FED98
				public override bool CanChangeFireMode(Weapon.EFireMode fireMode)
				{
					bool flag = true;
					\uEE8B uEE8B;
					if (fireMode != Weapon.EFireMode.greanadePlanting && fireMode != Weapon.EFireMode.grenadeThrowing)
					{
						flag = false;
					}
					else if (!this.\uE004)
					{
						flag = false;
					}
					else if (!this.\uE002.Item.CanPlantOnGround)
					{
						\uEA30.DisplaySingletonWarningNotification(\uF1F8.\uE000(144757).Localized(null), ENotificationDurationType.Default);
						flag = false;
					}
					else if (!this.\uE002.\uE00D(out uEE8B))
					{
						flag = false;
					}
					if (!flag)
					{
						this.\uE002.SetFireModeVisual(Weapon.EFireMode.grenadeThrowing);
					}
					return flag;
				}

				// Token: 0x0600951C RID: 38172 RVA: 0x00300C28 File Offset: 0x002FEE28
				public override void Execute(\uEF5F operation, Callback callback)
				{
					\uEF6A uEF6A = operation as \uEF6A;
					if (uEF6A == null)
					{
						callback.Succeed();
						return;
					}
					if (this.\uE002._player.InventoryController.IsAnimatedSlot(uEF6A.From1))
					{
						this.State = Player.EOperationState.Finished;
						Player.GrenadeHandsController.\uE000 uE = this.\uE002.InitiateOperation<Player.GrenadeHandsController.\uE000>();
						uE.Start(uEF6A.Item1, callback);
						uE.Setup(Player.GrenadeHandsController.\uE000.ESourceState.IdleState);
						return;
					}
					callback.Succeed();
				}

				// Token: 0x0600951D RID: 38173 RVA: 0x00300CA0 File Offset: 0x002FEEA0
				public override void SetInventoryOpened(bool opened)
				{
					this.\uE002.\uE02D.SetInventory(opened);
				}

				// Token: 0x0600951E RID: 38174 RVA: 0x00300CB4 File Offset: 0x002FEEB4
				public override void ShowGesture(EInteraction gesture)
				{
					this.\uE002.\uE02D.Gesture(gesture);
				}

				// Token: 0x0400877F RID: 34687
				private bool \uE004;
			}

			// Token: 0x02001706 RID: 5894
			protected new sealed class \uE004 : Player.GrenadeHandsController.\uE002
			{
				// Token: 0x170014DC RID: 5340
				// (get) Token: 0x0600951F RID: 38175 RVA: 0x00300CC8 File Offset: 0x002FEEC8
				public override bool WaitingHighThrow
				{
					get
					{
						return false;
					}
				}

				// Token: 0x170014DD RID: 5341
				// (get) Token: 0x06009520 RID: 38176 RVA: 0x00300CCC File Offset: 0x002FEECC
				public bool WaitingLowThrow
				{
					get
					{
						return base.WaitingHighThrow;
					}
				}

				// Token: 0x06009521 RID: 38177 RVA: 0x00300CD4 File Offset: 0x002FEED4
				public \uE004(Player.GrenadeHandsController controller) : base(controller)
				{
				}

				// Token: 0x06009522 RID: 38178 RVA: 0x00300CE0 File Offset: 0x002FEEE0
				protected override void \uE01F()
				{
					this.\uE002.\uE02D.SetGrenadeAltFire(FirearmsAnimator.EGrenadeFire.Hold);
				}

				// Token: 0x06009523 RID: 38179 RVA: 0x00300CF4 File Offset: 0x002FEEF4
				public override void HighThrow()
				{
					base.\uE000();
				}

				// Token: 0x06009524 RID: 38180 RVA: 0x00300CFC File Offset: 0x002FEEFC
				public override void LowThrow()
				{
					if (this.\uE002 == Player.GrenadeHandsController.\uE002.EThrowState.Throwing || this.\uE002 == Player.GrenadeHandsController.\uE002.EThrowState.Threw)
					{
						return;
					}
					this.\uE002 = Player.GrenadeHandsController.\uE002.EThrowState.Throwing;
					this.\uE002.\uE02D.SetGrenadeAltFire(FirearmsAnimator.EGrenadeFire.Throw);
				}

				// Token: 0x06009525 RID: 38181 RVA: 0x00300D30 File Offset: 0x002FEF30
				public override void OnDropGrenadeAction()
				{
					this.\uE002.\uE02D.SetGrenadeAltFire(FirearmsAnimator.EGrenadeFire.Idle);
					base.\uE000(true);
				}

				// Token: 0x06009526 RID: 38182 RVA: 0x00300D4C File Offset: 0x002FEF4C
				public override void HandleAltFireInput()
				{
					if (this.WaitingLowThrow)
					{
						this.LowThrow();
					}
				}
			}

			// Token: 0x02001707 RID: 5895
			protected new sealed class \uE005 : Player.GrenadeHandsController.\uE001
			{
				// Token: 0x06009527 RID: 38183 RVA: 0x00300D5C File Offset: 0x002FEF5C
				public \uE005(Player.GrenadeHandsController controller) : base(controller)
				{
				}

				// Token: 0x170014DE RID: 5342
				// (get) Token: 0x06009528 RID: 38184 RVA: 0x00300D68 File Offset: 0x002FEF68
				// (set) Token: 0x06009529 RID: 38185 RVA: 0x00300D70 File Offset: 0x002FEF70
				private new Player.GrenadeHandsController.\uE005.EPlantOperationState \uE000 { get; set; }

				// Token: 0x170014DF RID: 5343
				// (get) Token: 0x0600952A RID: 38186 RVA: 0x00300D7C File Offset: 0x002FEF7C
				private new ETripwirePlanState \uE001
				{
					get
					{
						return this.\uE002._player.\uE001.TripwirePlanState;
					}
				}

				// Token: 0x0600952B RID: 38187 RVA: 0x00300D94 File Offset: 0x002FEF94
				public new void Start()
				{
					Player player = this.\uE002._player;
					if (!(player.\uE001 == null))
					{
						if (player.\uE001.PlantEnabled)
						{
							goto IL_2F;
						}
					}
					player.CreatePlantPlanner();
					IL_2F:
					player.\uE001.Init(this.\uE002.Item);
					this.\uE002.FirearmsAnimator.SetFireMode(Weapon.EFireMode.greanadePlanting, false);
					this.\uE000 = Player.GrenadeHandsController.\uE005.EPlantOperationState.StateIn;
					base.Start();
				}

				// Token: 0x0600952C RID: 38188 RVA: 0x00300E18 File Offset: 0x002FF018
				public override void OnIdleStartAction()
				{
					this.\uE002._player.InitFirstTripwirePoint();
					this.\uE000 = Player.GrenadeHandsController.\uE005.EPlantOperationState.Idling;
				}

				// Token: 0x0600952D RID: 38189 RVA: 0x00300E34 File Offset: 0x002FF034
				public override void OnEnd()
				{
					if (this.\uE001 != ETripwirePlanState.Planned)
					{
						this.\uE002._player.ClearPlanting();
					}
					this.\uE006 = null;
				}

				// Token: 0x0600952E RID: 38190 RVA: 0x00300E5C File Offset: 0x002FF05C
				public override void OnDropFinishedAction()
				{
					if (this.\uE000 == Player.GrenadeHandsController.\uE005.EPlantOperationState.Planted)
					{
						return;
					}
					if (this.\uE000 == Player.GrenadeHandsController.\uE005.EPlantOperationState.Planting)
					{
						if (this.\uE006 != null)
						{
							Player.GrenadeHandsController.\uE005.\uE000 uE = new Player.GrenadeHandsController.\uE005.\uE000();
							uE.player = this.\uE002._player;
							TripwireVisualPlacer uE2 = uE.player.\uE001;
							uE.player.InventoryController.PlantTripwire(this.\uE002.Item, this.\uE006, uE2.FirstPlantPosition, uE2.SecondPlantPosition, new Callback(uE.\uE000));
						}
						else
						{
							Debug.LogError(\uF1F8.\uE000(144722));
						}
					}
					this.\uE000 = Player.GrenadeHandsController.\uE005.EPlantOperationState.Planted;
					if (this.\uE002.Destroyed)
					{
						Action uE3 = this.\uE003;
						if (uE3 != null)
						{
							uE3();
						}
						this.\uE003 = null;
						return;
					}
					Callback<\uE82C> uE4 = this.\uE002.\uE036;
					if (uE4 == null)
					{
						return;
					}
					uE4(this.\uE002);
				}

				// Token: 0x0600952F RID: 38191 RVA: 0x00300F58 File Offset: 0x002FF158
				public override void HandleFireInput()
				{
					if (this.\uE000 != Player.GrenadeHandsController.\uE005.EPlantOperationState.Idling)
					{
						return;
					}
					Player player = this.\uE002._player;
					\uEE8B uE;
					if (!this.\uE002.\uE00D(out uE))
					{
						\uEA30.DisplaySingletonWarningNotification(\uF1F8.\uE000(144688).Localized(null), ENotificationDurationType.Default);
						Debug.LogError(\uF1F8.\uE000(144722));
						player.ClearPlanting();
						this.\uE002.ChangeFireMode(Weapon.EFireMode.grenadeThrowing);
						return;
					}
					this.\uE006 = uE;
					TripwireVisualPlacer uE2 = player.\uE001;
					ETripwirePlanState tripwirePlanState = uE2.TripwirePlanState;
					if (tripwirePlanState == ETripwirePlanState.None)
					{
						player.InitFirstTripwirePoint();
						return;
					}
					if (tripwirePlanState == ETripwirePlanState.FirstPlant)
					{
						player.\uE001.InitSecondPoint();
						return;
					}
					if (tripwirePlanState == ETripwirePlanState.SecondPlant)
					{
						if (!uE2.CanStartPlanting())
						{
							return;
						}
						this.\uE002.PlantTripwire();
					}
				}

				// Token: 0x06009530 RID: 38192 RVA: 0x00301028 File Offset: 0x002FF228
				public override void HandleAltFireInput()
				{
					if (this.\uE000 != Player.GrenadeHandsController.\uE005.EPlantOperationState.Idling)
					{
						return;
					}
					if (this.\uE001 == ETripwirePlanState.SecondPlant)
					{
						this.\uE002._player.InitFirstTripwirePoint();
					}
				}

				// Token: 0x06009531 RID: 38193 RVA: 0x00301050 File Offset: 0x002FF250
				public override void Execute(\uEF5F operation, Callback callback)
				{
					if (this.\uE000 > Player.GrenadeHandsController.\uE005.EPlantOperationState.Idling)
					{
						callback.Fail(\uF1F8.\uE000(144675) + this.\uE000.ToString());
						return;
					}
					\uEF6A uEF6A = operation as \uEF6A;
					if (uEF6A == null)
					{
						callback.Succeed();
						return;
					}
					if (this.\uE002._player.InventoryController.IsAnimatedSlot(uEF6A.From1))
					{
						this.State = Player.EOperationState.Finished;
						Player.GrenadeHandsController.\uE000 uE = this.\uE002.InitiateOperation<Player.GrenadeHandsController.\uE000>();
						uE.Start(uEF6A.Item1, callback);
						uE.Setup(Player.GrenadeHandsController.\uE000.ESourceState.PlantTripwireState);
						return;
					}
					callback.Succeed();
				}

				// Token: 0x06009532 RID: 38194 RVA: 0x003010F8 File Offset: 0x002FF2F8
				public override void PlantTripwire()
				{
					if (this.\uE000 != Player.GrenadeHandsController.\uE005.EPlantOperationState.Idling)
					{
						return;
					}
					this.\uE000 = Player.GrenadeHandsController.\uE005.EPlantOperationState.Planting;
					this.\uE002.FirearmsAnimator.SetGrenadeFire(FirearmsAnimator.EGrenadeFire.Throw);
				}

				// Token: 0x06009533 RID: 38195 RVA: 0x0030111C File Offset: 0x002FF31C
				public override void HideGrenade(Action onHidden, bool fastHide)
				{
					switch (this.\uE000)
					{
					case Player.GrenadeHandsController.\uE005.EPlantOperationState.StateIn:
						break;
					case Player.GrenadeHandsController.\uE005.EPlantOperationState.Idling:
						if (!this.\uE002.Item.CanBeHiddenDuringThrow)
						{
							goto IL_78;
						}
						break;
					case Player.GrenadeHandsController.\uE005.EPlantOperationState.Planting:
						goto IL_78;
					case Player.GrenadeHandsController.\uE005.EPlantOperationState.Planted:
						onHidden();
						return;
					default:
						goto IL_78;
					}
					this.\uE002.FirearmsAnimator.SetFireMode(Weapon.EFireMode.grenadeThrowing, false);
					this.\uE003 = onHidden;
					this.State = Player.EOperationState.Finished;
					this.\uE002.InitiateOperation<Player.GrenadeHandsController.\uE006>().Start(onHidden);
					return;
					IL_78:
					this.\uE003 = onHidden;
				}

				// Token: 0x06009534 RID: 38196 RVA: 0x003011A8 File Offset: 0x002FF3A8
				public override void PutGrenadeBack()
				{
					this.\uE002.\uE02D.SetGrenadeAltFire(FirearmsAnimator.EGrenadeFire.Idle);
					this.\uE002.\uE02D.SetGrenadeFire(FirearmsAnimator.EGrenadeFire.Idle);
					this.\uE000();
				}

				// Token: 0x06009535 RID: 38197 RVA: 0x003011D8 File Offset: 0x002FF3D8
				public override bool CanRemove()
				{
					return true;
				}

				// Token: 0x06009536 RID: 38198 RVA: 0x003011DC File Offset: 0x002FF3DC
				private new void \uE000()
				{
					this.OnEnd();
					this.State = Player.EOperationState.Finished;
					this.\uE002.InitiateOperation<Player.GrenadeHandsController.\uE003>().Start();
				}

				// Token: 0x06009537 RID: 38199 RVA: 0x00301204 File Offset: 0x002FF404
				public override bool CanChangeFireMode(Weapon.EFireMode fireMode)
				{
					return (fireMode == Weapon.EFireMode.greanadePlanting || fireMode == Weapon.EFireMode.grenadeThrowing) && this.\uE000 == Player.GrenadeHandsController.\uE005.EPlantOperationState.Idling;
				}

				// Token: 0x06009538 RID: 38200 RVA: 0x00301224 File Offset: 0x002FF424
				public override void ChangeFireMode(Weapon.EFireMode fireMode)
				{
					if (!this.CanChangeFireMode(fireMode))
					{
						return;
					}
					this.\uE002.SetFireModeVisual(fireMode);
					this.\uE000();
					this.\uE002.CurrentFireMode = fireMode;
				}

				// Token: 0x06009539 RID: 38201 RVA: 0x00301254 File Offset: 0x002FF454
				public override void SetInventoryOpened(bool opened)
				{
					if (this.\uE000 == Player.GrenadeHandsController.\uE005.EPlantOperationState.Idling)
					{
						this.\uE002.\uE02D.SetInventory(opened);
					}
				}

				// Token: 0x0600953A RID: 38202 RVA: 0x00301270 File Offset: 0x002FF470
				public override void ShowGesture(EInteraction gesture)
				{
					if (this.\uE000 == Player.GrenadeHandsController.\uE005.EPlantOperationState.Idling)
					{
						this.\uE002.\uE02D.Gesture(gesture);
					}
				}

				// Token: 0x0600953B RID: 38203 RVA: 0x0030128C File Offset: 0x002FF48C
				public override void ExamineWeapon()
				{
					if (this.\uE000 == Player.GrenadeHandsController.\uE005.EPlantOperationState.Idling)
					{
						this.\uE002.\uE02D.LookTrigger();
					}
				}

				// Token: 0x0600953C RID: 38204 RVA: 0x003012A8 File Offset: 0x002FF4A8
				public override void FastForward()
				{
					base.FastForward();
					if (this.\uE000 == Player.GrenadeHandsController.\uE005.EPlantOperationState.StateIn)
					{
						this.\uE000 = Player.GrenadeHandsController.\uE005.EPlantOperationState.Idling;
					}
					if (this.\uE000 == Player.GrenadeHandsController.\uE005.EPlantOperationState.Idling)
					{
						this.\uE002.ChangeFireMode(Weapon.EFireMode.grenadeThrowing);
					}
				}

				// Token: 0x0600953D RID: 38205 RVA: 0x003012E4 File Offset: 0x002FF4E4
				public override void Reset()
				{
					base.Reset();
					this.\uE000 = Player.GrenadeHandsController.\uE005.EPlantOperationState.None;
					this.\uE003 = null;
					this.\uE006 = null;
				}

				// Token: 0x04008780 RID: 34688
				[CompilerGenerated]
				private Player.GrenadeHandsController.\uE005.EPlantOperationState \uE005;

				// Token: 0x04008781 RID: 34689
				private Action \uE003;

				// Token: 0x04008782 RID: 34690
				private \uEE8B \uE006;

				// Token: 0x02001708 RID: 5896
				public enum EPlantOperationState
				{
					// Token: 0x04008784 RID: 34692
					None,
					// Token: 0x04008785 RID: 34693
					StateIn,
					// Token: 0x04008786 RID: 34694
					Idling,
					// Token: 0x04008787 RID: 34695
					Planting,
					// Token: 0x04008788 RID: 34696
					Planted
				}

				// Token: 0x02001709 RID: 5897
				[CompilerGenerated]
				private new sealed class \uE000
				{
					// Token: 0x0600953F RID: 38207 RVA: 0x00301310 File Offset: 0x002FF510
					internal void \uE000(IResult result)
					{
						this.player.ClearPlanting();
						if (!result.Failed)
						{
							return;
						}
						\uEA30.DisplaySingletonWarningNotification(\uF1F8.\uE000(144646).Localized(null), ENotificationDurationType.Default);
						Debug.LogError(\uF1F8.\uE000(144892) + result.Error);
					}

					// Token: 0x04008789 RID: 34697
					public Player player;
				}
			}

			// Token: 0x0200170A RID: 5898
			protected class \uE006 : Player.GrenadeHandsController.\uE001
			{
				// Token: 0x06009540 RID: 38208 RVA: 0x00301368 File Offset: 0x002FF568
				public \uE006(Player.GrenadeHandsController controller) : base(controller)
				{
				}

				// Token: 0x06009541 RID: 38209 RVA: 0x00301374 File Offset: 0x002FF574
				public void Start(Action callback)
				{
					this.\uE000 = callback;
					base.Start();
					this.\uE002.\uE02D.SetActiveParam(false, true);
					this.\uE002._player.BodyAnimatorCommon.SetFloat(PlayerAnimator.RELOAD_FLOAT_PARAM_HASH, 1f);
				}

				// Token: 0x06009542 RID: 38210 RVA: 0x003013C8 File Offset: 0x002FF5C8
				public override void Reset()
				{
					this.\uE000 = null;
					base.Reset();
				}

				// Token: 0x06009543 RID: 38211 RVA: 0x003013D8 File Offset: 0x002FF5D8
				public override void OnHideCompleteActionAction()
				{
					this.State = Player.EOperationState.Finished;
					this.\uE000();
				}

				// Token: 0x06009544 RID: 38212 RVA: 0x003013EC File Offset: 0x002FF5EC
				public override void HideGrenade(Action onHidden, bool fastHide)
				{
					this.\uE000 = (Action)Delegate.Combine(this.\uE000, onHidden);
				}

				// Token: 0x06009545 RID: 38213 RVA: 0x00301408 File Offset: 0x002FF608
				public override void FastForward()
				{
					if (this.State != Player.EOperationState.Finished)
					{
						this.OnHideCompleteActionAction();
					}
				}

				// Token: 0x0400878A RID: 34698
				private new Action \uE000;
			}

			// Token: 0x0200170B RID: 5899
			public new sealed class \uE007 : Player.GrenadeHandsController.\uE000
			{
				// Token: 0x06009546 RID: 38214 RVA: 0x0030141C File Offset: 0x002FF61C
				public \uE007(Player.GrenadeHandsController controller) : base(controller)
				{
				}

				// Token: 0x06009547 RID: 38215 RVA: 0x00301428 File Offset: 0x002FF628
				public override void Start(Item item, Callback callback)
				{
					this.\uE008 = 0f;
					this.\uE009 = false;
					base.Start(item, callback);
				}

				// Token: 0x06009548 RID: 38216 RVA: 0x0030144C File Offset: 0x002FF64C
				public override void FastForward()
				{
					if (!this.\uE009)
					{
						this.\uE009 = true;
						this.OnBackpackDrop();
					}
				}

				// Token: 0x06009549 RID: 38217 RVA: 0x0030146C File Offset: 0x002FF66C
				public override void Update(float deltaTime)
				{
					base.Update(deltaTime);
					if (!this.\uE009 && this.\uE008 > 0.25f)
					{
						this.\uE009 = true;
						this.OnBackpackDrop();
					}
					this.\uE008 += deltaTime;
				}

				// Token: 0x0400878B RID: 34699
				private const float \uE007 = 0.25f;

				// Token: 0x0400878C RID: 34700
				private float \uE008;

				// Token: 0x0400878D RID: 34701
				private bool \uE009;
			}

			// Token: 0x0200170C RID: 5900
			private new class \uE008 : Player.GrenadeHandsController.\uE001
			{
				// Token: 0x0600954A RID: 38218 RVA: 0x003014BC File Offset: 0x002FF6BC
				public \uE008(Player.GrenadeHandsController controller) : base(controller)
				{
				}

				// Token: 0x0600954B RID: 38219 RVA: 0x003014C8 File Offset: 0x002FF6C8
				public void Start(Action callback)
				{
					this.\uE000 = callback;
					base.Start();
					this.\uE002.\uE02D.SetActiveParam(true, true);
					this.\uE002._player.BodyAnimatorCommon.SetFloat(PlayerAnimator.WEAPON_SIZE_MODIFIER_PARAM_HASH, 1f);
					this.\uE002._player.BodyAnimatorCommon.SetFloat(PlayerAnimator.RELOAD_FLOAT_PARAM_HASH, 1f);
				}

				// Token: 0x0600954C RID: 38220 RVA: 0x00301540 File Offset: 0x002FF740
				public override void Reset()
				{
					this.\uE000 = null;
					this.\uE00A = null;
					base.Reset();
				}

				// Token: 0x0600954D RID: 38221 RVA: 0x0030155C File Offset: 0x002FF75C
				public override void OnDrawCompleteAction()
				{
					this.\uE002.SetupProp();
					this.State = Player.EOperationState.Finished;
					Player.GrenadeHandsController.\uE003 uE = this.\uE002.InitiateOperation<Player.GrenadeHandsController.\uE003>();
					uE.Start();
					this.\uE000();
					this.\uE002._player.BodyAnimatorCommon.SetFloat(PlayerAnimator.RELOAD_FLOAT_PARAM_HASH, 0f);
					if (this.\uE00A != null)
					{
						uE.HideGrenade(this.\uE00A, false);
					}
				}

				// Token: 0x0600954E RID: 38222 RVA: 0x003015E0 File Offset: 0x002FF7E0
				public override void SetInventoryOpened(bool opened)
				{
					this.\uE002.\uE02D.SetInventory(opened);
				}

				// Token: 0x0600954F RID: 38223 RVA: 0x003015F4 File Offset: 0x002FF7F4
				public override void HideGrenade(Action onHidden, bool fastHide)
				{
					this.\uE00A = onHidden;
				}

				// Token: 0x06009550 RID: 38224 RVA: 0x00301600 File Offset: 0x002FF800
				public override void FastForward()
				{
					if (this.State != Player.EOperationState.Finished)
					{
						this.OnDrawCompleteAction();
					}
				}

				// Token: 0x06009551 RID: 38225 RVA: 0x00301614 File Offset: 0x002FF814
				protected override void SetLeftStanceAnimOnStartOperation()
				{
					this.\uE002._player.MovementContext.LeftStanceController.DisableLeftStanceAnimFromHandsAction();
				}

				// Token: 0x0400878E RID: 34702
				private new Action \uE000;

				// Token: 0x0400878F RID: 34703
				private Action \uE00A;
			}
		}

		// Token: 0x0200170D RID: 5901
		internal abstract class \uE007<\uE0B3> : Player.\uE00C, Player.\uE006 where \uE0B3 : Player.BaseGrenadeHandsController
		{
			// Token: 0x06009552 RID: 38226 RVA: 0x00301630 File Offset: 0x002FF830
			protected \uE007(\uE0B3 controller) : base(controller)
			{
				this.\uE002 = controller;
			}

			// Token: 0x06009553 RID: 38227 RVA: 0x00301648 File Offset: 0x002FF848
			public virtual void OnIdleStartAction()
			{
				base.\uE000();
			}

			// Token: 0x06009554 RID: 38228 RVA: 0x00301650 File Offset: 0x002FF850
			public virtual void OnDrawCompleteAction()
			{
				base.\uE000();
			}

			// Token: 0x06009555 RID: 38229 RVA: 0x00301658 File Offset: 0x002FF858
			public virtual void OnHideCompleteActionAction()
			{
				base.\uE000();
			}

			// Token: 0x06009556 RID: 38230 RVA: 0x00301660 File Offset: 0x002FF860
			public virtual void OnDropGrenadeAction()
			{
				base.\uE000();
			}

			// Token: 0x06009557 RID: 38231 RVA: 0x00301668 File Offset: 0x002FF868
			public virtual void OnDropFinishedAction()
			{
				base.\uE000();
			}

			// Token: 0x06009558 RID: 38232 RVA: 0x00301670 File Offset: 0x002FF870
			public virtual void StartCountdown()
			{
				base.\uE000();
			}

			// Token: 0x06009559 RID: 38233 RVA: 0x00301678 File Offset: 0x002FF878
			public virtual void HideGrenade(Action onHidden, bool fastHide)
			{
				base.\uE000();
			}

			// Token: 0x0600955A RID: 38234 RVA: 0x00301680 File Offset: 0x002FF880
			public virtual void PutGrenadeBack()
			{
				base.\uE000();
			}

			// Token: 0x0600955B RID: 38235 RVA: 0x00301688 File Offset: 0x002FF888
			public virtual void ShowGesture(EInteraction gesture)
			{
				base.\uE000();
			}

			// Token: 0x0600955C RID: 38236 RVA: 0x00301690 File Offset: 0x002FF890
			public virtual bool CanRemove()
			{
				return false;
			}

			// Token: 0x0600955D RID: 38237 RVA: 0x00301694 File Offset: 0x002FF894
			public virtual void FastForward()
			{
			}

			// Token: 0x0600955E RID: 38238 RVA: 0x00301698 File Offset: 0x002FF898
			public virtual void OnBackpackDrop()
			{
				base.\uE000();
			}

			// Token: 0x0600955F RID: 38239 RVA: 0x003016A0 File Offset: 0x002FF8A0
			public virtual void Execute(\uEF5F operation, Callback callback)
			{
				\uEF6A uEF6A = operation as \uEF6A;
				if (uEF6A == null)
				{
					callback.Succeed();
					return;
				}
				if (this.\uE002._player.InventoryController.IsAnimatedSlot(uEF6A.From1))
				{
					callback.Fail(string.Format(\uF1F8.\uE000(139695), base.GetType()));
					return;
				}
				callback.Succeed();
			}

			// Token: 0x04008790 RID: 34704
			protected readonly \uE0B3 \uE002;
		}

		// Token: 0x0200170E RID: 5902
		internal class QuickGrenadeThrowHandsController : Player.BaseGrenadeHandsController, \uE831, \uE830<\uEEC9>, \uE82F, \uE827
		{
			// Token: 0x06009560 RID: 38240 RVA: 0x0030170C File Offset: 0x002FF90C
			internal new static \uE084 \uE000<\uE084>(Player player, \uEEC9 item) where \uE084 : Player.QuickGrenadeThrowHandsController
			{
				return Player.BaseGrenadeHandsController.\uE000<\uE084>(player, item, true);
			}

			// Token: 0x06009561 RID: 38241 RVA: 0x00301718 File Offset: 0x002FF918
			internal new static Task<\uE084> \uE001<\uE084>(Player player, \uEEC9 item) where \uE084 : Player.QuickGrenadeThrowHandsController
			{
				return Player.BaseGrenadeHandsController.\uE001<\uE084>(player, item, true);
			}

			// Token: 0x170014E0 RID: 5344
			// (get) Token: 0x06009562 RID: 38242 RVA: 0x00301724 File Offset: 0x002FF924
			protected new Player.QuickGrenadeThrowHandsController.\uE000 \uE000
			{
				get
				{
					return base.CurrentHandsOperation as Player.QuickGrenadeThrowHandsController.\uE000;
				}
			}

			// Token: 0x06009563 RID: 38243 RVA: 0x00301734 File Offset: 0x002FF934
			public void SetOnUsedCallback(Callback<\uE830<\uEEC9>> callback)
			{
				this.\uE000.SetOnUsedCallback(callback);
			}

			// Token: 0x06009564 RID: 38244 RVA: 0x00301744 File Offset: 0x002FF944
			public override void Spawn(float animationSpeed, Action callback)
			{
				Player.QuickGrenadeThrowHandsController.\uE001 uE = new Player.QuickGrenadeThrowHandsController.\uE001();
				uE.callback = callback;
				Action callback2 = new Action(uE.\uE000);
				base.InitiateOperation<Player.QuickGrenadeThrowHandsController.\uE000>().Start(callback2);
				base.Spawn(animationSpeed, uE.callback);
			}

			// Token: 0x06009565 RID: 38245 RVA: 0x0030178C File Offset: 0x002FF98C
			public override bool CanExecute(\uEF5F operation)
			{
				return false;
			}

			// Token: 0x06009566 RID: 38246 RVA: 0x00301790 File Offset: 0x002FF990
			public override bool CanRemove()
			{
				return true;
			}

			// Token: 0x06009567 RID: 38247 RVA: 0x00301794 File Offset: 0x002FF994
			protected override Dictionary<Type, Player.ItemHandsController.OperationFactoryDelegate> GetOperationFactoryDelegates()
			{
				return new Dictionary<Type, Player.ItemHandsController.OperationFactoryDelegate>
				{
					{
						typeof(Player.QuickGrenadeThrowHandsController.\uE000),
						new Player.ItemHandsController.OperationFactoryDelegate(this.\uE002)
					}
				};
			}

			// Token: 0x06009569 RID: 38249 RVA: 0x003017C0 File Offset: 0x002FF9C0
			[CompilerGenerated]
			private Player.\uE00C \uE002()
			{
				return new Player.QuickGrenadeThrowHandsController.\uE000(this);
			}

			// Token: 0x0200170F RID: 5903
			public new class \uE000 : Player.\uE007<Player.QuickGrenadeThrowHandsController>
			{
				// Token: 0x0600956A RID: 38250 RVA: 0x003017C8 File Offset: 0x002FF9C8
				public \uE000(Player.QuickGrenadeThrowHandsController controller) : base(controller)
				{
				}

				// Token: 0x0600956B RID: 38251 RVA: 0x003017DC File Offset: 0x002FF9DC
				public void Start(Action callback)
				{
					this.\uE002._player.Say(EPhraseTrigger.OnGrenade, false, 0f, (ETagStatus)0, 100, false);
					this.\uE000 = callback;
					base.Start();
					this.\uE003 = (this.\uE004 = false);
				}

				// Token: 0x0600956C RID: 38252 RVA: 0x00301828 File Offset: 0x002FFA28
				public void SetOnUsedCallback(Callback<\uE830<\uEEC9>> callback)
				{
					this.\uE002 = callback;
				}

				// Token: 0x0600956D RID: 38253 RVA: 0x00301834 File Offset: 0x002FFA34
				public override void OnDropGrenadeAction()
				{
					this.\uE004 = true;
					this.\uE002.\uE01B(this.\uE005, false);
				}

				// Token: 0x0600956E RID: 38254 RVA: 0x00301850 File Offset: 0x002FFA50
				public override void OnDropFinishedAction()
				{
					this.\uE003 = true;
					this.\uE002.\uE02D.SetQuickFire(false);
					if (this.\uE002.Destroyed)
					{
						this.\uE001();
						return;
					}
					if (this.\uE002 != null)
					{
						this.\uE002(this.\uE002);
					}
				}

				// Token: 0x0600956F RID: 38255 RVA: 0x003018BC File Offset: 0x002FFABC
				public override void OnDrawCompleteAction()
				{
					this.\uE000();
				}

				// Token: 0x06009570 RID: 38256 RVA: 0x003018CC File Offset: 0x002FFACC
				public override void HideGrenade(Action onHidden, bool fastHide = false)
				{
					if (this.\uE003)
					{
						onHidden();
						return;
					}
					if (this.\uE001 == null)
					{
						this.\uE001 = onHidden;
						return;
					}
					this.\uE001 = (Action)Delegate.Combine(this.\uE001, onHidden);
				}

				// Token: 0x06009571 RID: 38257 RVA: 0x0030190C File Offset: 0x002FFB0C
				public override void StartCountdown()
				{
					this.\uE005 = 0f;
				}

				// Token: 0x06009572 RID: 38258 RVA: 0x0030191C File Offset: 0x002FFB1C
				public override void Update(float deltaTime)
				{
					base.Update(deltaTime);
					if (this.\uE005 >= 0f)
					{
						this.\uE005 += deltaTime;
					}
				}

				// Token: 0x06009573 RID: 38259 RVA: 0x00301948 File Offset: 0x002FFB48
				public override void Reset()
				{
					base.Reset();
					this.\uE005 = -1f;
					this.\uE003 = (this.\uE004 = false);
					this.\uE001 = null;
					this.\uE000 = null;
					this.\uE002 = null;
				}

				// Token: 0x06009574 RID: 38260 RVA: 0x00301998 File Offset: 0x002FFB98
				public override void FastForward()
				{
					bool uE = this.\uE004;
					if (!this.\uE003)
					{
						this.OnDropFinishedAction();
					}
				}

				// Token: 0x06009575 RID: 38261 RVA: 0x003019B8 File Offset: 0x002FFBB8
				protected override void SetLeftStanceAnimOnStartOperation()
				{
					this.\uE002._player.MovementContext.LeftStanceController.DisableLeftStanceAnimFromHandsAction();
				}

				// Token: 0x04008791 RID: 34705
				private new Action \uE000;

				// Token: 0x04008792 RID: 34706
				private new Action \uE001;

				// Token: 0x04008793 RID: 34707
				private new Callback<\uE830<\uEEC9>> \uE002;

				// Token: 0x04008794 RID: 34708
				private bool \uE003;

				// Token: 0x04008795 RID: 34709
				private bool \uE004;

				// Token: 0x04008796 RID: 34710
				private float \uE005 = -1f;
			}

			// Token: 0x02001710 RID: 5904
			[CompilerGenerated]
			private new sealed class \uE001
			{
				// Token: 0x06009577 RID: 38263 RVA: 0x003019DC File Offset: 0x002FFBDC
				internal void \uE000()
				{
					this.callback();
				}

				// Token: 0x04008797 RID: 34711
				public Action callback;
			}
		}

		// Token: 0x02001711 RID: 5905
		private interface \uE008
		{
			// Token: 0x06009578 RID: 38264
			void OnDrawCompleteAction();

			// Token: 0x06009579 RID: 38265
			void OnHideCompleteActionAction();

			// Token: 0x0600957A RID: 38266
			void OnUseAction();

			// Token: 0x0600957B RID: 38267
			void HideController(Action onHidden, bool fastHide);
		}

		// Token: 0x02001712 RID: 5906
		public class QuickUseItemController : Player.ItemHandsController, \uE833, \uE827
		{
			// Token: 0x170014E1 RID: 5345
			// (get) Token: 0x0600957C RID: 38268 RVA: 0x003019EC File Offset: 0x002FFBEC
			public override FirearmsAnimator FirearmsAnimator
			{
				get
				{
					return this._objectInHandsAnimator;
				}
			}

			// Token: 0x170014E2 RID: 5346
			// (get) Token: 0x0600957D RID: 38269 RVA: 0x003019F4 File Offset: 0x002FFBF4
			public override string LoggerDistinctId
			{
				get
				{
					return string.Format(\uF1F8.\uE000(139683), this._player.ProfileId, this._player.Profile.Info.Nickname, this);
				}
			}

			// Token: 0x0600957E RID: 38270 RVA: 0x00301A28 File Offset: 0x002FFC28
			internal new static \uE084 \uE000<\uE084>(Player player, Item item) where \uE084 : Player.QuickUseItemController
			{
				Player.QuickUseItemController.\uE004<\uE084> uE = new Player.QuickUseItemController.\uE004<\uE084>();
				uE.controller = Player.ItemHandsController.\uE001<\uE084>(player, item, new Player.ItemHandsController.\uE000(Singleton<\uE90C>.Instance.CreateItemUsablePrefab));
				UsableHandsPrefab component = uE.controller._controllerObject.GetComponent<UsableHandsPrefab>();
				GameObject gameObject = Singleton<\uE90C>.Instance.CreateItem(item, true);
				gameObject.transform.SetParent(component.ItemSpawnTransform);
				gameObject.transform.localPosition = Vector3.zero;
				gameObject.transform.localRotation = Quaternion.identity;
				gameObject.SetActive(true);
				uE.controller._usableItemGameObject = gameObject;
				uE.controller._objectInHandsAnimator = component.FirearmsAnimator;
				uE.controller._objectInHandsAnimator.AddEventsConsumer(uE.controller);
				uE.controller.CompositeDisposable.AddDisposable(new Action(uE.\uE000));
				uE.controller._objectInHandsAnimator.SkipTime(0.016666668f);
				uE.controller._player.HandsAnimator = uE.controller._objectInHandsAnimator;
				bool flag = uE.controller._player.UpdateGrenadeAnimatorDuePoV();
				uE.controller._objectInHandsAnimator.Animator.SetFloat(\uF1F8.\uE000(145150), (float)(flag ? 1 : 0));
				player.ProceduralWeaponAnimation.ClearPreviousWeapon();
				player.ProceduralWeaponAnimation.InitTransforms(uE.controller.HandsHierarchy, null);
				component.ObjectInHands.AfterGetFromPoolInit(player.ProceduralWeaponAnimation, null, player.IsYourPlayer);
				uE.controller._controllerObject.GetComponent<BaseSoundPlayer>().Init(uE.controller, player.PlayerBones.WeaponRoot, player);
				return uE.controller;
			}

			// Token: 0x0600957F RID: 38271 RVA: 0x00301C38 File Offset: 0x002FFE38
			protected override void IEventsConsumerOnWeapIn()
			{
				this.\uE001();
			}

			// Token: 0x06009580 RID: 38272 RVA: 0x00301C40 File Offset: 0x002FFE40
			protected override void IEventsConsumerOnWeapOut()
			{
				this.\uE002();
			}

			// Token: 0x06009581 RID: 38273 RVA: 0x00301C48 File Offset: 0x002FFE48
			protected override void IEventsConsumerOnFiringBullet()
			{
				this.\uE003();
			}

			// Token: 0x06009582 RID: 38274 RVA: 0x00301C50 File Offset: 0x002FFE50
			protected override void IEventsConsumerOnThirdAction(int i)
			{
				base.TranslateAnimatorParameter(i);
			}

			// Token: 0x170014E3 RID: 5347
			// (get) Token: 0x06009583 RID: 38275 RVA: 0x00301C5C File Offset: 0x002FFE5C
			protected Player.QuickUseItemController.\uE001 CurrentOperation
			{
				get
				{
					return base.CurrentHandsOperation as Player.QuickUseItemController.\uE001;
				}
			}

			// Token: 0x06009584 RID: 38276 RVA: 0x00301C6C File Offset: 0x002FFE6C
			protected override Dictionary<Type, Player.ItemHandsController.OperationFactoryDelegate> GetOperationFactoryDelegates()
			{
				return new Dictionary<Type, Player.ItemHandsController.OperationFactoryDelegate>
				{
					{
						typeof(Player.QuickUseItemController.\uE001),
						new Player.ItemHandsController.OperationFactoryDelegate(this.\uE005)
					}
				};
			}

			// Token: 0x06009585 RID: 38277 RVA: 0x00301C90 File Offset: 0x002FFE90
			public override void Spawn(float animationSpeed, Action callback)
			{
				Player.QuickUseItemController.\uE002 uE = new Player.QuickUseItemController.\uE002();
				uE.callback = callback;
				Action callback2 = new Action(uE.\uE000);
				base.InitiateOperation<Player.QuickUseItemController.\uE001>().Start(callback2);
			}

			// Token: 0x06009586 RID: 38278 RVA: 0x00301CC4 File Offset: 0x002FFEC4
			public override void Drop(float animationSpeed, Action callback, bool fastDrop, Item nextControllerItem = null)
			{
				Player.QuickUseItemController.\uE003 uE = new Player.QuickUseItemController.\uE003();
				uE.callback = callback;
				if (base.Destroyed)
				{
					return;
				}
				base.Destroyed = true;
				this._objectInHandsAnimator.SetAnimationSpeed(animationSpeed);
				new Action(uE.\uE000)();
			}

			// Token: 0x06009587 RID: 38279 RVA: 0x00301D14 File Offset: 0x002FFF14
			public override void Destroy()
			{
				this._player.ProceduralWeaponAnimation.ClearPreviousWeapon();
				base.Destroy();
				this._objectInHandsAnimator = null;
				AssetPoolObject.ReturnToPool(this._controllerObject.gameObject, true);
			}

			// Token: 0x06009588 RID: 38280 RVA: 0x00301D4C File Offset: 0x002FFF4C
			public override bool CanExecute(\uEF5F operation)
			{
				\uEF9F uEF9F = operation as \uEF9F;
				if (uEF9F != null)
				{
					return uEF9F.Item == base.Item;
				}
				\uEF92 uEF = operation as \uEF92;
				return uEF != null && uEF.Tripwire == base.Item;
			}

			// Token: 0x06009589 RID: 38281 RVA: 0x00301D9C File Offset: 0x002FFF9C
			public override void Execute(\uEF5F operation, Callback callback)
			{
				callback.Succeed();
			}

			// Token: 0x0600958A RID: 38282 RVA: 0x00301DA4 File Offset: 0x002FFFA4
			public override bool CanRemove()
			{
				return false;
			}

			// Token: 0x0600958B RID: 38283 RVA: 0x00301DA8 File Offset: 0x002FFFA8
			public override bool CanInteract()
			{
				return false;
			}

			// Token: 0x0600958C RID: 38284 RVA: 0x00301DAC File Offset: 0x002FFFAC
			public override void Interact(bool isInteracting, int actionIndex)
			{
			}

			// Token: 0x0600958D RID: 38285 RVA: 0x00301DB0 File Offset: 0x002FFFB0
			public void SetOnUsedCallback(Callback<\uE833> callback)
			{
				this.CurrentOperation.SetOnUsedCallback(callback);
			}

			// Token: 0x0600958E RID: 38286 RVA: 0x00301DC0 File Offset: 0x002FFFC0
			public Callback<\uE833> GetOnUsedCallback()
			{
				return this.CurrentOperation.GetOnUsedCallback();
			}

			// Token: 0x0600958F RID: 38287 RVA: 0x00301DD0 File Offset: 0x002FFFD0
			private new void \uE001()
			{
				this.CurrentOperation.OnDrawCompleteAction();
			}

			// Token: 0x06009590 RID: 38288 RVA: 0x00301DE0 File Offset: 0x002FFFE0
			private void \uE002()
			{
				this.CurrentOperation.OnHideCompleteActionAction();
			}

			// Token: 0x06009591 RID: 38289 RVA: 0x00301DF0 File Offset: 0x002FFFF0
			private void \uE003()
			{
				this.CurrentOperation.OnUseAction();
			}

			// Token: 0x06009592 RID: 38290 RVA: 0x00301E00 File Offset: 0x00300000
			private void \uE004()
			{
				AssetPoolObject.ReturnToPool(this._usableItemGameObject, true);
				this._usableItemGameObject = null;
			}

			// Token: 0x06009593 RID: 38291 RVA: 0x00301E18 File Offset: 0x00300018
			public override void ShowGesture(EInteraction gesture)
			{
			}

			// Token: 0x06009594 RID: 38292 RVA: 0x00301E1C File Offset: 0x0030001C
			public override void FastForwardCurrentState()
			{
				this.CurrentOperation.FastForward();
			}

			// Token: 0x06009596 RID: 38294 RVA: 0x00301E34 File Offset: 0x00300034
			[CompilerGenerated]
			private Player.\uE00C \uE005()
			{
				return new Player.QuickUseItemController.\uE001(this);
			}

			// Token: 0x04008798 RID: 34712
			protected GameObject _usableItemGameObject;

			// Token: 0x04008799 RID: 34713
			protected new FirearmsAnimator _objectInHandsAnimator;

			// Token: 0x02001713 RID: 5907
			public new abstract class \uE000 : Player.\uE00C, Player.\uE008
			{
				// Token: 0x06009597 RID: 38295 RVA: 0x00301E3C File Offset: 0x0030003C
				protected \uE000(Player.QuickUseItemController controller) : base(controller)
				{
					this.\uE002 = controller;
				}

				// Token: 0x06009598 RID: 38296 RVA: 0x00301E4C File Offset: 0x0030004C
				public virtual void OnDrawCompleteAction()
				{
					base.\uE000();
				}

				// Token: 0x06009599 RID: 38297 RVA: 0x00301E54 File Offset: 0x00300054
				public virtual void OnHideCompleteActionAction()
				{
					base.\uE000();
				}

				// Token: 0x0600959A RID: 38298 RVA: 0x00301E5C File Offset: 0x0030005C
				public virtual void OnUseAction()
				{
					base.\uE000();
				}

				// Token: 0x0600959B RID: 38299 RVA: 0x00301E64 File Offset: 0x00300064
				public virtual void HideController(Action onHidden, bool fastHide)
				{
					base.\uE000();
				}

				// Token: 0x0400879A RID: 34714
				protected readonly Player.QuickUseItemController \uE002;
			}

			// Token: 0x02001714 RID: 5908
			public new class \uE001 : Player.QuickUseItemController.\uE000
			{
				// Token: 0x0600959C RID: 38300 RVA: 0x00301E6C File Offset: 0x0030006C
				public \uE001(Player.QuickUseItemController controller) : base(controller)
				{
				}

				// Token: 0x0600959D RID: 38301 RVA: 0x00301E78 File Offset: 0x00300078
				public void Start(Action callback)
				{
					this.\uE07D = callback;
					this.\uE002._objectInHandsAnimator.SetActiveParam(true, true);
					base.Start();
				}

				// Token: 0x0600959E RID: 38302 RVA: 0x00301EA0 File Offset: 0x003000A0
				public void SetOnUsedCallback(Callback<\uE833> callback)
				{
					this.\uE07F = callback;
				}

				// Token: 0x0600959F RID: 38303 RVA: 0x00301EAC File Offset: 0x003000AC
				public Callback<\uE833> GetOnUsedCallback()
				{
					return this.\uE07F;
				}

				// Token: 0x060095A0 RID: 38304 RVA: 0x00301EB4 File Offset: 0x003000B4
				public override void OnUseAction()
				{
					this.\uE002._objectInHandsAnimator.SetActiveParam(false, true);
					this.\uE002.\uE004();
					if (this.\uE002.Destroyed)
					{
						Action uE07E = this.\uE07E;
						this.\uE07E = null;
						uE07E();
						return;
					}
					if (this.\uE07F != null)
					{
						Callback<\uE833> uE07F = this.\uE07F;
						this.\uE07F = null;
						uE07F(this.\uE002);
					}
				}

				// Token: 0x060095A1 RID: 38305 RVA: 0x00301F34 File Offset: 0x00300134
				public override void OnDrawCompleteAction()
				{
					this.\uE07D();
				}

				// Token: 0x060095A2 RID: 38306 RVA: 0x00301F44 File Offset: 0x00300144
				public override void Reset()
				{
					base.Reset();
					this.\uE07E = null;
					this.\uE07D = null;
					this.\uE07F = null;
				}

				// Token: 0x060095A3 RID: 38307 RVA: 0x00301F68 File Offset: 0x00300168
				public virtual void FastForward()
				{
					base.\uE000();
				}

				// Token: 0x0400879B RID: 34715
				private Action \uE07D;

				// Token: 0x0400879C RID: 34716
				private Action \uE07E;

				// Token: 0x0400879D RID: 34717
				private Callback<\uE833> \uE07F;
			}

			// Token: 0x02001715 RID: 5909
			[CompilerGenerated]
			private new sealed class \uE002
			{
				// Token: 0x060095A5 RID: 38309 RVA: 0x00301F78 File Offset: 0x00300178
				internal void \uE000()
				{
					this.callback();
				}

				// Token: 0x0400879E RID: 34718
				public Action callback;
			}

			// Token: 0x02001716 RID: 5910
			[CompilerGenerated]
			private new sealed class \uE003
			{
				// Token: 0x060095A7 RID: 38311 RVA: 0x00301F90 File Offset: 0x00300190
				internal void \uE000()
				{
					this.callback();
				}

				// Token: 0x0400879F RID: 34719
				public Action callback;
			}

			// Token: 0x02001717 RID: 5911
			[CompilerGenerated]
			private sealed class \uE004<\uE084> where \uE084 : Player.QuickUseItemController
			{
				// Token: 0x060095A9 RID: 38313 RVA: 0x00301FA8 File Offset: 0x003001A8
				internal void \uE000()
				{
					this.controller._objectInHandsAnimator.RemoveEventsConsumer(this.controller);
				}

				// Token: 0x040087A0 RID: 34720
				public \uE084 controller;
			}
		}

		// Token: 0x02001718 RID: 5912
		public enum EOperationState
		{
			// Token: 0x040087A2 RID: 34722
			Ready,
			// Token: 0x040087A3 RID: 34723
			Executing,
			// Token: 0x040087A4 RID: 34724
			Finished
		}

		// Token: 0x02001719 RID: 5913
		public abstract class ItemHandsController : Player.AbstractHandsController, \uE827
		{
			// Token: 0x170014E4 RID: 5348
			// (get) Token: 0x060095AA RID: 38314 RVA: 0x00301FCC File Offset: 0x003001CC
			public override FirearmsAnimator FirearmsAnimator
			{
				get
				{
					return this._objectInHandsAnimator;
				}
			}

			// Token: 0x170014E5 RID: 5349
			// (get) Token: 0x060095AB RID: 38315 RVA: 0x00301FD4 File Offset: 0x003001D4
			public virtual \uF1AE<bool> CompassState { get; } = new \uF1AE<bool>(false, null);

			// Token: 0x170014E6 RID: 5350
			// (get) Token: 0x060095AC RID: 38316 RVA: 0x00301FDC File Offset: 0x003001DC
			public bool SuitableForHandInput
			{
				get
				{
					return this._player.StateIsSuitableForHandInput;
				}
			}

			// Token: 0x170014E7 RID: 5351
			// (get) Token: 0x060095AD RID: 38317 RVA: 0x00301FEC File Offset: 0x003001EC
			public bool CurrentCompassState
			{
				get
				{
					return this.CompassState.Value;
				}
			}

			// Token: 0x170014E8 RID: 5352
			// (get) Token: 0x060095AE RID: 38318 RVA: 0x00301FFC File Offset: 0x003001FC
			public bool CurrentRadioTransmitterState
			{
				get
				{
					return this.RadioTransmitterState.Value;
				}
			}

			// Token: 0x170014E9 RID: 5353
			// (get) Token: 0x060095AF RID: 38319 RVA: 0x0030200C File Offset: 0x0030020C
			public override GameObject ControllerGameObject
			{
				get
				{
					return this._controllerObject;
				}
			}

			// Token: 0x170014EA RID: 5354
			// (get) Token: 0x060095B0 RID: 38320 RVA: 0x00302014 File Offset: 0x00300214
			public override float AimingSensitivity
			{
				get
				{
					return this._player.GetAimingSensitivity();
				}
			}

			// Token: 0x170014EB RID: 5355
			// (get) Token: 0x060095B1 RID: 38321 RVA: 0x00302028 File Offset: 0x00300228
			public override TransformLinks HandsHierarchy
			{
				get
				{
					return this._handsHierarchy;
				}
			}

			// Token: 0x170014EC RID: 5356
			// (get) Token: 0x060095B2 RID: 38322 RVA: 0x00302030 File Offset: 0x00300230
			// (set) Token: 0x060095B3 RID: 38323 RVA: 0x00302038 File Offset: 0x00300238
			public Player.\uE00C CurrentHandsOperation { get; private set; }

			// Token: 0x170014ED RID: 5357
			// (get) Token: 0x060095B4 RID: 38324 RVA: 0x00302044 File Offset: 0x00300244
			public string CurrentHandsOperationName
			{
				get
				{
					if (this.CurrentHandsOperation == null)
					{
						return string.Empty;
					}
					string text = this.CurrentHandsOperation.GetType().ToString();
					if (!text.Contains(\uF1F8.\uE000(41167)))
					{
						return text;
					}
					string[] array = text.Split('+', StringSplitOptions.None);
					return array[array.Length - 1];
				}
			}

			// Token: 0x170014EE RID: 5358
			// (get) Token: 0x060095B5 RID: 38325 RVA: 0x0030209C File Offset: 0x0030029C
			Item \uE827.Item
			{
				get
				{
					return this.\uE039;
				}
			}

			// Token: 0x060095B6 RID: 38326 RVA: 0x003020A4 File Offset: 0x003002A4
			public override void BlindFire(int b)
			{
			}

			// Token: 0x060095B7 RID: 38327 RVA: 0x003020A8 File Offset: 0x003002A8
			protected override Item GetItem()
			{
				return this.\uE039;
			}

			// Token: 0x060095B8 RID: 38328 RVA: 0x003020B0 File Offset: 0x003002B0
			internal static \uE084 \uE000<\uE084>(Player player, Item item) where \uE084 : Player.ItemHandsController
			{
				if (player.PlayerBody != null)
				{
					PlayerBody.\uE001 slotViewByItem = player.PlayerBody.GetSlotViewByItem(item);
					if (slotViewByItem != null)
					{
						slotViewByItem.DestroyCurrentModel();
					}
				}
				return Player.ItemHandsController.\uE001<\uE084>(player, item, new Player.ItemHandsController.\uE000(Player.ItemHandsController.<>c__40<\uE084>.<>9.\uE000));
			}

			// Token: 0x060095B9 RID: 38329 RVA: 0x00302108 File Offset: 0x00300308
			internal static \uE084 \uE001<\uE084>(Player player, Item item, Player.ItemHandsController.\uE000 itemObjectFactoryDelegate) where \uE084 : Player.ItemHandsController
			{
				\uE084 uE = player.gameObject.AddComponent<\uE084>();
				uE._controllerObject = itemObjectFactoryDelegate(item, player);
				Player.ItemHandsController.\uE004<\uE084>(uE, player, item);
				return uE;
			}

			// Token: 0x060095BA RID: 38330 RVA: 0x00302130 File Offset: 0x00300330
			internal static Task<\uE084> \uE002<\uE084>(Player player, Item item) where \uE084 : Player.ItemHandsController
			{
				return Player.ItemHandsController.\uE003<\uE084>(player, item, new Player.ItemHandsController.\uE001(Player.ItemHandsController.<>c__42<\uE084>.<>9.\uE000));
			}

			// Token: 0x060095BB RID: 38331 RVA: 0x00302158 File Offset: 0x00300358
			internal static Task<\uE084> \uE003<\uE084>(Player player, Item item, Player.ItemHandsController.\uE001 itemObjectAsyncFactoryDelegate) where \uE084 : Player.ItemHandsController
			{
				Player.ItemHandsController.\uE002<\uE084> uE;
				uE.<>t__builder = AsyncTaskMethodBuilder<\uE084>.Create();
				uE.player = player;
				uE.item = item;
				uE.itemObjectAsyncFactoryDelegate = itemObjectAsyncFactoryDelegate;
				uE.<>1__state = -1;
				uE.<>t__builder.Start<Player.ItemHandsController.\uE002<\uE084>>(ref uE);
				return uE.<>t__builder.Task;
			}

			// Token: 0x060095BC RID: 38332 RVA: 0x003021C0 File Offset: 0x003003C0
			private static void \uE004<\uE084>(\uE084 controller, Player player, Item item) where \uE084 : Player.ItemHandsController
			{
				WeaponPrefab component = controller._controllerObject.GetComponent<WeaponPrefab>();
				controller._handsHierarchy = component.Hierarchy;
				controller._objectInHandsAnimator = component.FirearmsAnimator;
				controller.AnimationEventsEmitter = component.AnimationEventsEmitter;
				controller._player = player;
				controller._controllerObject.transform.SetPositionAndRotation(player.PlayerBones.Ribcage.Original.position, player.HandsRotation);
				player.UpdateBonesOnWeaponChange(controller._handsHierarchy);
				controller.\uE039 = item;
				controller.WeaponRoot = player.PlayerBones.WeaponRoot.Original;
				Player.ItemHandsController.\uE005<\uE084>(controller, player);
				if (player.UsedSimplifiedSkeleton)
				{
					if (item.Id == \uF1F8.\uE000(144859))
					{
						player.BodyAnimatorCommon.SetFloat(PlayerAnimator.ZOMBIE_WEAPON_TYPE_FLOAT_HASH, 0f);
					}
					else if (item is \uEE5B)
					{
						controller._controllerObject.transform.SetParent(player.PlayerBones.WeaponMeleeRoot);
						player.BodyAnimatorCommon.SetFloat(PlayerAnimator.ZOMBIE_WEAPON_TYPE_FLOAT_HASH, 1f);
					}
					else if (item is \uEE87)
					{
						controller._controllerObject.transform.SetParent(player.PlayerBones.WeaponPistolRoot);
						player.BodyAnimatorCommon.SetFloat(PlayerAnimator.ZOMBIE_WEAPON_TYPE_FLOAT_HASH, 2f);
					}
					controller._controllerObject.transform.localPosition = Vector3.zero;
					controller._controllerObject.transform.localRotation = Quaternion.identity;
				}
				controller.Logger = new Player.ItemHandsController.HandsControllerLogger(LoggerMode.Add, controller);
			}

			// Token: 0x060095BD RID: 38333 RVA: 0x003023B4 File Offset: 0x003005B4
			private static void \uE005<\uE084>(\uE084 controller, Player player) where \uE084 : Player.ItemHandsController
			{
				player.MovementContext.PlayerAnimator.EventsDispatcher.PlayerAnimatorEvents.DropBackpackEvents.OnBackpackDropEvent += controller.OnBackpackDrop;
				player.MovementContext.PlayerAnimator.EventsDispatcher.PlayerAnimatorEvents.BipodToggleEvents.OnBipodToggleEvent += controller.OnBipodToggle;
				player.MovementContext.PlayerAnimator.EventsDispatcher.PlayerAnimatorEvents.ZombieFireBulletEvents.OnZombieFireBulletEvent += controller.OnZombieFireBullet;
				player.MovementContext.PlayerAnimator.EventsDispatcher.PlayerAnimatorEvents.ZombieFireEndEvents.OnZombieFireEndEvent += controller.OnZombieFireEnd;
			}

			// Token: 0x060095BE RID: 38334 RVA: 0x00302484 File Offset: 0x00300684
			private void \uE006()
			{
				this._player.MovementContext.PlayerAnimator.EventsDispatcher.PlayerAnimatorEvents.DropBackpackEvents.OnBackpackDropEvent -= base.OnBackpackDrop;
				this._player.MovementContext.PlayerAnimator.EventsDispatcher.PlayerAnimatorEvents.BipodToggleEvents.OnBipodToggleEvent -= base.OnBipodToggle;
				this._player.MovementContext.PlayerAnimator.EventsDispatcher.PlayerAnimatorEvents.ZombieFireBulletEvents.OnZombieFireBulletEvent -= this.OnZombieFireBullet;
				this._player.MovementContext.PlayerAnimator.EventsDispatcher.PlayerAnimatorEvents.ZombieFireEndEvents.OnZombieFireEndEvent -= this.OnZombieFireEnd;
			}

			// Token: 0x060095BF RID: 38335 RVA: 0x00302554 File Offset: 0x00300754
			public void TranslateAnimatorParameter(int actionIndex)
			{
				this._player.BodyAnimatorCommon.SetInteger(PlayerAnimator.FIRST_PERSON_ACTION, actionIndex);
			}

			// Token: 0x060095C0 RID: 38336 RVA: 0x0030256C File Offset: 0x0030076C
			public override bool IsPlacingBeacon()
			{
				return this.CurrentHandsOperation is Player.QuickUseItemController.\uE001;
			}

			// Token: 0x060095C1 RID: 38337 RVA: 0x0030257C File Offset: 0x0030077C
			protected void SetupProp()
			{
				if (!this._player.HealthController.IsAlive)
				{
					return;
				}
				this.CompositeDisposable.BindState<bool>(this.CompassState, new Action<bool>(this.CompassStateHandler));
				this.CompositeDisposable.BindState<bool>(this._player.MovementContext.CanUseProp, new Action<bool>(this.OnCanUsePropChanged));
			}

			// Token: 0x060095C2 RID: 38338 RVA: 0x003025E4 File Offset: 0x003007E4
			protected virtual void OnCanUsePropChanged(bool canUse)
			{
				if (!canUse)
				{
					this.SetCompassState(false);
				}
			}

			// Token: 0x060095C3 RID: 38339 RVA: 0x003025F0 File Offset: 0x003007F0
			protected void SetPropVisibility(bool isVisible)
			{
				if (!isVisible)
				{
					this.SetCompassState(false);
				}
				this._player.SetPropVisibility(this.CompassState.Value);
			}

			// Token: 0x060095C4 RID: 38340 RVA: 0x00302618 File Offset: 0x00300818
			public override void ManualUpdate(float deltaTime)
			{
				this.CurrentHandsOperation.Update(deltaTime);
			}

			// Token: 0x060095C5 RID: 38341 RVA: 0x00302628 File Offset: 0x00300828
			public void ToggleCompassState()
			{
				this.SetCompassState(!this.CompassState.Value);
			}

			// Token: 0x060095C6 RID: 38342 RVA: 0x00302640 File Offset: 0x00300840
			public virtual void SetCompassState(bool active)
			{
				if (this.CanChangeCompassState(active))
				{
					this.CompassState.Value = active;
				}
			}

			// Token: 0x060095C7 RID: 38343 RVA: 0x00302658 File Offset: 0x00300858
			public void ApplyCompassPacket(\uECED packet)
			{
				if (packet.Toggle)
				{
					this.CompassState.Value = packet.Status;
				}
			}

			// Token: 0x060095C8 RID: 38344 RVA: 0x00302674 File Offset: 0x00300874
			protected virtual bool CanChangeCompassState(bool newState)
			{
				return !newState || (this._player.MovementContext.CanUseProp.Value && !this.IsInInteractionStrictCheck());
			}

			// Token: 0x060095C9 RID: 38345 RVA: 0x003026A8 File Offset: 0x003008A8
			protected virtual void CompassStateHandler(bool isActive)
			{
				this._player.CreateCompass();
				this._player.SetCompassState(isActive);
				this._objectInHandsAnimator.ShowCompass(isActive);
			}

			// Token: 0x060095CA RID: 38346 RVA: 0x003026D4 File Offset: 0x003008D4
			public override void BallisticUpdate(float deltaTime)
			{
			}

			// Token: 0x060095CB RID: 38347 RVA: 0x003026D8 File Offset: 0x003008D8
			public override void EmitEvents()
			{
				base.AnimationEventsEmitter.EmitEvents();
			}

			// Token: 0x060095CC RID: 38348
			protected abstract Dictionary<Type, Player.ItemHandsController.OperationFactoryDelegate> GetOperationFactoryDelegates();

			// Token: 0x060095CD RID: 38349 RVA: 0x003026E8 File Offset: 0x003008E8
			protected internal void ClearPreWarmOperationsDict()
			{
				this.\uE038.Clear();
			}

			// Token: 0x060095CE RID: 38350 RVA: 0x003026F8 File Offset: 0x003008F8
			protected internal TCreateOperation InitiateOperation<TCreateOperation>() where TCreateOperation : Player.\uE00C
			{
				if (this.\uE03A == null)
				{
					this.\uE03A = this.GetOperationFactoryDelegates();
				}
				Type typeFromHandle = typeof(TCreateOperation);
				if (!this.\uE038.ContainsKey(typeFromHandle))
				{
					this.\uE038[typeFromHandle] = this.\uE03A[typeFromHandle]();
				}
				Player.\uE00C uE00C = this.\uE038[typeFromHandle];
				uE00C.UpdateLoggerController(this);
				this.Logger.TraceStateChange(this.CurrentHandsOperation, uE00C);
				if (this.CurrentHandsOperation != null)
				{
					this.CurrentHandsOperation.OnEnd();
				}
				this.CurrentHandsOperation = uE00C;
				this.CurrentHandsOperation.Reset();
				return (TCreateOperation)((object)this.CurrentHandsOperation);
			}

			// Token: 0x060095CF RID: 38351 RVA: 0x003027C8 File Offset: 0x003009C8
			public override string ToString()
			{
				return string.Format(\uF1F8.\uE000(144816), base.ToString(), this.\uE039, this.CurrentHandsOperation);
			}

			// Token: 0x060095D0 RID: 38352 RVA: 0x003027EC File Offset: 0x003009EC
			public override void Destroy()
			{
				this.\uE006();
				base.Destroy();
			}

			// Token: 0x040087A5 RID: 34725
			protected FirearmsAnimator _objectInHandsAnimator;

			// Token: 0x040087A6 RID: 34726
			private readonly Dictionary<Type, Player.\uE00C> \uE038 = new Dictionary<Type, Player.\uE00C>();

			// Token: 0x040087A7 RID: 34727
			protected GameObject _controllerObject;

			// Token: 0x040087A8 RID: 34728
			protected TransformLinks _handsHierarchy;

			// Token: 0x040087A9 RID: 34729
			private Item \uE039;

			// Token: 0x040087AA RID: 34730
			private Dictionary<Type, Player.ItemHandsController.OperationFactoryDelegate> \uE03A;

			// Token: 0x040087AB RID: 34731
			protected internal Player _player;

			// Token: 0x040087AC RID: 34732
			[CompilerGenerated]
			private readonly \uF1AE<bool> \uE03B;

			// Token: 0x040087AD RID: 34733
			protected \uF1AE<bool> RadioTransmitterState = new \uF1AE<bool>(false, null);

			// Token: 0x040087AE RID: 34734
			protected Player.ItemHandsController.HandsControllerLogger Logger;

			// Token: 0x040087AF RID: 34735
			[CompilerGenerated]
			private Player.\uE00C \uE03C;

			// Token: 0x0200171A RID: 5914
			// (Invoke) Token: 0x060095D3 RID: 38355
			internal delegate GameObject \uE000(Item item, Player player);

			// Token: 0x0200171B RID: 5915
			// (Invoke) Token: 0x060095D7 RID: 38359
			internal delegate Task<GameObject> \uE001(Item item, Player player);

			// Token: 0x0200171C RID: 5916
			// (Invoke) Token: 0x060095DB RID: 38363
			protected delegate Player.\uE00C OperationFactoryDelegate();

			// Token: 0x0200171D RID: 5917
			protected class HandsControllerLogger : \uE360
			{
				// Token: 0x060095DE RID: 38366 RVA: 0x0030282C File Offset: 0x00300A2C
				public HandsControllerLogger(LoggerMode loggerMode, Player.ItemHandsController controller) : base(\uF1F8.\uE000(144799), loggerMode, false)
				{
					this.\uE010 = controller._player.ProfileId + \uF1F8.\uE000(141062) + controller._player.Profile.Nickname;
				}

				// Token: 0x060095DF RID: 38367 RVA: 0x0030287C File Offset: 0x00300A7C
				public void TraceStateChange(Player.\uE00C currentOperation, Player.\uE00C nextOperation)
				{
					if (base.IsEnabled(NLog.LogLevel.Trace))
					{
						base.Log(\uF1F8.\uE000(144776), \uF1F8.\uE000(144486), NLog.LogLevel.Trace, new object[]
						{
							currentOperation,
							nextOperation,
							this.\uE010,
							Time.frameCount
						});
					}
				}

				// Token: 0x060095E0 RID: 38368 RVA: 0x003028DC File Offset: 0x00300ADC
				[Conditional("UNITY_EDITOR")]
				public void TraceMethodCall()
				{
					if (base.IsEnabled(NLog.LogLevel.Trace))
					{
						StackFrame stackFrame = new StackFrame(1);
						base.Log(\uF1F8.\uE000(144452), \uF1F8.\uE000(144403), NLog.LogLevel.Trace, new object[]
						{
							stackFrame.GetMethod().DeclaringType,
							stackFrame.GetMethod().Name,
							Time.frameCount,
							this.\uE010
						});
					}
				}

				// Token: 0x060095E1 RID: 38369 RVA: 0x00302954 File Offset: 0x00300B54
				[Conditional("UNITY_EDITOR")]
				public void TraceMethodCall<T>(string argName, T argument1)
				{
					if (base.IsEnabled(NLog.LogLevel.Trace))
					{
						StackFrame stackFrame = new StackFrame(1);
						base.Log(\uF1F8.\uE000(144602), \uF1F8.\uE000(144558), NLog.LogLevel.Trace, new object[]
						{
							stackFrame.GetMethod().DeclaringType,
							stackFrame.GetMethod().Name,
							argName,
							argument1,
							Time.frameCount,
							this.\uE010
						});
					}
				}

				// Token: 0x040087B0 RID: 34736
				private readonly string \uE010;
			}
		}

		// Token: 0x02001721 RID: 5921
		internal abstract class BaseKnifeController : Player.ItemHandsController
		{
			// Token: 0x170014EF RID: 5359
			// (get) Token: 0x060095EA RID: 38378 RVA: 0x00302BB8 File Offset: 0x00300DB8
			public KnifeComponent Knife
			{
				get
				{
					return base.Item.GetItemComponent<KnifeComponent>();
				}
			}

			// Token: 0x170014F0 RID: 5360
			// (get) Token: 0x060095EB RID: 38379 RVA: 0x00302BC8 File Offset: 0x00300DC8
			public override string LoggerDistinctId
			{
				get
				{
					return string.Format(\uF1F8.\uE000(139683), this._player.ProfileId, this._player.Profile.Info.Nickname, this);
				}
			}

			// Token: 0x060095EC RID: 38380 RVA: 0x00302BFC File Offset: 0x00300DFC
			protected new Task \uE000()
			{
				Player.BaseKnifeController.\uE003 uE;
				uE.<>t__builder = AsyncTaskMethodBuilder.Create();
				uE.<>4__this = this;
				uE.<>1__state = -1;
				uE.<>t__builder.Start<Player.BaseKnifeController.\uE003>(ref uE);
				return uE.<>t__builder.Task;
			}

			// Token: 0x060095ED RID: 38381 RVA: 0x00302C4C File Offset: 0x00300E4C
			public override float GetAnimatorFloatParam(int hash)
			{
				return this.\uE001.GetAnimatorParameter(hash);
			}

			// Token: 0x060095EE RID: 38382 RVA: 0x00302C5C File Offset: 0x00300E5C
			public override bool SupportPickup()
			{
				return true;
			}

			// Token: 0x060095EF RID: 38383 RVA: 0x00302C60 File Offset: 0x00300E60
			public override void Pickup(bool p)
			{
				if (this.CanInteract())
				{
					this.\uE001.SetPickup(p);
				}
			}

			// Token: 0x060095F0 RID: 38384 RVA: 0x00302C78 File Offset: 0x00300E78
			public override void Interact(bool isInteracting, int actionIndex)
			{
				if (this.CanInteract())
				{
					this._player.SendHandsInteractionStateChanged(isInteracting, actionIndex);
					this.\uE001.SetInteract(isInteracting, actionIndex);
				}
			}

			// Token: 0x060095F1 RID: 38385 RVA: 0x00302CA4 File Offset: 0x00300EA4
			public override void Loot(bool p)
			{
				if (this.CanInteract())
				{
					this.\uE001.SetLooting(p);
				}
			}

			// Token: 0x060095F2 RID: 38386 RVA: 0x00302CBC File Offset: 0x00300EBC
			public override bool CanInteract()
			{
				return this.\uE001.IsIdling() && this.\uE001.Animator.GetBool(\uE370.BOOL_ACTIVE);
			}

			// Token: 0x060095F3 RID: 38387 RVA: 0x00302CE4 File Offset: 0x00300EE4
			public override bool IsInInteraction()
			{
				return this.\uE001.IsInInteraction;
			}

			// Token: 0x060095F4 RID: 38388 RVA: 0x00302CF4 File Offset: 0x00300EF4
			public override bool IsInInteractionStrictCheck()
			{
				if (!this.IsInInteraction())
				{
					if (this.\uE001.GetLayerWeight(this.\uE001.LACTIONS_LAYER_INDEX) < 1E-45f)
					{
						return this.\uE001.Animator.IsInTransition(this.\uE001.LACTIONS_LAYER_INDEX);
					}
				}
				return true;
			}

			// Token: 0x060095F5 RID: 38389 RVA: 0x00302D4C File Offset: 0x00300F4C
			public Vector3 GetPlayerOrientation()
			{
				return this._player.LookDirection;
			}

			// Token: 0x060095F6 RID: 38390 RVA: 0x00302D5C File Offset: 0x00300F5C
			public Vector3 GetPlayerCastOrigin()
			{
				return this._player.MovementContext.RibcagePosition();
			}

			// Token: 0x060095F7 RID: 38391 RVA: 0x00302D70 File Offset: 0x00300F70
			public override void ShowGesture(EInteraction gesture)
			{
				if (gesture != EInteraction.None)
				{
					this.\uE001.Gesture(gesture);
				}
			}

			// Token: 0x170014F1 RID: 5361
			// (get) Token: 0x060095F8 RID: 38392 RVA: 0x00302D84 File Offset: 0x00300F84
			protected new Player.\uE009 \uE000
			{
				get
				{
					return base.CurrentHandsOperation as Player.\uE009;
				}
			}

			// Token: 0x170014F2 RID: 5362
			// (get) Token: 0x060095F9 RID: 38393 RVA: 0x00302D94 File Offset: 0x00300F94
			public override FirearmsAnimator FirearmsAnimator
			{
				get
				{
					return this.\uE001;
				}
			}

			// Token: 0x060095FA RID: 38394 RVA: 0x00302D9C File Offset: 0x00300F9C
			internal new static \uE084 \uE001<\uE084>(Player player, KnifeComponent knife) where \uE084 : Player.BaseKnifeController
			{
				\uE084 uE = Player.ItemHandsController.\uE000<\uE084>(player, knife.Item);
				Player.BaseKnifeController.\uE003<\uE084>(uE, player);
				return uE;
			}

			// Token: 0x060095FB RID: 38395 RVA: 0x00302DB4 File Offset: 0x00300FB4
			internal static Task<\uE084> \uE002<\uE084>(Player player, KnifeComponent knife) where \uE084 : Player.BaseKnifeController
			{
				Player.BaseKnifeController.\uE002<\uE084> uE;
				uE.<>t__builder = AsyncTaskMethodBuilder<\uE084>.Create();
				uE.player = player;
				uE.knife = knife;
				uE.<>1__state = -1;
				uE.<>t__builder.Start<Player.BaseKnifeController.\uE002<\uE084>>(ref uE);
				return uE.<>t__builder.Task;
			}

			// Token: 0x060095FC RID: 38396 RVA: 0x00302E0C File Offset: 0x0030100C
			private static void \uE003<\uE084>(\uE084 controller, Player player) where \uE084 : Player.BaseKnifeController
			{
				Player.BaseKnifeController.\uE000<\uE084> uE = new Player.BaseKnifeController.\uE000<\uE084>();
				uE.controller = controller;
				uE.controller.\uE046 = LayerMask.NameToLayer(\uF1F8.\uE000(48992));
				uE.controller.\uE047 = LayerMask.GetMask(new string[]
				{
					\uF1F8.\uE000(27516),
					\uF1F8.\uE000(48992),
					\uF1F8.\uE000(27622),
					\uF1F8.\uE000(27643)
				});
				uE.controller.\uE048 = LayerMask.GetMask(new string[]
				{
					\uF1F8.\uE000(27509)
				});
				WeaponPrefab componentInChildren = uE.controller._controllerObject.GetComponentInChildren<WeaponPrefab>();
				uE.controller.\uE043 = componentInChildren.ObjectInHands;
				uE.controller.\uE001 = componentInChildren.FirearmsAnimator;
				uE.controller.\uE045 = uE.controller.HandsHierarchy.Self.GetComponentInChildren<KnifeCollider>();
				uE.controller.\uE045.\uE000 = uE.controller;
				uE.controller.\uE045.\uE001 = uE.controller._player;
				uE.controller.\uE045.isInfectedPlayer = uE.controller._player.UsedSimplifiedSkeleton;
				uE.controller.\uE045._hitMask = uE.controller.\uE047;
				uE.controller.\uE045._spiritMask = uE.controller.\uE048;
				uE.controller.\uE045.GetPlayerOrientation = new Func<Vector3>(uE.controller.GetPlayerOrientation);
				uE.controller.\uE045.GetPlayerBones = new Func<PlayerBones>(uE.\uE000);
				uE.controller.\uE001.AddEventsConsumer(uE.controller);
				uE.controller.CompositeDisposable.AddDisposable(new Action(uE.\uE001));
				uE.controller.\uE044 = \uE3D9.FindTransformRecursive(player.PlayerBones.WeaponRoot.Original, \uF1F8.\uE000(144222), false);
				uE.controller._player.HandsAnimator = uE.controller.\uE001;
				uE.knife = uE.controller.Item.GetItemComponent<KnifeComponent>();
				if (uE.knife != null && uE.knife.Template.AdditionalAnimationLayer > 0)
				{
					uE.controller._player.BodyAnimatorCommon.SetLayerWeight(uE.knife.Template.AdditionalAnimationLayer, 1f);
					uE.controller._player.BodyAnimatorCommon.SetLayerWeight(uE.knife.Template.AdditionalAnimationLayer + 1, 1f);
					uE.controller.\uE040 = new Action(uE.\uE002);
				}
				player.ProceduralWeaponAnimation.ClearPreviousWeapon();
				player.ProceduralWeaponAnimation.InitTransforms(uE.controller.HandsHierarchy, null);
				uE.controller.\uE043.AfterGetFromPoolInit(player.ProceduralWeaponAnimation, null, player.IsYourPlayer);
				BaseSoundPlayer component = uE.controller._controllerObject.GetComponent<BaseSoundPlayer>();
				if (component != null)
				{
					component.Init(uE.controller, player.PlayerBones.WeaponRoot, player);
				}
			}

			// Token: 0x060095FD RID: 38397 RVA: 0x00303224 File Offset: 0x00301424
			protected override void IEventsConsumerOnOnUseProp(bool boolParam)
			{
				base.SetPropVisibility(boolParam);
			}

			// Token: 0x060095FE RID: 38398 RVA: 0x00303230 File Offset: 0x00301430
			protected override void IEventsConsumerOnWeapIn()
			{
				this.\uE006();
			}

			// Token: 0x060095FF RID: 38399 RVA: 0x00303238 File Offset: 0x00301438
			protected override void IEventsConsumerOnWeapOut()
			{
				this.\uE005();
			}

			// Token: 0x06009600 RID: 38400 RVA: 0x00303240 File Offset: 0x00301440
			protected override void IEventsConsumerOnThirdAction(int intParam)
			{
				base.TranslateAnimatorParameter(intParam);
			}

			// Token: 0x06009601 RID: 38401 RVA: 0x0030324C File Offset: 0x0030144C
			protected override void IEventsConsumerOnFireEnd()
			{
				if (!this._player.UsedSimplifiedSkeleton)
				{
					this.OnFireEnd();
				}
			}

			// Token: 0x06009602 RID: 38402 RVA: 0x00303264 File Offset: 0x00301464
			protected override void OnZombieFireEnd(IAnimatorEventParameter animatorEventParameter)
			{
				this.OnFireEnd();
			}

			// Token: 0x06009603 RID: 38403 RVA: 0x0030326C File Offset: 0x0030146C
			protected override void IEventsConsumerOnIdleStart()
			{
				this.\uE000.OnIdleStart();
			}

			// Token: 0x06009604 RID: 38404 RVA: 0x0030327C File Offset: 0x0030147C
			protected override void IEventsConsumerOnComboPlanning()
			{
				this.OnComboPlanning();
			}

			// Token: 0x06009605 RID: 38405 RVA: 0x00303284 File Offset: 0x00301484
			protected override void IEventsConsumerOnFiringBullet()
			{
				if (!this._player.UsedSimplifiedSkeleton)
				{
					this.\uE004();
				}
			}

			// Token: 0x06009606 RID: 38406 RVA: 0x0030329C File Offset: 0x0030149C
			protected override void OnZombieFireBullet(IAnimatorEventParameter animatorEventParameter)
			{
				this.\uE004();
			}

			// Token: 0x06009607 RID: 38407 RVA: 0x003032A4 File Offset: 0x003014A4
			protected override void IEventsOnBackpackDrop()
			{
				this.\uE007();
			}

			// Token: 0x06009608 RID: 38408 RVA: 0x003032AC File Offset: 0x003014AC
			public override void Drop(float animationSpeed, Action callback, bool fastDrop, Item nextControllerItem = null)
			{
				Player.BaseKnifeController.\uE001 uE = new Player.BaseKnifeController.\uE001();
				uE.<>4__this = this;
				uE.callback = callback;
				this.SetDeflected(false);
				if (base.Destroyed)
				{
					this.\uE000.HideWeapon(uE.callback, fastDrop);
					return;
				}
				base.Destroyed = true;
				uE.inventoryOperation = this._player.\uE085(this.Knife.Item);
				Action onHidden = new Action(uE.\uE000);
				this.\uE000.HideWeapon(onHidden, fastDrop);
			}

			// Token: 0x06009609 RID: 38409 RVA: 0x00303340 File Offset: 0x00301540
			public override void Destroy()
			{
				Action uE = this.\uE040;
				if (uE != null)
				{
					uE();
				}
				this._player.ProceduralWeaponAnimation.ClearPreviousWeapon();
				base.Destroy();
				this.\uE001 = null;
				AssetPoolObject.ReturnToPool(this._controllerObject.gameObject, true);
			}

			// Token: 0x0600960A RID: 38410 RVA: 0x00303394 File Offset: 0x00301594
			private void \uE004()
			{
				this.\uE000.OnFire();
			}

			// Token: 0x0600960B RID: 38411 RVA: 0x003033A4 File Offset: 0x003015A4
			public virtual void OnFireEnd()
			{
				this.\uE000.OnFireEnd();
			}

			// Token: 0x0600960C RID: 38412 RVA: 0x003033B4 File Offset: 0x003015B4
			protected virtual void OnComboPlanning()
			{
			}

			// Token: 0x0600960D RID: 38413 RVA: 0x003033B8 File Offset: 0x003015B8
			private void \uE005()
			{
				this.\uE000.HideWeaponComplete();
			}

			// Token: 0x0600960E RID: 38414 RVA: 0x003033C8 File Offset: 0x003015C8
			private void \uE006()
			{
				this.\uE000.WeaponAppeared();
			}

			// Token: 0x0600960F RID: 38415 RVA: 0x003033D8 File Offset: 0x003015D8
			private void \uE007()
			{
				this.\uE000.OnBackpackDrop();
			}

			// Token: 0x06009610 RID: 38416 RVA: 0x003033E8 File Offset: 0x003015E8
			public override bool CanExecute(\uEF5F operation)
			{
				return true;
			}

			// Token: 0x06009611 RID: 38417 RVA: 0x003033EC File Offset: 0x003015EC
			public override void Execute(\uEF5F operation, Callback callback)
			{
				this.\uE000.Execute<\uEF5F>(operation, callback);
			}

			// Token: 0x06009612 RID: 38418 RVA: 0x003033FC File Offset: 0x003015FC
			protected void \uE008(Player.\uE00B other)
			{
				if (this.\uE045.OnHit != null)
				{
					KnifeCollider uE = this.\uE045;
					uE.OnHit = (Action<Player.\uE00B>)Delegate.Remove(uE.OnHit, new Action<Player.\uE00B>(this.\uE008));
				}
				BallisticCollider component = other.collider.GetComponent<BallisticCollider>();
				if (component != null)
				{
					other.point = ((other.point.sqrMagnitude < 0.1f) ? other.collider.transform.position : other.point);
					this.\uE020(other, component);
					this.SetDeflected(true);
					if (other.collider.gameObject.layer == this.\uE046)
					{
						this._player.Physical.ConsumeAsMelee(this.Knife.Template.DeflectionConsumption);
					}
				}
			}

			// Token: 0x06009613 RID: 38419 RVA: 0x003034EC File Offset: 0x003016EC
			public void SetDeflected(bool deflected)
			{
				this.\uE001.SetDeflected(deflected);
				this._player.MovementContext.PlayerAnimatorSetDeflected(deflected);
			}

			// Token: 0x06009614 RID: 38420 RVA: 0x0030350C File Offset: 0x0030170C
			public void SetMeleeSpeed(float speed)
			{
				this.\uE001.SetMeleeSpeed(speed);
				this._player.MovementContext.PlayerAnimatorSetSwingSpeed(speed);
			}

			// Token: 0x06009615 RID: 38421 RVA: 0x0030352C File Offset: 0x0030172C
			private bool \uE009(out RaycastHit hitInfo, int layerMask)
			{
				return Physics.SphereCast(this.\uE044.position, 0.15f, this._player.LookDirection, out hitInfo, 0.5f, layerMask);
			}

			// Token: 0x06009616 RID: 38422 RVA: 0x00303558 File Offset: 0x00301758
			protected virtual \uE870 \uE020(Player.\uE00B hit, BallisticCollider ballisticCollider)
			{
				int num = (this.LastKickType == Player.EKickType.Slash) ? this.Knife.Template.KnifeHitSlashDam : this.Knife.Template.KnifeHitStabDam;
				num = (this._player.Physical.HandsStamina.Exhausted ? ((int)((float)num * Singleton<\uE714>.Instance.Stamina.ExhaustedMeleeDamageMultiplier)) : num);
				this.\uE03E = Vector3.Lerp(this.\uE03E, (this.\uE045.transform.position - this.\uE03F).normalized, 0.9f);
				Debug.DrawLine(hit.point, hit.point + this.\uE03E, Color.magenta, 10f);
				\uF061 damageInfo = new \uF061
				{
					DamageType = EDamageType.Melee,
					Damage = (float)num * (1f + this._player.Skills.StrengthBuffMeleePowerInc),
					PenetrationPower = (float)((this.LastKickType == Player.EKickType.Slash) ? this.Knife.Template.SlashPenetration : this.Knife.Template.StabPenetration),
					ArmorDamage = 1f,
					Direction = this.\uE03E,
					HitCollider = hit.collider,
					HitPoint = hit.point,
					Player = Singleton<GameWorld>.Instance.GetEverExistedBridgeByProfileID(this._player.ProfileId),
					HittedBallisticCollider = ballisticCollider,
					HitNormal = hit.normal,
					Weapon = this.Knife.Item,
					IsForwardHit = true,
					StaminaBurnRate = this.Knife.Template.StaminaBurnRate
				};
				\uE870 result = Singleton<GameWorld>.Instance.HackShot(damageInfo);
				if (ballisticCollider as BodyPartCollider != null)
				{
					this._player.ExecuteSkill(new Action(this.\uE00A));
				}
				return result;
			}

			// Token: 0x06009617 RID: 38423 RVA: 0x0030377C File Offset: 0x0030197C
			public override void FastForwardCurrentState()
			{
				this.\uE000.FastForward();
			}

			// Token: 0x06009619 RID: 38425 RVA: 0x003037C8 File Offset: 0x003019C8
			[CompilerGenerated]
			private void \uE00A()
			{
				this._player.Skills.FistfightAction.Complete(1f);
			}

			// Token: 0x040087BD RID: 34749
			public Player.EKickType LastKickType;

			// Token: 0x040087BE RID: 34750
			private float \uE03D;

			// Token: 0x040087BF RID: 34751
			protected Vector3 \uE03E = Vector3.zero;

			// Token: 0x040087C0 RID: 34752
			protected Vector3 \uE03F = Vector3.zero;

			// Token: 0x040087C1 RID: 34753
			public const float LERP_DIRECTION_T = 0.9f;

			// Token: 0x040087C2 RID: 34754
			private Action \uE040;

			// Token: 0x040087C3 RID: 34755
			protected bool \uE041 = true;

			// Token: 0x040087C4 RID: 34756
			protected int \uE042 = 1000;

			// Token: 0x040087C5 RID: 34757
			protected \uE868 \uE043;

			// Token: 0x040087C6 RID: 34758
			protected new FirearmsAnimator \uE001;

			// Token: 0x040087C7 RID: 34759
			protected Transform \uE044;

			// Token: 0x040087C8 RID: 34760
			protected KnifeCollider \uE045;

			// Token: 0x040087C9 RID: 34761
			private int \uE046;

			// Token: 0x040087CA RID: 34762
			private int \uE047;

			// Token: 0x040087CB RID: 34763
			private int \uE048;

			// Token: 0x02001722 RID: 5922
			[CompilerGenerated]
			private sealed class \uE000<\uE084> where \uE084 : Player.BaseKnifeController
			{
				// Token: 0x0600961B RID: 38427 RVA: 0x003037EC File Offset: 0x003019EC
				internal PlayerBones \uE000()
				{
					return this.controller._player.PlayerBones;
				}

				// Token: 0x0600961C RID: 38428 RVA: 0x00303804 File Offset: 0x00301A04
				internal void \uE001()
				{
					this.controller.\uE001.RemoveEventsConsumer(this.controller);
				}

				// Token: 0x0600961D RID: 38429 RVA: 0x00303828 File Offset: 0x00301A28
				internal void \uE002()
				{
					this.controller._player.BodyAnimatorCommon.SetLayerWeight(this.knife.Template.AdditionalAnimationLayer, 0f);
					this.controller._player.BodyAnimatorCommon.SetLayerWeight(this.knife.Template.AdditionalAnimationLayer + 1, 0f);
					this.controller.\uE040 = null;
				}

				// Token: 0x040087CC RID: 34764
				public \uE084 controller;

				// Token: 0x040087CD RID: 34765
				public KnifeComponent knife;
			}

			// Token: 0x02001723 RID: 5923
			[CompilerGenerated]
			private new sealed class \uE001
			{
				// Token: 0x0600961F RID: 38431 RVA: 0x003038B4 File Offset: 0x00301AB4
				internal void \uE000()
				{
					this.<>4__this._player.ProceduralWeaponAnimation.enabled = true;
					this.inventoryOperation.Confirm(true);
					this.callback();
					Action uE = this.<>4__this.\uE040;
					if (uE == null)
					{
						return;
					}
					uE();
				}

				// Token: 0x040087CE RID: 34766
				public Player.BaseKnifeController <>4__this;

				// Token: 0x040087CF RID: 34767
				public Player.\uE014 inventoryOperation;

				// Token: 0x040087D0 RID: 34768
				public Action callback;
			}
		}

		// Token: 0x02001726 RID: 5926
		internal interface \uE009
		{
			// Token: 0x06009624 RID: 38436
			void HideWeaponComplete();

			// Token: 0x06009625 RID: 38437
			void WeaponAppeared();

			// Token: 0x06009626 RID: 38438
			void HideWeapon(Action onHidden, bool fastDrop);

			// Token: 0x06009627 RID: 38439
			void OnFireEnd();

			// Token: 0x06009628 RID: 38440
			void OnFire();

			// Token: 0x06009629 RID: 38441
			void OnBackpackDrop();

			// Token: 0x0600962A RID: 38442
			void Execute<TInventoryOperation>(TInventoryOperation operation, Callback callback) where TInventoryOperation : \uEF5F;

			// Token: 0x0600962B RID: 38443
			void FastForward();

			// Token: 0x0600962C RID: 38444
			void OnIdleStart();
		}

		// Token: 0x02001727 RID: 5927
		internal abstract class \uE00A<\uE0B4> : Player.\uE00C, Player.\uE009 where \uE0B4 : Player.BaseKnifeController
		{
			// Token: 0x0600962D RID: 38445 RVA: 0x00303AE4 File Offset: 0x00301CE4
			protected \uE00A(\uE0B4 controller) : base(controller)
			{
				this.\uE002 = controller;
			}

			// Token: 0x0600962E RID: 38446 RVA: 0x00303AFC File Offset: 0x00301CFC
			public virtual void HideWeaponComplete()
			{
				base.\uE000();
			}

			// Token: 0x0600962F RID: 38447 RVA: 0x00303B04 File Offset: 0x00301D04
			public virtual void WeaponAppeared()
			{
				base.\uE000();
			}

			// Token: 0x06009630 RID: 38448 RVA: 0x00303B0C File Offset: 0x00301D0C
			public virtual void OnBackpackDrop()
			{
				base.\uE000();
			}

			// Token: 0x06009631 RID: 38449 RVA: 0x00303B14 File Offset: 0x00301D14
			public virtual void Execute<TInventoryOperation>(TInventoryOperation operation, Callback callback) where TInventoryOperation : \uEF5F
			{
				base.\uE000();
				\uEF6A uEF6A = operation as \uEF6A;
				if (uEF6A == null)
				{
					callback.Succeed();
					return;
				}
				if (this.\uE002._player.InventoryController.IsAnimatedSlot(uEF6A.From1))
				{
					callback.Fail(string.Format(\uF1F8.\uE000(139695), base.GetType()));
					return;
				}
				callback.Succeed();
			}

			// Token: 0x06009632 RID: 38450 RVA: 0x00303B94 File Offset: 0x00301D94
			public virtual void HideWeapon(Action onHidden, bool fastDrop)
			{
				base.\uE000();
			}

			// Token: 0x06009633 RID: 38451 RVA: 0x00303B9C File Offset: 0x00301D9C
			public virtual void OnFireEnd()
			{
				base.\uE000();
			}

			// Token: 0x06009634 RID: 38452 RVA: 0x00303BA4 File Offset: 0x00301DA4
			public virtual void OnFire()
			{
				base.\uE000();
			}

			// Token: 0x06009635 RID: 38453 RVA: 0x00303BAC File Offset: 0x00301DAC
			public virtual void FastForward()
			{
				base.\uE000();
			}

			// Token: 0x06009636 RID: 38454 RVA: 0x00303BB4 File Offset: 0x00301DB4
			public virtual void OnIdleStart()
			{
			}

			// Token: 0x040087DA RID: 34778
			protected readonly \uE0B4 \uE002;
		}

		// Token: 0x02001728 RID: 5928
		public enum EKickType : byte
		{
			// Token: 0x040087DC RID: 34780
			Slash,
			// Token: 0x040087DD RID: 34781
			Stab
		}

		// Token: 0x02001729 RID: 5929
		internal class KnifeController : Player.BaseKnifeController, IKnifeController, \uE82A, \uE827, \uE828
		{
			// Token: 0x170014F3 RID: 5363
			// (get) Token: 0x06009637 RID: 38455 RVA: 0x00303BB8 File Offset: 0x00301DB8
			// (set) Token: 0x06009638 RID: 38456 RVA: 0x00303BC0 File Offset: 0x00301DC0
			public Action ComboPlanning { get; set; }

			// Token: 0x170014F4 RID: 5364
			// (get) Token: 0x06009639 RID: 38457 RVA: 0x00303BCC File Offset: 0x00301DCC
			// (set) Token: 0x0600963A RID: 38458 RVA: 0x00303BD4 File Offset: 0x00301DD4
			public Action OnAttackEnd { get; set; }

			// Token: 0x0600963B RID: 38459 RVA: 0x00303BE0 File Offset: 0x00301DE0
			internal new static \uE084 \uE000<\uE084>(Player player, KnifeComponent knife) where \uE084 : Player.KnifeController
			{
				return Player.BaseKnifeController.\uE001<\uE084>(player, knife);
			}

			// Token: 0x0600963C RID: 38460 RVA: 0x00303BEC File Offset: 0x00301DEC
			internal new static Task<\uE084> \uE001<\uE084>(Player player, KnifeComponent knife) where \uE084 : Player.KnifeController
			{
				return Player.BaseKnifeController.\uE002<\uE084>(player, knife);
			}

			// Token: 0x170014F5 RID: 5365
			// (get) Token: 0x0600963D RID: 38461 RVA: 0x00303BF8 File Offset: 0x00301DF8
			public new KnifeComponent Knife
			{
				get
				{
					return base.Knife;
				}
			}

			// Token: 0x170014F6 RID: 5366
			// (get) Token: 0x0600963E RID: 38462 RVA: 0x00303C00 File Offset: 0x00301E00
			protected new Player.KnifeController.\uE003 \uE000
			{
				get
				{
					return base.CurrentHandsOperation as Player.KnifeController.\uE003;
				}
			}

			// Token: 0x0600963F RID: 38463 RVA: 0x00303C10 File Offset: 0x00301E10
			public virtual void ExamineWeapon()
			{
				this.\uE000.ExamineWeapon();
			}

			// Token: 0x06009640 RID: 38464 RVA: 0x00303C20 File Offset: 0x00301E20
			public virtual bool MakeKnifeKick()
			{
				return this.\uE000.MakeKnifeKick();
			}

			// Token: 0x06009641 RID: 38465 RVA: 0x00303C30 File Offset: 0x00301E30
			protected override void OnComboPlanning()
			{
				if (this.\uE045.OnHit != null)
				{
					KnifeCollider uE = this.\uE045;
					uE.OnHit = (Action<Player.\uE00B>)Delegate.Remove(uE.OnHit, new Action<Player.\uE00B>(base.\uE008));
				}
				this.\uE000.OnComboPlanning();
				Action comboPlanning = this.ComboPlanning;
				if (comboPlanning == null)
				{
					return;
				}
				comboPlanning();
			}

			// Token: 0x06009642 RID: 38466 RVA: 0x00303C94 File Offset: 0x00301E94
			public override void OnFireEnd()
			{
				base.\uE000.OnFireEnd();
				Action onAttackEnd = this.OnAttackEnd;
				if (onAttackEnd == null)
				{
					return;
				}
				onAttackEnd();
			}

			// Token: 0x06009643 RID: 38467 RVA: 0x00303CB4 File Offset: 0x00301EB4
			public virtual bool MakeAlternativeKick()
			{
				return this.\uE000.MakeAlternativeKick();
			}

			// Token: 0x06009644 RID: 38468 RVA: 0x00303CC4 File Offset: 0x00301EC4
			public virtual void BrakeCombo()
			{
				this.\uE000.BrakeCombo();
			}

			// Token: 0x06009645 RID: 38469 RVA: 0x00303CD4 File Offset: 0x00301ED4
			public virtual void ContinueCombo()
			{
				this.\uE000.ContinueCombo();
			}

			// Token: 0x06009646 RID: 38470 RVA: 0x00303CE4 File Offset: 0x00301EE4
			public override void SetCompassState(bool active)
			{
				if (this.CanChangeCompassState(active))
				{
					this.\uE000.SetKnifeCompassState(active);
				}
			}

			// Token: 0x06009647 RID: 38471 RVA: 0x00303CFC File Offset: 0x00301EFC
			public override bool CanRemove()
			{
				return this.\uE000.CanRemove();
			}

			// Token: 0x06009648 RID: 38472 RVA: 0x00303D0C File Offset: 0x00301F0C
			public override void Spawn(float animationSpeed, Action callback)
			{
				this.\uE001.SetAnimationSpeed(animationSpeed);
				base.InitiateOperation<Player.KnifeController.\uE006>().Start(callback);
				this.\uE001.SkipTime(Time.fixedDeltaTime);
			}

			// Token: 0x06009649 RID: 38473 RVA: 0x00303D3C File Offset: 0x00301F3C
			public override void SetInventoryOpened(bool opened)
			{
				if (opened)
				{
					this.SetCompassState(false);
				}
				this.\uE000.SetInventoryOpened(opened);
				MovementState currentManagedState = this._player.CurrentManagedState;
				if (currentManagedState == null)
				{
					return;
				}
				currentManagedState.OnInventory(opened);
			}

			// Token: 0x0600964A RID: 38474 RVA: 0x00303D70 File Offset: 0x00301F70
			public override bool IsInventoryOpen()
			{
				return this._objectInHandsAnimator.IsInInventory;
			}

			// Token: 0x0600964B RID: 38475 RVA: 0x00303D80 File Offset: 0x00301F80
			public override bool CanExecute(\uEF5F operation)
			{
				\uEF6A uEF6A = operation as \uEF6A;
				return uEF6A == null || !this._player.InventoryController.IsAnimatedSlot(uEF6A.From1) || this.\uE000 is Player.KnifeController.\uE001;
			}

			// Token: 0x0600964C RID: 38476 RVA: 0x00303DCC File Offset: 0x00301FCC
			public void SetBotParameters()
			{
				this.\uE045.SetBotParameters(this.Knife.Template.ColliderScaleMultiplier);
			}

			// Token: 0x0600964D RID: 38477 RVA: 0x00303DEC File Offset: 0x00301FEC
			protected override Dictionary<Type, Player.ItemHandsController.OperationFactoryDelegate> GetOperationFactoryDelegates()
			{
				return new Dictionary<Type, Player.ItemHandsController.OperationFactoryDelegate>
				{
					{
						typeof(Player.KnifeController.\uE006),
						new Player.ItemHandsController.OperationFactoryDelegate(this.\uE002)
					},
					{
						typeof(Player.KnifeController.\uE001),
						new Player.ItemHandsController.OperationFactoryDelegate(this.\uE003)
					},
					{
						typeof(Player.KnifeController.\uE004),
						new Player.ItemHandsController.OperationFactoryDelegate(this.\uE004)
					},
					{
						typeof(Player.KnifeController.\uE002),
						new Player.ItemHandsController.OperationFactoryDelegate(this.\uE005)
					},
					{
						typeof(Player.KnifeController.\uE000),
						new Player.ItemHandsController.OperationFactoryDelegate(this.\uE006)
					}
				};
			}

			// Token: 0x0600964F RID: 38479 RVA: 0x00303E94 File Offset: 0x00302094
			[CompilerGenerated]
			private Player.\uE00C \uE002()
			{
				return new Player.KnifeController.\uE006(this);
			}

			// Token: 0x06009650 RID: 38480 RVA: 0x00303E9C File Offset: 0x0030209C
			[CompilerGenerated]
			private Player.\uE00C \uE003()
			{
				return new Player.KnifeController.\uE001(this);
			}

			// Token: 0x06009651 RID: 38481 RVA: 0x00303EA4 File Offset: 0x003020A4
			[CompilerGenerated]
			private Player.\uE00C \uE004()
			{
				return new Player.KnifeController.\uE004(this);
			}

			// Token: 0x06009652 RID: 38482 RVA: 0x00303EAC File Offset: 0x003020AC
			[CompilerGenerated]
			private Player.\uE00C \uE005()
			{
				return new Player.KnifeController.\uE002(this);
			}

			// Token: 0x06009653 RID: 38483 RVA: 0x00303EB4 File Offset: 0x003020B4
			[CompilerGenerated]
			private Player.\uE00C \uE006()
			{
				return new Player.KnifeController.\uE000(this);
			}

			// Token: 0x040087DE RID: 34782
			protected new bool \uE002;

			// Token: 0x040087DF RID: 34783
			[CompilerGenerated]
			private Action \uE049;

			// Token: 0x040087E0 RID: 34784
			[CompilerGenerated]
			private Action \uE04A;

			// Token: 0x0200172A RID: 5930
			public new class \uE000 : Player.KnifeController.\uE003
			{
				// Token: 0x06009654 RID: 38484 RVA: 0x00303EBC File Offset: 0x003020BC
				public \uE000(Player.KnifeController controller) : base(controller)
				{
				}

				// Token: 0x06009655 RID: 38485 RVA: 0x00303EC8 File Offset: 0x003020C8
				public virtual void Start(Item item, Callback callback)
				{
					this.\uE000 = callback;
					base.Start();
					this.\uE002.FirearmsAnimator.SetInventory(false);
					this.\uE002._player.SendHandsInteractionStateChanged(true, 300);
					this.\uE005.MovementContext.SetInteractInHands(EInteraction.DropBackpack);
				}

				// Token: 0x06009656 RID: 38486 RVA: 0x00303F28 File Offset: 0x00302128
				public override void Reset()
				{
					this.\uE000 = null;
					base.Reset();
				}

				// Token: 0x06009657 RID: 38487 RVA: 0x00303F38 File Offset: 0x00302138
				public override void OnBackpackDrop()
				{
					this.State = Player.EOperationState.Finished;
					this.\uE002._player.SendHandsInteractionStateChanged(false, 300);
					this.\uE005.MovementContext.SetInteractInHands(EInteraction.DropBackpack);
					\uE370.ResetTriggerHandReady(this.\uE002.FirearmsAnimator.Animator);
					this.\uE002.\uE001.SetInventory(this.\uE002.\uE002);
					this.\uE002.InitiateOperation<Player.KnifeController.\uE001>().Start();
					this.\uE000.Succeed();
				}

				// Token: 0x06009658 RID: 38488 RVA: 0x00303FD4 File Offset: 0x003021D4
				public override void SetInventoryOpened(bool opened)
				{
					this.\uE002.\uE002 = opened;
				}

				// Token: 0x040087E1 RID: 34785
				private new Callback \uE000;
			}

			// Token: 0x0200172B RID: 5931
			public new class \uE001 : Player.KnifeController.\uE003
			{
				// Token: 0x06009659 RID: 38489 RVA: 0x00303FE4 File Offset: 0x003021E4
				public \uE001(Player.KnifeController controller) : base(controller)
				{
				}

				// Token: 0x0600965A RID: 38490 RVA: 0x00303FF0 File Offset: 0x003021F0
				public new void Start()
				{
					base.Start();
					this.\uE002 = 0f;
				}

				// Token: 0x0600965B RID: 38491 RVA: 0x00304004 File Offset: 0x00302204
				public override void Reset()
				{
					this.\uE002 = 0f;
					base.Reset();
				}

				// Token: 0x0600965C RID: 38492 RVA: 0x00304018 File Offset: 0x00302218
				public override void HideWeapon(Action onHidden, bool fastDrop)
				{
					this.State = Player.EOperationState.Finished;
					this.\uE002.InitiateOperation<Player.KnifeController.\uE004>().Start(onHidden, fastDrop);
				}

				// Token: 0x0600965D RID: 38493 RVA: 0x00304034 File Offset: 0x00302234
				public override bool CanRemove()
				{
					return true;
				}

				// Token: 0x0600965E RID: 38494 RVA: 0x00304038 File Offset: 0x00302238
				public override void Execute<TInventoryOperation>(TInventoryOperation operation, Callback callback)
				{
					\uEF6A uEF6A = operation as \uEF6A;
					if (uEF6A == null)
					{
						callback.Succeed();
						return;
					}
					if (this.\uE005.InventoryController.IsAnimatedSlot(uEF6A.From1))
					{
						this.State = Player.EOperationState.Finished;
						this.\uE002.InitiateOperation<Player.KnifeController.\uE000>().Start(uEF6A.Item1, callback);
						return;
					}
					callback.Succeed();
				}

				// Token: 0x0600965F RID: 38495 RVA: 0x003040A8 File Offset: 0x003022A8
				public override void Update(float deltaTime)
				{
					this.\uE002 += deltaTime;
					if (this.\uE002 > 300f)
					{
						this.\uE002.\uE001.Idle();
						this.\uE002 = 0f;
					}
				}

				// Token: 0x06009660 RID: 38496 RVA: 0x003040E8 File Offset: 0x003022E8
				public override void ExamineWeapon()
				{
					this.\uE002.\uE001.LookTrigger();
				}

				// Token: 0x06009661 RID: 38497 RVA: 0x003040FC File Offset: 0x003022FC
				public override void SetInventoryOpened(bool opened)
				{
					this.\uE002.\uE001.SetInventory(opened);
				}

				// Token: 0x06009662 RID: 38498 RVA: 0x00304110 File Offset: 0x00302310
				public override bool MakeKnifeKick()
				{
					if (!this.\uE005.StateIsSuitableForHandInput)
					{
						return false;
					}
					if (this.\uE002._player.Physical.CanMeleeHit)
					{
						this.State = Player.EOperationState.Finished;
						this.\uE002.InitiateOperation<Player.KnifeController.\uE002>().Start(Player.EKickType.Slash);
						if (this.\uE002._player.UsedSimplifiedSkeleton)
						{
							int value = UnityEngine.Random.Range(0, 3);
							this.\uE002._player.BodyAnimatorCommon.SetInteger(PlayerAnimator.ATTACK_VARIANT, value);
							this.\uE002._player.BodyAnimatorCommon.SetTrigger(PlayerAnimator.IS_ATTACKING);
						}
						return true;
					}
					this.\uE002._player.Physical.InvokeInsufficient();
					return false;
				}

				// Token: 0x06009663 RID: 38499 RVA: 0x003041E0 File Offset: 0x003023E0
				public override void OnEnd()
				{
					this.SetKnifeCompassState(false);
				}

				// Token: 0x06009664 RID: 38500 RVA: 0x003041EC File Offset: 0x003023EC
				public override void SetKnifeCompassState(bool active)
				{
					this.\uE002.CompassState.Value = active;
				}

				// Token: 0x06009665 RID: 38501 RVA: 0x00304200 File Offset: 0x00302400
				public override bool MakeAlternativeKick()
				{
					if (!this.\uE005.StateIsSuitableForHandInput)
					{
						return false;
					}
					if (this.\uE002._player.Physical.CanMeleeHit)
					{
						this.State = Player.EOperationState.Finished;
						this.\uE002.InitiateOperation<Player.KnifeController.\uE002>().Start(Player.EKickType.Stab);
						return true;
					}
					this.\uE002._player.Physical.InvokeInsufficient();
					return false;
				}

				// Token: 0x06009666 RID: 38502 RVA: 0x00304270 File Offset: 0x00302470
				public override void StopKnifeKick()
				{
				}

				// Token: 0x06009667 RID: 38503 RVA: 0x00304274 File Offset: 0x00302474
				public override void StopAlternativeKick()
				{
				}

				// Token: 0x040087E2 RID: 34786
				private new const float \uE001 = 300f;

				// Token: 0x040087E3 RID: 34787
				private new float \uE002;
			}

			// Token: 0x0200172C RID: 5932
			protected new class \uE002 : Player.KnifeController.\uE003
			{
				// Token: 0x06009668 RID: 38504 RVA: 0x00304278 File Offset: 0x00302478
				public \uE002(Player.KnifeController controller) : base(controller)
				{
				}

				// Token: 0x06009669 RID: 38505 RVA: 0x00304284 File Offset: 0x00302484
				public void Start(Player.EKickType eKickType)
				{
					base.Start();
					this.\uE002.LastKickType = eKickType;
					if (eKickType == Player.EKickType.Slash)
					{
						this.\uE002.\uE001.SetFire(true);
					}
					else
					{
						this.\uE002.\uE001.SetAlternativeFire(true);
					}
					this.\uE002.SetDeflected(false);
					this.\uE002.SetMeleeSpeed(this.\uE005.Physical.MeleeSpeed);
					this.\uE004 = false;
				}

				// Token: 0x0600966A RID: 38506 RVA: 0x00304310 File Offset: 0x00302510
				public override void Update(float deltaTime)
				{
					base.Update(deltaTime);
					this.\uE002.\uE045.ManualUpdate();
					Vector3 position = this.\uE002.\uE045.transform.position;
					Vector3 normalized = (position - this.\uE002.\uE03F).normalized;
					Debug.DrawLine(position, this.\uE002.\uE03F, Color.cyan, 10f);
					this.\uE002.\uE03E = Vector3.Lerp(this.\uE002.\uE03E, normalized, 0.9f);
					this.\uE002.\uE03F = position;
				}

				// Token: 0x0600966B RID: 38507 RVA: 0x003043C4 File Offset: 0x003025C4
				public override void Reset()
				{
					this.\uE003 = null;
					base.Reset();
				}

				// Token: 0x0600966C RID: 38508 RVA: 0x003043D4 File Offset: 0x003025D4
				public override void OnComboPlanning()
				{
				}

				// Token: 0x0600966D RID: 38509 RVA: 0x003043D8 File Offset: 0x003025D8
				public override void ContinueCombo()
				{
				}

				// Token: 0x0600966E RID: 38510 RVA: 0x003043DC File Offset: 0x003025DC
				public override void BrakeCombo()
				{
					this.\uE004 = true;
					this.\uE002.\uE001.SetFire(false);
					this.\uE002.TranslateAnimatorParameter(0);
				}

				// Token: 0x0600966F RID: 38511 RVA: 0x00304408 File Offset: 0x00302608
				public override void OnIdleStart()
				{
					this.\uE002.OnFireEnd();
				}

				// Token: 0x06009670 RID: 38512 RVA: 0x00304418 File Offset: 0x00302618
				public override void StopKnifeKick()
				{
				}

				// Token: 0x06009671 RID: 38513 RVA: 0x0030441C File Offset: 0x0030261C
				public override void StopAlternativeKick()
				{
				}

				// Token: 0x06009672 RID: 38514 RVA: 0x00304420 File Offset: 0x00302620
				public override void OnFireEnd()
				{
					this.\uE002.\uE001.SetFire(false);
					this.\uE002.\uE001.SetAlternativeFire(false);
					if (this.\uE003 != null)
					{
						this.\uE000();
					}
					else
					{
						this.\uE001();
					}
					if (this.\uE002.\uE045.OnHit != null)
					{
						KnifeCollider uE = this.\uE002.\uE045;
						uE.OnHit = (Action<Player.\uE00B>)Delegate.Remove(uE.OnHit, new Action<Player.\uE00B>(this.\uE002.\uE008));
					}
					this.\uE002.\uE045.OnFireEnd();
				}

				// Token: 0x06009673 RID: 38515 RVA: 0x003044D4 File Offset: 0x003026D4
				public override void OnFire()
				{
					this.\uE002._player.Physical.ConsumeAsMelee((this.\uE002.LastKickType == Player.EKickType.Slash) ? this.\uE002.Knife.Template.PrimaryConsumption : this.\uE002.Knife.Template.SecondaryConsumption);
					if (this.\uE002.\uE045.OnHit == null)
					{
						KnifeCollider uE = this.\uE002.\uE045;
						uE.OnHit = (Action<Player.\uE00B>)Delegate.Combine(uE.OnHit, new Action<Player.\uE00B>(this.\uE002.\uE008));
					}
					this.\uE002.\uE045.MaxDistance = ((this.\uE002.LastKickType == Player.EKickType.Slash) ? this.\uE002.Knife.Template.PrimaryDistance : this.\uE002.Knife.Template.SecondaryDistance);
					this.\uE002.\uE045.OnFire();
				}

				// Token: 0x06009674 RID: 38516 RVA: 0x003045E0 File Offset: 0x003027E0
				public override void HideWeapon(Action onHidden, bool fastDrop)
				{
					Player.KnifeController.\uE002.\uE000 uE = new Player.KnifeController.\uE002.\uE000();
					uE.<>4__this = this;
					uE.onHidden = onHidden;
					uE.fastDrop = fastDrop;
					this.State = Player.EOperationState.Finished;
					this.\uE003 = new Action(uE.\uE000);
				}

				// Token: 0x06009675 RID: 38517 RVA: 0x00304630 File Offset: 0x00302830
				private new void \uE000()
				{
					this.State = Player.EOperationState.Finished;
					this.\uE003();
				}

				// Token: 0x06009676 RID: 38518 RVA: 0x00304644 File Offset: 0x00302844
				private new void \uE001()
				{
					this.State = Player.EOperationState.Finished;
					this.\uE002.InitiateOperation<Player.KnifeController.\uE001>().Start();
				}

				// Token: 0x040087E4 RID: 34788
				private Action \uE003;

				// Token: 0x040087E5 RID: 34789
				private bool \uE004;

				// Token: 0x0200172D RID: 5933
				[CompilerGenerated]
				private new sealed class \uE000
				{
					// Token: 0x06009678 RID: 38520 RVA: 0x00304668 File Offset: 0x00302868
					internal void \uE000()
					{
						this.<>4__this.\uE002.InitiateOperation<Player.KnifeController.\uE004>().Start(this.onHidden, this.fastDrop);
					}

					// Token: 0x040087E6 RID: 34790
					public Player.KnifeController.\uE002 <>4__this;

					// Token: 0x040087E7 RID: 34791
					public Action onHidden;

					// Token: 0x040087E8 RID: 34792
					public bool fastDrop;
				}
			}

			// Token: 0x0200172E RID: 5934
			public new abstract class \uE003 : Player.\uE00A<Player.KnifeController>
			{
				// Token: 0x06009679 RID: 38521 RVA: 0x0030468C File Offset: 0x0030288C
				public \uE003(Player.KnifeController controller) : base(controller)
				{
					this.\uE005 = controller._player;
				}

				// Token: 0x0600967A RID: 38522 RVA: 0x003046A4 File Offset: 0x003028A4
				public virtual void ExamineWeapon()
				{
					base.\uE000();
				}

				// Token: 0x0600967B RID: 38523 RVA: 0x003046AC File Offset: 0x003028AC
				public virtual void SetInventoryOpened(bool opened)
				{
					base.\uE000();
				}

				// Token: 0x0600967C RID: 38524 RVA: 0x003046B4 File Offset: 0x003028B4
				public virtual bool MakeKnifeKick()
				{
					base.\uE000();
					return false;
				}

				// Token: 0x0600967D RID: 38525 RVA: 0x003046C0 File Offset: 0x003028C0
				public virtual void OnComboPlanning()
				{
					base.\uE000();
				}

				// Token: 0x0600967E RID: 38526 RVA: 0x003046C8 File Offset: 0x003028C8
				public virtual void BrakeCombo()
				{
					base.\uE000();
				}

				// Token: 0x0600967F RID: 38527 RVA: 0x003046D0 File Offset: 0x003028D0
				public virtual void ContinueCombo()
				{
					base.\uE000();
				}

				// Token: 0x06009680 RID: 38528 RVA: 0x003046D8 File Offset: 0x003028D8
				public virtual void StopKnifeKick()
				{
					base.\uE000();
				}

				// Token: 0x06009681 RID: 38529 RVA: 0x003046E0 File Offset: 0x003028E0
				public virtual bool CanRemove()
				{
					return false;
				}

				// Token: 0x06009682 RID: 38530 RVA: 0x003046E4 File Offset: 0x003028E4
				public virtual bool MakeAlternativeKick()
				{
					base.\uE000();
					return false;
				}

				// Token: 0x06009683 RID: 38531 RVA: 0x003046F0 File Offset: 0x003028F0
				public virtual void StopAlternativeKick()
				{
					base.\uE000();
				}

				// Token: 0x06009684 RID: 38532 RVA: 0x003046F8 File Offset: 0x003028F8
				public virtual void SetKnifeCompassState(bool active)
				{
					base.\uE000();
				}

				// Token: 0x040087E9 RID: 34793
				protected readonly Player \uE005;
			}

			// Token: 0x0200172F RID: 5935
			private class \uE004 : Player.KnifeController.\uE003
			{
				// Token: 0x06009685 RID: 38533 RVA: 0x00304700 File Offset: 0x00302900
				public \uE004(Player.KnifeController controller) : base(controller)
				{
				}

				// Token: 0x06009686 RID: 38534 RVA: 0x0030470C File Offset: 0x0030290C
				public void Start(Action onHidden, bool fastDrop)
				{
					this.\uE006 = onHidden;
					base.Start();
					this.\uE002.\uE001.SetActiveParam(false, true);
					this.\uE002.\uE001.SetFastHide(fastDrop);
					this.\uE002.SetMeleeSpeed(this.\uE005.Physical.MeleeSpeed);
					this.\uE002._player.BodyAnimatorCommon.SetFloat(PlayerAnimator.RELOAD_FLOAT_PARAM_HASH, 1f);
				}

				// Token: 0x06009687 RID: 38535 RVA: 0x00304790 File Offset: 0x00302990
				public override void Reset()
				{
					this.\uE006 = null;
					base.Reset();
				}

				// Token: 0x06009688 RID: 38536 RVA: 0x003047A0 File Offset: 0x003029A0
				public override void HideWeaponComplete()
				{
					this.State = Player.EOperationState.Finished;
					this.\uE006();
				}

				// Token: 0x06009689 RID: 38537 RVA: 0x003047B4 File Offset: 0x003029B4
				public override void HideWeapon(Action onHidden, bool fastDrop)
				{
					this.\uE006 = (Action)Delegate.Combine(this.\uE006, onHidden);
				}

				// Token: 0x0600968A RID: 38538 RVA: 0x003047D0 File Offset: 0x003029D0
				public override void FastForward()
				{
					if (this.State != Player.EOperationState.Finished)
					{
						this.HideWeaponComplete();
					}
				}

				// Token: 0x040087EA RID: 34794
				private Action \uE006;
			}

			// Token: 0x02001730 RID: 5936
			public sealed class \uE005 : Player.KnifeController.\uE000
			{
				// Token: 0x0600968B RID: 38539 RVA: 0x003047E4 File Offset: 0x003029E4
				public \uE005(Player.KnifeController controller) : base(controller)
				{
				}

				// Token: 0x0600968C RID: 38540 RVA: 0x003047F0 File Offset: 0x003029F0
				public override void Start(Item item, Callback callback)
				{
					this.\uE008 = 0f;
					this.\uE009 = false;
					base.Start(item, callback);
				}

				// Token: 0x0600968D RID: 38541 RVA: 0x00304814 File Offset: 0x00302A14
				public override void FastForward()
				{
					if (!this.\uE009)
					{
						this.\uE009 = true;
						this.OnBackpackDrop();
					}
				}

				// Token: 0x0600968E RID: 38542 RVA: 0x00304834 File Offset: 0x00302A34
				public override void Update(float deltaTime)
				{
					base.Update(deltaTime);
					if (!this.\uE009 && this.\uE008 > 0.25f)
					{
						this.\uE009 = true;
						this.OnBackpackDrop();
					}
					this.\uE008 += deltaTime;
				}

				// Token: 0x040087EB RID: 34795
				private const float \uE007 = 0.25f;

				// Token: 0x040087EC RID: 34796
				private float \uE008;

				// Token: 0x040087ED RID: 34797
				private bool \uE009;
			}

			// Token: 0x02001731 RID: 5937
			public class \uE006 : Player.KnifeController.\uE003
			{
				// Token: 0x0600968F RID: 38543 RVA: 0x00304884 File Offset: 0x00302A84
				public \uE006(Player.KnifeController controller) : base(controller)
				{
				}

				// Token: 0x06009690 RID: 38544 RVA: 0x00304890 File Offset: 0x00302A90
				public void Start(Action callback)
				{
					this.\uE00B = callback;
					this.\uE002._player.BodyAnimatorCommon.SetFloat(PlayerAnimator.WEAPON_SIZE_MODIFIER_PARAM_HASH, 1f);
					this.\uE002._player.BodyAnimatorCommon.SetFloat(PlayerAnimator.RELOAD_FLOAT_PARAM_HASH, 1f);
					base.Start();
					this.\uE002.\uE001.SetActiveParam(true, true);
					this.\uE002.\uE001.SetMeleeSpeed(this.\uE005.Physical.MeleeSpeed);
					this.\uE002.\uE001.SetInventory(this.\uE005._isInventoryOpened);
					if (this.\uE005.UsedSimplifiedSkeleton)
					{
						this.FastForward();
					}
				}

				// Token: 0x06009691 RID: 38545 RVA: 0x00304968 File Offset: 0x00302B68
				public override void Reset()
				{
					base.Reset();
					this.\uE00B = null;
					this.\uE00A = null;
				}

				// Token: 0x06009692 RID: 38546 RVA: 0x00304984 File Offset: 0x00302B84
				public override void WeaponAppeared()
				{
					this.\uE002.SetupProp();
					this.State = Player.EOperationState.Finished;
					this.\uE002._player.BodyAnimatorCommon.SetFloat(PlayerAnimator.RELOAD_FLOAT_PARAM_HASH, 0f);
					Player.KnifeController.\uE001 uE = this.\uE002.InitiateOperation<Player.KnifeController.\uE001>();
					uE.Start();
					this.\uE00B();
					if (this.\uE00A != null)
					{
						uE.HideWeapon(this.\uE00A, this.\uE00C);
					}
				}

				// Token: 0x06009693 RID: 38547 RVA: 0x00304A10 File Offset: 0x00302C10
				public override void HideWeapon(Action onHidden, bool fastDrop)
				{
					this.\uE00A = onHidden;
					this.\uE00C = fastDrop;
				}

				// Token: 0x06009694 RID: 38548 RVA: 0x00304A20 File Offset: 0x00302C20
				public override void FastForward()
				{
					if (this.State != Player.EOperationState.Finished)
					{
						this.WeaponAppeared();
					}
				}

				// Token: 0x06009695 RID: 38549 RVA: 0x00304A34 File Offset: 0x00302C34
				protected override void SetLeftStanceAnimOnStartOperation()
				{
					this.\uE005.MovementContext.LeftStanceController.DisableLeftStanceAnimFromHandsAction();
				}

				// Token: 0x040087EE RID: 34798
				private Action \uE00A;

				// Token: 0x040087EF RID: 34799
				private Action \uE00B;

				// Token: 0x040087F0 RID: 34800
				private bool \uE00C;
			}
		}

		// Token: 0x02001732 RID: 5938
		public struct \uE00B
		{
			// Token: 0x06009696 RID: 38550 RVA: 0x00304A4C File Offset: 0x00302C4C
			public \uE00B(RaycastHit hit)
			{
				this.collider = hit.collider;
				this.point = hit.point;
				this.normal = hit.normal;
			}

			// Token: 0x040087F1 RID: 34801
			public Collider collider;

			// Token: 0x040087F2 RID: 34802
			public Vector3 point;

			// Token: 0x040087F3 RID: 34803
			public Vector3 normal;
		}

		// Token: 0x02001733 RID: 5939
		internal class QuickKnifeKickController : Player.BaseKnifeController, \uE832, \uE830<\uEE5B>, \uE82F, \uE827
		{
			// Token: 0x170014F7 RID: 5367
			// (get) Token: 0x06009697 RID: 38551 RVA: 0x00304A7C File Offset: 0x00302C7C
			public new \uEE5B Item
			{
				get
				{
					return (\uEE5B)base.Knife.Item;
				}
			}

			// Token: 0x06009698 RID: 38552 RVA: 0x00304A90 File Offset: 0x00302C90
			internal new static \uE084 \uE000<\uE084>(Player player, KnifeComponent knife) where \uE084 : Player.QuickKnifeKickController
			{
				return Player.BaseKnifeController.\uE001<\uE084>(player, knife);
			}

			// Token: 0x06009699 RID: 38553 RVA: 0x00304A9C File Offset: 0x00302C9C
			internal new static Task<\uE084> \uE001<\uE084>(Player player, KnifeComponent knife) where \uE084 : Player.QuickKnifeKickController
			{
				return Player.BaseKnifeController.\uE002<\uE084>(player, knife);
			}

			// Token: 0x170014F8 RID: 5368
			// (get) Token: 0x0600969A RID: 38554 RVA: 0x00304AA8 File Offset: 0x00302CA8
			protected new Player.QuickKnifeKickController.\uE000 \uE000
			{
				get
				{
					return base.CurrentHandsOperation as Player.QuickKnifeKickController.\uE000;
				}
			}

			// Token: 0x0600969B RID: 38555 RVA: 0x00304AB8 File Offset: 0x00302CB8
			public void SetOnUsedCallback(Callback<\uE830<\uEE5B>> callback)
			{
				this.\uE000.SetOnUsedCallback(callback);
			}

			// Token: 0x0600969C RID: 38556 RVA: 0x00304AC8 File Offset: 0x00302CC8
			public override void Spawn(float animationSpeed, Action callback)
			{
				this.\uE001.SetAnimationSpeed(animationSpeed);
				base.InitiateOperation<Player.QuickKnifeKickController.\uE000>().Start(callback);
				this.\uE001.SkipTime(Time.fixedDeltaTime);
			}

			// Token: 0x0600969D RID: 38557 RVA: 0x00304AF8 File Offset: 0x00302CF8
			public override bool CanExecute(\uEF5F operation)
			{
				return false;
			}

			// Token: 0x0600969E RID: 38558 RVA: 0x00304AFC File Offset: 0x00302CFC
			public override bool CanRemove()
			{
				return true;
			}

			// Token: 0x0600969F RID: 38559 RVA: 0x00304B00 File Offset: 0x00302D00
			protected override Dictionary<Type, Player.ItemHandsController.OperationFactoryDelegate> GetOperationFactoryDelegates()
			{
				return new Dictionary<Type, Player.ItemHandsController.OperationFactoryDelegate>
				{
					{
						typeof(Player.QuickKnifeKickController.\uE000),
						new Player.ItemHandsController.OperationFactoryDelegate(this.\uE002)
					}
				};
			}

			// Token: 0x060096A1 RID: 38561 RVA: 0x00304B2C File Offset: 0x00302D2C
			[CompilerGenerated]
			private Player.\uE00C \uE002()
			{
				return new Player.QuickKnifeKickController.\uE000(this);
			}

			// Token: 0x02001734 RID: 5940
			public new class \uE000 : Player.\uE00A<Player.QuickKnifeKickController>
			{
				// Token: 0x060096A2 RID: 38562 RVA: 0x00304B34 File Offset: 0x00302D34
				public \uE000(Player.QuickKnifeKickController controller) : base(controller)
				{
				}

				// Token: 0x060096A3 RID: 38563 RVA: 0x00304B40 File Offset: 0x00302D40
				public void Start(Action callback)
				{
					this.\uE000 = callback;
					this.\uE002.\uE001.SetQuickFire(true);
					this.\uE002.\uE001.SetActiveParam(false, true);
					this.\uE002.\uE001.SetMeleeSpeed(this.\uE002._player.Physical.MeleeSpeed);
					this.\uE002.SetDeflected(false);
					this.\uE002.SetMeleeSpeed(this.\uE002._player.Physical.MeleeSpeed);
				}

				// Token: 0x060096A4 RID: 38564 RVA: 0x00304BD4 File Offset: 0x00302DD4
				public override void WeaponAppeared()
				{
					this.\uE000();
				}

				// Token: 0x060096A5 RID: 38565 RVA: 0x00304BE4 File Offset: 0x00302DE4
				public override void HideWeapon(Action onHidden, bool fastHide)
				{
					onHidden();
					if (\uE3DB.DisabledForNow)
					{
						return;
					}
					if (this.\uE003)
					{
						onHidden();
						return;
					}
					this.\uE001 = onHidden;
				}

				// Token: 0x060096A6 RID: 38566 RVA: 0x00304C14 File Offset: 0x00302E14
				public void SetOnUsedCallback(Callback<\uE830<\uEE5B>> callback)
				{
					this.\uE002 = callback;
				}

				// Token: 0x060096A7 RID: 38567 RVA: 0x00304C20 File Offset: 0x00302E20
				public override void OnFireEnd()
				{
					this.\uE003 = true;
					this.\uE002.\uE001.SetQuickFire(false);
					if (this.\uE002.Destroyed)
					{
						this.\uE001();
					}
					else if (this.\uE002 != null)
					{
						this.\uE002(this.\uE002);
					}
					if (this.\uE002.\uE045.OnHit != null)
					{
						KnifeCollider uE = this.\uE002.\uE045;
						uE.OnHit = (Action<Player.\uE00B>)Delegate.Remove(uE.OnHit, new Action<Player.\uE00B>(this.\uE002.\uE008));
					}
					this.\uE002.\uE045.OnFireEnd();
				}

				// Token: 0x060096A8 RID: 38568 RVA: 0x00304CEC File Offset: 0x00302EEC
				public override void OnFire()
				{
					this.\uE002._player.Physical.ConsumeAsMelee(this.\uE002.Knife.Template.SecondaryConsumption);
					KnifeCollider uE = this.\uE002.\uE045;
					uE.OnHit = (Action<Player.\uE00B>)Delegate.Combine(uE.OnHit, new Action<Player.\uE00B>(this.\uE002.\uE008));
					this.\uE002.\uE045.MaxDistance = this.\uE002.Knife.Template.PrimaryDistance;
					this.\uE002.\uE045.OnFire();
				}

				// Token: 0x060096A9 RID: 38569 RVA: 0x00304D90 File Offset: 0x00302F90
				public override void Update(float deltaTime)
				{
					this.\uE002.\uE045.ManualUpdate();
					base.Update(deltaTime);
				}

				// Token: 0x060096AA RID: 38570 RVA: 0x00304DAC File Offset: 0x00302FAC
				protected override void SetLeftStanceAnimOnStartOperation()
				{
					this.\uE002._player.MovementContext.LeftStanceController.DisableLeftStanceAnimFromHandsAction();
				}

				// Token: 0x040087F4 RID: 34804
				private new Action \uE000;

				// Token: 0x040087F5 RID: 34805
				private new Action \uE001;

				// Token: 0x040087F6 RID: 34806
				private new Callback<\uE830<\uEE5B>> \uE002;

				// Token: 0x040087F7 RID: 34807
				private bool \uE003;
			}
		}

		// Token: 0x02001735 RID: 5941
		internal class MedsController : Player.ItemHandsController, \uE82E, \uE833, \uE827
		{
			// Token: 0x170014F9 RID: 5369
			// (get) Token: 0x060096AB RID: 38571 RVA: 0x00304DC8 File Offset: 0x00302FC8
			public override int AnimationVariant
			{
				get
				{
					return this._animationVariant;
				}
			}

			// Token: 0x170014FA RID: 5370
			// (get) Token: 0x060096AC RID: 38572 RVA: 0x00304DD0 File Offset: 0x00302FD0
			private new Player.MedsController.\uE000 \uE000
			{
				get
				{
					return base.CurrentHandsOperation as Player.MedsController.\uE000;
				}
			}

			// Token: 0x170014FB RID: 5371
			// (get) Token: 0x060096AD RID: 38573 RVA: 0x00304DE0 File Offset: 0x00302FE0
			public override FirearmsAnimator FirearmsAnimator
			{
				get
				{
					return this.\uE001;
				}
			}

			// Token: 0x170014FC RID: 5372
			// (get) Token: 0x060096AE RID: 38574 RVA: 0x00304DE8 File Offset: 0x00302FE8
			public override string LoggerDistinctId
			{
				get
				{
					return string.Format(\uF1F8.\uE000(139683), this._player.ProfileId, this._player.Profile.Info.Nickname, this);
				}
			}

			// Token: 0x14000193 RID: 403
			// (add) Token: 0x060096AF RID: 38575 RVA: 0x00304E1C File Offset: 0x0030301C
			// (remove) Token: 0x060096B0 RID: 38576 RVA: 0x00304E60 File Offset: 0x00303060
			public event Action OnOutUseEvent
			{
				[CompilerGenerated]
				add
				{
					Action action = this.\uE04D;
					Action action2;
					do
					{
						action2 = action;
						Action value2 = (Action)Delegate.Combine(action2, value);
						action = Interlocked.CompareExchange<Action>(ref this.\uE04D, value2, action2);
					}
					while (action != action2);
				}
				[CompilerGenerated]
				remove
				{
					Action action = this.\uE04D;
					Action action2;
					do
					{
						action2 = action;
						Action value2 = (Action)Delegate.Remove(action2, value);
						action = Interlocked.CompareExchange<Action>(ref this.\uE04D, value2, action2);
					}
					while (action != action2);
				}
			}

			// Token: 0x170014FD RID: 5373
			// (get) Token: 0x060096B1 RID: 38577 RVA: 0x00304EA4 File Offset: 0x003030A4
			// (set) Token: 0x060096B2 RID: 38578 RVA: 0x00304EAC File Offset: 0x003030AC
			public bool FailedToApply { get; private set; }

			// Token: 0x060096B3 RID: 38579 RVA: 0x00304EB8 File Offset: 0x003030B8
			public override void ShowGesture(EInteraction gesture)
			{
			}

			// Token: 0x060096B4 RID: 38580 RVA: 0x00304EBC File Offset: 0x003030BC
			public override void Destroy()
			{
				this._player.ProceduralWeaponAnimation.ClearPreviousWeapon();
				base.Destroy();
				this.\uE001 = null;
				AssetPoolObject.ReturnToPool(this._controllerObject.gameObject, true);
			}

			// Token: 0x060096B5 RID: 38581 RVA: 0x00304EF4 File Offset: 0x003030F4
			protected override void OnOutUse()
			{
				base.OnOutUse();
				Action uE04D = this.\uE04D;
				if (uE04D == null)
				{
					return;
				}
				uE04D();
			}

			// Token: 0x060096B6 RID: 38582 RVA: 0x00304F0C File Offset: 0x0030310C
			public void SetOnUsedCallback(Callback<\uE833> callback)
			{
				this.\uE000.SetOnUsedCallback(callback);
			}

			// Token: 0x060096B7 RID: 38583 RVA: 0x00304F1C File Offset: 0x0030311C
			public Callback<\uE833> GetOnUsedCallback()
			{
				return this.\uE000.GetOnUsedCallback();
			}

			// Token: 0x060096B8 RID: 38584 RVA: 0x00304F2C File Offset: 0x0030312C
			public void Remove()
			{
				this.\uE000().HandleExceptions();
			}

			// Token: 0x060096B9 RID: 38585 RVA: 0x00304F3C File Offset: 0x0030313C
			private new Task \uE000()
			{
				Player.MedsController.\uE004 uE;
				uE.<>t__builder = AsyncTaskMethodBuilder.Create();
				uE.<>4__this = this;
				uE.<>1__state = -1;
				uE.<>t__builder.Start<Player.MedsController.\uE004>(ref uE);
				return uE.<>t__builder.Task;
			}

			// Token: 0x060096BA RID: 38586 RVA: 0x00304F8C File Offset: 0x0030318C
			public void ClearQueue()
			{
				this.\uE000.ClearQueue();
			}

			// Token: 0x060096BB RID: 38587 RVA: 0x00304F9C File Offset: 0x0030319C
			public override bool CanExecute(\uEF5F operation)
			{
				return true;
			}

			// Token: 0x060096BC RID: 38588 RVA: 0x00304FA0 File Offset: 0x003031A0
			public override void Execute(\uEF5F operation, Callback callback)
			{
				callback.Succeed();
			}

			// Token: 0x060096BD RID: 38589 RVA: 0x00304FA8 File Offset: 0x003031A8
			public override void Pickup(bool p)
			{
			}

			// Token: 0x060096BE RID: 38590 RVA: 0x00304FAC File Offset: 0x003031AC
			public override void Loot(bool p)
			{
			}

			// Token: 0x060096BF RID: 38591 RVA: 0x00304FB0 File Offset: 0x003031B0
			public override void Interact(bool isInteracting, int actionIndex)
			{
			}

			// Token: 0x060096C0 RID: 38592 RVA: 0x00304FB4 File Offset: 0x003031B4
			public override bool CanInteract()
			{
				return false;
			}

			// Token: 0x060096C1 RID: 38593 RVA: 0x00304FB8 File Offset: 0x003031B8
			public override bool CanRemove()
			{
				return true;
			}

			// Token: 0x060096C2 RID: 38594 RVA: 0x00304FBC File Offset: 0x003031BC
			internal new static \uE084 \uE001<\uE084>(Player player, Item item, \uECFD<EBodyPart> bodyParts, float amount, int animationVariant) where \uE084 : Player.MedsController
			{
				\uE084 uE = Player.ItemHandsController.\uE001<\uE084>(player, item, new Player.ItemHandsController.\uE000(Singleton<\uE90C>.Instance.CreateItemUsablePrefab));
				Player.MedsController.\uE003<\uE084>(uE, player, item, animationVariant);
				uE.\uE04C = bodyParts;
				uE.\uE04B = amount;
				return uE;
			}

			// Token: 0x060096C3 RID: 38595 RVA: 0x00304FF8 File Offset: 0x003031F8
			internal static Task<\uE084> \uE002<\uE084>(Player player, Item item, \uECFD<EBodyPart> bodyParts, float amount, int animationVariant) where \uE084 : Player.MedsController
			{
				Player.MedsController.\uE002<\uE084> uE;
				uE.<>t__builder = AsyncTaskMethodBuilder<\uE084>.Create();
				uE.player = player;
				uE.item = item;
				uE.bodyParts = bodyParts;
				uE.amount = amount;
				uE.animationVariant = animationVariant;
				uE.<>1__state = -1;
				uE.<>t__builder.Start<Player.MedsController.\uE002<\uE084>>(ref uE);
				return uE.<>t__builder.Task;
			}

			// Token: 0x060096C4 RID: 38596 RVA: 0x00305070 File Offset: 0x00303270
			private static void \uE003<\uE084>(\uE084 controller, Player player, Item item, int animationVariant) where \uE084 : Player.MedsController
			{
				Player.MedsController.\uE001<\uE084> uE = new Player.MedsController.\uE001<\uE084>();
				uE.controller = controller;
				WeaponPrefab component = uE.controller._controllerObject.GetComponent<WeaponPrefab>();
				\uE868 objectInHands = component.ObjectInHands;
				player.ProceduralWeaponAnimation.ClearPreviousWeapon();
				player.ProceduralWeaponAnimation.InitTransforms(uE.controller.HandsHierarchy, null);
				objectInHands.AfterGetFromPoolInit(player.ProceduralWeaponAnimation, null, player.IsYourPlayer);
				uE.controller.\uE001 = component.FirearmsAnimator;
				uE.controller.\uE001.AddEventsConsumer(uE.controller);
				uE.controller.CompositeDisposable.AddDisposable(new Action(uE.\uE000));
				uE.controller.\uE001.SkipTime(0.0001f);
				uE.controller._player.HandsAnimator = uE.controller.\uE001;
				uE.controller._controllerObject.GetComponent<BaseSoundPlayer>().Init(uE.controller, player.PlayerBones.WeaponRoot, player);
				uE.controller.\uE001.SetUseTimeMultiplier(1f + player.Skills.SurgerySpeed);
				uE.controller.OnOutUseEvent += uE.\uE001;
				uE.controller.CompositeDisposable.AddDisposable(new Action(uE.\uE002));
			}

			// Token: 0x060096C5 RID: 38597 RVA: 0x00305234 File Offset: 0x00303434
			private static void \uE004(Player.MedsController controller)
			{
				if (controller == null)
				{
					return;
				}
				controller.\uE001.SetActiveParam(true, false);
				controller.\uE001.SetNextLimb(false);
				Player.MedsController.\uE005(controller);
			}

			// Token: 0x060096C6 RID: 38598 RVA: 0x00305268 File Offset: 0x00303468
			private static void \uE005(Player.MedsController controller)
			{
				Item item = controller.Item;
				controller._animationVariant++;
				int num = 0;
				AnimationVariantsComponent animationVariantsComponent;
				if (item.TryGetItemComponent<AnimationVariantsComponent>(out animationVariantsComponent))
				{
					num = animationVariantsComponent.VariantsNumber;
				}
				int animationVariant = (int)Mathf.Repeat((float)controller._animationVariant, (float)num);
				controller._animationVariant = animationVariant;
				controller.\uE001.SetAnimationVariant(animationVariant);
			}

			// Token: 0x060096C7 RID: 38599 RVA: 0x003052CC File Offset: 0x003034CC
			public override void ManualUpdate(float deltaTime)
			{
				base.ManualUpdate(deltaTime);
				FirearmsAnimator uE = this.\uE001;
				if (uE == null)
				{
					return;
				}
				uE.SetAimAngle(this._player.Pitch);
			}

			// Token: 0x060096C8 RID: 38600 RVA: 0x003052F0 File Offset: 0x003034F0
			protected override void IEventsConsumerOnWeapOut()
			{
				this.\uE000.HideWeaponComplete();
			}

			// Token: 0x060096C9 RID: 38601 RVA: 0x00305300 File Offset: 0x00303500
			protected override void IEventsConsumerOnThirdAction(int IntParam)
			{
				base.TranslateAnimatorParameter(IntParam);
			}

			// Token: 0x060096CA RID: 38602 RVA: 0x0030530C File Offset: 0x0030350C
			public override void Spawn(float animationSpeed, Action callback)
			{
				this.\uE001.SetAnimationSpeed(animationSpeed);
				this.\uE001.SetPointOfViewOnSpawn(this._player.PointOfView);
				base.InitiateOperation<Player.MedsController.\uE000>().Start(this.\uE04C, this.\uE04B, callback);
			}

			// Token: 0x060096CB RID: 38603 RVA: 0x0030535C File Offset: 0x0030355C
			public override void Drop(float animationSpeed, Action callback, bool fastDrop = false, Item nextControllerItem = null)
			{
				this.\uE006(callback).HandleExceptions();
			}

			// Token: 0x060096CC RID: 38604 RVA: 0x0030536C File Offset: 0x0030356C
			private Task \uE006(Action callback)
			{
				Player.MedsController.\uE003 uE;
				uE.<>t__builder = AsyncTaskMethodBuilder.Create();
				uE.<>4__this = this;
				uE.callback = callback;
				uE.<>1__state = -1;
				uE.<>t__builder.Start<Player.MedsController.\uE003>(ref uE);
				return uE.<>t__builder.Task;
			}

			// Token: 0x060096CD RID: 38605 RVA: 0x003053C4 File Offset: 0x003035C4
			public override void FastForwardCurrentState()
			{
				this.\uE000.FastForward();
			}

			// Token: 0x060096CE RID: 38606 RVA: 0x003053D4 File Offset: 0x003035D4
			protected override Dictionary<Type, Player.ItemHandsController.OperationFactoryDelegate> GetOperationFactoryDelegates()
			{
				return new Dictionary<Type, Player.ItemHandsController.OperationFactoryDelegate>
				{
					{
						typeof(Player.MedsController.\uE000),
						new Player.ItemHandsController.OperationFactoryDelegate(this.\uE007)
					}
				};
			}

			// Token: 0x060096D0 RID: 38608 RVA: 0x00305400 File Offset: 0x00303600
			[CompilerGenerated]
			private Player.\uE00C \uE007()
			{
				return new Player.MedsController.\uE000(this);
			}

			// Token: 0x040087F8 RID: 34808
			private float \uE04B;

			// Token: 0x040087F9 RID: 34809
			public int _animationVariant;

			// Token: 0x040087FA RID: 34810
			private \uECFD<EBodyPart> \uE04C;

			// Token: 0x040087FB RID: 34811
			private new FirearmsAnimator \uE001;

			// Token: 0x040087FC RID: 34812
			[CompilerGenerated]
			private Action \uE04D;

			// Token: 0x040087FD RID: 34813
			[CompilerGenerated]
			private bool \uE04E;

			// Token: 0x02001736 RID: 5942
			private new sealed class \uE000 : Player.\uE00C
			{
				// Token: 0x060096D1 RID: 38609 RVA: 0x00305408 File Offset: 0x00303608
				public \uE000(Player.MedsController controller) : base(controller)
				{
					this.\uE080 = controller;
				}

				// Token: 0x060096D2 RID: 38610 RVA: 0x00305418 File Offset: 0x00303618
				public override void Reset()
				{
					this.\uE005 = null;
					this.\uE081 = null;
					base.Reset();
				}

				// Token: 0x060096D3 RID: 38611 RVA: 0x00305434 File Offset: 0x00303634
				public void Start(\uECFD<EBodyPart> bodyParts, float amount, Action callback)
				{
					base.Start();
					callback();
					this.\uE082 = new Queue<EBodyPart>();
					for (int i = 0; i < bodyParts.Length; i++)
					{
						this.\uE082.Enqueue(bodyParts[i]);
					}
					if (this.\uE080.Item is \uEE75)
					{
						amount = 1f;
					}
					FoodDrinkComponent itemComponent = this.\uE080.Item.GetItemComponent<FoodDrinkComponent>();
					if (itemComponent != null)
					{
						amount = Mathf.Clamp(amount, 0f, itemComponent.HpPercent / itemComponent.MaxResource);
					}
					this.\uE083 = amount;
					AnimationVariantsComponent animationVariantsComponent;
					if (this.\uE080.Item.TryGetItemComponent<AnimationVariantsComponent>(out animationVariantsComponent))
					{
						this.\uE084 = UnityEngine.Random.Range(0, animationVariantsComponent.VariantsNumber);
					}
					this.\uE003();
					this.\uE080._player.HealthController.EffectRemovedEvent += this.\uE006;
					FirearmsAnimator uE = this.\uE080.\uE001;
					if (uE != null)
					{
						uE.SetActiveParam(true, false);
					}
					this.\uE080.OnOutUseEvent += this.\uE001;
					this.\uE080.Item.Owner.RemoveItemEvent += this.\uE000;
				}

				// Token: 0x060096D4 RID: 38612 RVA: 0x00305590 File Offset: 0x00303790
				private void \uE000(\uEED9 args)
				{
					if (args.Item != this.\uE080.Item)
					{
						return;
					}
					this.\uE007();
				}

				// Token: 0x060096D5 RID: 38613 RVA: 0x003055AC File Offset: 0x003037AC
				private new void \uE001()
				{
					FirearmsAnimator uE = this.\uE080.\uE001;
					if (uE != null)
					{
						uE.SetActiveParam(true, false);
					}
					FirearmsAnimator uE2 = this.\uE080.\uE001;
					if (uE2 == null)
					{
						return;
					}
					uE2.SetNextLimb(false);
				}

				// Token: 0x060096D6 RID: 38614 RVA: 0x003055DC File Offset: 0x003037DC
				private bool \uE002()
				{
					MedKitComponent medKitComponent;
					return this.\uE082.Count != 0 && this.\uE080.Item != null && this.\uE080.Item.TryGetItemComponent<MedKitComponent>(out medKitComponent) && medKitComponent.HpResource >= Mathf.Epsilon;
				}

				// Token: 0x060096D7 RID: 38615 RVA: 0x00305640 File Offset: 0x00303840
				private void \uE003()
				{
					EBodyPart bodyPart = EBodyPart.Common;
					EBodyPart ebodyPart;
					if (this.\uE082.TryPeek(ref ebodyPart))
					{
						bodyPart = ebodyPart;
					}
					if (this.\uE080._player.ActiveHealthController == null)
					{
						return;
					}
					if (this.\uE080._player.ActiveHealthController.DoMedEffect(this.\uE080.Item, bodyPart, new float?(this.\uE083)) != null)
					{
						float num = this.\uE080._player.Skills.SurgerySpeed.Value / 100f;
						ValueStruct bodyPartHealth = this.\uE080._player.HealthController.GetBodyPartHealth(ebodyPart, false);
						if (bodyPartHealth.Maximum - bodyPartHealth.Current < 10f)
						{
							num += 0.2f;
						}
						FirearmsAnimator uE = this.\uE080.\uE001;
						if (uE != null)
						{
							uE.SetUseTimeMultiplier(1f + num);
						}
						this.\uE004();
						return;
					}
					this.State = Player.EOperationState.Finished;
					this.\uE080.FailedToApply = true;
					Callback<\uE833> uE2 = this.\uE081;
					this.\uE081 = null;
					if (uE2 == null)
					{
						return;
					}
					uE2(this.\uE080);
				}

				// Token: 0x060096D8 RID: 38616 RVA: 0x00305778 File Offset: 0x00303978
				private void \uE004()
				{
					Item item = this.\uE080.Item;
					this.\uE084++;
					int num = 0;
					AnimationVariantsComponent animationVariantsComponent;
					if (item.TryGetItemComponent<AnimationVariantsComponent>(out animationVariantsComponent))
					{
						num = animationVariantsComponent.VariantsNumber;
					}
					int animationVariant = (int)Mathf.Repeat((float)this.\uE084, (float)num);
					this.\uE080._animationVariant = animationVariant;
					FirearmsAnimator uE = this.\uE080.\uE001;
					if (uE == null)
					{
						return;
					}
					uE.SetAnimationVariant(animationVariant);
				}

				// Token: 0x060096D9 RID: 38617 RVA: 0x003057F0 File Offset: 0x003039F0
				public void SetOnUsedCallback(Callback<\uE833> callback)
				{
					this.\uE081 = callback;
				}

				// Token: 0x060096DA RID: 38618 RVA: 0x003057FC File Offset: 0x003039FC
				public Callback<\uE833> GetOnUsedCallback()
				{
					return this.\uE081;
				}

				// Token: 0x060096DB RID: 38619 RVA: 0x00305804 File Offset: 0x00303A04
				public void Remove()
				{
					this.\uE082.Clear();
					this.\uE080._player.HealthController.CancelApplyingItem();
				}

				// Token: 0x060096DC RID: 38620 RVA: 0x00305828 File Offset: 0x00303A28
				private bool \uE005()
				{
					EBodyPart ebodyPart;
					return this.\uE082.TryPeek(ref ebodyPart) && (ebodyPart == EBodyPart.Common || !this.\uE080._player.HealthController.CanApplyItem(this.\uE080.Item, ebodyPart));
				}

				// Token: 0x060096DD RID: 38621 RVA: 0x00305878 File Offset: 0x00303A78
				private void \uE006(\uED31 effect)
				{
					if (!(effect is \uED62))
					{
						return;
					}
					while (this.\uE005())
					{
						this.\uE082.Dequeue();
					}
					bool flag = this.\uE002();
					if (this.\uE080.\uE001 != null && this.\uE080.\uE001.HasNextLimb())
					{
						this.\uE080.\uE001.SetActiveParam(false, false);
						this.\uE080.\uE001.SetNextLimb(flag);
					}
					if (flag)
					{
						this.\uE003();
						return;
					}
					this.\uE007();
				}

				// Token: 0x060096DE RID: 38622 RVA: 0x00305914 File Offset: 0x00303B14
				private void \uE007()
				{
					FirearmsAnimator uE = this.\uE080.\uE001;
					if (uE != null)
					{
						uE.SetNextLimb(false);
					}
					FirearmsAnimator uE2 = this.\uE080.\uE001;
					if (uE2 != null)
					{
						uE2.SetActiveParam(false, true);
					}
					if (this.\uE085)
					{
						return;
					}
					this.\uE085 = true;
					this.\uE080._player.HealthController.EffectRemovedEvent -= this.\uE006;
					this.\uE080.OnOutUseEvent -= this.\uE001;
					if (this.\uE080.Item.Owner != null)
					{
						this.\uE080.Item.Owner.RemoveItemEvent -= this.\uE000;
					}
					Callback<\uE833> uE3 = this.\uE081;
					this.\uE081 = null;
					if (uE3 == null)
					{
						return;
					}
					uE3(this.\uE080);
				}

				// Token: 0x060096DF RID: 38623 RVA: 0x00305A04 File Offset: 0x00303C04
				public void HideWeapon(Action onHiddenCallback)
				{
					ActiveHealthController activeHealthController = this.\uE080._player.ActiveHealthController;
					if (activeHealthController != null)
					{
						activeHealthController.RemoveMedEffect();
					}
					this.\uE080._player.HealthController.EffectRemovedEvent -= this.\uE006;
					this.\uE005 = onHiddenCallback;
					FirearmsAnimator uE = this.\uE080.\uE001;
					if (uE != null)
					{
						uE.SetActiveParam(false, false);
					}
					if (this.State == Player.EOperationState.Finished)
					{
						Action uE2 = this.\uE005;
						if (uE2 == null)
						{
							return;
						}
						uE2();
					}
				}

				// Token: 0x060096E0 RID: 38624 RVA: 0x00305A90 File Offset: 0x00303C90
				public void HideWeaponComplete()
				{
					this.State = Player.EOperationState.Finished;
					this.\uE080._player.\uE085(this.\uE080.Item).Confirm(true);
					Action uE = this.\uE005;
					if (uE == null)
					{
						return;
					}
					uE();
				}

				// Token: 0x060096E1 RID: 38625 RVA: 0x00305AD0 File Offset: 0x00303CD0
				public void ClearQueue()
				{
					if (this.\uE082.Count <= 0)
					{
						return;
					}
					EBodyPart ebodyPart = this.\uE082.Dequeue();
					this.\uE082.Clear();
					this.\uE082.Enqueue(ebodyPart);
				}

				// Token: 0x060096E2 RID: 38626 RVA: 0x00305B18 File Offset: 0x00303D18
				public void FastForward()
				{
					if (this.State != Player.EOperationState.Finished)
					{
						this.HideWeaponComplete();
					}
				}

				// Token: 0x060096E3 RID: 38627 RVA: 0x00305B2C File Offset: 0x00303D2C
				protected override void SetLeftStanceAnimOnStartOperation()
				{
					this.\uE080._player.MovementContext.LeftStanceController.DisableLeftStanceAnimFromHandsAction();
				}

				// Token: 0x040087FE RID: 34814
				private readonly Player.MedsController \uE080;

				// Token: 0x040087FF RID: 34815
				private Action \uE005;

				// Token: 0x04008800 RID: 34816
				private Callback<\uE833> \uE081;

				// Token: 0x04008801 RID: 34817
				private Queue<EBodyPart> \uE082;

				// Token: 0x04008802 RID: 34818
				private float \uE083;

				// Token: 0x04008803 RID: 34819
				private int \uE084;

				// Token: 0x04008804 RID: 34820
				private bool \uE085;
			}

			// Token: 0x02001737 RID: 5943
			[CompilerGenerated]
			private sealed class \uE001<\uE084> where \uE084 : Player.MedsController
			{
				// Token: 0x060096E5 RID: 38629 RVA: 0x00305B50 File Offset: 0x00303D50
				internal void \uE000()
				{
					this.controller.\uE001.RemoveEventsConsumer(this.controller);
				}

				// Token: 0x060096E6 RID: 38630 RVA: 0x00305B74 File Offset: 0x00303D74
				internal void \uE001()
				{
					Player.MedsController.\uE004(this.controller);
				}

				// Token: 0x060096E7 RID: 38631 RVA: 0x00305B88 File Offset: 0x00303D88
				internal void \uE002()
				{
					this.controller.OnOutUseEvent -= this.\uE001;
				}

				// Token: 0x04008805 RID: 34821
				public \uE084 controller;
			}
		}

		// Token: 0x0200173B RID: 5947
		public abstract class AbstractHandsController : MonoBehaviour, \uE827, \uE36E
		{
			// Token: 0x14000194 RID: 404
			// (add) Token: 0x060096EE RID: 38638 RVA: 0x00305EA4 File Offset: 0x003040A4
			// (remove) Token: 0x060096EF RID: 38639 RVA: 0x00305EE8 File Offset: 0x003040E8
			public event Action<bool> OnAimingChanged;

			// Token: 0x170014FE RID: 5374
			// (get) Token: 0x060096F0 RID: 38640 RVA: 0x00305F2C File Offset: 0x0030412C
			// (set) Token: 0x060096F1 RID: 38641 RVA: 0x00305F34 File Offset: 0x00304134
			public Transform WeaponRoot { get; set; }

			// Token: 0x170014FF RID: 5375
			// (get) Token: 0x060096F2 RID: 38642
			public abstract GameObject ControllerGameObject { get; }

			// Token: 0x17001500 RID: 5376
			// (get) Token: 0x060096F3 RID: 38643 RVA: 0x00305F40 File Offset: 0x00304140
			// (set) Token: 0x060096F4 RID: 38644 RVA: 0x00305F48 File Offset: 0x00304148
			public bool Destroyed { get; protected set; }

			// Token: 0x17001501 RID: 5377
			// (get) Token: 0x060096F5 RID: 38645
			public abstract TransformLinks HandsHierarchy { get; }

			// Token: 0x17001502 RID: 5378
			// (get) Token: 0x060096F6 RID: 38646
			public abstract FirearmsAnimator FirearmsAnimator { get; }

			// Token: 0x17001503 RID: 5379
			// (get) Token: 0x060096F7 RID: 38647 RVA: 0x00305F54 File Offset: 0x00304154
			// (set) Token: 0x060096F8 RID: 38648 RVA: 0x00305F5C File Offset: 0x0030415C
			public AnimationEventsEmitter AnimationEventsEmitter { get; protected set; }

			// Token: 0x17001504 RID: 5380
			// (get) Token: 0x060096F9 RID: 38649 RVA: 0x00305F68 File Offset: 0x00304168
			// (set) Token: 0x060096FA RID: 38650 RVA: 0x00305F6C File Offset: 0x0030416C
			public virtual bool IsAiming
			{
				get
				{
					return false;
				}
				protected set
				{
				}
			}

			// Token: 0x17001505 RID: 5381
			// (get) Token: 0x060096FB RID: 38651 RVA: 0x00305F70 File Offset: 0x00304170
			public virtual float AimingSensitivity
			{
				get
				{
					return 1f;
				}
			}

			// Token: 0x17001506 RID: 5382
			// (get) Token: 0x060096FC RID: 38652 RVA: 0x00305F78 File Offset: 0x00304178
			// (set) Token: 0x060096FD RID: 38653 RVA: 0x00305F80 File Offset: 0x00304180
			public virtual float AimingSmoothSensitivity { get; set; } = 1f;

			// Token: 0x060096FE RID: 38654 RVA: 0x00305F8C File Offset: 0x0030418C
			public virtual void ManualLateUpdate(float deltaTime)
			{
			}

			// Token: 0x17001507 RID: 5383
			// (get) Token: 0x060096FF RID: 38655 RVA: 0x00305F90 File Offset: 0x00304190
			public virtual string LoggerDistinctId
			{
				get
				{
					return \uF1F8.\uE000(12355);
				}
			}

			// Token: 0x17001508 RID: 5384
			// (get) Token: 0x06009700 RID: 38656 RVA: 0x00305F9C File Offset: 0x0030419C
			public Item Item
			{
				get
				{
					return this.GetItem();
				}
			}

			// Token: 0x17001509 RID: 5385
			// (get) Token: 0x06009701 RID: 38657 RVA: 0x00305FA4 File Offset: 0x003041A4
			public virtual int AnimationVariant
			{
				get
				{
					return 0;
				}
			}

			// Token: 0x06009702 RID: 38658 RVA: 0x00305FA8 File Offset: 0x003041A8
			public virtual void Destroy()
			{
				this.CompositeDisposable.Dispose();
			}

			// Token: 0x06009703 RID: 38659
			public abstract bool CanExecute(\uEF5F operation);

			// Token: 0x06009704 RID: 38660
			public abstract void Execute(\uEF5F operation, Callback callback);

			// Token: 0x06009705 RID: 38661
			public abstract bool CanRemove();

			// Token: 0x06009706 RID: 38662 RVA: 0x00305FB8 File Offset: 0x003041B8
			public virtual bool IsHandsProcessing()
			{
				return false;
			}

			// Token: 0x06009707 RID: 38663 RVA: 0x00305FBC File Offset: 0x003041BC
			public virtual bool IsPlacingBeacon()
			{
				return false;
			}

			// Token: 0x06009708 RID: 38664 RVA: 0x00305FC0 File Offset: 0x003041C0
			public virtual bool CanInteract()
			{
				return true;
			}

			// Token: 0x06009709 RID: 38665 RVA: 0x00305FC4 File Offset: 0x003041C4
			public virtual bool InCanNotBeInterruptedOperation()
			{
				return false;
			}

			// Token: 0x0600970A RID: 38666
			public abstract void ShowGesture(EInteraction gesture);

			// Token: 0x0600970B RID: 38667
			public abstract void BlindFire(int b);

			// Token: 0x0600970C RID: 38668 RVA: 0x00305FC8 File Offset: 0x003041C8
			public virtual bool IsInInteraction()
			{
				return false;
			}

			// Token: 0x0600970D RID: 38669 RVA: 0x00305FCC File Offset: 0x003041CC
			public virtual bool IsInInteractionStrictCheck()
			{
				return this.IsInInteraction();
			}

			// Token: 0x0600970E RID: 38670 RVA: 0x00305FD4 File Offset: 0x003041D4
			public virtual float GetAnimatorFloatParam(int hash)
			{
				return 0f;
			}

			// Token: 0x0600970F RID: 38671 RVA: 0x00305FDC File Offset: 0x003041DC
			public virtual bool SupportPickup()
			{
				return false;
			}

			// Token: 0x06009710 RID: 38672 RVA: 0x00305FE0 File Offset: 0x003041E0
			public virtual void Pickup(bool p)
			{
				throw new NotImplementedException();
			}

			// Token: 0x06009711 RID: 38673 RVA: 0x00305FE8 File Offset: 0x003041E8
			public virtual void Interact(bool isInteracting, int actionIndex)
			{
				throw new NotImplementedException();
			}

			// Token: 0x06009712 RID: 38674 RVA: 0x00305FF0 File Offset: 0x003041F0
			public virtual void Loot(bool p)
			{
				throw new NotImplementedException();
			}

			// Token: 0x06009713 RID: 38675 RVA: 0x00305FF8 File Offset: 0x003041F8
			public virtual void SetInventoryOpened(bool opened)
			{
			}

			// Token: 0x06009714 RID: 38676 RVA: 0x00305FFC File Offset: 0x003041FC
			public virtual bool IsInventoryOpen()
			{
				return false;
			}

			// Token: 0x06009715 RID: 38677 RVA: 0x00306000 File Offset: 0x00304200
			public virtual void OnPlayerDead()
			{
			}

			// Token: 0x06009716 RID: 38678 RVA: 0x00306004 File Offset: 0x00304204
			public virtual void OnGameSessionEnd()
			{
			}

			// Token: 0x06009717 RID: 38679
			protected abstract Item GetItem();

			// Token: 0x06009718 RID: 38680
			public abstract void ManualUpdate(float deltaTime);

			// Token: 0x06009719 RID: 38681
			public abstract void BallisticUpdate(float deltaTime);

			// Token: 0x0600971A RID: 38682
			public abstract void EmitEvents();

			// Token: 0x0600971B RID: 38683
			public abstract void Spawn(float animationSpeed, Action callback);

			// Token: 0x0600971C RID: 38684
			public abstract void Drop(float animationSpeed, Action callback, bool fastDrop, Item nextControllerItem = null);

			// Token: 0x0600971D RID: 38685 RVA: 0x00306008 File Offset: 0x00304208
			public virtual void FastForwardCurrentState()
			{
			}

			// Token: 0x0600971E RID: 38686 RVA: 0x0030600C File Offset: 0x0030420C
			protected virtual void AimingChanged(bool newValue)
			{
				Action<bool> onAimingChanged = this.OnAimingChanged;
				if (onAimingChanged == null)
				{
					return;
				}
				onAimingChanged(newValue);
			}

			// Token: 0x0600971F RID: 38687 RVA: 0x00306020 File Offset: 0x00304220
			void \uE36E.OnAddAmmoInChamber()
			{
				this.IEventsConsumerOnAddAmmoInChamber();
			}

			// Token: 0x06009720 RID: 38688 RVA: 0x00306028 File Offset: 0x00304228
			protected virtual void IEventsConsumerOnAddAmmoInChamber()
			{
			}

			// Token: 0x06009721 RID: 38689 RVA: 0x0030602C File Offset: 0x0030422C
			void \uE36E.OnAddAmmoInMag()
			{
				this.IEventsConsumerOnAddAmmoInMag();
			}

			// Token: 0x06009722 RID: 38690 RVA: 0x00306034 File Offset: 0x00304234
			protected virtual void IEventsConsumerOnAddAmmoInMag()
			{
			}

			// Token: 0x06009723 RID: 38691 RVA: 0x00306038 File Offset: 0x00304238
			void \uE36E.OnArm()
			{
				this.IEventsConsumerOnArm();
			}

			// Token: 0x06009724 RID: 38692 RVA: 0x00306040 File Offset: 0x00304240
			protected virtual void IEventsConsumerOnArm()
			{
			}

			// Token: 0x06009725 RID: 38693 RVA: 0x00306044 File Offset: 0x00304244
			void \uE36E.OnCook()
			{
				this.IEventsConsumerOnCook();
			}

			// Token: 0x06009726 RID: 38694 RVA: 0x0030604C File Offset: 0x0030424C
			protected virtual void IEventsConsumerOnCook()
			{
			}

			// Token: 0x06009727 RID: 38695 RVA: 0x00306050 File Offset: 0x00304250
			void \uE36E.OnDelAmmoChamber()
			{
				this.IEventsConsumerOnDelAmmoChamber();
			}

			// Token: 0x06009728 RID: 38696 RVA: 0x00306058 File Offset: 0x00304258
			protected virtual void IEventsConsumerOnDelAmmoChamber()
			{
			}

			// Token: 0x06009729 RID: 38697 RVA: 0x0030605C File Offset: 0x0030425C
			void \uE36E.OnDelAmmoFromMag()
			{
				this.IEventsConsumerOnDelAmmoFromMag();
			}

			// Token: 0x0600972A RID: 38698 RVA: 0x00306064 File Offset: 0x00304264
			protected virtual void IEventsConsumerOnDelAmmoFromMag()
			{
			}

			// Token: 0x0600972B RID: 38699 RVA: 0x00306068 File Offset: 0x00304268
			void \uE36E.OnDisarm()
			{
				this.IEventsConsumerOnDisarm();
			}

			// Token: 0x0600972C RID: 38700 RVA: 0x00306070 File Offset: 0x00304270
			protected virtual void IEventsConsumerOnDisarm()
			{
			}

			// Token: 0x0600972D RID: 38701 RVA: 0x00306074 File Offset: 0x00304274
			void \uE36E.OnFireEnd()
			{
				this.IEventsConsumerOnFireEnd();
			}

			// Token: 0x0600972E RID: 38702 RVA: 0x0030607C File Offset: 0x0030427C
			protected virtual void IEventsConsumerOnFireEnd()
			{
			}

			// Token: 0x0600972F RID: 38703 RVA: 0x00306080 File Offset: 0x00304280
			void \uE36E.OnComboPlanning()
			{
				this.IEventsConsumerOnComboPlanning();
			}

			// Token: 0x06009730 RID: 38704 RVA: 0x00306088 File Offset: 0x00304288
			protected virtual void IEventsConsumerOnComboPlanning()
			{
			}

			// Token: 0x06009731 RID: 38705 RVA: 0x0030608C File Offset: 0x0030428C
			void \uE36E.OnFiringBullet()
			{
				this.IEventsConsumerOnFiringBullet();
			}

			// Token: 0x06009732 RID: 38706 RVA: 0x00306094 File Offset: 0x00304294
			protected virtual void IEventsConsumerOnFiringBullet()
			{
			}

			// Token: 0x06009733 RID: 38707 RVA: 0x00306098 File Offset: 0x00304298
			void \uE36E.OnFoldOff()
			{
				this.IEventsConsumerOnFoldOff();
			}

			// Token: 0x06009734 RID: 38708 RVA: 0x003060A0 File Offset: 0x003042A0
			protected virtual void IEventsConsumerOnFoldOff()
			{
			}

			// Token: 0x06009735 RID: 38709 RVA: 0x003060A4 File Offset: 0x003042A4
			void \uE36E.OnFoldOn()
			{
				this.IEventsConsumerOnFoldOn();
			}

			// Token: 0x06009736 RID: 38710 RVA: 0x003060AC File Offset: 0x003042AC
			protected virtual void IEventsConsumerOnFoldOn()
			{
			}

			// Token: 0x06009737 RID: 38711 RVA: 0x003060B0 File Offset: 0x003042B0
			void \uE36E.OnIdleStart()
			{
				this.IEventsConsumerOnIdleStart();
			}

			// Token: 0x06009738 RID: 38712 RVA: 0x003060B8 File Offset: 0x003042B8
			protected virtual void IEventsConsumerOnIdleStart()
			{
			}

			// Token: 0x06009739 RID: 38713 RVA: 0x003060BC File Offset: 0x003042BC
			void \uE36E.OnLauncherAppeared()
			{
				this.IEventsConsumerOnLauncherAppeared();
			}

			// Token: 0x0600973A RID: 38714 RVA: 0x003060C4 File Offset: 0x003042C4
			protected virtual void IEventsConsumerOnLauncherAppeared()
			{
			}

			// Token: 0x0600973B RID: 38715 RVA: 0x003060C8 File Offset: 0x003042C8
			void \uE36E.OnLauncherDisappeared()
			{
				this.IEventsConsumerOnLauncherDisappeared();
			}

			// Token: 0x0600973C RID: 38716 RVA: 0x003060D0 File Offset: 0x003042D0
			protected virtual void IEventsConsumerOnLauncherDisappeared()
			{
			}

			// Token: 0x0600973D RID: 38717 RVA: 0x003060D4 File Offset: 0x003042D4
			void \uE36E.OnMagHide()
			{
				this.IEventsConsumerOnMagHide();
			}

			// Token: 0x0600973E RID: 38718 RVA: 0x003060DC File Offset: 0x003042DC
			protected virtual void IEventsConsumerOnMagHide()
			{
			}

			// Token: 0x0600973F RID: 38719 RVA: 0x003060E0 File Offset: 0x003042E0
			void \uE36E.OnMagIn()
			{
				this.IEventsConsumerOnMagIn();
			}

			// Token: 0x06009740 RID: 38720 RVA: 0x003060E8 File Offset: 0x003042E8
			protected virtual void IEventsConsumerOnMagIn()
			{
			}

			// Token: 0x06009741 RID: 38721 RVA: 0x003060EC File Offset: 0x003042EC
			void \uE36E.OnMagOut()
			{
				this.IEventsConsumerOnMagOut();
			}

			// Token: 0x06009742 RID: 38722 RVA: 0x003060F4 File Offset: 0x003042F4
			protected virtual void IEventsConsumerOnMagOut()
			{
			}

			// Token: 0x06009743 RID: 38723 RVA: 0x003060F8 File Offset: 0x003042F8
			void \uE36E.OnMagShow()
			{
				this.IEventsConsumerOnMagShow();
			}

			// Token: 0x06009744 RID: 38724 RVA: 0x00306100 File Offset: 0x00304300
			protected virtual void IEventsConsumerOnMagShow()
			{
			}

			// Token: 0x06009745 RID: 38725 RVA: 0x00306104 File Offset: 0x00304304
			void \uE36E.OnMessageName()
			{
				this.IEventsConsumerOnMessageName();
			}

			// Token: 0x06009746 RID: 38726 RVA: 0x0030610C File Offset: 0x0030430C
			protected virtual void IEventsConsumerOnMessageName()
			{
			}

			// Token: 0x06009747 RID: 38727 RVA: 0x00306110 File Offset: 0x00304310
			void \uE36E.OnMalfunctionOff()
			{
				this.IEventsConsumerOnMalfunctionOff();
			}

			// Token: 0x06009748 RID: 38728 RVA: 0x00306118 File Offset: 0x00304318
			protected virtual void IEventsConsumerOnMalfunctionOff()
			{
			}

			// Token: 0x06009749 RID: 38729 RVA: 0x0030611C File Offset: 0x0030431C
			void \uE36E.OnModChanged()
			{
				this.IEventsConsumerOnModChanged();
			}

			// Token: 0x0600974A RID: 38730 RVA: 0x00306124 File Offset: 0x00304324
			protected virtual void IEventsConsumerOnModChanged()
			{
			}

			// Token: 0x0600974B RID: 38731 RVA: 0x00306128 File Offset: 0x00304328
			void \uE36E.OutUse()
			{
				this.OnOutUse();
			}

			// Token: 0x0600974C RID: 38732 RVA: 0x00306130 File Offset: 0x00304330
			protected virtual void OnOutUse()
			{
			}

			// Token: 0x0600974D RID: 38733 RVA: 0x00306134 File Offset: 0x00304334
			void \uE36E.OnOffBoltCatch()
			{
				this.IEventsConsumerOnOffBoltCatch();
			}

			// Token: 0x0600974E RID: 38734 RVA: 0x0030613C File Offset: 0x0030433C
			protected virtual void IEventsConsumerOnOffBoltCatch()
			{
			}

			// Token: 0x0600974F RID: 38735 RVA: 0x00306140 File Offset: 0x00304340
			void \uE36E.OnOnBoltCatch()
			{
				this.IEventsConsumerOnOnBoltCatch();
			}

			// Token: 0x06009750 RID: 38736 RVA: 0x00306148 File Offset: 0x00304348
			protected virtual void IEventsConsumerOnOnBoltCatch()
			{
			}

			// Token: 0x06009751 RID: 38737 RVA: 0x0030614C File Offset: 0x0030434C
			void \uE36E.OnPutMagToRig()
			{
				this.IEventsConsumerOnPutMagToRig();
			}

			// Token: 0x06009752 RID: 38738 RVA: 0x00306154 File Offset: 0x00304354
			protected virtual void IEventsConsumerOnPutMagToRig()
			{
			}

			// Token: 0x06009753 RID: 38739 RVA: 0x00306158 File Offset: 0x00304358
			void \uE36E.OnRemoveShell()
			{
				this.IEventsConsumerOnRemoveShell();
			}

			// Token: 0x06009754 RID: 38740 RVA: 0x00306160 File Offset: 0x00304360
			protected virtual void IEventsConsumerOnRemoveShell()
			{
			}

			// Token: 0x06009755 RID: 38741 RVA: 0x00306164 File Offset: 0x00304364
			void \uE36E.OnReplaceSecondMag()
			{
				this.IEventsConsumerOnReplaceSecondMag();
			}

			// Token: 0x06009756 RID: 38742 RVA: 0x0030616C File Offset: 0x0030436C
			protected virtual void IEventsConsumerOnReplaceSecondMag()
			{
			}

			// Token: 0x06009757 RID: 38743 RVA: 0x00306170 File Offset: 0x00304370
			void \uE36E.OnShellEject()
			{
				this.IEventsConsumerOnShellEject();
			}

			// Token: 0x06009758 RID: 38744 RVA: 0x00306178 File Offset: 0x00304378
			protected virtual void IEventsConsumerOnShellEject()
			{
			}

			// Token: 0x06009759 RID: 38745 RVA: 0x0030617C File Offset: 0x0030437C
			void \uE36E.OnShowAmmo(bool BoolParam)
			{
				this.IEventsConsumerOnShowAmmo(BoolParam);
			}

			// Token: 0x0600975A RID: 38746 RVA: 0x00306188 File Offset: 0x00304388
			protected virtual void IEventsConsumerOnShowAmmo(bool BoolParam)
			{
			}

			// Token: 0x0600975B RID: 38747 RVA: 0x0030618C File Offset: 0x0030438C
			void \uE36E.OnShowMag()
			{
				this.IEventsConsumerOnShowMag();
			}

			// Token: 0x0600975C RID: 38748 RVA: 0x00306194 File Offset: 0x00304394
			void \uE36E.OnSliderOut()
			{
			}

			// Token: 0x0600975D RID: 38749 RVA: 0x00306198 File Offset: 0x00304398
			protected virtual void IEventsConsumerOnShowMag()
			{
			}

			// Token: 0x0600975E RID: 38750 RVA: 0x0030619C File Offset: 0x0030439C
			void \uE36E.OnSound(string StringParam)
			{
				this.IEventsConsumerOnSound(StringParam);
			}

			// Token: 0x0600975F RID: 38751 RVA: 0x003061A8 File Offset: 0x003043A8
			protected virtual void IEventsConsumerOnSound(string StringParam)
			{
			}

			// Token: 0x06009760 RID: 38752 RVA: 0x003061AC File Offset: 0x003043AC
			public void OnSoundAtPoint(string StringParam)
			{
				this.IEventsConsumerOnSoundAtPoint(StringParam);
			}

			// Token: 0x06009761 RID: 38753 RVA: 0x003061B8 File Offset: 0x003043B8
			protected virtual void IEventsConsumerOnSoundAtPoint(string StringParam)
			{
			}

			// Token: 0x06009762 RID: 38754 RVA: 0x003061BC File Offset: 0x003043BC
			void \uE36E.OnStartUtilityOperation()
			{
				this.IEventsConsumerOnStartUtilityOperation();
			}

			// Token: 0x06009763 RID: 38755 RVA: 0x003061C4 File Offset: 0x003043C4
			protected virtual void IEventsConsumerOnStartUtilityOperation()
			{
			}

			// Token: 0x06009764 RID: 38756 RVA: 0x003061C8 File Offset: 0x003043C8
			void \uE36E.OnThirdAction(int IntParam)
			{
				this.IEventsConsumerOnThirdAction(IntParam);
			}

			// Token: 0x06009765 RID: 38757 RVA: 0x003061D4 File Offset: 0x003043D4
			protected virtual void IEventsConsumerOnThirdAction(int IntParam)
			{
			}

			// Token: 0x06009766 RID: 38758 RVA: 0x003061D8 File Offset: 0x003043D8
			public void OnUseProp(bool BoolParam)
			{
				this.IEventsConsumerOnOnUseProp(BoolParam);
			}

			// Token: 0x06009767 RID: 38759 RVA: 0x003061E4 File Offset: 0x003043E4
			protected virtual void IEventsConsumerOnOnUseProp(bool BoolParam)
			{
			}

			// Token: 0x06009768 RID: 38760 RVA: 0x003061E8 File Offset: 0x003043E8
			void \uE36E.OnUseSecondMagForReload()
			{
				this.IEventsConsumerOnUseSecondMagForReload();
			}

			// Token: 0x06009769 RID: 38761 RVA: 0x003061F0 File Offset: 0x003043F0
			protected virtual void IEventsConsumerOnUseSecondMagForReload()
			{
			}

			// Token: 0x0600976A RID: 38762 RVA: 0x003061F4 File Offset: 0x003043F4
			void \uE36E.OnWeapIn()
			{
				this.IEventsConsumerOnWeapIn();
			}

			// Token: 0x0600976B RID: 38763 RVA: 0x003061FC File Offset: 0x003043FC
			protected virtual void IEventsConsumerOnWeapIn()
			{
			}

			// Token: 0x0600976C RID: 38764 RVA: 0x00306200 File Offset: 0x00304400
			void \uE36E.OnWeapOut()
			{
				this.IEventsConsumerOnWeapOut();
			}

			// Token: 0x0600976D RID: 38765 RVA: 0x00306208 File Offset: 0x00304408
			protected virtual void IEventsConsumerOnWeapOut()
			{
			}

			// Token: 0x0600976E RID: 38766 RVA: 0x0030620C File Offset: 0x0030440C
			public void OnBackpackDrop()
			{
			}

			// Token: 0x0600976F RID: 38767 RVA: 0x00306210 File Offset: 0x00304410
			public void OnBackpackDrop(IAnimatorEventParameter param)
			{
				this.IEventsOnBackpackDrop();
			}

			// Token: 0x06009770 RID: 38768 RVA: 0x00306218 File Offset: 0x00304418
			protected virtual void IEventsOnBackpackDrop()
			{
			}

			// Token: 0x06009771 RID: 38769 RVA: 0x0030621C File Offset: 0x0030441C
			void \uE36E.OnCurrentAnimStateEnded()
			{
			}

			// Token: 0x06009772 RID: 38770 RVA: 0x00306220 File Offset: 0x00304420
			void \uE36E.OnSetActiveObject(int objectID)
			{
			}

			// Token: 0x06009773 RID: 38771 RVA: 0x00306224 File Offset: 0x00304424
			void \uE36E.OnDeactivateObject(int objectID)
			{
			}

			// Token: 0x06009774 RID: 38772 RVA: 0x00306228 File Offset: 0x00304428
			public void OnBipodToggle(IAnimatorEventParameter param)
			{
				this.IEventsOnBipodToggle();
			}

			// Token: 0x06009775 RID: 38773 RVA: 0x00306230 File Offset: 0x00304430
			protected virtual void IEventsOnBipodToggle()
			{
			}

			// Token: 0x06009776 RID: 38774 RVA: 0x00306234 File Offset: 0x00304434
			public void ReloadTest()
			{
			}

			// Token: 0x06009777 RID: 38775 RVA: 0x00306238 File Offset: 0x00304438
			public void BipodOpen()
			{
			}

			// Token: 0x06009778 RID: 38776 RVA: 0x0030623C File Offset: 0x0030443C
			public void BipodClose()
			{
			}

			// Token: 0x06009779 RID: 38777 RVA: 0x00306240 File Offset: 0x00304440
			protected virtual void OnZombieFireBullet(IAnimatorEventParameter animatorEventParameter)
			{
			}

			// Token: 0x0600977A RID: 38778 RVA: 0x00306244 File Offset: 0x00304444
			protected virtual void OnZombieFireEnd(IAnimatorEventParameter animatorEventParameter)
			{
			}

			// Token: 0x0600977B RID: 38779 RVA: 0x00306248 File Offset: 0x00304448
			void \uE36E.AimReady()
			{
				this.OnAimReady();
			}

			// Token: 0x0600977C RID: 38780 RVA: 0x00306250 File Offset: 0x00304450
			void \uE36E.IdleReady()
			{
				this.OnIdleReady();
			}

			// Token: 0x0600977D RID: 38781 RVA: 0x00306258 File Offset: 0x00304458
			void \uE36E.DropWeapon()
			{
				this.OnDropWeapon();
			}

			// Token: 0x0600977E RID: 38782 RVA: 0x00306260 File Offset: 0x00304460
			public virtual void OnAimReady()
			{
			}

			// Token: 0x0600977F RID: 38783 RVA: 0x00306264 File Offset: 0x00304464
			public virtual void OnIdleReady()
			{
			}

			// Token: 0x06009780 RID: 38784 RVA: 0x00306268 File Offset: 0x00304468
			public virtual void OnDropWeapon()
			{
			}

			// Token: 0x0400881B RID: 34843
			protected readonly \uE3F4 CompositeDisposable = new \uE3F4();
		}

		// Token: 0x0200173C RID: 5948
		public abstract class \uE00C
		{
			// Token: 0x1700150A RID: 5386
			// (get) Token: 0x06009782 RID: 38786 RVA: 0x0030628C File Offset: 0x0030448C
			// (set) Token: 0x06009783 RID: 38787 RVA: 0x00306294 File Offset: 0x00304494
			public virtual Player.EOperationState State { get; protected set; }

			// Token: 0x06009784 RID: 38788 RVA: 0x003062A0 File Offset: 0x003044A0
			protected \uE00C(Player.AbstractHandsController handsController)
			{
				this.\uE086 = new Player.\uE00C.HandsControllerOperationLogger(LoggerMode.Add, this);
				this.UpdateLoggerController(handsController);
			}

			// Token: 0x06009785 RID: 38789 RVA: 0x003062BC File Offset: 0x003044BC
			public void UpdateLoggerController(Player.AbstractHandsController handsController)
			{
				this.\uE086.SetHandsController(handsController);
			}

			// Token: 0x06009786 RID: 38790 RVA: 0x003062CC File Offset: 0x003044CC
			protected void Start()
			{
				this.\uE086.OperationStart();
				this.State = Player.EOperationState.Executing;
				this.SetLeftStanceAnimOnStartOperation();
			}

			// Token: 0x06009787 RID: 38791 RVA: 0x003062EC File Offset: 0x003044EC
			public virtual void Reset()
			{
				this.State = Player.EOperationState.Ready;
			}

			// Token: 0x06009788 RID: 38792 RVA: 0x003062F8 File Offset: 0x003044F8
			public virtual void Update(float deltaTime)
			{
			}

			// Token: 0x06009789 RID: 38793 RVA: 0x003062FC File Offset: 0x003044FC
			protected void \uE000()
			{
				this.\uE086.TraceProhibitedCall();
			}

			// Token: 0x0600978A RID: 38794 RVA: 0x0030630C File Offset: 0x0030450C
			[Conditional("UNITY_EDITOR")]
			protected void \uE001()
			{
			}

			// Token: 0x0600978B RID: 38795 RVA: 0x00306310 File Offset: 0x00304510
			public virtual void OnEnd()
			{
			}

			// Token: 0x0600978C RID: 38796 RVA: 0x00306314 File Offset: 0x00304514
			protected virtual void SetLeftStanceAnimOnStartOperation()
			{
			}

			// Token: 0x0400881D RID: 34845
			private readonly Player.\uE00C.HandsControllerOperationLogger \uE086;

			// Token: 0x0400881E RID: 34846
			[CompilerGenerated]
			private Player.EOperationState \uE087;

			// Token: 0x0200173D RID: 5949
			protected class HandsControllerOperationLogger : \uE360
			{
				// Token: 0x0600978D RID: 38797 RVA: 0x00306318 File Offset: 0x00304518
				public HandsControllerOperationLogger(LoggerMode loggerMode, Player.\uE00C objectInHandsOperation) : base(\uF1F8.\uE000(144799), loggerMode, false)
				{
					this.\uE01C = objectInHandsOperation;
				}

				// Token: 0x0600978E RID: 38798 RVA: 0x00306334 File Offset: 0x00304534
				public void SetHandsController(Player.AbstractHandsController controller)
				{
					this.\uE01B = controller;
				}

				// Token: 0x0600978F RID: 38799 RVA: 0x00306340 File Offset: 0x00304540
				public void TraceProhibitedCall()
				{
					if (base.IsEnabled(NLog.LogLevel.Trace))
					{
						StackFrame stackFrame = new StackFrame(2);
						base.Log(\uF1F8.\uE000(144206), \uF1F8.\uE000(144155), NLog.LogLevel.Debug, new object[]
						{
							Time.frameCount,
							this.\uE01C.GetType().Name,
							stackFrame.GetMethod().Name,
							this.\uE01B.LoggerDistinctId
						});
					}
				}

				// Token: 0x06009790 RID: 38800 RVA: 0x003063C4 File Offset: 0x003045C4
				[Conditional("UNITY_EDITOR")]
				public void TraceMethodCall()
				{
					if (base.IsEnabled(NLog.LogLevel.Trace))
					{
						StackFrame stackFrame = new StackFrame(2);
						base.LogTrace(\uF1F8.\uE000(144345), new object[]
						{
							this.\uE01C.GetType().Name,
							stackFrame.GetMethod().Name
						});
					}
				}

				// Token: 0x06009791 RID: 38801 RVA: 0x0030641C File Offset: 0x0030461C
				public void OperationStart()
				{
					if (base.IsEnabled(NLog.LogLevel.Trace))
					{
						base.Log(\uF1F8.\uE000(144315), \uF1F8.\uE000(144274), NLog.LogLevel.Trace, new object[]
						{
							Time.frameCount,
							this.\uE01C.GetType().Name,
							this.\uE01B.LoggerDistinctId
						});
					}
				}

				// Token: 0x0400881F RID: 34847
				private Player.AbstractHandsController \uE01B;

				// Token: 0x04008820 RID: 34848
				private readonly Player.\uE00C \uE01C;
			}
		}

		// Token: 0x0200173E RID: 5950
		internal class UsableItemController : Player.ItemHandsController, \uE82D, \uE82A, \uE827, \uE828
		{
			// Token: 0x1700150B RID: 5387
			// (get) Token: 0x06009792 RID: 38802 RVA: 0x0030648C File Offset: 0x0030468C
			protected new Player.\uE00D \uE000
			{
				get
				{
					return base.CurrentHandsOperation as Player.\uE00D;
				}
			}

			// Token: 0x1700150C RID: 5388
			// (get) Token: 0x06009793 RID: 38803 RVA: 0x0030649C File Offset: 0x0030469C
			public override FirearmsAnimator FirearmsAnimator
			{
				get
				{
					return this.\uE001;
				}
			}

			// Token: 0x1700150D RID: 5389
			// (get) Token: 0x06009794 RID: 38804 RVA: 0x003064A4 File Offset: 0x003046A4
			public override string LoggerDistinctId
			{
				get
				{
					return string.Format(\uF1F8.\uE000(139683), this._player.ProfileId, this._player.Profile.Info.Nickname, this);
				}
			}

			// Token: 0x1700150E RID: 5390
			// (get) Token: 0x06009795 RID: 38805 RVA: 0x003064D8 File Offset: 0x003046D8
			// (set) Token: 0x06009796 RID: 38806 RVA: 0x003064E0 File Offset: 0x003046E0
			public override bool IsAiming
			{
				get
				{
					return this.\uE052;
				}
				protected set
				{
					if (!value)
					{
						this._player.Physical.HoldBreath(false);
					}
					if (this.\uE052 == value)
					{
						return;
					}
					this.\uE052 = value;
					this._player.Skills.FastAimTimer.Target = (value ? 0f : 2f);
					this._player.MovementContext.SetAimingSlowdown(this.IsAiming, 0.33f);
					this._player.Physical.Aim((float)(this.\uE052 ? 1 : 0));
					this.AimingChanged(value);
					this._player.ProceduralWeaponAnimation.IsAiming = this.\uE052;
				}
			}

			// Token: 0x06009797 RID: 38807 RVA: 0x003065AC File Offset: 0x003047AC
			internal new static \uE084 \uE000<\uE084>(Player player, Item item) where \uE084 : Player.UsableItemController
			{
				\uE084 uE = Player.ItemHandsController.\uE000<\uE084>(player, item);
				Player.UsableItemController.\uE002<\uE084>(uE, player);
				return uE;
			}

			// Token: 0x06009798 RID: 38808 RVA: 0x003065BC File Offset: 0x003047BC
			internal new static Task<\uE084> \uE001<\uE084>(Player player, Item item) where \uE084 : Player.UsableItemController
			{
				Player.UsableItemController.\uE007<\uE084> uE;
				uE.<>t__builder = AsyncTaskMethodBuilder<\uE084>.Create();
				uE.player = player;
				uE.item = item;
				uE.<>1__state = -1;
				uE.<>t__builder.Start<Player.UsableItemController.\uE007<\uE084>>(ref uE);
				return uE.<>t__builder.Task;
			}

			// Token: 0x06009799 RID: 38809 RVA: 0x00306614 File Offset: 0x00304814
			private static void \uE002<\uE084>(\uE084 controller, Player player) where \uE084 : Player.UsableItemController
			{
				WeaponPrefab weaponPrefab = Player.UsableItemController.\uE003<\uE084>(controller);
				controller.\uE021(player, weaponPrefab);
			}

			// Token: 0x0600979A RID: 38810 RVA: 0x00306638 File Offset: 0x00304838
			private static WeaponPrefab \uE003<\uE084>(\uE084 controller) where \uE084 : Player.UsableItemController
			{
				return controller._controllerObject.GetComponentInChildren<WeaponPrefab>();
			}

			// Token: 0x0600979B RID: 38811 RVA: 0x0030664C File Offset: 0x0030484C
			protected virtual void \uE021(Player player, WeaponPrefab weaponPrefab)
			{
				this.\uE01D = new Func<RaycastHit, bool>(this.\uE00B);
				this.\uE043 = weaponPrefab.ObjectInHands;
				this.\uE001 = weaponPrefab.FirearmsAnimator;
				this.\uE001.AddEventsConsumer(this);
				this.CompositeDisposable.AddDisposable(new Action(this.\uE00D));
				this._player.HandsAnimator = this.\uE001;
				player.ProceduralWeaponAnimation.ClearPreviousWeapon();
				player.ProceduralWeaponAnimation.InitTransforms(this.HandsHierarchy, null);
				player.ProceduralWeaponAnimation.\uE009(weaponPrefab);
				player.ProceduralWeaponAnimation.FindAimTransformsWithoutSights();
				player.ProceduralWeaponAnimation.ResetScopeRotation();
			}

			// Token: 0x0600979C RID: 38812 RVA: 0x00306710 File Offset: 0x00304910
			protected override void IEventsConsumerOnWeapIn()
			{
				this.\uE005();
			}

			// Token: 0x0600979D RID: 38813 RVA: 0x00306718 File Offset: 0x00304918
			protected override void IEventsConsumerOnWeapOut()
			{
				this.\uE004();
			}

			// Token: 0x0600979E RID: 38814 RVA: 0x00306720 File Offset: 0x00304920
			protected override void IEventsConsumerOnThirdAction(int intParam)
			{
				base.TranslateAnimatorParameter(intParam);
			}

			// Token: 0x0600979F RID: 38815 RVA: 0x0030672C File Offset: 0x0030492C
			protected override void IEventsOnBackpackDrop()
			{
				this.\uE006();
			}

			// Token: 0x060097A0 RID: 38816 RVA: 0x00306734 File Offset: 0x00304934
			protected override void IEventsConsumerOnIdleStart()
			{
				this.\uE000.OnIdleStart();
			}

			// Token: 0x060097A1 RID: 38817 RVA: 0x00306744 File Offset: 0x00304944
			public override void ManualLateUpdate(float deltaTime)
			{
				if (\uE2F9.Config.UseSpiritPlayer && this._player.Spirit.IsActive)
				{
					return;
				}
				if (this.\uE018)
				{
					this.\uE00C();
					this.\uE018 = false;
				}
			}

			// Token: 0x060097A2 RID: 38818 RVA: 0x00306780 File Offset: 0x00304980
			public override void ManualUpdate(float deltaTime)
			{
				base.ManualUpdate(deltaTime);
				this.\uE018 = true;
			}

			// Token: 0x060097A3 RID: 38819 RVA: 0x00306790 File Offset: 0x00304990
			protected override void IEventsConsumerOnOnUseProp(bool boolParam)
			{
				base.SetPropVisibility(boolParam);
			}

			// Token: 0x060097A4 RID: 38820 RVA: 0x0030679C File Offset: 0x0030499C
			public override bool SupportPickup()
			{
				return true;
			}

			// Token: 0x060097A5 RID: 38821 RVA: 0x003067A0 File Offset: 0x003049A0
			public override bool IsInventoryOpen()
			{
				return this.\uE002;
			}

			// Token: 0x060097A6 RID: 38822 RVA: 0x003067A8 File Offset: 0x003049A8
			public override void SetInventoryOpened(bool opened)
			{
				if (opened)
				{
					this.SetCompassState(false);
				}
				this.\uE000.SetInventoryOpened(opened);
				MovementState currentManagedState = this._player.CurrentManagedState;
				if (currentManagedState == null)
				{
					return;
				}
				currentManagedState.OnInventory(opened);
			}

			// Token: 0x060097A7 RID: 38823 RVA: 0x003067DC File Offset: 0x003049DC
			public override void Pickup(bool p)
			{
				if (this.CanInteract())
				{
					this.\uE001.SetPickup(p);
				}
			}

			// Token: 0x060097A8 RID: 38824 RVA: 0x003067F4 File Offset: 0x003049F4
			public override void Interact(bool isInteracting, int actionIndex)
			{
				if (this.CanInteract())
				{
					this._player.SendHandsInteractionStateChanged(isInteracting, actionIndex);
					this.\uE001.SetInteract(isInteracting, actionIndex);
				}
			}

			// Token: 0x060097A9 RID: 38825 RVA: 0x00306820 File Offset: 0x00304A20
			public override void Loot(bool p)
			{
				if (this.CanInteract())
				{
					this.\uE001.SetLooting(p);
				}
			}

			// Token: 0x060097AA RID: 38826 RVA: 0x00306838 File Offset: 0x00304A38
			public override bool CanRemove()
			{
				return true;
			}

			// Token: 0x060097AB RID: 38827 RVA: 0x0030683C File Offset: 0x00304A3C
			public override bool CanInteract()
			{
				return this.\uE001.IsIdling() && this.\uE001.Animator.GetBool(\uE370.BOOL_ACTIVE);
			}

			// Token: 0x060097AC RID: 38828 RVA: 0x00306864 File Offset: 0x00304A64
			public override void ShowGesture(EInteraction gesture)
			{
				this.SetAim(false);
				if (gesture != EInteraction.None)
				{
					this.\uE001.Gesture(gesture);
				}
			}

			// Token: 0x060097AD RID: 38829 RVA: 0x00306884 File Offset: 0x00304A84
			public virtual bool ExamineWeapon()
			{
				if (!(this.\uE000 is Player.UsableItemController.\uE003) || this._player.InventoryController.HasAnyHandsAction())
				{
					return false;
				}
				this.\uE000.ExamineWeapon();
				return true;
			}

			// Token: 0x060097AE RID: 38830 RVA: 0x003068BC File Offset: 0x00304ABC
			public override bool IsInInteraction()
			{
				return this.\uE001.IsInInteraction;
			}

			// Token: 0x060097AF RID: 38831 RVA: 0x003068CC File Offset: 0x00304ACC
			public virtual void ToggleAim()
			{
				this.SetCompassState(false);
				this.SetAim(!this.IsAiming);
			}

			// Token: 0x060097B0 RID: 38832 RVA: 0x003068E4 File Offset: 0x00304AE4
			public virtual void SetAim(bool value)
			{
				bool isAiming = this.IsAiming;
				this.\uE000.SetAiming(value);
				this._player.\uE004 &= !value;
				if (isAiming == this.IsAiming)
				{
					return;
				}
				float num = 1f - this._player.Skills.DrawSound;
				num = Mathf.Clamp(num, 0.1f, 0.2f);
				this._player.\uE03A(num, false);
			}

			// Token: 0x060097B1 RID: 38833 RVA: 0x00306964 File Offset: 0x00304B64
			public virtual void Hide()
			{
			}

			// Token: 0x060097B2 RID: 38834 RVA: 0x00306968 File Offset: 0x00304B68
			public override bool IsInInteractionStrictCheck()
			{
				if (!this.IsInInteraction())
				{
					if (this.\uE001.GetLayerWeight(this.\uE001.LACTIONS_LAYER_INDEX) < 1E-45f)
					{
						return this.\uE001.Animator.IsInTransition(this.\uE001.LACTIONS_LAYER_INDEX);
					}
				}
				return true;
			}

			// Token: 0x060097B3 RID: 38835 RVA: 0x003069C0 File Offset: 0x00304BC0
			public override void Spawn(float animationSpeed, Action callback)
			{
				this.\uE001.SetAnimationSpeed(animationSpeed);
				this.\uE022(callback);
				this.\uE001.SkipTime(Time.fixedDeltaTime);
				this._player.MovementContext.OnStateChanged += this.\uE023;
				this._player.Physical.OnSprintStateChangedEvent += this.\uE007;
			}

			// Token: 0x060097B4 RID: 38836 RVA: 0x00306A30 File Offset: 0x00304C30
			public override void Drop(float animationSpeed, Action callback, bool fastDrop, Item nextControllerItem = null)
			{
				Player.UsableItemController.\uE006 uE = new Player.UsableItemController.\uE006();
				uE.<>4__this = this;
				uE.callback = callback;
				if (base.Destroyed)
				{
					this.\uE000.HideWeapon(uE.callback, fastDrop);
					return;
				}
				base.Destroyed = true;
				uE.inventoryOperation = this._player.\uE085(base.Item);
				Action onHidden = new Action(uE.\uE000);
				this.\uE000.HideWeapon(onHidden, fastDrop);
			}

			// Token: 0x060097B5 RID: 38837 RVA: 0x00306AB0 File Offset: 0x00304CB0
			public override void Destroy()
			{
				this._player.ProceduralWeaponAnimation.ClearPreviousWeapon();
				base.Destroy();
				this.\uE001 = null;
				this._player.MovementContext.OnStateChanged -= this.\uE023;
				this._player.Physical.OnSprintStateChangedEvent -= this.\uE007;
				AssetPoolObject.ReturnToPool(this._controllerObject.gameObject, true);
			}

			// Token: 0x060097B6 RID: 38838 RVA: 0x00306B2C File Offset: 0x00304D2C
			protected virtual void \uE022(Action callback)
			{
				base.InitiateOperation<Player.UsableItemController.\uE005>().Start(callback);
			}

			// Token: 0x060097B7 RID: 38839 RVA: 0x00306B3C File Offset: 0x00304D3C
			private void \uE004()
			{
				this.\uE000.HideWeaponComplete();
			}

			// Token: 0x060097B8 RID: 38840 RVA: 0x00306B4C File Offset: 0x00304D4C
			private void \uE005()
			{
				this.\uE000.WeaponAppeared();
			}

			// Token: 0x060097B9 RID: 38841 RVA: 0x00306B5C File Offset: 0x00304D5C
			private void \uE006()
			{
				this.\uE000.OnBackpackDrop();
			}

			// Token: 0x060097BA RID: 38842 RVA: 0x00306B6C File Offset: 0x00304D6C
			private void \uE007(bool obj)
			{
				if (this.IsAiming && obj)
				{
					this.\uE008();
				}
			}

			// Token: 0x060097BB RID: 38843 RVA: 0x00306B80 File Offset: 0x00304D80
			protected virtual void \uE023(EPlayerState previousstate, EPlayerState nextstate)
			{
				if (!EFTHardSettings.Instance.CanAimInState(nextstate))
				{
					this.\uE008();
				}
			}

			// Token: 0x060097BC RID: 38844 RVA: 0x00306B98 File Offset: 0x00304D98
			private void \uE008()
			{
				this.\uE000.OnAimingDisabled();
			}

			// Token: 0x060097BD RID: 38845 RVA: 0x00306BA8 File Offset: 0x00304DA8
			public override bool CanExecute(\uEF5F operation)
			{
				return true;
			}

			// Token: 0x060097BE RID: 38846 RVA: 0x00306BAC File Offset: 0x00304DAC
			public override void Execute(\uEF5F operation, Callback callback)
			{
				this.\uE000.Execute(operation, callback);
			}

			// Token: 0x060097BF RID: 38847 RVA: 0x00306BBC File Offset: 0x00304DBC
			public override void FastForwardCurrentState()
			{
				this.\uE000.FastForward();
			}

			// Token: 0x060097C0 RID: 38848 RVA: 0x00306BCC File Offset: 0x00304DCC
			protected void \uE009()
			{
				this.\uE013 = 0f;
				this.\uE051 = 0f;
				if (this._player.MovementContext.StationaryWeapon != null && this._player.MovementContext.StationaryWeapon.Item == base.Item)
				{
					return;
				}
				if (base.WeaponRoot == null)
				{
					Debug.LogError(\uF1F8.\uE000(139389));
					return;
				}
				this.\uE051 = 0.5f;
				this.\uE01A = LayerMask.NameToLayer(\uF1F8.\uE000(27509));
			}

			// Token: 0x060097C1 RID: 38849 RVA: 0x00306C74 File Offset: 0x00304E74
			private float \uE00A(Vector3 origin, float ln, ref bool overlapsWithPlayer)
			{
				Vector3 end = origin - base.WeaponRoot.up * ln;
				RaycastHit raycastHit;
				if (\uE36B.Linecast(origin, end, out raycastHit, EFTHardSettings.Instance.WEAPON_OCCLUSION_LAYERS, false, Player.UsableItemController.\uE00A, this.\uE01D))
				{
					overlapsWithPlayer = (raycastHit.collider.gameObject.layer == this.\uE01A);
					return ln - raycastHit.distance;
				}
				Vector3 lhs = origin - this._player.Position;
				Vector3 up = Vector3.up;
				float d = Vector3.Dot(lhs, up);
				if (\uE36B.Linecast(this._player.Position + d * up, origin, out raycastHit, EFTHardSettings.Instance.WEAPON_OCCLUSION_LAYERS, false, Player.UsableItemController.\uE00A, this.\uE01D))
				{
					overlapsWithPlayer = (raycastHit.collider.gameObject.layer == this.\uE01A);
					return ln;
				}
				return 0f;
			}

			// Token: 0x060097C2 RID: 38850 RVA: 0x00306D78 File Offset: 0x00304F78
			protected bool \uE00B(RaycastHit overlapHit)
			{
				GameObject gameObject = overlapHit.collider.gameObject;
				return gameObject.layer == this.\uE01A && gameObject == this._player.gameObject;
			}

			// Token: 0x060097C3 RID: 38851 RVA: 0x00306DBC File Offset: 0x00304FBC
			private void \uE00C()
			{
				if (!this._player.IsVisible || this.\uE051 <= 0f)
				{
					return;
				}
				if (this.\uE000 is Player.UsableItemController.\uE004)
				{
					return;
				}
				Vector3 vector = this._player.ProceduralWeaponAnimation.HandsContainer.HandsPosition.Get();
				float num = 1f;
				if (this._player.ProceduralWeaponAnimation.BlindfireBlender.Value != 0f)
				{
					Vector3 vector2 = (this._player.ProceduralWeaponAnimation.BlindFireEndPosition + this._player.ProceduralWeaponAnimation.PositionZeroSum) * 1.9f;
					vector2 = this._player.ProceduralWeaponAnimation.HandsContainer.WeaponRootAnim.parent.TransformPoint(vector2);
					num = this.\uE00A(vector2, this.\uE051, ref this._player.ProceduralWeaponAnimation.TurnAway.OverlapsWithPlayer);
				}
				if (num < 0.02f)
				{
					this._player.ProceduralWeaponAnimation.TurnAway.OverlapDepth = num;
					this._player.ProceduralWeaponAnimation.OverlappingAllowsBlindfire = true;
				}
				else
				{
					this._player.ProceduralWeaponAnimation.OverlappingAllowsBlindfire = false;
					this._player.ProceduralWeaponAnimation.TurnAway.OriginZShift = vector.y;
					vector = this._player.ProceduralWeaponAnimation.HandsContainer.WeaponRootAnim.parent.TransformPoint(vector);
					num = this.\uE00A(vector, this.\uE051, ref this._player.ProceduralWeaponAnimation.TurnAway.OverlapsWithPlayer);
					this._player.ProceduralWeaponAnimation.TurnAway.OverlapDepth = num;
				}
				this.\uE013 = num;
				if (num > EFTHardSettings.Instance.STOP_AIMING_AT && this.IsAiming)
				{
					this.ToggleAim();
					this.\uE050 = true;
					return;
				}
				if (num < EFTHardSettings.Instance.STOP_AIMING_AT && this._player.ProceduralWeaponAnimation.TurnAway.OverlapValue < 0.2f)
				{
					if (this.\uE050)
					{
						if (!this.IsAiming)
						{
							this.ToggleAim();
							this.\uE050 = false;
						}
					}
				}
			}

			// Token: 0x060097C4 RID: 38852 RVA: 0x00306FF8 File Offset: 0x003051F8
			protected override Dictionary<Type, Player.ItemHandsController.OperationFactoryDelegate> GetOperationFactoryDelegates()
			{
				return new Dictionary<Type, Player.ItemHandsController.OperationFactoryDelegate>
				{
					{
						typeof(Player.UsableItemController.\uE005),
						new Player.ItemHandsController.OperationFactoryDelegate(this.\uE00E)
					},
					{
						typeof(Player.UsableItemController.\uE003),
						new Player.ItemHandsController.OperationFactoryDelegate(this.\uE00F)
					},
					{
						typeof(Player.UsableItemController.\uE004),
						new Player.ItemHandsController.OperationFactoryDelegate(this.\uE010)
					},
					{
						typeof(Player.UsableItemController.\uE001),
						new Player.ItemHandsController.OperationFactoryDelegate(this.\uE011)
					}
				};
			}

			// Token: 0x060097C7 RID: 38855 RVA: 0x00307094 File Offset: 0x00305294
			[CompilerGenerated]
			private void \uE00D()
			{
				this.\uE001.RemoveEventsConsumer(this);
			}

			// Token: 0x060097C8 RID: 38856 RVA: 0x003070A4 File Offset: 0x003052A4
			[CompilerGenerated]
			private Player.\uE00C \uE00E()
			{
				return new Player.UsableItemController.\uE005(this);
			}

			// Token: 0x060097C9 RID: 38857 RVA: 0x003070AC File Offset: 0x003052AC
			[CompilerGenerated]
			private Player.\uE00C \uE00F()
			{
				return new Player.UsableItemController.\uE003(this);
			}

			// Token: 0x060097CA RID: 38858 RVA: 0x003070B4 File Offset: 0x003052B4
			[CompilerGenerated]
			private Player.\uE00C \uE010()
			{
				return new Player.UsableItemController.\uE004(this);
			}

			// Token: 0x060097CB RID: 38859 RVA: 0x003070BC File Offset: 0x003052BC
			[CompilerGenerated]
			private Player.\uE00C \uE011()
			{
				return new Player.UsableItemController.\uE001(this);
			}

			// Token: 0x04008821 RID: 34849
			private const float \uE04F = 0.5f;

			// Token: 0x04008822 RID: 34850
			private static readonly RaycastHit[] \uE00A = new RaycastHit[8];

			// Token: 0x04008823 RID: 34851
			private int \uE01A;

			// Token: 0x04008824 RID: 34852
			private new bool \uE002;

			// Token: 0x04008825 RID: 34853
			private bool \uE018;

			// Token: 0x04008826 RID: 34854
			protected float \uE013;

			// Token: 0x04008827 RID: 34855
			protected \uE868 \uE043;

			// Token: 0x04008828 RID: 34856
			protected new FirearmsAnimator \uE001;

			// Token: 0x04008829 RID: 34857
			protected Func<RaycastHit, bool> \uE01D;

			// Token: 0x0400882A RID: 34858
			protected bool \uE050;

			// Token: 0x0400882B RID: 34859
			protected float \uE051;

			// Token: 0x0400882C RID: 34860
			protected bool \uE052;

			// Token: 0x0200173F RID: 5951
			internal new abstract class \uE000 : Player.\uE00C, Player.\uE00D
			{
				// Token: 0x060097CC RID: 38860 RVA: 0x003070C4 File Offset: 0x003052C4
				protected \uE000(Player.UsableItemController controller) : base(controller)
				{
					this.\uE002 = controller;
					this.\uE001 = this.\uE002._player;
				}

				// Token: 0x060097CD RID: 38861 RVA: 0x003070EC File Offset: 0x003052EC
				public virtual bool CanRemove()
				{
					return false;
				}

				// Token: 0x060097CE RID: 38862 RVA: 0x003070F0 File Offset: 0x003052F0
				public virtual void HideWeaponComplete()
				{
					base.\uE000();
				}

				// Token: 0x060097CF RID: 38863 RVA: 0x003070F8 File Offset: 0x003052F8
				public virtual void WeaponAppeared()
				{
					base.\uE000();
				}

				// Token: 0x060097D0 RID: 38864 RVA: 0x00307100 File Offset: 0x00305300
				public virtual void ExamineWeapon()
				{
					base.\uE000();
				}

				// Token: 0x060097D1 RID: 38865 RVA: 0x00307108 File Offset: 0x00305308
				public virtual void OnBackpackDrop()
				{
					base.\uE000();
				}

				// Token: 0x060097D2 RID: 38866 RVA: 0x00307110 File Offset: 0x00305310
				public virtual void SetInventoryOpened(bool opened)
				{
					base.\uE000();
				}

				// Token: 0x060097D3 RID: 38867 RVA: 0x00307118 File Offset: 0x00305318
				public virtual void Execute(\uEF5F operation, Callback callback)
				{
					base.\uE000();
					\uEF6A uEF6A = operation as \uEF6A;
					if (uEF6A == null)
					{
						callback.Succeed();
						return;
					}
					if (this.\uE002._player.InventoryController.IsAnimatedSlot(uEF6A.From1))
					{
						callback.Fail(string.Format(\uF1F8.\uE000(139695), base.GetType()));
						return;
					}
					callback.Succeed();
				}

				// Token: 0x060097D4 RID: 38868 RVA: 0x0030718C File Offset: 0x0030538C
				public virtual void HideWeapon(Action onHidden, bool fastDrop)
				{
					base.\uE000();
				}

				// Token: 0x060097D5 RID: 38869 RVA: 0x00307194 File Offset: 0x00305394
				public virtual void SetAiming(bool isAiming)
				{
					base.\uE000();
				}

				// Token: 0x060097D6 RID: 38870 RVA: 0x0030719C File Offset: 0x0030539C
				public virtual void FastForward()
				{
					base.\uE000();
				}

				// Token: 0x060097D7 RID: 38871 RVA: 0x003071A4 File Offset: 0x003053A4
				public virtual void OnAimingDisabled()
				{
					base.\uE000();
				}

				// Token: 0x060097D8 RID: 38872 RVA: 0x003071AC File Offset: 0x003053AC
				public virtual void SetCompassState(bool active)
				{
					base.\uE000();
				}

				// Token: 0x060097D9 RID: 38873 RVA: 0x003071B4 File Offset: 0x003053B4
				public virtual void OnIdleStart()
				{
				}

				// Token: 0x0400882D RID: 34861
				protected readonly Player.UsableItemController \uE002;

				// Token: 0x0400882E RID: 34862
				protected new readonly Player \uE001;
			}

			// Token: 0x02001740 RID: 5952
			internal new class \uE001 : Player.UsableItemController.\uE000
			{
				// Token: 0x060097DA RID: 38874 RVA: 0x003071B8 File Offset: 0x003053B8
				public \uE001(Player.UsableItemController controller) : base(controller)
				{
				}

				// Token: 0x060097DB RID: 38875 RVA: 0x003071C4 File Offset: 0x003053C4
				public virtual void Start(Item item, Callback callback)
				{
					this.\uE000 = callback;
					base.Start();
					this.\uE002.SetAim(false);
					this.\uE002.FirearmsAnimator.SetInventory(false);
					this.\uE002.\uE001.Animator.SetLayerWeight(2, 1f);
					this.\uE002._player.SendHandsInteractionStateChanged(true, 300);
					this.\uE001.MovementContext.SetInteractInHands(EInteraction.DropBackpack);
				}

				// Token: 0x060097DC RID: 38876 RVA: 0x00307250 File Offset: 0x00305450
				public override void Reset()
				{
					this.\uE000 = null;
					base.Reset();
				}

				// Token: 0x060097DD RID: 38877 RVA: 0x00307260 File Offset: 0x00305460
				public override void OnBackpackDrop()
				{
					this.State = Player.EOperationState.Finished;
					this.\uE002._player.SendHandsInteractionStateChanged(false, 300);
					this.\uE001.MovementContext.SetInteractInHands(EInteraction.DropBackpack);
					\uE370.ResetTriggerHandReady(this.\uE002.FirearmsAnimator.Animator);
					this.\uE002.\uE001.SetInventory(this.\uE002.\uE002);
					this.\uE024();
					this.\uE000.Succeed();
				}

				// Token: 0x060097DE RID: 38878 RVA: 0x003072F4 File Offset: 0x003054F4
				public override void SetInventoryOpened(bool opened)
				{
					this.\uE002.\uE002 = opened;
				}

				// Token: 0x060097DF RID: 38879 RVA: 0x00307304 File Offset: 0x00305504
				public override void SetAiming(bool isAiming)
				{
					if (isAiming && !EFTHardSettings.Instance.CanAimInState(this.\uE001.CurrentState.Name))
					{
						return;
					}
					this.\uE002.FirearmsAnimator.SetFire(isAiming);
					this.\uE002.IsAiming = isAiming;
				}

				// Token: 0x060097E0 RID: 38880 RVA: 0x00307354 File Offset: 0x00305554
				protected virtual void \uE024()
				{
					this.\uE002.InitiateOperation<Player.UsableItemController.\uE003>().Start();
				}

				// Token: 0x0400882F RID: 34863
				private new Callback \uE000;
			}

			// Token: 0x02001741 RID: 5953
			public new class \uE002 : Player.UsableItemController.\uE001
			{
				// Token: 0x060097E1 RID: 38881 RVA: 0x00307368 File Offset: 0x00305568
				public \uE002(Player.UsableItemController controller) : base(controller)
				{
				}

				// Token: 0x060097E2 RID: 38882 RVA: 0x00307374 File Offset: 0x00305574
				public override void Start(Item item, Callback callback)
				{
					this.\uE007 = 0f;
					this.\uE008 = false;
					base.Start(item, callback);
				}

				// Token: 0x060097E3 RID: 38883 RVA: 0x00307398 File Offset: 0x00305598
				public override void FastForward()
				{
					if (!this.\uE008)
					{
						this.\uE008 = true;
						this.OnBackpackDrop();
					}
				}

				// Token: 0x060097E4 RID: 38884 RVA: 0x003073B8 File Offset: 0x003055B8
				public override void Update(float deltaTime)
				{
					base.Update(deltaTime);
					if (!this.\uE008 && this.\uE007 > 0.25f)
					{
						this.\uE008 = true;
						this.OnBackpackDrop();
					}
					this.\uE007 += deltaTime;
				}

				// Token: 0x04008830 RID: 34864
				protected const float \uE006 = 0.25f;

				// Token: 0x04008831 RID: 34865
				protected float \uE007;

				// Token: 0x04008832 RID: 34866
				protected bool \uE008;
			}

			// Token: 0x02001742 RID: 5954
			internal new class \uE003 : Player.UsableItemController.\uE000
			{
				// Token: 0x060097E5 RID: 38885 RVA: 0x00307408 File Offset: 0x00305608
				public \uE003(Player.UsableItemController controller) : base(controller)
				{
				}

				// Token: 0x060097E6 RID: 38886 RVA: 0x00307414 File Offset: 0x00305614
				public new void Start()
				{
					base.Start();
					this.\uE004 = 0f;
				}

				// Token: 0x060097E7 RID: 38887 RVA: 0x00307428 File Offset: 0x00305628
				public override void Reset()
				{
					this.\uE004 = 0f;
					base.Reset();
				}

				// Token: 0x060097E8 RID: 38888 RVA: 0x0030743C File Offset: 0x0030563C
				public override void HideWeapon(Action onHidden, bool fastDrop)
				{
					this.State = Player.EOperationState.Finished;
					this.\uE002.InitiateOperation<Player.UsableItemController.\uE004>().Start(onHidden, fastDrop);
					this.\uE002.Hide();
				}

				// Token: 0x060097E9 RID: 38889 RVA: 0x00307468 File Offset: 0x00305668
				public override bool CanRemove()
				{
					return true;
				}

				// Token: 0x060097EA RID: 38890 RVA: 0x0030746C File Offset: 0x0030566C
				public override void Execute(\uEF5F operation, Callback callback)
				{
					\uEF6A uEF6A = operation as \uEF6A;
					if (uEF6A == null)
					{
						callback.Succeed();
						return;
					}
					if (this.\uE001.InventoryController.IsAnimatedSlot(uEF6A.From1))
					{
						this.State = Player.EOperationState.Finished;
						this.\uE025(uEF6A, callback);
						return;
					}
					callback.Succeed();
				}

				// Token: 0x060097EB RID: 38891 RVA: 0x003074C8 File Offset: 0x003056C8
				public override void Update(float deltaTime)
				{
					this.\uE004 += deltaTime;
					if (this.\uE004 > 300f)
					{
						this.\uE002.\uE001.Idle();
						this.\uE004 = 0f;
					}
				}

				// Token: 0x060097EC RID: 38892 RVA: 0x00307508 File Offset: 0x00305708
				public override void SetAiming(bool isAiming)
				{
					if (isAiming && !EFTHardSettings.Instance.CanAimInState(this.\uE001.CurrentState.Name))
					{
						return;
					}
					if (isAiming && this.\uE002.\uE013 > EFTHardSettings.Instance.STOP_AIMING_AT)
					{
						return;
					}
					this.\uE002.FirearmsAnimator.SetFire(isAiming);
					this.\uE002.IsAiming = isAiming;
					this.\uE004 = 0f;
				}

				// Token: 0x060097ED RID: 38893 RVA: 0x00307584 File Offset: 0x00305784
				public override void ExamineWeapon()
				{
					this.\uE002.\uE001.LookTrigger();
				}

				// Token: 0x060097EE RID: 38894 RVA: 0x00307598 File Offset: 0x00305798
				public override void OnAimingDisabled()
				{
					this.SetAiming(false);
				}

				// Token: 0x060097EF RID: 38895 RVA: 0x003075A4 File Offset: 0x003057A4
				public override void SetInventoryOpened(bool opened)
				{
					this.SetAiming(false);
					this.\uE002.\uE002 = opened;
					this.\uE002.\uE001.SetInventory(opened);
				}

				// Token: 0x060097F0 RID: 38896 RVA: 0x003075D0 File Offset: 0x003057D0
				public override void OnEnd()
				{
					this.SetCompassState(false);
				}

				// Token: 0x060097F1 RID: 38897 RVA: 0x003075DC File Offset: 0x003057DC
				public override void SetCompassState(bool active)
				{
					this.\uE002.CompassState.Value = active;
				}

				// Token: 0x060097F2 RID: 38898 RVA: 0x003075F0 File Offset: 0x003057F0
				protected virtual void \uE025(\uEF6A oneItemOperation, Callback callback)
				{
					this.\uE002.InitiateOperation<Player.UsableItemController.\uE001>().Start(oneItemOperation.Item1, callback);
				}

				// Token: 0x04008833 RID: 34867
				private const float \uE003 = 300f;

				// Token: 0x04008834 RID: 34868
				private float \uE004;
			}

			// Token: 0x02001743 RID: 5955
			internal class \uE004 : Player.UsableItemController.\uE000
			{
				// Token: 0x060097F3 RID: 38899 RVA: 0x0030760C File Offset: 0x0030580C
				public \uE004(Player.UsableItemController controller) : base(controller)
				{
				}

				// Token: 0x060097F4 RID: 38900 RVA: 0x00307618 File Offset: 0x00305818
				public virtual void Start(Action onHidden, bool fastDrop)
				{
					this.\uE005 = onHidden;
					base.Start();
					this.\uE002.\uE001.SetActiveParam(false, true);
					this.\uE002.\uE001.SetFastHide(fastDrop);
					this.\uE002._player.BodyAnimatorCommon.SetFloat(PlayerAnimator.RELOAD_FLOAT_PARAM_HASH, 1f);
					this.\uE002.IsAiming = false;
				}

				// Token: 0x060097F5 RID: 38901 RVA: 0x0030768C File Offset: 0x0030588C
				public override void Reset()
				{
					this.\uE005 = null;
					base.Reset();
				}

				// Token: 0x060097F6 RID: 38902 RVA: 0x0030769C File Offset: 0x0030589C
				public override void HideWeaponComplete()
				{
					this.State = Player.EOperationState.Finished;
					Action uE = this.\uE005;
					if (uE == null)
					{
						return;
					}
					uE();
				}

				// Token: 0x060097F7 RID: 38903 RVA: 0x003076B8 File Offset: 0x003058B8
				public override void HideWeapon(Action onHidden, bool fastDrop)
				{
					this.\uE005 = (Action)Delegate.Combine(this.\uE005, onHidden);
				}

				// Token: 0x060097F8 RID: 38904 RVA: 0x003076D4 File Offset: 0x003058D4
				public override void FastForward()
				{
					if (this.State != Player.EOperationState.Finished)
					{
						this.HideWeaponComplete();
					}
				}

				// Token: 0x04008835 RID: 34869
				protected Action \uE005;
			}

			// Token: 0x02001744 RID: 5956
			internal class \uE005 : Player.UsableItemController.\uE000
			{
				// Token: 0x060097F9 RID: 38905 RVA: 0x003076E8 File Offset: 0x003058E8
				public \uE005(Player.UsableItemController controller) : base(controller)
				{
				}

				// Token: 0x060097FA RID: 38906 RVA: 0x003076F4 File Offset: 0x003058F4
				public void Start(Action callback)
				{
					this.\uE00B = callback;
					base.Start();
					this.\uE002.\uE001.SetActiveParam(true, true);
					this.\uE002.\uE001.SetMeleeSpeed(this.\uE001.Physical.MeleeSpeed);
					this.\uE001.BodyAnimatorCommon.SetFloat(PlayerAnimator.WEAPON_SIZE_MODIFIER_PARAM_HASH, 1f);
					this.\uE002._player.BodyAnimatorCommon.SetFloat(PlayerAnimator.RELOAD_FLOAT_PARAM_HASH, 1f);
				}

				// Token: 0x060097FB RID: 38907 RVA: 0x00307788 File Offset: 0x00305988
				public override void Reset()
				{
					base.Reset();
					this.\uE00B = null;
					this.\uE009 = null;
				}

				// Token: 0x060097FC RID: 38908 RVA: 0x003077A4 File Offset: 0x003059A4
				public override void WeaponAppeared()
				{
					this.\uE002.SetupProp();
					this.State = Player.EOperationState.Finished;
					this.\uE002._player.BodyAnimatorCommon.SetFloat(PlayerAnimator.RELOAD_FLOAT_PARAM_HASH, 0f);
					this.\uE026();
				}

				// Token: 0x060097FD RID: 38909 RVA: 0x003077E4 File Offset: 0x003059E4
				public override void HideWeapon(Action onHidden, bool fastDrop)
				{
					this.\uE009 = onHidden;
					this.\uE03D = fastDrop;
				}

				// Token: 0x060097FE RID: 38910 RVA: 0x003077F4 File Offset: 0x003059F4
				public override void FastForward()
				{
					if (this.State != Player.EOperationState.Finished)
					{
						this.WeaponAppeared();
					}
				}

				// Token: 0x060097FF RID: 38911 RVA: 0x00307808 File Offset: 0x00305A08
				protected virtual void \uE026()
				{
					Player.UsableItemController.\uE003 uE = this.\uE002.InitiateOperation<Player.UsableItemController.\uE003>();
					uE.Start();
					this.\uE00B();
					if (this.\uE009 != null)
					{
						uE.HideWeapon(this.\uE009, this.\uE03D);
					}
				}

				// Token: 0x06009800 RID: 38912 RVA: 0x0030785C File Offset: 0x00305A5C
				protected override void SetLeftStanceAnimOnStartOperation()
				{
					this.\uE001.MovementContext.LeftStanceController.DisableLeftStanceAnimFromHandsAction();
				}

				// Token: 0x04008836 RID: 34870
				protected Action \uE009;

				// Token: 0x04008837 RID: 34871
				protected Action \uE00B;

				// Token: 0x04008838 RID: 34872
				protected bool \uE03D;
			}

			// Token: 0x02001745 RID: 5957
			[CompilerGenerated]
			private sealed class \uE006
			{
				// Token: 0x06009802 RID: 38914 RVA: 0x0030787C File Offset: 0x00305A7C
				internal void \uE000()
				{
					this.<>4__this._player.MovementContext.OnStateChanged -= this.<>4__this.\uE023;
					this.<>4__this._player.Physical.OnSprintStateChangedEvent -= this.<>4__this.\uE007;
					this.<>4__this._player.ProceduralWeaponAnimation.enabled = true;
					this.inventoryOperation.Confirm(true);
					this.callback();
				}

				// Token: 0x04008839 RID: 34873
				public Player.UsableItemController <>4__this;

				// Token: 0x0400883A RID: 34874
				public Player.\uE014 inventoryOperation;

				// Token: 0x0400883B RID: 34875
				public Action callback;
			}
		}

		// Token: 0x02001747 RID: 5959
		internal interface \uE00D
		{
			// Token: 0x06009805 RID: 38917
			void HideWeaponComplete();

			// Token: 0x06009806 RID: 38918
			void WeaponAppeared();

			// Token: 0x06009807 RID: 38919
			void HideWeapon(Action onHidden, bool fastDrop);

			// Token: 0x06009808 RID: 38920
			void OnBackpackDrop();

			// Token: 0x06009809 RID: 38921
			void SetAiming(bool isAiming);

			// Token: 0x0600980A RID: 38922
			void Execute(\uEF5F operation, Callback callback);

			// Token: 0x0600980B RID: 38923
			void ExamineWeapon();

			// Token: 0x0600980C RID: 38924
			void FastForward();

			// Token: 0x0600980D RID: 38925
			void OnIdleStart();

			// Token: 0x0600980E RID: 38926
			void OnAimingDisabled();

			// Token: 0x0600980F RID: 38927
			void SetInventoryOpened(bool opened);
		}

		// Token: 0x02001748 RID: 5960
		[Flags]
		public enum EAnimatorMask
		{
			// Token: 0x04008842 RID: 34882
			Thirdperson = 1,
			// Token: 0x04008843 RID: 34883
			Arms = 2,
			// Token: 0x04008844 RID: 34884
			Procedural = 4,
			// Token: 0x04008845 RID: 34885
			FBBIK = 8,
			// Token: 0x04008846 RID: 34886
			IK = 16
		}

		// Token: 0x02001749 RID: 5961
		public class \uE00E : \uE360
		{
			// Token: 0x06009810 RID: 38928 RVA: 0x003079FC File Offset: 0x00305BFC
			public \uE00E(LoggerMode loggerMode) : base(\uF1F8.\uE000(143969), loggerMode, false)
			{
			}
		}

		// Token: 0x0200174A RID: 5962
		public class \uE00F<\uE084> where \uE084 : class, IItemComponent
		{
			// Token: 0x1700150F RID: 5391
			// (get) Token: 0x06009811 RID: 38929 RVA: 0x00307A10 File Offset: 0x00305C10
			[CanBeNull]
			public virtual \uE084 Component
			{
				get
				{
					return this.GetItemComponent();
				}
			}

			// Token: 0x06009812 RID: 38930 RVA: 0x00307A18 File Offset: 0x00305C18
			public \uE00F(Slot slot, Func<\uE084, Action, Action> subscriber)
			{
				this.\uE001 = slot;
				this.\uE002 = subscriber;
				this.Set(this.GetItemComponent());
			}

			// Token: 0x06009813 RID: 38931 RVA: 0x00307A4C File Offset: 0x00305C4C
			public void Update()
			{
				this.Set(this.Component);
			}

			// Token: 0x06009814 RID: 38932 RVA: 0x00307A5C File Offset: 0x00305C5C
			public void Set([CanBeNull] \uE084 value)
			{
				if (value == this.\uE000)
				{
					return;
				}
				if (this.\uE000 != null)
				{
					this.\uE003();
				}
				this.\uE000 = value;
				if (this.\uE000 != null)
				{
					this.\uE003 = this.\uE002(this.\uE000, new Action(this.\uE000));
				}
				this.\uE000();
			}

			// Token: 0x06009815 RID: 38933 RVA: 0x00307AE0 File Offset: 0x00305CE0
			public \uE084 GetItemComponent()
			{
				CompoundItem compoundItem = this.\uE001.ContainedItem as CompoundItem;
				if (compoundItem == null)
				{
					return default(\uE084);
				}
				return Enumerable.FirstOrDefault<\uE084>(compoundItem.GetItemComponentsInChildren(true));
			}

			// Token: 0x06009816 RID: 38934 RVA: 0x00307B1C File Offset: 0x00305D1C
			private void \uE000()
			{
				this.Changed.Invoke();
			}

			// Token: 0x06009817 RID: 38935 RVA: 0x00307B2C File Offset: 0x00305D2C
			public virtual void Dispose()
			{
				if (this.\uE000 != null)
				{
					this.\uE003();
				}
				this.\uE000 = default(\uE084);
			}

			// Token: 0x04008847 RID: 34887
			public readonly BindableEvent Changed = new BindableEvent();

			// Token: 0x04008848 RID: 34888
			[CanBeNull]
			protected \uE084 \uE000;

			// Token: 0x04008849 RID: 34889
			private readonly Slot \uE001;

			// Token: 0x0400884A RID: 34890
			private readonly Func<\uE084, Action, Action> \uE002;

			// Token: 0x0400884B RID: 34891
			private Action \uE003;
		}

		// Token: 0x0200174B RID: 5963
		public enum EUpdateMode
		{
			// Token: 0x0400884D RID: 34893
			Auto,
			// Token: 0x0400884E RID: 34894
			Manual,
			// Token: 0x0400884F RID: 34895
			None
		}

		// Token: 0x0200174C RID: 5964
		// (Invoke) Token: 0x06009819 RID: 38937
		public delegate float \uE010();

		// Token: 0x0200174D RID: 5965
		public enum EVoipState : byte
		{
			// Token: 0x04008851 RID: 34897
			NotAvailable,
			// Token: 0x04008852 RID: 34898
			Available,
			// Token: 0x04008853 RID: 34899
			Off,
			// Token: 0x04008854 RID: 34900
			Banned,
			// Token: 0x04008855 RID: 34901
			MicrophoneFail
		}

		// Token: 0x0200174E RID: 5966
		public enum EProcessStatus
		{
			// Token: 0x04008857 RID: 34903
			None,
			// Token: 0x04008858 RID: 34904
			Scheduled,
			// Token: 0x04008859 RID: 34905
			Internal
		}

		// Token: 0x0200174F RID: 5967
		public sealed class \uE011 : \uEF06, \uE7F6
		{
			// Token: 0x0600981C RID: 38940 RVA: 0x00307B58 File Offset: 0x00305D58
			public \uE011(\uEF16 discardResult, \uEEC9 grenade)
			{
				this.\uE000 = discardResult;
				this.\uE001 = grenade;
			}

			// Token: 0x0600981D RID: 38941 RVA: 0x00307B74 File Offset: 0x00305D74
			public void RollBack()
			{
				this.\uE000.RollBack();
			}

			// Token: 0x0600981E RID: 38942 RVA: 0x00307B84 File Offset: 0x00305D84
			public void RaiseEvents(IItemOwner controller, CommandStatus status)
			{
				this.\uE000.RaiseEvents(controller, status);
			}

			// Token: 0x0600981F RID: 38943 RVA: 0x00307B94 File Offset: 0x00305D94
			public bool CanExecute(\uEEFC itemController)
			{
				return this.\uE001.CheckAction(this.\uE001.CurrentAddress).Succeeded;
			}

			// Token: 0x0400885A RID: 34906
			private readonly \uEF16 \uE000;

			// Token: 0x0400885B RID: 34907
			private readonly \uEEC9 \uE001;
		}

		// Token: 0x02001750 RID: 5968
		internal abstract class \uE012 : IDisposable
		{
			// Token: 0x17001510 RID: 5392
			// (get) Token: 0x06009820 RID: 38944 RVA: 0x00307BC0 File Offset: 0x00305DC0
			// (set) Token: 0x06009821 RID: 38945 RVA: 0x00307BC8 File Offset: 0x00305DC8
			private protected Player \uE004 { protected get; private set; }

			// Token: 0x17001511 RID: 5393
			// (get) Token: 0x06009822 RID: 38946 RVA: 0x00307BD4 File Offset: 0x00305DD4
			// (set) Token: 0x06009823 RID: 38947 RVA: 0x00307BDC File Offset: 0x00305DDC
			private protected Player.\uE012.EInternalState \uE005 { protected get; private set; }

			// Token: 0x17001512 RID: 5394
			// (get) Token: 0x06009824 RID: 38948 RVA: 0x00307BE8 File Offset: 0x00305DE8
			// (set) Token: 0x06009825 RID: 38949 RVA: 0x00307BF0 File Offset: 0x00305DF0
			protected CommandStatus \uE006 { get; set; }

			// Token: 0x17001513 RID: 5395
			// (get) Token: 0x06009826 RID: 38950 RVA: 0x00307BFC File Offset: 0x00305DFC
			// (set) Token: 0x06009827 RID: 38951 RVA: 0x00307C04 File Offset: 0x00305E04
			internal Item \uE007 { get; private set; }

			// Token: 0x06009828 RID: 38952 RVA: 0x00307C10 File Offset: 0x00305E10
			protected \uE012(Player player, Item item)
			{
				this.\uE004 = player;
				this.\uE007 = item;
			}

			// Token: 0x06009829 RID: 38953 RVA: 0x00307C2C File Offset: 0x00305E2C
			~\uE012()
			{
				this.\uE004 = null;
				this.\uE007 = null;
			}

			// Token: 0x0600982A RID: 38954 RVA: 0x00307C60 File Offset: 0x00305E60
			public void Execute()
			{
				if (this.\uE005 == Player.\uE012.EInternalState.Creating)
				{
					this.\uE005 = Player.\uE012.EInternalState.Executed;
					this.\uE027();
				}
			}

			// Token: 0x0600982B RID: 38955 RVA: 0x00307C80 File Offset: 0x00305E80
			public void Confirm(bool succeed = true)
			{
				if (this.\uE008)
				{
					return;
				}
				if (this.\uE005 == Player.\uE012.EInternalState.Executed)
				{
					this.\uE005 = Player.\uE012.EInternalState.Confirmed;
					this.\uE028(succeed);
				}
			}

			// Token: 0x0600982C RID: 38956
			protected abstract void \uE027();

			// Token: 0x0600982D RID: 38957
			protected abstract void \uE028(bool succeed);

			// Token: 0x17001514 RID: 5396
			// (get) Token: 0x0600982E RID: 38958 RVA: 0x00307CA8 File Offset: 0x00305EA8
			private bool \uE008
			{
				get
				{
					return this.\uE005 == Player.\uE012.EInternalState.Disposed;
				}
			}

			// Token: 0x0600982F RID: 38959 RVA: 0x00307CB4 File Offset: 0x00305EB4
			public void Dispose()
			{
				if (this.\uE008)
				{
					return;
				}
				this.\uE005 = Player.\uE012.EInternalState.Disposed;
				if (this.\uE006 == CommandStatus.Begin)
				{
					this.\uE006 = CommandStatus.Failed;
				}
				this.\uE004 = null;
				this.\uE007 = null;
				GC.SuppressFinalize(this);
			}

			// Token: 0x0400885C RID: 34908
			[CompilerGenerated]
			private Player \uE000;

			// Token: 0x0400885D RID: 34909
			[CompilerGenerated]
			private Player.\uE012.EInternalState \uE001;

			// Token: 0x0400885E RID: 34910
			[CompilerGenerated]
			private CommandStatus \uE002;

			// Token: 0x0400885F RID: 34911
			[CompilerGenerated]
			private Item \uE003;

			// Token: 0x02001751 RID: 5969
			protected enum EInternalState
			{
				// Token: 0x04008861 RID: 34913
				Creating,
				// Token: 0x04008862 RID: 34914
				Executed,
				// Token: 0x04008863 RID: 34915
				Confirmed,
				// Token: 0x04008864 RID: 34916
				Disposed
			}
		}

		// Token: 0x02001752 RID: 5970
		internal sealed class \uE013 : Player.\uE012
		{
			// Token: 0x06009830 RID: 38960 RVA: 0x00307D00 File Offset: 0x00305F00
			public \uE013(Player player, Item item) : base(player, item)
			{
			}

			// Token: 0x06009831 RID: 38961 RVA: 0x00307D0C File Offset: 0x00305F0C
			protected override void \uE027()
			{
				base.\uE004.InventoryController.RaiseEvent(new \uEEDF(base.\uE007, base.\uE006, base.\uE004.InventoryController));
			}

			// Token: 0x06009832 RID: 38962 RVA: 0x00307D3C File Offset: 0x00305F3C
			protected override void \uE028(bool succeed)
			{
				base.\uE006 = (succeed ? CommandStatus.Succeed : CommandStatus.Failed);
				base.\uE004.InventoryController.RaiseEvent(new \uEEDF(base.\uE007, base.\uE006, base.\uE004.InventoryController));
			}
		}

		// Token: 0x02001753 RID: 5971
		private sealed class \uE014 : Player.\uE012
		{
			// Token: 0x06009833 RID: 38963 RVA: 0x00307D78 File Offset: 0x00305F78
			public \uE014(Player player, Item item) : base(player, item)
			{
			}

			// Token: 0x06009834 RID: 38964 RVA: 0x00307D84 File Offset: 0x00305F84
			protected override void \uE027()
			{
				base.\uE004.InventoryController.RaiseEvent(new \uEEE0(base.\uE007, base.\uE006, base.\uE004.InventoryController));
			}

			// Token: 0x06009835 RID: 38965 RVA: 0x00307DB4 File Offset: 0x00305FB4
			protected override void \uE028(bool succeed)
			{
				base.\uE006 = (succeed ? CommandStatus.Succeed : CommandStatus.Failed);
				base.\uE004.InventoryController.RaiseEvent(new \uEEE0(base.\uE007, base.\uE006, base.\uE004.InventoryController));
			}
		}

		// Token: 0x02001754 RID: 5972
		protected abstract class AbstractProcess
		{
			// Token: 0x06009836 RID: 38966 RVA: 0x00307DF0 File Offset: 0x00305FF0
			protected static void Execute(Player.AbstractProcess process)
			{
				process.Execute();
			}

			// Token: 0x06009837 RID: 38967
			protected abstract void Execute();

			// Token: 0x06009838 RID: 38968 RVA: 0x00307DF8 File Offset: 0x00305FF8
			protected static bool TrySkip(Player.AbstractProcess process)
			{
				return process.TrySkip();
			}

			// Token: 0x06009839 RID: 38969
			protected abstract bool TrySkip();

			// Token: 0x0600983A RID: 38970
			protected abstract void CreateController();

			// Token: 0x0600983B RID: 38971
			protected abstract void Skip(string error);

			// Token: 0x0600983C RID: 38972
			protected abstract void SkipToNext(string error);

			// Token: 0x0600983D RID: 38973
			protected abstract void Begin(string error = null);

			// Token: 0x0600983E RID: 38974
			protected abstract void Complete();

			// Token: 0x0600983F RID: 38975
			protected abstract void Complete(string error);

			// Token: 0x06009840 RID: 38976
			protected abstract void Abort();

			// Token: 0x06009841 RID: 38977
			protected abstract void AbortAfterCompletion();

			// Token: 0x06009842 RID: 38978
			protected abstract void ExecuteNext();

			// Token: 0x02001755 RID: 5973
			internal enum Completion
			{
				// Token: 0x04008866 RID: 34918
				Sync,
				// Token: 0x04008867 RID: 34919
				Async
			}

			// Token: 0x02001756 RID: 5974
			internal enum Confirmation
			{
				// Token: 0x04008869 RID: 34921
				Unknown,
				// Token: 0x0400886A RID: 34922
				Succeed,
				// Token: 0x0400886B RID: 34923
				Failed
			}
		}

		// Token: 0x02001757 RID: 5975
		protected sealed class Process<TController, TResult> : Player.AbstractProcess where TController : Player.AbstractHandsController, TResult
		{
			// Token: 0x06009844 RID: 38980 RVA: 0x00307E08 File Offset: 0x00306008
			internal Process(Player player, Func<TController> controllerFactory, [CanBeNull] Item item, bool fastHide = false, Player.AbstractProcess.Completion completion = Player.AbstractProcess.Completion.Sync, Player.AbstractProcess.Confirmation confirmation = Player.AbstractProcess.Confirmation.Succeed, bool skippable = true)
			{
				this.\uE000 = player;
				this.\uE001 = controllerFactory;
				this.\uE002 = item;
				this.\uE003 = completion;
				this.\uE004 = confirmation;
				this.\uE005 = skippable;
				this.\uE00A = fastHide;
			}

			// Token: 0x06009845 RID: 38981 RVA: 0x00307E6C File Offset: 0x0030606C
			internal void \uE000([CanBeNull] Callback beginCallback, [CanBeNull] Callback<TResult> completeCallback, bool scheduled)
			{
				this.\uE000.Logger.LogInfo(\uF1F8.\uE000(143976), new object[]
				{
					this.\uE002
				});
				Callback uE = beginCallback;
				if (beginCallback == null && (uE = Player.Process<TController, TResult>.<>c.<>9__13_0) == null)
				{
					uE = (Player.Process<TController, TResult>.<>c.<>9__13_0 = new Callback(Player.Process<TController, TResult>.<>c.<>9.\uE000));
				}
				this.\uE007 = uE;
				Callback<TResult> uE2 = completeCallback;
				if (completeCallback == null && (uE2 = Player.Process<TController, TResult>.<>c.<>9__13_1) == null)
				{
					uE2 = (Player.Process<TController, TResult>.<>c.<>9__13_1 = new Callback<TResult>(Player.Process<TController, TResult>.<>c.<>9.\uE001));
				}
				this.\uE008 = uE2;
				if (this.\uE000.Profile.Info.Settings.Role == WildSpawnType.bossBoar)
				{
					this.\uE000.MovementContext.PlayerAnimator.EnableBoarPkm(this.\uE002.Id == \uF1F8.\uE000(143961));
				}
				if (this.\uE000._handsController != null && this.\uE000._handsController.Item == this.\uE002)
				{
					string str = \uF1F8.\uE000(143926);
					Item uE3 = this.\uE002;
					string str2 = (uE3 != null) ? uE3.ShortName : null;
					string str3 = \uF1F8.\uE000(144114);
					Player uE4 = this.\uE000;
					string str4;
					if (uE4 == null)
					{
						str4 = null;
					}
					else
					{
						Player.AbstractHandsController handsController = uE4._handsController;
						if (handsController == null)
						{
							str4 = null;
						}
						else
						{
							Item item = handsController.Item;
							str4 = ((item != null) ? item.ShortName : null);
						}
					}
					this.Skip(str + str2 + str3 + str4);
					return;
				}
				switch (this.\uE000.ProcessStatus)
				{
				case Player.EProcessStatus.None:
					this.\uE000.Logger.LogInfo(\uF1F8.\uE000(144125), new object[]
					{
						this,
						this.\uE002,
						this.\uE000.ProcessStatus
					});
					this.\uE000.ProcessStatus = Player.EProcessStatus.Scheduled;
					this.Execute();
					return;
				case Player.EProcessStatus.Scheduled:
					if (this.\uE000.\uE00A == null || Player.AbstractProcess.TrySkip(this.\uE000.\uE00A))
					{
						this.\uE000.\uE00A = this;
						return;
					}
					this.Skip(\uF1F8.\uE000(144054));
					return;
				case Player.EProcessStatus.Internal:
					if (scheduled)
					{
						this.Skip(\uF1F8.\uE000(144025));
						return;
					}
					this.Execute();
					return;
				default:
					throw new ArgumentException(\uF1F8.\uE000(143728));
				}
			}

			// Token: 0x06009846 RID: 38982 RVA: 0x003080E4 File Offset: 0x003062E4
			protected override void Execute()
			{
				Player.Process<TController, TResult>.\uE000 uE = new Player.Process<TController, TResult>.\uE000();
				uE.<>4__this = this;
				this.\uE000.Logger.LogInfo(\uF1F8.\uE000(143741), new object[]
				{
					(this.\uE002 != null) ? this.\uE002.ShortName.Localized(null) : \uF1F8.\uE000(143684)
				});
				uE.execute = new Action(uE.\uE000);
				if (this.\uE000.HandsController == null)
				{
					uE.execute();
					return;
				}
				if (this.\uE000.HandsController.Item == this.\uE002)
				{
					if (!this.\uE000.HandsController.Destroyed)
					{
						this.SkipToNext(\uF1F8.\uE000(143693));
						return;
					}
				}
				this.\uE000.Logger.LogInfo(\uF1F8.\uE000(143678), Array.Empty<object>());
				this.\uE000.DropCurrentController(new Action(uE.\uE001), this.\uE00A, this.\uE002);
			}

			// Token: 0x06009847 RID: 38983 RVA: 0x00308214 File Offset: 0x00306414
			protected override void CreateController()
			{
				Player.Process<TController, TResult>.\uE001 uE = new Player.Process<TController, TResult>.\uE001();
				uE.<>4__this = this;
				this.\uE000.Logger.LogInfo(\uF1F8.\uE000(143630), new object[]
				{
					(this.\uE002 != null) ? this.\uE002.ShortName.Localized(null) : \uF1F8.\uE000(143684)
				});
				uE.setInHandsOperation = ((this.\uE002 != null) ? this.\uE000.\uE084(this.\uE002) : null);
				this.\uE009 = this.\uE001();
				this.\uE00B = false;
				this.\uE000.SpawnController(this.\uE009, new Action(uE.\uE000));
			}

			// Token: 0x06009848 RID: 38984 RVA: 0x003082E8 File Offset: 0x003064E8
			internal void \uE001(bool succeed)
			{
				this.\uE000.Logger.LogInfo(\uF1F8.\uE000(143799) + succeed.ToString() + \uF1F8.\uE000(143780) + this.\uE00B.ToString(), Array.Empty<object>());
				if (this.\uE004 != Player.AbstractProcess.Confirmation.Unknown)
				{
					Debug.LogWarning(\uF1F8.\uE000(143760));
					return;
				}
				this.\uE004 = (succeed ? Player.AbstractProcess.Confirmation.Succeed : Player.AbstractProcess.Confirmation.Failed);
				if (this.\uE009 == null)
				{
					return;
				}
				if (!this.\uE00B)
				{
					return;
				}
				if (succeed)
				{
					if (this.\uE003 == Player.AbstractProcess.Completion.Sync)
					{
						this.Complete();
					}
					this.\uE000.Logger.LogInfo(\uF1F8.\uE000(143472), Array.Empty<object>());
					this.ExecuteNext();
					return;
				}
				if (this.\uE003 == Player.AbstractProcess.Completion.Sync)
				{
					this.Abort();
					return;
				}
				this.AbortAfterCompletion();
			}

			// Token: 0x06009849 RID: 38985 RVA: 0x003083E0 File Offset: 0x003065E0
			protected override bool TrySkip()
			{
				if (this.\uE006 || !this.\uE005)
				{
					return false;
				}
				this.Skip(\uF1F8.\uE000(143456));
				return true;
			}

			// Token: 0x0600984A RID: 38986 RVA: 0x0030840C File Offset: 0x0030660C
			protected override void Skip(string error)
			{
				this.Begin(error);
				this.Complete(error);
			}

			// Token: 0x0600984B RID: 38987 RVA: 0x0030841C File Offset: 0x0030661C
			protected override void SkipToNext(string error)
			{
				this.Skip(error);
				if (this.\uE004 == Player.AbstractProcess.Confirmation.Unknown)
				{
					this.\uE004 = Player.AbstractProcess.Confirmation.Failed;
				}
				this.\uE000.Logger.LogInfo(\uF1F8.\uE000(143447) + error, Array.Empty<object>());
				this.ExecuteNext();
			}

			// Token: 0x0600984C RID: 38988 RVA: 0x00308478 File Offset: 0x00306678
			protected override void Begin(string error = null)
			{
				this.\uE005 = false;
				if (string.IsNullOrEmpty(error))
				{
					this.\uE007.Succeed();
					return;
				}
				this.\uE007.Fail(error);
			}

			// Token: 0x0600984D RID: 38989 RVA: 0x003084AC File Offset: 0x003066AC
			protected override void Complete()
			{
				this.\uE006 = true;
				this.\uE008((TResult)((object)this.\uE009));
			}

			// Token: 0x0600984E RID: 38990 RVA: 0x003084D8 File Offset: 0x003066D8
			protected override void Complete([CanBeNull] string error)
			{
				this.\uE006 = true;
				this.\uE008(new Result<TResult>
				{
					Error = error
				});
			}

			// Token: 0x0600984F RID: 38991 RVA: 0x00308508 File Offset: 0x00306708
			protected override void Abort()
			{
				Debug.LogError(\uF1F8.\uE000(143429));
				\uE833 uE = this.\uE009 as \uE833;
				Callback<\uE833> callback = (uE != null) ? uE.GetOnUsedCallback() : null;
				this.\uE000.DestroyController();
				this.\uE000._processStatus = Player.EProcessStatus.None;
				if (callback != null)
				{
					this.Complete(null);
					callback(new Result<\uE833>(uE));
				}
				else
				{
					this.\uE000.SetEmptyHands(new Callback<\uE829>(this.\uE002));
				}
				this.\uE000.Logger.LogInfo(\uF1F8.\uE000(143419), Array.Empty<object>());
				this.ExecuteNext();
			}

			// Token: 0x06009850 RID: 38992 RVA: 0x003085C8 File Offset: 0x003067C8
			protected override void AbortAfterCompletion()
			{
				this.\uE000.DestroyController();
				this.\uE000.Logger.LogInfo(\uF1F8.\uE000(143395), Array.Empty<object>());
				this.ExecuteNext();
			}

			// Token: 0x06009851 RID: 38993 RVA: 0x00308600 File Offset: 0x00306800
			protected override void ExecuteNext()
			{
				if (this.\uE000.ProcessStatus == Player.EProcessStatus.Scheduled)
				{
					Player.AbstractProcess uE00A = this.\uE000.\uE00A;
					if (uE00A != null)
					{
						this.\uE000.Logger.LogInfo(\uF1F8.\uE000(143386), new object[]
						{
							this,
							uE00A.GetType()
						});
						this.\uE000.\uE00A = null;
						Player.AbstractProcess.Execute(uE00A);
						return;
					}
					this.\uE000.Logger.LogInfo(\uF1F8.\uE000(143608), new object[]
					{
						this,
						this.\uE002,
						this.\uE000.ProcessStatus
					});
					this.\uE000.ProcessStatus = Player.EProcessStatus.None;
				}
			}

			// Token: 0x06009852 RID: 38994 RVA: 0x003086D0 File Offset: 0x003068D0
			[CompilerGenerated]
			private void \uE002(Result<\uE829> callback)
			{
				this.Complete(null);
			}

			// Token: 0x0400886C RID: 34924
			private readonly Player \uE000;

			// Token: 0x0400886D RID: 34925
			private readonly Func<TController> \uE001;

			// Token: 0x0400886E RID: 34926
			[CanBeNull]
			private readonly Item \uE002;

			// Token: 0x0400886F RID: 34927
			private readonly Player.AbstractProcess.Completion \uE003;

			// Token: 0x04008870 RID: 34928
			private Player.AbstractProcess.Confirmation \uE004;

			// Token: 0x04008871 RID: 34929
			private bool \uE005;

			// Token: 0x04008872 RID: 34930
			private bool \uE006;

			// Token: 0x04008873 RID: 34931
			private Callback \uE007;

			// Token: 0x04008874 RID: 34932
			private Callback<TResult> \uE008;

			// Token: 0x04008875 RID: 34933
			private TController \uE009;

			// Token: 0x04008876 RID: 34934
			private bool \uE00A;

			// Token: 0x04008877 RID: 34935
			private bool \uE00B = true;

			// Token: 0x02001759 RID: 5977
			[CompilerGenerated]
			private sealed class \uE000
			{
				// Token: 0x06009858 RID: 39000 RVA: 0x00308700 File Offset: 0x00306900
				internal void \uE000()
				{
					this.<>4__this.\uE005 = false;
					if (this.<>4__this.\uE002 != null)
					{
						this.<>4__this.\uE000.\uE083(this.<>4__this.\uE002);
					}
					this.<>4__this.Begin(null);
					if (this.<>4__this.\uE004 == Player.AbstractProcess.Confirmation.Failed)
					{
						this.<>4__this.SkipToNext(\uF1F8.\uE000(143560));
						return;
					}
					this.<>4__this.CreateController();
				}

				// Token: 0x06009859 RID: 39001 RVA: 0x0030878C File Offset: 0x0030698C
				internal void \uE001()
				{
					this.<>4__this.\uE000.Logger.LogInfo(\uF1F8.\uE000(143546), Array.Empty<object>());
					this.<>4__this.\uE000.DestroyController();
					if (this.<>4__this.\uE000.\uE00A != null)
					{
						if (this.<>4__this.\uE005)
						{
							this.<>4__this.SkipToNext(\uF1F8.\uE000(143495));
							return;
						}
					}
					this.execute();
				}

				// Token: 0x0400887B RID: 34939
				public Player.Process<\uE09D, \uE0B5> <>4__this;

				// Token: 0x0400887C RID: 34940
				public Action execute;
			}

			// Token: 0x0200175A RID: 5978
			[CompilerGenerated]
			private sealed class \uE001
			{
				// Token: 0x0600985B RID: 39003 RVA: 0x00308828 File Offset: 0x00306A28
				internal void \uE000()
				{
					this.<>4__this.\uE000.Logger.LogDebug(\uF1F8.\uE000(147317), new object[]
					{
						(this.<>4__this.\uE002 != null) ? this.<>4__this.\uE002.ShortName.Localized(null) : \uF1F8.\uE000(143684),
						this.<>4__this.\uE004
					});
					this.<>4__this.\uE00B = true;
					if (this.setInHandsOperation != null)
					{
						this.setInHandsOperation.Confirm(true);
					}
					switch (this.<>4__this.\uE004)
					{
					case Player.AbstractProcess.Confirmation.Unknown:
						if (this.<>4__this.\uE003 == Player.AbstractProcess.Completion.Async)
						{
							this.<>4__this.Complete();
							return;
						}
						return;
					case Player.AbstractProcess.Confirmation.Succeed:
						this.<>4__this.Complete();
						this.<>4__this.\uE000.Logger.LogInfo(\uF1F8.\uE000(147241), Array.Empty<object>());
						this.<>4__this.ExecuteNext();
						return;
					case Player.AbstractProcess.Confirmation.Failed:
						this.<>4__this.Abort();
						return;
					default:
						throw new ArgumentException(\uF1F8.\uE000(143728));
					}
				}

				// Token: 0x0400887D RID: 34941
				public Player.Process<\uE09D, \uE0B5> <>4__this;

				// Token: 0x0400887E RID: 34942
				public Player.\uE013 setInHandsOperation;
			}
		}

		// Token: 0x0200175B RID: 5979
		protected internal abstract class PlayerOwnerInventoryController : Player.PlayerInventoryController
		{
			// Token: 0x0600985C RID: 39004 RVA: 0x00308974 File Offset: 0x00306B74
			protected PlayerOwnerInventoryController(Player player, Profile profile, bool examined) : base(player, profile, examined)
			{
			}

			// Token: 0x0600985D RID: 39005 RVA: 0x00308980 File Offset: 0x00306B80
			public override void GetAcceptableItemsNonAlloc<TItem>(EquipmentSlot[] equipmentSlots, IList<TItem> preAllocatedList, Predicate<TItem> predicate = null, Predicate<\uEDBE> goDeeperPredicate = null)
			{
				Player.PlayerOwnerInventoryController.\uE000<TItem> uE = new Player.PlayerOwnerInventoryController.\uE000<TItem>();
				uE.predicate = predicate;
				uE.goDeeperPredicate = goDeeperPredicate;
				uE.<>4__this = this;
				base.GetAcceptableItemsNonAlloc<TItem>(equipmentSlots, preAllocatedList, new Predicate<TItem>(uE.\uE000), new Predicate<\uEDBE>(uE.\uE001));
			}

			// Token: 0x0600985E RID: 39006 RVA: 0x003089D0 File Offset: 0x00306BD0
			public override void ExamineMalfunction(Weapon weapon, bool clearRest = false)
			{
				if (this.\uE000.IsAI || !weapon.MalfState.IsKnownMalfunction(base.Profile.Id))
				{
					base.ExamineMalfunction(weapon, clearRest);
					this.\uE000.NeedRepairMalfPhraseSituation(weapon.MalfState.State, base.HasKnownMalfType(weapon));
					if (!this.\uE000.IsAI)
					{
						this.\uE000(weapon, 150).HandleExceptions();
					}
					return;
				}
				GameSetting<bool> malfunctionVisability = Singleton<\uE9A4>.Instance.Game.Settings.MalfunctionVisability;
				bool flag = MonoBehaviourSingleton<PreloaderUI>.Instance.MalfunctionGlow.ShowGlow(BattleUIMalfunctionGlow.EGlowType.Examined, false, malfunctionVisability ? this.\uE001() : 0f);
				this.\uE000.NeedRepairMalfPhraseSituation(weapon.MalfState.State, base.HasKnownMalfType(weapon));
				if (!flag)
				{
					return;
				}
				if (base.HasKnownMalfType(weapon))
				{
					\uEA30.DisplayNotification(new \uEA6F(weapon.MalfState.State));
					return;
				}
				\uEA30.DisplayNotification(new \uEA70());
			}

			// Token: 0x0600985F RID: 39007 RVA: 0x00308AF0 File Offset: 0x00306CF0
			private new Task \uE000(Weapon weapon, int delayInMilliseconds)
			{
				Player.PlayerOwnerInventoryController.\uE001 uE;
				uE.<>t__builder = AsyncTaskMethodBuilder.Create();
				uE.<>4__this = this;
				uE.weapon = weapon;
				uE.delayInMilliseconds = delayInMilliseconds;
				uE.<>1__state = -1;
				uE.<>t__builder.Start<Player.PlayerOwnerInventoryController.\uE001>(ref uE);
				return uE.<>t__builder.Task;
			}

			// Token: 0x06009860 RID: 39008 RVA: 0x00308B58 File Offset: 0x00306D58
			public override void ExamineMalfunctionType(Weapon weapon)
			{
				if (weapon.MalfState.IsKnownMalfType(base.Profile.Id))
				{
					\uEA30.DisplayNotification(new \uEA71(weapon.MalfState.State));
					return;
				}
				base.ExamineMalfunctionType(weapon);
				if (this.\uE000.IsAI)
				{
					return;
				}
				if (Singleton<\uE9A4>.Instance.Game.Settings.MalfunctionVisability)
				{
					MonoBehaviourSingleton<PreloaderUI>.Instance.MalfunctionGlow.ShowGlow(BattleUIMalfunctionGlow.EGlowType.TypeExamined, true, this.\uE001());
				}
				\uEA30.DisplayNotification(new \uEA71(weapon.MalfState.State));
			}

			// Token: 0x06009861 RID: 39009 RVA: 0x00308C00 File Offset: 0x00306E00
			public override void CallUnknownMalfunctionStartRepair(Weapon weapon)
			{
				base.CallUnknownMalfunctionStartRepair(weapon);
				if (this.\uE000.IsAI)
				{
					return;
				}
				if (Singleton<\uE9A4>.Instance.Game.Settings.MalfunctionVisability)
				{
					MonoBehaviourSingleton<PreloaderUI>.Instance.MalfunctionGlow.ShowGlow(BattleUIMalfunctionGlow.EGlowType.Repaired, true, this.\uE001());
				}
				\uEA30.DisplayNotification(new \uEA71(weapon.MalfState.State));
			}

			// Token: 0x06009862 RID: 39010 RVA: 0x00308C70 File Offset: 0x00306E70
			public override void CallMalfunctionRepaired(Weapon weapon)
			{
				base.CallMalfunctionRepaired(weapon);
				if (this.\uE000.IsAI)
				{
					return;
				}
				if (Singleton<\uE9A4>.Instance.Game.Settings.MalfunctionVisability)
				{
					MonoBehaviourSingleton<PreloaderUI>.Instance.MalfunctionGlow.ShowGlow(BattleUIMalfunctionGlow.EGlowType.Repaired, true, this.\uE001());
				}
			}

			// Token: 0x06009863 RID: 39011 RVA: 0x00308CD0 File Offset: 0x00306ED0
			public override bool CheckedMagazine(\uEE67 magazine)
			{
				return base.Profile.IsCheckedMagazines(magazine.Id);
			}

			// Token: 0x06009864 RID: 39012 RVA: 0x00308CE8 File Offset: 0x00306EE8
			private new float \uE001()
			{
				float result = 0.5f;
				if (this.\uE000.HealthController.FindActiveEffect<\uED4E>(EBodyPart.Common) != null)
				{
					result = 1f;
				}
				return result;
			}

			// Token: 0x06009865 RID: 39013 RVA: 0x00308D1C File Offset: 0x00306F1C
			public override \uEF67 ConvertOperationResultToOperation(\uEF06 operationResult)
			{
				\uEF14 uEF = operationResult as \uEF14;
				if (uEF != null)
				{
					return new \uEFA4(base.\uE00C(), this, uEF, uEF.ItemsToDestroy, this.\uE000, false);
				}
				return base.ConvertOperationResultToOperation(operationResult);
			}

			// Token: 0x06009866 RID: 39014 RVA: 0x00308D60 File Offset: 0x00306F60
			public override \uF192<bool> TryThrowItem(Item item, Callback callback = null, bool silent = false)
			{
				\uEED1 uEED = item.Owner as \uEED1;
				if (uEED != null)
				{
					List<\uEED0> list = Enumerable.ToList<\uEED0>(uEED.GetItemsOverDiscardLimit(item));
					if (Enumerable.Any<\uEED0>(list))
					{
						\uEDE6 uEDE = new \uEDE6(item, list);
						if (!silent)
						{
							\uEA30.DisplayWarningNotification(uEDE.GetLocalizedDescription(), ENotificationDurationType.Default);
						}
						return uEDE;
					}
				}
				this.ThrowItem(item, false, callback);
				return true;
			}

			// Token: 0x0200175C RID: 5980
			[CompilerGenerated]
			private sealed class \uE000<\uE098> where \uE098 : Item
			{
				// Token: 0x06009868 RID: 39016 RVA: 0x00308DDC File Offset: 0x00306FDC
				internal bool \uE000(\uE098 item)
				{
					Predicate<\uE098> predicate = this.predicate;
					return (predicate == null || predicate(item)) && !(item is \uEF49);
				}

				// Token: 0x06009869 RID: 39017 RVA: 0x00308E14 File Offset: 0x00307014
				internal bool \uE001(\uEDBE container)
				{
					Predicate<\uEDBE> predicate = this.goDeeperPredicate;
					if (predicate != null && !predicate(container))
					{
						return false;
					}
					\uEEA4 uEEA = container as \uEEA4;
					return uEEA == null || this.<>4__this.SearchController.IsSearched(uEEA);
				}

				// Token: 0x0400887F RID: 34943
				public Predicate<\uE098> predicate;

				// Token: 0x04008880 RID: 34944
				public Predicate<\uEDBE> goDeeperPredicate;

				// Token: 0x04008881 RID: 34945
				public Player.PlayerOwnerInventoryController <>4__this;
			}
		}

		// Token: 0x0200175E RID: 5982
		protected sealed class SinglePlayerInventoryController : Player.PlayerOwnerInventoryController
		{
			// Token: 0x17001515 RID: 5397
			// (get) Token: 0x0600986C RID: 39020 RVA: 0x00308FB8 File Offset: 0x003071B8
			public override IPlayerSearchController PlayerSearchController { get; }

			// Token: 0x0600986D RID: 39021 RVA: 0x00308FC0 File Offset: 0x003071C0
			internal SinglePlayerInventoryController(Player player, Profile profile, bool isBot = false, bool examined = false) : base(player, profile, examined)
			{
				IPlayerSearchController playerSearchController2;
				if (isBot || examined)
				{
					IPlayerSearchController playerSearchController = new \uE8DB(profile);
					playerSearchController2 = playerSearchController;
				}
				else
				{
					IPlayerSearchController playerSearchController = new \uE8DC(profile, this);
					playerSearchController2 = playerSearchController;
				}
				this.PlayerSearchController = playerSearchController2;
			}

			// Token: 0x0600986E RID: 39022 RVA: 0x00308FF8 File Offset: 0x003071F8
			internal override void \uE029(\uEF67 operation, Callback callback)
			{
				this.\uE000(operation, callback).HandleExceptions();
			}

			// Token: 0x0600986F RID: 39023 RVA: 0x00309008 File Offset: 0x00307208
			private new Task \uE000(\uEF67 operation, [CanBeNull] Callback callback)
			{
				Player.SinglePlayerInventoryController.\uE000 uE;
				uE.<>t__builder = AsyncTaskMethodBuilder.Create();
				uE.<>4__this = this;
				uE.operation = operation;
				uE.callback = callback;
				uE.<>1__state = -1;
				uE.<>t__builder.Start<Player.SinglePlayerInventoryController.\uE000>(ref uE);
				return uE.<>t__builder.Task;
			}

			// Token: 0x06009870 RID: 39024 RVA: 0x00309070 File Offset: 0x00307270
			internal override SearchContentOperation \uE019(\uEEA4 item)
			{
				return new \uEFB4(base.\uE00C(), this, this.PlayerSearchController, base.Profile, item);
			}

			// Token: 0x06009871 RID: 39025 RVA: 0x0030908C File Offset: 0x0030728C
			public override void GetTraderServicesDataFromServer(string traderId)
			{
				((LocalPlayer)this.\uE000).UpdateTradersServiceData(traderId).HandleExceptions();
			}

			// Token: 0x06009872 RID: 39026 RVA: 0x003090A4 File Offset: 0x003072A4
			public override bool HasCultistAmulet(out \uEE2D amulet)
			{
				amulet = null;
				if (this.\uE000.IsAI)
				{
					return false;
				}
				foreach (Item item in base.Inventory.GetItemsInSlots(new EquipmentSlot[]
				{
					EquipmentSlot.Pockets
				}))
				{
					\uEE2D uEE2D = item as \uEE2D;
					if (uEE2D != null)
					{
						amulet = uEE2D;
						return true;
					}
				}
				return false;
			}

			// Token: 0x06009873 RID: 39027 RVA: 0x0030912C File Offset: 0x0030732C
			public void TryExpendCultistAmuletChargeOrDestroy(bool destroy, bool onGameEnd)
			{
				\uEE2D uEE2D;
				if (this.HasCultistAmulet(out uEE2D) && (!uEE2D.TryExpendCharge() || destroy))
				{
					if (onGameEnd)
					{
						\uF190<\uEF18> uF = \uEF02.RemoveWithoutRestrictions(uEE2D, this);
						if (uF.Failed)
						{
							Debug.LogError(uF.Error);
							return;
						}
					}
					else
					{
						\uF190<\uEF16> uF2 = \uEF02.Discard(uEE2D, this, true);
						if (uF2.Failed)
						{
							Debug.LogError(uF2.Error);
							return;
						}
						\uEF99 operation = new \uEF99(base.\uE00C(), this, uF2.Value);
						this.\uE029(operation, null);
					}
				}
			}

			// Token: 0x06009874 RID: 39028 RVA: 0x003091C4 File Offset: 0x003073C4
			[CompilerGenerated]
			[DebuggerHidden]
			private new void \uE001(\uEF67 operation, Callback callback)
			{
				base.\uE029(operation, callback);
			}

			// Token: 0x04008888 RID: 34952
			[CompilerGenerated]
			private new readonly IPlayerSearchController \uE008;
		}

		// Token: 0x02001762 RID: 5986
		[CompilerGenerated]
		private sealed class \uE016
		{
			// Token: 0x0600989B RID: 39067 RVA: 0x003095BC File Offset: 0x003077BC
			internal void \uE000()
			{
				this.<>4__this.Skills.LightArmorDamageTakenAction.Complete(this.armorDamage);
			}

			// Token: 0x0600989C RID: 39068 RVA: 0x003095DC File Offset: 0x003077DC
			internal void \uE001()
			{
				this.<>4__this.Skills.HeavyArmorDamageTakenAction.Complete(this.armorDamage);
			}

			// Token: 0x040088AD RID: 34989
			public Player <>4__this;

			// Token: 0x040088AE RID: 34990
			public float armorDamage;
		}

		// Token: 0x02001763 RID: 5987
		[CompilerGenerated]
		private sealed class \uE017
		{
			// Token: 0x0600989E RID: 39070 RVA: 0x00309604 File Offset: 0x00307804
			internal bool \uE000(BodyPartCollider hitCollider)
			{
				return hitCollider.BodyPartColliderType.Equals(this.colliderType);
			}

			// Token: 0x040088AF RID: 34991
			public EBodyPartColliderType colliderType;
		}

		// Token: 0x02001764 RID: 5988
		[CompilerGenerated]
		private sealed class \uE018
		{
			// Token: 0x060098A0 RID: 39072 RVA: 0x0030962C File Offset: 0x0030782C
			internal void \uE000()
			{
				this.container.Interact(new InteractionResult(EInteractionType.Close));
				if (this.<>4__this.MovementContext.LevelOnApproachStart > 0f)
				{
					this.<>4__this.MovementContext.SetPoseLevel(this.<>4__this.MovementContext.LevelOnApproachStart, false);
					this.<>4__this.MovementContext.LevelOnApproachStart = -1f;
				}
			}

			// Token: 0x040088B0 RID: 34992
			public LootableContainer container;

			// Token: 0x040088B1 RID: 34993
			public Player <>4__this;
		}

		// Token: 0x02001765 RID: 5989
		[CompilerGenerated]
		private sealed class \uE019
		{
			// Token: 0x060098A2 RID: 39074 RVA: 0x003096A8 File Offset: 0x003078A8
			internal void \uE000()
			{
				this.<>4__this.Skills.FindAction.Complete(this.onCorpse, 1f);
			}

			// Token: 0x040088B2 RID: 34994
			public Player <>4__this;

			// Token: 0x040088B3 RID: 34995
			public bool onCorpse;
		}

		// Token: 0x02001766 RID: 5990
		[CompilerGenerated]
		private sealed class \uE01A
		{
			// Token: 0x060098A4 RID: 39076 RVA: 0x003096D4 File Offset: 0x003078D4
			internal void \uE000()
			{
				this.<>4__this.Skills.RaidLoadedAmmoAction.Complete((float)this.count);
			}

			// Token: 0x040088B4 RID: 34996
			public Player <>4__this;

			// Token: 0x040088B5 RID: 34997
			public int count;
		}

		// Token: 0x02001767 RID: 5991
		[CompilerGenerated]
		private sealed class \uE01B
		{
			// Token: 0x060098A6 RID: 39078 RVA: 0x003096FC File Offset: 0x003078FC
			internal void \uE000()
			{
				this.<>4__this.Skills.RaidUnloadedAmmoAction.Complete((float)this.count);
			}

			// Token: 0x040088B6 RID: 34998
			public Player <>4__this;

			// Token: 0x040088B7 RID: 34999
			public int count;
		}

		// Token: 0x02001768 RID: 5992
		[CompilerGenerated]
		private sealed class \uE01C
		{
			// Token: 0x060098A8 RID: 39080 RVA: 0x00309724 File Offset: 0x00307924
			internal void \uE000()
			{
				this.<>4__this.Skills.HydrationChanged.Complete(this.diff, this.diff);
			}

			// Token: 0x040088B8 RID: 35000
			public Player <>4__this;

			// Token: 0x040088B9 RID: 35001
			public float diff;
		}

		// Token: 0x02001769 RID: 5993
		[CompilerGenerated]
		private sealed class \uE01D
		{
			// Token: 0x060098AA RID: 39082 RVA: 0x00309750 File Offset: 0x00307950
			internal void \uE000()
			{
				this.<>4__this.Skills.DamageTakenAction.Complete(this.damage);
			}

			// Token: 0x040088BA RID: 35002
			public Player <>4__this;

			// Token: 0x040088BB RID: 35003
			public float damage;
		}

		// Token: 0x0200176A RID: 5994
		[CompilerGenerated]
		private sealed class \uE01E
		{
			// Token: 0x060098AC RID: 39084 RVA: 0x00309778 File Offset: 0x00307978
			internal void \uE000()
			{
				this.<>4__this.Skills.EnergyChanged.Complete(this.diff, this.diff);
			}

			// Token: 0x040088BC RID: 35004
			public Player <>4__this;

			// Token: 0x040088BD RID: 35005
			public float diff;
		}

		// Token: 0x0200176B RID: 5995
		[CompilerGenerated]
		private sealed class \uE01F
		{
			// Token: 0x060098AE RID: 39086 RVA: 0x003097A4 File Offset: 0x003079A4
			internal void \uE000()
			{
				SkillManager.\uE00C<SkillManager.\uE001> sprintAction = this.<>4__this.Skills.SprintAction;
				SkillManager.\uE001 filter = default(SkillManager.\uE001);
				filter.Overweight = this.<>4__this.Physical.Overweight;
				\uED31 fatigue = this.<>4__this.Fatigue;
				filter.Fatigue = ((fatigue != null) ? fatigue.Strength : 0f);
				sprintAction.Complete(filter, this.distance);
			}

			// Token: 0x040088BE RID: 35006
			public float distance;

			// Token: 0x040088BF RID: 35007
			public Player <>4__this;
		}

		// Token: 0x0200176C RID: 5996
		[CompilerGenerated]
		private sealed class \uE020
		{
			// Token: 0x060098B0 RID: 39088 RVA: 0x00309818 File Offset: 0x00307A18
			internal void \uE000()
			{
				SkillManager.\uE00C<SkillManager.\uE001> movementAction = this.<>4__this.Skills.MovementAction;
				SkillManager.\uE001 filter = default(SkillManager.\uE001);
				filter.Noise = (float)this.<>4__this.MovementContext.CovertNoiseLevel;
				filter.Overweight = this.<>4__this.Physical.Overweight;
				\uED31 fatigue = this.<>4__this.Fatigue;
				filter.Fatigue = ((fatigue != null) ? fatigue.Strength : 0f);
				movementAction.Complete(filter, this.distance);
			}

			// Token: 0x040088C0 RID: 35008
			public float distance;

			// Token: 0x040088C1 RID: 35009
			public Player <>4__this;
		}

		// Token: 0x0200176D RID: 5997
		[CompilerGenerated]
		private sealed class \uE021
		{
			// Token: 0x060098B2 RID: 39090 RVA: 0x003098A4 File Offset: 0x00307AA4
			internal void \uE000(int value)
			{
				float volume = (float)value / 100f;
				this.broadcastTrigger.ActivationFader.Volume = volume;
			}

			// Token: 0x040088C2 RID: 35010
			public VoiceBroadcastTrigger broadcastTrigger;
		}

		// Token: 0x0200176E RID: 5998
		[CompilerGenerated]
		private sealed class \uE022
		{
			// Token: 0x060098B4 RID: 39092 RVA: 0x003098D4 File Offset: 0x00307AD4
			internal void \uE000()
			{
				this.<>4__this.\uE07A(this.controller);
				Action action = this.callback;
				if (action != null)
				{
					action();
				}
				this.onControllerAppeared.SetResult(true);
			}

			// Token: 0x040088C3 RID: 35011
			public Player <>4__this;

			// Token: 0x040088C4 RID: 35012
			public Player.AbstractHandsController controller;

			// Token: 0x040088C5 RID: 35013
			public Action callback;

			// Token: 0x040088C6 RID: 35014
			public TaskCompletionSource onControllerAppeared;
		}

		// Token: 0x0200176F RID: 5999
		[CompilerGenerated]
		private sealed class \uE023
		{
			// Token: 0x060098B6 RID: 39094 RVA: 0x0030990C File Offset: 0x00307B0C
			internal Item \uE000(EquipmentSlot x)
			{
				return this.<>4__this.InventoryController.Inventory.Equipment.GetSlot(x).ContainedItem;
			}

			// Token: 0x060098B7 RID: 39095 RVA: 0x00309930 File Offset: 0x00307B30
			internal bool \uE001(Item x)
			{
				return this.<>4__this.\uE07C(x);
			}

			// Token: 0x060098B8 RID: 39096 RVA: 0x00309940 File Offset: 0x00307B40
			internal void \uE002(Result<\uE829> result)
			{
				this.completeCallback(result.Complete ? new Result<\uE827>(result.Value) : new Result<\uE827>(null, result.Error));
			}

			// Token: 0x040088C7 RID: 35015
			public Player <>4__this;

			// Token: 0x040088C8 RID: 35016
			public Callback<\uE827> completeCallback;
		}

		// Token: 0x02001770 RID: 6000
		[CompilerGenerated]
		private sealed class \uE024
		{
			// Token: 0x060098BA RID: 39098 RVA: 0x0030997C File Offset: 0x00307B7C
			internal void \uE000(Result<\uE829> result)
			{
				this.callback((!string.IsNullOrEmpty(result.Error)) ? new Result<\uE827>(null, result.Error) : new Result<\uE827>(result.Value));
			}

			// Token: 0x040088C9 RID: 35017
			public Callback<\uE827> callback;
		}

		// Token: 0x02001771 RID: 6001
		[CompilerGenerated]
		private sealed class \uE025
		{
			// Token: 0x060098BC RID: 39100 RVA: 0x003099BC File Offset: 0x00307BBC
			internal AIFirearmController \uE000()
			{
				return Player.FirearmController.\uE000<AIFirearmController>(this.<>4__this, this.weapon);
			}

			// Token: 0x060098BD RID: 39101 RVA: 0x003099D0 File Offset: 0x00307BD0
			internal Player.FirearmController \uE001()
			{
				return Player.FirearmController.\uE000<Player.FirearmController>(this.<>4__this, this.weapon);
			}

			// Token: 0x040088CA RID: 35018
			public Player <>4__this;

			// Token: 0x040088CB RID: 35019
			public Weapon weapon;
		}

		// Token: 0x02001772 RID: 6002
		[CompilerGenerated]
		private sealed class \uE026
		{
			// Token: 0x060098BF RID: 39103 RVA: 0x003099EC File Offset: 0x00307BEC
			internal Player.GrenadeHandsController \uE000()
			{
				return Player.GrenadeHandsController.\uE000<Player.GrenadeHandsController>(this.<>4__this, this.throwWeap);
			}

			// Token: 0x040088CC RID: 35020
			public Player <>4__this;

			// Token: 0x040088CD RID: 35021
			public \uEEC9 throwWeap;
		}

		// Token: 0x02001773 RID: 6003
		[CompilerGenerated]
		private sealed class \uE027
		{
			// Token: 0x060098C1 RID: 39105 RVA: 0x00309A08 File Offset: 0x00307C08
			internal Player.MedsController \uE000()
			{
				return Player.MedsController.\uE001<Player.MedsController>(this.<>4__this, this.meds, this.bodyParts, 1f, this.animationVariant);
			}

			// Token: 0x040088CE RID: 35022
			public Player <>4__this;

			// Token: 0x040088CF RID: 35023
			public \uEE75 meds;

			// Token: 0x040088D0 RID: 35024
			public \uECFD<EBodyPart> bodyParts;

			// Token: 0x040088D1 RID: 35025
			public int animationVariant;
		}

		// Token: 0x02001774 RID: 6004
		[CompilerGenerated]
		private sealed class \uE028
		{
			// Token: 0x060098C3 RID: 39107 RVA: 0x00309A34 File Offset: 0x00307C34
			internal Player.MedsController \uE000()
			{
				return Player.MedsController.\uE001<Player.MedsController>(this.<>4__this, this.foodDrink, this.bodyParts, this.amount, this.animationVariant);
			}

			// Token: 0x040088D2 RID: 35026
			public Player <>4__this;

			// Token: 0x040088D3 RID: 35027
			public \uEE3D foodDrink;

			// Token: 0x040088D4 RID: 35028
			public \uECFD<EBodyPart> bodyParts;

			// Token: 0x040088D5 RID: 35029
			public float amount;

			// Token: 0x040088D6 RID: 35030
			public int animationVariant;
		}

		// Token: 0x02001775 RID: 6005
		[CompilerGenerated]
		private sealed class \uE029
		{
			// Token: 0x060098C5 RID: 39109 RVA: 0x00309A64 File Offset: 0x00307C64
			internal Player.KnifeController \uE000()
			{
				return Player.KnifeController.\uE000<Player.KnifeController>(this.<>4__this, this.knife);
			}

			// Token: 0x040088D7 RID: 35031
			public Player <>4__this;

			// Token: 0x040088D8 RID: 35032
			public KnifeComponent knife;
		}

		// Token: 0x02001776 RID: 6006
		[CompilerGenerated]
		private sealed class \uE02A<\uE084> where \uE084 : Player.UsableItemController
		{
			// Token: 0x060098C7 RID: 39111 RVA: 0x00309A80 File Offset: 0x00307C80
			internal \uE084 \uE000()
			{
				return Player.UsableItemController.\uE000<\uE084>(this.<>4__this, this.item);
			}

			// Token: 0x040088D9 RID: 35033
			public Player <>4__this;

			// Token: 0x040088DA RID: 35034
			public Item item;
		}

		// Token: 0x02001777 RID: 6007
		[CompilerGenerated]
		private sealed class \uE02B
		{
			// Token: 0x060098C9 RID: 39113 RVA: 0x00309A9C File Offset: 0x00307C9C
			internal Player.QuickUseItemController \uE000()
			{
				return Player.QuickUseItemController.\uE000<Player.QuickUseItemController>(this.<>4__this, this.item);
			}

			// Token: 0x040088DB RID: 35035
			public Player <>4__this;

			// Token: 0x040088DC RID: 35036
			public Item item;
		}

		// Token: 0x02001778 RID: 6008
		[CompilerGenerated]
		private sealed class \uE02C
		{
			// Token: 0x060098CB RID: 39115 RVA: 0x00309AB8 File Offset: 0x00307CB8
			internal Player.QuickGrenadeThrowHandsController \uE000()
			{
				return Player.QuickGrenadeThrowHandsController.\uE000<Player.QuickGrenadeThrowHandsController>(this.<>4__this, this.throwWeap);
			}

			// Token: 0x040088DD RID: 35037
			public Player <>4__this;

			// Token: 0x040088DE RID: 35038
			public \uEEC9 throwWeap;
		}

		// Token: 0x02001779 RID: 6009
		[CompilerGenerated]
		private sealed class \uE02D
		{
			// Token: 0x060098CD RID: 39117 RVA: 0x00309AD4 File Offset: 0x00307CD4
			internal Player.QuickKnifeKickController \uE000()
			{
				return Player.QuickKnifeKickController.\uE000<Player.QuickKnifeKickController>(this.<>4__this, this.knife);
			}

			// Token: 0x040088DF RID: 35039
			public Player <>4__this;

			// Token: 0x040088E0 RID: 35040
			public KnifeComponent knife;
		}

		// Token: 0x0200177A RID: 6010
		[CompilerGenerated]
		private sealed class \uE02E
		{
			// Token: 0x060098CF RID: 39119 RVA: 0x00309AF0 File Offset: 0x00307CF0
			internal void \uE000()
			{
				Callback<\uE827> callback = this.completeCallback;
				if (callback == null)
				{
					return;
				}
				callback(new Result<\uE827>
				{
					Error = \uF1F8.\uE000(147442)
				});
			}

			// Token: 0x060098D0 RID: 39120 RVA: 0x00309B28 File Offset: 0x00307D28
			internal void \uE001(Result<\uE82C> result)
			{
				Player.\uE082<\uE82C>(result, this.completeCallback);
			}

			// Token: 0x060098D1 RID: 39121 RVA: 0x00309B38 File Offset: 0x00307D38
			internal void \uE002(Result<\uE82E> result)
			{
				Player.\uE082<\uE82E>(result, this.completeCallback);
			}

			// Token: 0x060098D2 RID: 39122 RVA: 0x00309B48 File Offset: 0x00307D48
			internal void \uE003(Result<\uE82E> result)
			{
				Player.\uE082<\uE82E>(result, this.completeCallback);
			}

			// Token: 0x060098D3 RID: 39123 RVA: 0x00309B58 File Offset: 0x00307D58
			internal void \uE004(Result<IKnifeController> result)
			{
				Player.\uE082<IKnifeController>(result, this.completeCallback);
			}

			// Token: 0x060098D4 RID: 39124 RVA: 0x00309B68 File Offset: 0x00307D68
			internal void \uE005(Result<\uE833> result)
			{
				Player.\uE082<\uE833>(result, this.completeCallback);
			}

			// Token: 0x040088E1 RID: 35041
			public Callback<\uE827> completeCallback;

			// Token: 0x040088E2 RID: 35042
			public Player <>4__this;
		}

		// Token: 0x0200177B RID: 6011
		[CompilerGenerated]
		private sealed class \uE02F
		{
			// Token: 0x060098D6 RID: 39126 RVA: 0x00309B80 File Offset: 0x00307D80
			internal void \uE000(Result<IFirearmHandsController> result)
			{
				Player.\uE082<IFirearmHandsController>(result, this.CS$<>8__locals2.completeCallback);
				if (result.Complete)
				{
					this.CS$<>8__locals2.<>4__this.LastEquippedWeaponOrKnifeItem = this.<weapon>5__2;
				}
			}

			// Token: 0x040088E3 RID: 35043
			public Weapon <weapon>5__2;

			// Token: 0x040088E4 RID: 35044
			public Player.\uE02E CS$<>8__locals2;
		}

		// Token: 0x0200177C RID: 6012
		[CompilerGenerated]
		private sealed class \uE030
		{
			// Token: 0x060098D8 RID: 39128 RVA: 0x00309BC4 File Offset: 0x00307DC4
			internal void \uE000(Result<\uE82D> result)
			{
				Player.\uE082<\uE82D>(result, this.completeCallback);
			}

			// Token: 0x060098D9 RID: 39129 RVA: 0x00309BD4 File Offset: 0x00307DD4
			internal void \uE001(Result<\uE82D> result)
			{
				Player.\uE082<\uE82D>(result, this.completeCallback);
			}

			// Token: 0x040088E5 RID: 35045
			public Callback<\uE827> completeCallback;
		}

		// Token: 0x0200177D RID: 6013
		[CompilerGenerated]
		private sealed class \uE031
		{
			// Token: 0x060098DB RID: 39131 RVA: 0x00309BEC File Offset: 0x00307DEC
			internal void \uE000(Result<\uE82D> result)
			{
				Player.\uE082<\uE82D>(result, this.completeCallback);
			}

			// Token: 0x060098DC RID: 39132 RVA: 0x00309BFC File Offset: 0x00307DFC
			internal void \uE001(Result<\uE82D> result)
			{
				Player.\uE082<\uE82D>(result, this.completeCallback);
			}

			// Token: 0x040088E6 RID: 35046
			public Callback<\uE827> completeCallback;
		}

		// Token: 0x0200177E RID: 6014
		[CompilerGenerated]
		private sealed class \uE032
		{
			// Token: 0x060098DE RID: 39134 RVA: 0x00309C14 File Offset: 0x00307E14
			internal void \uE000(IResult result)
			{
				if (this.<>4__this._removeFromHandsCallback == this.callback)
				{
					this.<>4__this._removeFromHandsCallback = null;
				}
				this.<>4__this.InventoryController.RaiseInOutProcessEvents(new \uEEE8(this.<>4__this.HandsController.Item, CommandStatus.Succeed, this.<>4__this.InventoryController));
				this.callback(result);
			}

			// Token: 0x040088E7 RID: 35047
			public Player <>4__this;

			// Token: 0x040088E8 RID: 35048
			public Callback callback;
		}

		// Token: 0x0200177F RID: 6015
		[CompilerGenerated]
		private sealed class \uE033
		{
			// Token: 0x060098E0 RID: 39136 RVA: 0x00309C8C File Offset: 0x00307E8C
			internal void \uE000(Result<IKnifeController> result)
			{
				if (this.<>4__this._removeFromHandsCallback == this.callback)
				{
					this.<>4__this._removeFromHandsCallback = null;
				}
				this.callback.Invoke(result);
			}

			// Token: 0x060098E1 RID: 39137 RVA: 0x00309CC0 File Offset: 0x00307EC0
			internal void \uE001(Result<\uE82D> result)
			{
				if (this.<>4__this._removeFromHandsCallback == this.callback)
				{
					this.<>4__this._removeFromHandsCallback = null;
				}
				this.callback.Invoke(result);
			}

			// Token: 0x060098E2 RID: 39138 RVA: 0x00309CF4 File Offset: 0x00307EF4
			internal void \uE002(Result<\uE82D> result)
			{
				if (this.<>4__this._removeFromHandsCallback == this.callback)
				{
					this.<>4__this._removeFromHandsCallback = null;
				}
				this.callback.Invoke(result);
			}

			// Token: 0x060098E3 RID: 39139 RVA: 0x00309D28 File Offset: 0x00307F28
			internal void \uE003(Result<\uE829> result)
			{
				if (this.<>4__this._removeFromHandsCallback == this.callback)
				{
					this.<>4__this._removeFromHandsCallback = null;
				}
				this.callback.Invoke(result);
			}

			// Token: 0x040088E9 RID: 35049
			public Player <>4__this;

			// Token: 0x040088EA RID: 35050
			public Callback callback;
		}

		// Token: 0x02001780 RID: 6016
		[CompilerGenerated]
		private sealed class \uE034
		{
			// Token: 0x060098E5 RID: 39141 RVA: 0x00309D64 File Offset: 0x00307F64
			internal void \uE000(Result<\uE827> result)
			{
				if (this.<>4__this._setInHandsCallback == this.callback)
				{
					this.<>4__this._setInHandsCallback = null;
				}
				this.callback.Invoke(result);
			}

			// Token: 0x060098E6 RID: 39142 RVA: 0x00309D98 File Offset: 0x00307F98
			internal void \uE001(IResult error)
			{
				if (this.<>4__this._setInHandsCallback == this.callback)
				{
					this.<>4__this._setInHandsCallback = null;
				}
				this.<>4__this.InventoryController.RaiseInOutProcessEvents(new \uEEE8(this.<>4__this.HandsController.Item, CommandStatus.Succeed, this.<>4__this.InventoryController));
				this.callback(error);
			}

			// Token: 0x040088EB RID: 35051
			public Player <>4__this;

			// Token: 0x040088EC RID: 35052
			public Callback callback;
		}

		// Token: 0x02001781 RID: 6017
		[CompilerGenerated]
		private sealed class \uE035
		{
			// Token: 0x060098E8 RID: 39144 RVA: 0x00309E10 File Offset: 0x00308010
			internal void \uE000()
			{
				this.<>4__this.Skills.RecoilAction.Complete(this.weapon.RecoilBase);
			}

			// Token: 0x040088ED RID: 35053
			public Player <>4__this;

			// Token: 0x040088EE RID: 35054
			public \uEEFB weapon;
		}

		// Token: 0x02001782 RID: 6018
		[CompilerGenerated]
		private sealed class \uE036
		{
			// Token: 0x060098EA RID: 39146 RVA: 0x00309E3C File Offset: 0x0030803C
			internal bool \uE000(GripPose x)
			{
				return x.GripType == this.type || x.GripType == GripPose.EGripType.UnderbarrelWeapon;
			}

			// Token: 0x060098EB RID: 39147 RVA: 0x00309E58 File Offset: 0x00308058
			internal int \uE001(GripPose x)
			{
				return HandPoser.NumParents(x.transform, this.<>4__this.PlayerBones.WeaponRoot.Original, 0);
			}

			// Token: 0x060098EC RID: 39148 RVA: 0x00309E7C File Offset: 0x0030807C
			internal int \uE002(GripPose x)
			{
				return HandPoser.NumParents(x.transform, this.<>4__this.PlayerBones.WeaponRoot.Original, 0);
			}

			// Token: 0x040088EF RID: 35055
			public GripPose.EGripType type;

			// Token: 0x040088F0 RID: 35056
			public Player <>4__this;
		}

		// Token: 0x02001783 RID: 6019
		[CompilerGenerated]
		private sealed class \uE037
		{
			// Token: 0x060098EE RID: 39150 RVA: 0x00309EA8 File Offset: 0x003080A8
			internal void \uE000(bool _)
			{
				Action possibleInteractionsChanged = this.<>4__this.PossibleInteractionsChanged;
				if (possibleInteractionsChanged == null)
				{
					return;
				}
				possibleInteractionsChanged();
			}

			// Token: 0x060098EF RID: 39151 RVA: 0x00309EC0 File Offset: 0x003080C0
			internal void \uE001(EPlayerState prevState, EPlayerState nextState)
			{
				this.<>4__this.ProceduralWeaponAnimation.WalkEffectorEnabled = (nextState == EPlayerState.Run);
				this.<>4__this.ProceduralWeaponAnimation.DrawEffectorEnabled = (nextState != EPlayerState.ProneMove);
				this.<>4__this.ProceduralWeaponAnimation.TiltBlender.Target = (float)((nextState == EPlayerState.Idle || nextState == EPlayerState.ProneIdle) ? 1 : 0);
				if (prevState == EPlayerState.Stationary)
				{
					this.<>4__this.ProceduralWeaponAnimation.SetStrategy(this.pointOfView);
				}
			}

			// Token: 0x040088F1 RID: 35057
			public Player <>4__this;

			// Token: 0x040088F2 RID: 35058
			public EPointOfView pointOfView;
		}

		// Token: 0x02001784 RID: 6020
		[CompilerGenerated]
		private sealed class \uE038
		{
			// Token: 0x060098F1 RID: 39153 RVA: 0x00309F4C File Offset: 0x0030814C
			internal void \uE000()
			{
				Action action = this.togglableSub;
				if (action != null)
				{
					action();
				}
				this.hitSub();
			}

			// Token: 0x040088F3 RID: 35059
			public Action togglableSub;

			// Token: 0x040088F4 RID: 35060
			public Action hitSub;
		}

		// Token: 0x02001785 RID: 6021
		[CompilerGenerated]
		private sealed class \uE039
		{
			// Token: 0x060098F3 RID: 39155 RVA: 0x00309F74 File Offset: 0x00308174
			internal void \uE000()
			{
				Action action = this.togglableSub;
				if (action != null)
				{
					action();
				}
				this.hitSub();
			}

			// Token: 0x040088F5 RID: 35061
			public Action togglableSub;

			// Token: 0x040088F6 RID: 35062
			public Action hitSub;
		}

		// Token: 0x02001786 RID: 6022
		[CompilerGenerated]
		private sealed class \uE03A
		{
			// Token: 0x060098F5 RID: 39157 RVA: 0x00309F9C File Offset: 0x0030819C
			internal void \uE000()
			{
				this.<>4__this.Skills.LowHPDuration.Begin();
			}

			// Token: 0x060098F6 RID: 39158 RVA: 0x00309FB4 File Offset: 0x003081B4
			internal void \uE001()
			{
				this.<>4__this.Skills.HealthNegativeEffect.Complete(this.effect, 1f);
			}

			// Token: 0x040088F7 RID: 35063
			public Player <>4__this;

			// Token: 0x040088F8 RID: 35064
			public \uED31 effect;
		}

		// Token: 0x02001787 RID: 6023
		[CompilerGenerated]
		private sealed class \uE03B
		{
			// Token: 0x060098F8 RID: 39160 RVA: 0x00309FE0 File Offset: 0x003081E0
			internal bool \uE000(ItemAddress loc)
			{
				return Enumerable.Contains<IContainer>(this.headSlots, loc.Container);
			}

			// Token: 0x060098F9 RID: 39161 RVA: 0x00309FF4 File Offset: 0x003081F4
			internal bool \uE001(ItemAddress loc)
			{
				return Enumerable.Contains<IContainer>(this.armorSlots, loc.Container);
			}

			// Token: 0x040088F9 RID: 35065
			public Slot[] headSlots;

			// Token: 0x040088FA RID: 35066
			public Slot[] armorSlots;
		}
	}
}
